(()=>{var __webpack_modules__={4651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSession=t.ErrorDestination=t.MemoryEvent=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.ContinuedEvent=t.StoppedEvent=t.CompletionItem=t.Module=t.Breakpoint=t.Variable=t.Thread=t.StackFrame=t.Scope=t.Source=void 0;const n=r(1839),o=r(601),i=r(8153),s=r(7310);t.Source=class{constructor(e,t,r=0,n,o){this.name=e,this.path=t,this.sourceReference=r,n&&(this.origin=n),o&&(this.adapterData=o)}};t.Scope=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};t.StackFrame=class{constructor(e,t,r,n=0,o=0){this.id=e,this.source=r,this.line=n,this.column=o,this.name=t}};t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}};t.Variable=class{constructor(e,t,r=0,n,o){this.name=e,this.value=t,this.variablesReference=r,"number"==typeof o&&(this.namedVariables=o),"number"==typeof n&&(this.indexedVariables=n)}};t.Breakpoint=class{constructor(e,t,r,n){this.verified=e;const o=this;"number"==typeof t&&(o.line=t),"number"==typeof r&&(o.column=r),n&&(o.source=n)}setId(e){this.id=e}};t.Module=class{constructor(e,t){this.id=e,this.name=t}};t.CompletionItem=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};class a extends o.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof r&&(this.body.text=r)}}t.StoppedEvent=a;class c extends o.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=c;class u extends o.Event{constructor(){super("initialized")}}t.InitializedEvent=u;class l extends o.Event{constructor(e){if(super("terminated"),"boolean"==typeof e||e){this.body={restart:e}}}}t.TerminatedEvent=l;class d extends o.Event{constructor(e){super("exited"),this.body={exitCode:e}}}t.ExitedEvent=d;class p extends o.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},void 0!==r&&(this.body.data=r)}}t.OutputEvent=p;class h extends o.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=h;class f extends o.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=f;class g extends o.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=g;class m extends o.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=m;class _ extends o.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=_;class v extends o.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof r&&(this.body.message=r)}}t.ProgressStartEvent=v;class E extends o.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=E;class y extends o.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressEndEvent=y;class b extends o.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}}t.InvalidatedEvent=b;class S extends o.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}}var C;t.MemoryEvent=S,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(C=t.ErrorDestination||(t.ErrorDestination={}));class A extends n.ProtocolServer{constructor(e,t){super();const r="boolean"==typeof e&&e;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",(()=>{this.shutdown()})),this.on("error",(e=>{this.shutdown()}))}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,i.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout((()=>{process.exit(0)}),100)}sendErrorResponse(e,t,r,n,o=C.User){let i;"number"==typeof t?(i={id:t,format:r},n&&(i.variables=n),o&C.User&&(i.showUser=!0),o&C.Telemetry&&(i.sendTelemetry=!0)):i=t,e.success=!1,e.message=A.formatPII(i.format,!0,i.variables),e.body||(e.body={}),e.body.error=i,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){const t=new o.Response(e);try{if("initialize"===e.command){var r=e.arguments;if("boolean"==typeof r.linesStartAt1&&(this._clientLinesStartAt1=r.linesStartAt1),"boolean"==typeof r.columnsStartAt1&&(this._clientColumnsStartAt1=r.columnsStartAt1),"path"!==r.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,C.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,r)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"writeMemory"===e.command?this.writeMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):"setInstructionBreakpoints"===e.command?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},C.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,n){this.sendErrorResponse(t,1014,"unrecognized request",null,C.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?A.uri2path(e):A.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?A.uri2path(e):A.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new s.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new s.URL(e),r=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(A._formatPIIRegexp,(function(e,n){return t&&n.length>0&&"_"!==n[0]?e:r[n]&&r.hasOwnProperty(n)?r[n]:e}))}}t.DebugSession=A,A._formatPIIRegexp=/{([^}]+)}/g},527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=void 0;t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},7309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLogger=void 0;const n=r(7147),o=r(1017),i=r(4100);function s(){let e=new Date;return a(2,String(e.getUTCHours()))+":"+a(2,String(e.getUTCMinutes()))+":"+a(2,String(e.getUTCSeconds()))+"."+a(3,String(e.getUTCMilliseconds()))+" UTC"}function a(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.InternalLogger=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=i.LogLevel.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}async setup(e){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(o.isAbsolute(e.logFilePath)){const t=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,i.LogLevel.Error);try{await n.promises.mkdir(o.dirname(e.logFilePath),{recursive:!0}),this.log("Verbose logs are written to:\n",i.LogLevel.Warn),this.log(e.logFilePath+"\n",i.LogLevel.Warn),this._logFileStream=n.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",(e=>{t(e)}))}catch(e){t(e)}}else this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,i.LogLevel.Error)}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+s();this.log(t+"\n",i.LogLevel.Verbose,!1)}setupShutdownListeners(){process.on("beforeExit",this.beforeExitCallback),process.on("SIGTERM",this.disposeCallback),process.on("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise((e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()}))}log(e,t,r=!0){if(this._minLogLevel!==i.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const r=t===i.LogLevel.Error?console.error:t===i.LogLevel.Warn?console.warn:null;r&&r((0,i.trimLastNewline)(e))}t===i.LogLevel.Error&&(e=`[${i.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+s()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const r=new i.LogOutputEvent(e,t);this._logCallback(r)}}}},4100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimLastNewline=t.LogOutputEvent=t.logger=t.Logger=t.LogLevel=void 0;const n=r(7309),o=r(4651);var i;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(i=t.LogLevel||(t.LogLevel={}));class s{constructor(){this._pendingLogQ=[]}log(e,t=i.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,i.Verbose)}warn(e){this.log(e,i.Warn)}error(e){this.log(e,i.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=i.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){const n="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:n,prependTimestamp:r};this._currentLogger.setup(t).then((()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach((e=>this._write(e.msg,e.level)))}}))}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new n.InternalLogger(e,r),this._logFilePathFromInit=t}}t.Logger=s,t.logger=new s;class a extends o.OutputEvent{constructor(e,t){super(e,t===i.Error?"stderr":t===i.Warn?"console":"stdout")}}t.LogOutputEvent=a,t.trimLastNewline=function(e){return e.replace(/(\n|\r\n)$/,"")}},1212:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDebugSession=void 0;const n=r(4100),o=n.logger,i=r(4651);class s extends i.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",(e=>{o.error(e.body)}))}start(e,t){super.start(e,t),o.init((e=>this.sendEvent(e)),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof n.LogOutputEvent)){let t=e;e instanceof i.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t={...e},t.body={...e.body,output:"<output not logged>"}),o.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,n){o.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,n)}sendResponse(e){o.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){o.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=s},9955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=t.Response=t.Event=t.ErrorDestination=t.CompletionItem=t.Module=t.Source=t.Breakpoint=t.Variable=t.Scope=t.StackFrame=t.Thread=t.MemoryEvent=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ContinuedEvent=t.StoppedEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.logger=t.Logger=t.LoggingDebugSession=t.DebugSession=void 0;const n=r(4651);Object.defineProperty(t,"DebugSession",{enumerable:!0,get:function(){return n.DebugSession}}),Object.defineProperty(t,"InitializedEvent",{enumerable:!0,get:function(){return n.InitializedEvent}}),Object.defineProperty(t,"TerminatedEvent",{enumerable:!0,get:function(){return n.TerminatedEvent}}),Object.defineProperty(t,"ExitedEvent",{enumerable:!0,get:function(){return n.ExitedEvent}}),Object.defineProperty(t,"StoppedEvent",{enumerable:!0,get:function(){return n.StoppedEvent}}),Object.defineProperty(t,"ContinuedEvent",{enumerable:!0,get:function(){return n.ContinuedEvent}}),Object.defineProperty(t,"OutputEvent",{enumerable:!0,get:function(){return n.OutputEvent}}),Object.defineProperty(t,"ThreadEvent",{enumerable:!0,get:function(){return n.ThreadEvent}}),Object.defineProperty(t,"BreakpointEvent",{enumerable:!0,get:function(){return n.BreakpointEvent}}),Object.defineProperty(t,"ModuleEvent",{enumerable:!0,get:function(){return n.ModuleEvent}}),Object.defineProperty(t,"LoadedSourceEvent",{enumerable:!0,get:function(){return n.LoadedSourceEvent}}),Object.defineProperty(t,"CapabilitiesEvent",{enumerable:!0,get:function(){return n.CapabilitiesEvent}}),Object.defineProperty(t,"ProgressStartEvent",{enumerable:!0,get:function(){return n.ProgressStartEvent}}),Object.defineProperty(t,"ProgressUpdateEvent",{enumerable:!0,get:function(){return n.ProgressUpdateEvent}}),Object.defineProperty(t,"ProgressEndEvent",{enumerable:!0,get:function(){return n.ProgressEndEvent}}),Object.defineProperty(t,"InvalidatedEvent",{enumerable:!0,get:function(){return n.InvalidatedEvent}}),Object.defineProperty(t,"MemoryEvent",{enumerable:!0,get:function(){return n.MemoryEvent}}),Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return n.Thread}}),Object.defineProperty(t,"StackFrame",{enumerable:!0,get:function(){return n.StackFrame}}),Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return n.Variable}}),Object.defineProperty(t,"Breakpoint",{enumerable:!0,get:function(){return n.Breakpoint}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return n.Source}}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return n.Module}}),Object.defineProperty(t,"CompletionItem",{enumerable:!0,get:function(){return n.CompletionItem}}),Object.defineProperty(t,"ErrorDestination",{enumerable:!0,get:function(){return n.ErrorDestination}});const o=r(1212);Object.defineProperty(t,"LoggingDebugSession",{enumerable:!0,get:function(){return o.LoggingDebugSession}});const i=r(4100);t.Logger=i;const s=r(601);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return s.Response}});const a=r(527);Object.defineProperty(t,"Handles",{enumerable:!0,get:function(){return a.Handles}});const c=i.logger;t.logger=c},601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.Response=t.Message=void 0;class r{constructor(e){this.seq=0,this.type=e}}t.Message=r;t.Response=class extends r{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};t.Event=class extends r{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},1839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolServer=void 0;const n=r(2361),o=r(601);class i{get event(){return this._event||(this._event=(e,t)=>{let r;return this._listener=e,this._this=t,r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class s extends n.EventEmitter{constructor(){super(),this._sendMessage=new i,this._sequence=1,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",(e=>this._handleData(e))),e.on("close",(()=>{this._emitEvent(new o.Event("close"))})),e.on("error",(e=>{this._emitEvent(new o.Event("error","inStream error: "+(e&&e.message)))})),t.on("error",(e=>{this._emitEvent(new o.Event("error","outStream error: "+(e&&e.message)))})),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,n){const i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),n){this._pendingRequests.set(i.seq,n);const e=setTimeout((()=>{clearTimeout(e);const t=this._pendingRequests.get(i.seq);t&&(this._pendingRequests.delete(i.seq),t(new o.Response(i,"timeout")))}),r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new o.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(s.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const r=t[e].split(/: +/);"Content-Length"==r[0]&&(this._contentLength=+r[1])}this._rawData=this._rawData.slice(e+s.TWO_CRLF.length);continue}}break}}}t.ProtocolServer=s,s.TWO_CRLF="\r\n\r\n"},8153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runDebugAdapter=void 0;const n=r(1808);t.runDebugAdapter=function(e){let t=0;if(process.argv.slice(2).forEach((function(e,r,n){const o=/^--server=(\d{4,5})$/.exec(e);o&&(t=parseInt(o[1],10))})),t>0)console.error(`waiting for debug protocol on port ${t}`),n.createServer((t=>{console.error(">> accepted connection from client"),t.on("end",(()=>{console.error(">> client connection closed\n")}));const r=new e(!1,!0);r.setRunAsServer(!0),r.start(t,t)})).listen(t);else{const t=new e(!1);process.on("SIGTERM",(()=>{t.shutdown()})),t.start(process.stdin,process.stdout)}}},5233:(e,t,r)=>{"use strict";e.exports=function(e,t){var n,o,i={},s={},a=!1,c=r(1017);function u(e,t){var r;return e&&"."===e.charAt(0)&&t&&(function(e){var t,r;for(t=0;e[t];t+=1)if("."===(r=e[t]))e.splice(t,1),t-=1;else if(".."===r){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}(r=(r=(r=t.split("/")).slice(0,r.length-1)).concat(e.split("/"))),e=r.join("/")),e}function l(r,o,i){var c,u,l,d;if(r)u=s[r]={},l={id:r,uri:__filename,exports:u},c=n(t,u,l,r);else{if(a)throw new Error("amdefine with no module ID cannot be called more than once per file.");a=!0,u=e.exports,c=n(t,u,l=e,e.id)}o&&(o=o.map((function(e){return c(e)}))),void 0!==(d="function"==typeof i?i.apply(l.exports,o):i)&&(l.exports=d,r&&(s[r]=l.exports))}function d(e,t,r){Array.isArray(e)?(r=t,t=e,e=void 0):"string"!=typeof e&&(r=e,e=t=void 0),t&&!Array.isArray(t)&&(r=t,t=void 0),t||(t=["require","exports","module"]),e?i[e]=[e,t,r]:l(e,t,r)}return n=function(e,t,r,n){function i(i,s){if("string"==typeof i)return o(e,t,r,i,n);i=i.map((function(i){return o(e,t,r,i,n)})),s&&process.nextTick((function(){s.apply(null,i)}))}return i.toUrl=function(e){return 0===e.indexOf(".")?u(e,c.dirname(r.filename)):e},i},t=t||function(){return e.require.apply(e,arguments)},o=function(e,t,r,a,c){var d,p,h,f=a.indexOf("!"),g=a;if(-1===f){if("require"===(a=u(a,c)))return n(e,t,r,c);if("exports"===a)return t;if("module"===a)return r;if(s.hasOwnProperty(a))return s[a];if(i[a])return l.apply(null,i[a]),s[a];if(e)return e(g);throw new Error("No module with ID: "+a)}return d=a.substring(0,f),a=a.substring(f+1,a.length),a=(p=o(e,t,r,d,c)).normalize?p.normalize(a,(h=c,function(e){return u(e,h)})):u(a,c),s[a]||p.load(a,n(e,t,r,c),function(e){function t(t){s[e]=t}return t.fromText=function(e,t){throw new Error("amdefine does not implement load.fromText")},t}(a),{}),s[a]},d.require=function(e){return s[e]?s[e]:i[e]?(l.apply(null,i[e]),s[e]):void 0},d.amd={},d}},3825:e=>{"use strict";function t(e){return Buffer.from(e,"base64").toString("binary")}e.exports=t.atob=t},5623:e=>{"use strict";function t(e,t,o){e instanceof RegExp&&(e=r(e,o)),t instanceof RegExp&&(t=r(t,o));var i=n(e,t,o);return i&&{start:i[0],end:i[1],pre:o.slice(0,i[0]),body:o.slice(i[0]+e.length,i[1]),post:o.slice(i[1]+t.length)}}function r(e,t){var r=t.match(e);return r?r[0]:null}function n(e,t,r){var n,o,i,s,a,c=r.indexOf(e),u=r.indexOf(t,c+1),l=c;if(c>=0&&u>0){if(e===t)return[c,u];for(n=[],i=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(e,l+1)):1==n.length?a=[n.pop(),u]:((o=n.pop())<i&&(i=o,s=u),u=r.indexOf(t,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[i,s])}return a}e.exports=t,t.range=n},3644:(e,t,r)=>{var n=r(1048),o=r(5623);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return _(function(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(d)};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(i).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function p(e){if(!e)return[""];var t=[],r=o("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,s=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=p(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),t.push.apply(t,a),t}function h(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function g(e,t){return e<=t}function m(e,t){return e>=t}function _(e,t){var r=[],i=o("{","}",e);if(!i||/\$$/.test(i.pre))return[e];var s,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),d=c||u,v=i.body.indexOf(",")>=0;if(!d&&!v)return i.post.match(/,.*\}/)?_(e=i.pre+"{"+i.body+a+i.post):[e];if(d)s=i.body.split(/\.\./);else if(1===(s=p(i.body)).length&&1===(s=_(s[0],!1).map(h)).length)return(b=i.post.length?_(i.post,!1):[""]).map((function(e){return i.pre+s[0]+e}));var E,y=i.pre,b=i.post.length?_(i.post,!1):[""];if(d){var S=l(s[0]),C=l(s[1]),A=Math.max(s[0].length,s[1].length),T=3==s.length?Math.abs(l(s[2])):1,w=g;C<S&&(T*=-1,w=m);var P=s.some(f);E=[];for(var O=S;w(O,C);O+=T){var I;if(u)"\\"===(I=String.fromCharCode(O))&&(I="");else if(I=String(O),P){var R=A-I.length;if(R>0){var D=new Array(R+1).join("0");I=O<0?"-"+D+I.slice(1):D+I}}E.push(I)}}else E=n(s,(function(e){return _(e,!1)}));for(var N=0;N<E.length;N++)for(var M=0;M<b.length;M++){var x=y+E[N]+b[M];(!t||d||x)&&r.push(x)}return r}},6117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BrokenCircuitError:()=>b,BulkheadPolicy:()=>O,BulkheadRejectedError:()=>P,CancellationToken:()=>R,CancellationTokenSource:()=>I,CircuitBreakerPolicy:()=>A,CircuitState:()=>C,CompositeBackoff:()=>c,ConsecutiveBreaker:()=>w,ConstantBackoff:()=>u,DelegateBackoff:()=>d,Event:()=>i,EventEmitter:()=>s,ExponentialBackoff:()=>_,FallbackPolicy:()=>D,IsolatedCircuitError:()=>S,IterableBackoff:()=>v,NeverRetryBackoff:()=>l,Policy:()=>B,RetryPolicy:()=>M,SamplingBreaker:()=>T,TaskCancelledError:()=>n,TimeoutPolicy:()=>k,TimeoutStrategy:()=>x,decorrelatedJitterGenerator:()=>g,fullJitterGenerator:()=>h,halfJitterGenerator:()=>f,noJitterGenerator:()=>p});class n extends Error{constructor(e="Operation cancelled"){super(e),this.message=e}}const o={dispose:()=>{}};var i;!function(e){e.once=(e,t)=>{let r,n=!1;return r=e((e=>{t(e),r?r.dispose():n=!0})),n?(r.dispose(),o):r},e.toPromise=(t,r)=>r?r.isCancellationRequested?Promise.reject(new n):new Promise(((o,i)=>{const s=e.once(r.onCancellationRequested,(()=>{a.dispose(),i(new n)})),a=e.once(t,(e=>{s.dispose(),o(e)}))})):new Promise((r=>e.once(t,r)))}(i||(i={}));class s{constructor(){this.listeners=new Set,this.addListener=e=>this.addListenerInner(e)}emit(e){for(const t of this.listeners)t(e)}addListenerInner(e){return this.listeners.add(e),{dispose:()=>this.listeners.delete(e)}}}class a extends s{constructor(){super(...arguments),this.addListener=e=>{const t=this.addListenerInner(e);return this.lastValue&&e(this.lastValue.value),t}}get hasEmitted(){return!!this.lastValue}emit(e){this.lastValue={value:e};for(const t of this.listeners)t(e)}}class c{constructor(e,t,r){this.bias=e,this.backoffA=t,this.backoffB=r}duration(){switch(this.bias){case"a":return this.backoffA.duration();case"b":return this.backoffB.duration();case"max":return Math.max(this.backoffB.duration(),this.backoffA.duration());case"min":return Math.min(this.backoffB.duration(),this.backoffA.duration());default:throw new Error(`Unknown bias "${this.bias}" given to CompositeBackoff`)}}next(e){const t=this.backoffA.next(e),r=this.backoffB.next(e);return t&&r&&new c(this.bias,t,r)}}class u{constructor(e,t){this.interval=e,this.limit=t,this.index=0}duration(){return this.interval}next(){if(void 0===this.limit)return this;if(this.index>=this.limit-1)return;const e=new u(this.interval,this.limit);return e.index=this.index+1,e}}const l=new u(0,0);class d{constructor(e,t){this.fn=e,this.state=t,this.current=0}duration(){return this.current}next(e){const t=this.fn(e,this.state);if(void 0===t)return;let r;return"number"==typeof t?(r=new d(this.fn,this.state),r.current=t):(r=new d(this.fn,t.state),r.current=t.delay),r}}const p=(e=0,t)=>[Math.min(t.maxDelay,t.initialDelay*2**e),e+1],h=(e,t)=>{const[r,n]=p(e,t);return[Math.floor(Math.random()*r),n]},f=(e,t)=>{const[r,n]=p(e,t);return[Math.floor((r+Math.random()*r)/2),n]},g=(e,t)=>{const[r,n]=e||[0,0],o=r+Math.random(),i=Math.pow(t.exponent,o)*Math.tanh(Math.sqrt(4*o)),s=Math.max(0,i-n);return[Math.min(.7142857142857143*s*t.initialDelay,t.maxDelay),[r+1,i]]},m={generator:g,maxDelay:3e4,maxAttempts:1/0,exponent:2,initialDelay:128};class _{constructor(e){this.attempt=0,this.delay=0,this.options=e?{...m,...e}:m}duration(){return this.delay}next(){if(this.attempt>=this.options.maxAttempts-1)return;const e=new _(this.options);return[e.delay,e.state]=this.options.generator(this.state,this.options),e.attempt=this.attempt+1,e}}class v{constructor(e,t=0){if(this.durations=e,this.index=t,t>=e.length)throw new RangeError(`IterableBackoff index 0 >= number of durations (${e.length})`)}duration(){return this.durations[this.index]}next(){return this.index<this.durations.length-1?new v(this.durations,this.index+1):void 0}}const E=e=>{if("error"in e)throw e.error;return"success"in e?e.success:e.value},y=async(e,t,...r)=>{try{const n=await t(...r);return e.resultFilter(n)?{value:n}:{success:n}}catch(t){if(!e.errorFilter(t))throw t;return{error:t}}};class b extends Error{constructor(e="Execution prevented because the circuit breaker is open"){super(e)}}class S extends b{constructor(){super("Execution prevented because the circuit breaker is open")}}var C;!function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.HalfOpen=2]="HalfOpen",e[e.Isolated=3]="Isolated"}(C||(C={}));class A{constructor(e){this.options=e,this.breakEmitter=new s,this.resetEmitter=new s,this.innerState={value:C.Closed},this.onBreak=this.breakEmitter.addListener,this.onReset=this.resetEmitter.addListener}get state(){return this.innerState.value}get lastFailure(){return this.innerLastFailure}isolate(){this.innerState.value!==C.Isolated&&(this.innerState={value:C.Isolated,counters:0},this.breakEmitter.emit({isolated:!0})),this.innerState.counters++;let e=!1;return{dispose:()=>{e||(e=!0,this.innerState.value!==C.Isolated||--this.innerState.counters||(this.innerState={value:C.Closed},this.resetEmitter.emit()))}}}async execute(e){const t=this.innerState;switch(t.value){case C.Closed:const r=await y(this.options,e);return"success"in r?this.options.breaker.success(t.value):(this.innerLastFailure=r,this.options.breaker.failure(t.value)&&this.open(r)),E(r);case C.HalfOpen:return await t.test.catch((()=>{})),this.execute(e);case C.Open:if(Date.now()-t.openedAt<this.options.halfOpenAfter)throw new b;const n=this.halfOpen(e);return this.innerState={value:C.HalfOpen,test:n},n;case C.Isolated:throw new S;default:throw new Error(`Unexpected circuit state ${t}`)}}async halfOpen(e){try{const t=await y(this.options,e);return"success"in t?(this.options.breaker.success(C.HalfOpen),this.close()):(this.innerLastFailure=t,this.options.breaker.failure(C.HalfOpen),this.open(t)),E(t)}catch(e){throw this.close(),e}}open(e){this.state!==C.Isolated&&this.state!==C.Open&&(this.innerState={value:C.Open,openedAt:Date.now()},this.breakEmitter.emit(e))}close(){this.state===C.HalfOpen&&(this.innerState={value:C.Closed},this.resetEmitter.emit())}}class T{constructor({threshold:e,duration:t,minimumRps:r}){if(this.windows=[],this.currentWindow=0,this.currentFailures=0,this.currentSuccesses=0,e<=0||e>=1)throw new RangeError(`SamplingBreaker threshold should be between (0, 1), got ${e}`);this.threshold=e;const n=Math.max(5,Math.ceil(t/1e3));for(let e=0;e<n;e++)this.windows.push({startedAt:0,failures:0,successes:0});this.windowSize=Math.round(t/n),this.duration=this.windowSize*n,this.minimumRpms=r?r/1e3:5/(1e3*e)}success(e){e===C.HalfOpen&&this.resetWindows(),this.push(!0)}failure(e){if(this.push(!1),e!==C.Closed)return!0;const t=this.currentSuccesses+this.currentFailures;return!(t<this.duration*this.minimumRpms)&&this.currentFailures>this.threshold*t}resetWindows(){this.currentFailures=0,this.currentSuccesses=0;for(const e of this.windows)e.failures=0,e.successes=0,e.startedAt=0}rotateWindow(e){const t=(this.currentWindow+1)%this.windows.length;this.currentFailures-=this.windows[t].failures,this.currentSuccesses-=this.windows[t].successes;const r=this.windows[t]={failures:0,successes:0,startedAt:e};return this.currentWindow=t,r}push(e){const t=Date.now();let r=this.windows[this.currentWindow];t-r.startedAt>=this.windowSize&&(r=this.rotateWindow(t)),e?(r.successes++,this.currentSuccesses++):(r.failures++,this.currentFailures++)}}class w{constructor(e){this.threshold=e,this.count=0}success(){this.count=0}failure(){return++this.count>=this.threshold}}class P extends Error{constructor(e,t){super(`Bulkhead capacity exceeded (0/${e} execution slots, 0/${t} available)`)}}class O{constructor(e,t){this.capacity=e,this.queueCapacity=t,this.active=0,this.queue=[],this.onRejectEmitter=new s,this.onReject=this.onRejectEmitter.addListener}get executionSlots(){return this.capacity-this.active}get queueSlots(){return this.queueCapacity-this.queue.length}async execute(e){if(this.active<this.capacity){this.active++;try{return await e()}finally{this.active--,this.dequeue()}}if(this.queue.length<this.queueCapacity){const{resolve:t,reject:r,promise:n}=(()=>{let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));return{resolve:e,reject:t,promise:r}})();return this.queue.push({fn:e,resolve:t,reject:r}),n}throw this.onRejectEmitter.emit(),new P(this.capacity,this.queueCapacity)}dequeue(){const e=this.queue.shift();e&&Promise.resolve().then((()=>this.execute(e.fn))).then(e.resolve).catch(e.reject)}}class I{constructor(e){this.onCancel=new a,this.token=new R(this.onCancel.addListener),e&&(this.parentListener=e.onCancellationRequested((()=>this.cancel())))}cancel(){this.parentListener&&(this.parentListener.dispose(),this.parentListener=void 0),this.onCancel.hasEmitted||this.onCancel.emit()}}class R{constructor(e){this.onCancellationRequested=e,this.isRequested=!1,i.once(e,(()=>this.isRequested=!0))}get isCancellationRequested(){return this.isRequested}cancellation(e){return i.toPromise(this.onCancellationRequested,e)}}R.None=new R((()=>o)),R.Cancelled=new R((e=>(e(void 0),o)));class D{constructor(e,t){this.options=e,this.value=t,this.fallbackEmitter=new s,this.onFallback=this.fallbackEmitter.addListener}async execute(e){const t=await y(this.options,e);return"success"in t?t.success:(this.fallbackEmitter.emit(t),this.value())}}const N=(e,t)=>new Promise((r=>{const n=setTimeout(r,e);t&&n.unref()}));class M{constructor(e){this.options=e,this.onRetryEmitter=new s,this.onGiveUpEmitter=new s,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}attempts(e){return this.composeBackoff("a",new u(1,e))}delay(e){return this.composeBackoff("b","number"==typeof e?new u(e):new v(e))}delegate(e){return this.composeBackoff("b",new d(e))}exponential(e){return this.composeBackoff("b",new _(e))}backoff(e){return this.composeBackoff("b",e)}dangerouslyUnref(){return this.derivePolicy({...this.options,unref:!0})}async execute(e){let t=this.options.backoff||new u(0,1);for(let r=0;;r++){const n=await y(this.options,e,{attempt:r});if("success"in n)return n.success;if(!t){if(this.onGiveUpEmitter.emit(n),"error"in n)throw n.error;return n.value}{const e=t.duration(),o=N(e,!!this.options.unref);this.onRetryEmitter.emit({...n,delay:e}),await o,t=t.next({attempt:r+1,result:n})}}}composeBackoff(e,t){return this.options.backoff&&(t=new c(e,this.options.backoff,t)),this.derivePolicy({...this.options,backoff:t})}derivePolicy(e){const t=new M(e);return t.onGiveUp((e=>this.onGiveUpEmitter.emit(e))),t.onRetry((e=>this.onRetryEmitter.emit(e))),t}}var x;!function(e){e.Cooperative="optimistic",e.Aggressive="aggressive"}(x||(x={}));class k{constructor(e,t,r=!1){this.duration=e,this.strategy=t,this.unref=r,this.timeoutEmitter=new s,this.onTimeout=this.timeoutEmitter.addListener}dangerouslyUnref(){const e=new k(this.duration,this.strategy,!0);return e.onTimeout((()=>this.timeoutEmitter.emit())),e}async execute(e){const t=new I,r=setTimeout((()=>t.cancel()),this.duration);this.unref&&r.unref();try{return this.strategy===x.Cooperative?await e({cancellation:t.token}):await Promise.race([e({cancellation:t.token}),t.token.cancellation(t.token).then((()=>{throw new n(`Operation timed out after ${this.duration}ms`)}))])}finally{t.cancel(),clearTimeout(r)}}}const F=(e,t)=>t?r=>r instanceof e&&t(r):t=>t instanceof e,L=()=>!0,j=()=>!1;class B{constructor(e){this.options=e}static wrap(...e){return{execute(t){const r=(n,o)=>o===e.length?t(n):e[o].execute((e=>r({...n,...e},o+1)));return Promise.resolve(r({},0))}}}static bulkhead(e,t=0){return new O(e,t)}static handleAll(){return new B({errorFilter:L,resultFilter:j})}static handleType(e,t){return new B({errorFilter:F(e,t),resultFilter:j})}static handleWhen(e){return new B({errorFilter:e,resultFilter:j})}static handleResultType(e,t){return new B({errorFilter:j,resultFilter:F(e,t)})}static handleWhenResult(e){return new B({errorFilter:j,resultFilter:e})}static timeout(e,t){return new k(e,t)}static use(e){return(t,r,n)=>{const o=n.value;if("function"!=typeof o)throw new Error("Can only decorate functions with @cockatiel, got "+typeof o);n.value=function(...t){return e.execute((e=>o.apply(this,[...t,e])))}}}orType(e,t){const r=F(e,t);return new B({...this.options,errorFilter:e=>this.options.errorFilter(e)||r(e)})}orWhen(e){return new B({...this.options,errorFilter:t=>this.options.errorFilter(t)||e(t)})}orWhenResult(e){return new B({...this.options,resultFilter:t=>this.options.resultFilter(t)||e(t)})}orResultType(e,t){const r=F(e,t);return new B({...this.options,resultFilter:e=>this.options.resultFilter(e)||r(e)})}retry(){return new M({errorFilter:this.options.errorFilter,resultFilter:this.options.resultFilter})}circuitBreaker(e,t){return new A({...this.options,breaker:t,halfOpenAfter:e})}fallback(e){return new D(this.options,"function"==typeof e?e:()=>e)}}B.noop={execute:async e=>e(void 0)}},5497:(e,t,r)=>{e.exports=r(1261)},1261:(e,t,r)=>{"use strict";var n=r(2081).exec,o=r(2081).execSync,i=r(7147),s=r(1017),a=i.access,c=i.accessSync,u=i.constants||i,l="win32"==process.platform,d=function(e,t,r){!function(e,t){a(e,u.F_OK,(function(e){t(!e)}))}(e,(function(o){if(o)!function(e,t){a(e,u.F_OK|u.X_OK,(function(e){t(null,!e)}))}(e,r);else n("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }",(function(e,t,n){r(null,!!t)}))}))},p=function(e,t){if(function(e){try{return c(e,u.F_OK),!1}catch(e){return!0}}(e))try{return!!o("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }")}catch(e){return!1}return function(e){try{return c(e,u.F_OK|u.X_OK),!0}catch(e){return!1}}(e)},h=function(e){return/[^A-Za-z0-9_\/:=-]/.test(e)&&(e=(e="'"+e.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),e};l&&(h=function(e){return/[\\]/.test(e)?'"'+s.dirname(e)+'"'+":"+('"'+s.basename(e)+'"'):'"'+e+'"'}),e.exports=function e(t,r){var o=h(t);if(!r&&"undefined"!=typeof Promise)return new Promise((function(r,n){e(t,(function(e,o){o?r(t):n(e)}))}));l?function(e,t,r){/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e)?n("where "+t,(function(e){r(null,null===e)})):r(null,!1)}(t,o,r):d(t,o,r)},e.exports.sync=function(e){var t=h(e);return l?function(e,t,r){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e))return!1;try{return!!o("where "+t,{stdio:[]})}catch(e){return!1}}(e,t):p(e,t)}},1048:e=>{e.exports=function(e,r){for(var n=[],o=0;o<e.length;o++){var i=r(e[o],o);t(i)?n.push.apply(n,i):n.push(i)}return n};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},214:(e,t,r)=>{"use strict";const n=r(1017),o=r(2037),i=r(77),s=r(789),a=r(71),c=r(902),u=r(3517),l=r(6277),d=a.config||n.join(o.tmpdir(),l()),p="You don't have access to this file.",h={mode:448},f={mode:384};e.exports=class{constructor(e,t,r={}){const o=r.globalConfigPath?n.join(e,"config.json"):n.join("configstore",`${e}.json`);this.path=r.configPath||n.join(d,o),t&&(this.all={...t,...this.all})}get all(){try{return JSON.parse(i.readFileSync(this.path,"utf8"))}catch(e){if("ENOENT"===e.code)return{};if("EACCES"===e.code&&(e.message=`${e.message}\n${p}\n`),"SyntaxError"===e.name)return c.sync(this.path,"",f),{};throw e}}set all(e){try{s.sync(n.dirname(this.path),h),c.sync(this.path,JSON.stringify(e,void 0,"\t"),f)}catch(e){throw"EACCES"===e.code&&(e.message=`${e.message}\n${p}\n`),e}}get size(){return Object.keys(this.all||{}).length}get(e){return u.get(this.all,e)}set(e,t){const r=this.all;if(1===arguments.length)for(const t of Object.keys(e))u.set(r,t,e[t]);else u.set(r,e,t);this.all=r}has(e){return u.has(this.all,e)}delete(e){const t=this.all;u.delete(t,e),this.all=t}clear(){this.all={}}}},8309:(e,t,r)=>{"use strict";const n=r(2081),o=r(4605),i=r(3743);function s(e,t,r){const s=o(e,t,r),a=n.spawn(s.command,s.args,s.options);return i.hookChildProcess(a,s),a}e.exports=s,e.exports.spawn=s,e.exports.sync=function(e,t,r){const s=o(e,t,r),a=n.spawnSync(s.command,s.args,s.options);return a.error=a.error||i.verifyENOENTSync(a.status,s),a},e.exports._parse=o,e.exports._enoent=i},3743:e=>{"use strict";const t="win32"===process.platform;function r(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function n(e,n){return t&&1===e&&!n.file?r(n.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;const o=e.emit;e.emit=function(t,i){if("exit"===t){const t=n(i,r);if(t)return o.call(e,"error",t)}return o.apply(e,arguments)}},verifyENOENT:n,verifyENOENTSync:function(e,n){return t&&1===e&&!n.file?r(n.original,"spawnSync"):null},notFoundError:r}},4605:(e,t,r)=>{"use strict";const n=r(1017),o=r(2202),i=r(5081),s=r(7550),a="win32"===process.platform,c=/\.(?:com|exe)$/i,u=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function l(e){if(!a)return e;const t=function(e){e.file=o(e);const t=e.file&&s(e.file);return t?(e.args.unshift(e.file),e.command=t,o(e)):e.file}(e),r=!c.test(t);if(e.options.forceShell||r){const r=u.test(t);e.command=n.normalize(e.command),e.command=i.command(e.command),e.args=e.args.map((e=>i.argument(e,r)));const o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const n={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?n:l(n)}},5081:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e=e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},7550:(e,t,r)=>{"use strict";const n=r(7147),o=r(2063);e.exports=function(e){const t=Buffer.alloc(150);let r;try{r=n.openSync(e,"r"),n.readSync(r,t,0,150,0),n.closeSync(r)}catch(e){}return o(t.toString())}},2202:(e,t,r)=>{"use strict";const n=r(1017),o=r(2806),i=r(3024);function s(e,t){const r=e.options.env||process.env,s=process.cwd(),a=null!=e.options.cwd,c=a&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch(e){}let u;try{u=o.sync(e.command,{path:r[i({env:r})],pathExt:t?n.delimiter:void 0})}catch(e){}finally{c&&process.chdir(s)}return u&&(u=n.resolve(a?e.options.cwd:"",u)),u}e.exports=function(e){return s(e)||s(e,!0)}},511:(e,t,r)=>{"use strict";const n=r(6113);e.exports=e=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");return n.randomBytes(Math.ceil(e/2)).toString("hex").slice(0,e)}},4020:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=i(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},3517:(e,t,r)=>{"use strict";const n=r(3813),o=["__proto__","prototype","constructor"],i=e=>!e.some((e=>o.includes(e)));function s(e){const t=e.split("."),r=[];for(let e=0;e<t.length;e++){let n=t[e];for(;"\\"===n[n.length-1]&&void 0!==t[e+1];)n=n.slice(0,-1)+".",n+=t[++e];r.push(n)}return i(r)?r:[]}e.exports={get(e,t,r){if(!n(e)||"string"!=typeof t)return void 0===r?e:r;const o=s(t);if(0!==o.length){for(let t=0;t<o.length;t++){if(!Object.prototype.propertyIsEnumerable.call(e,o[t]))return r;if(null==(e=e[o[t]])){if(t!==o.length-1)return r;break}}return e}},set(e,t,r){if(!n(e)||"string"!=typeof t)return e;const o=e,i=s(t);for(let t=0;t<i.length;t++){const o=i[t];n(e[o])||(e[o]={}),t===i.length-1&&(e[o]=r),e=e[o]}return o},delete(e,t){if(!n(e)||"string"!=typeof t)return!1;const r=s(t);for(let t=0;t<r.length;t++){const o=r[t];if(t===r.length-1)return delete e[o],!0;if(e=e[o],!n(e))return!1}},has(e,t){if(!n(e)||"string"!=typeof t)return!1;const r=s(t);if(0===r.length)return!1;for(let t=0;t<r.length;t++){if(!n(e))return!1;if(!(r[t]in e))return!1;e=e[r[t]]}return!0}}},8468:(e,t,r)=>{"use strict";const n=r(1017),o=r(2081),i=r(8309),s=r(8150),a=r(6147),c=r(7678),u=r(4353),l=r(3111),{spawnedKill:d,spawnedCancel:p,setupTimeout:h,validateTimeout:f,setExitHandler:g}=r(3820),{handleInput:m,getSpawnedResult:_,makeAllStream:v,validateInputSync:E}=r(4994),{mergePromise:y,getSpawnedPromise:b}=r(1708),{joinCommand:S,parseCommand:C,getEscapedCommand:A}=r(4077),T=(e,t,r={})=>{const o=i._parse(e,t,r);return e=o.command,t=o.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=o.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r}).env=(({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{const i=t?{...process.env,...e}:e;return r?a.env({env:i,cwd:n,execPath:o}):i})(r),r.stdio=l(r),"win32"===process.platform&&"cmd"===n.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:r,parsed:o}},w=(e,t,r)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?s(t):t:void 0===r?void 0:"",P=(e,t,r)=>{const n=T(e,t,r),i=S(e,t),s=A(e,t);let a;f(n.options);try{a=o.spawn(n.file,n.args,n.options)}catch(e){const t=new o.ChildProcess,r=Promise.reject(u({error:e,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return y(t,r)}const l=b(a),E=h(a,n.options,l),C=g(a,n.options,E),P={isCanceled:!1};a.kill=d.bind(null,a.kill.bind(a)),a.cancel=p.bind(null,a,P);const O=c((async()=>{const[{error:e,exitCode:t,signal:r,timedOut:o},c,l,d]=await _(a,n.options,C),p=w(n.options,c),h=w(n.options,l),f=w(n.options,d);if(e||0!==t||null!==r){const c=u({error:e,exitCode:t,signal:r,stdout:p,stderr:h,all:f,command:i,escapedCommand:s,parsed:n,timedOut:o,isCanceled:P.isCanceled,killed:a.killed});if(!n.options.reject)return c;throw c}return{command:i,escapedCommand:s,exitCode:0,stdout:p,stderr:h,all:f,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return m(a,n.options.input),a.all=v(a,n.options),y(a,O)};e.exports=P,e.exports.sync=(e,t,r)=>{const n=T(e,t,r),i=S(e,t),s=A(e,t);let a;E(n.options);try{a=o.spawnSync(n.file,n.args,n.options)}catch(e){throw u({error:e,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}const c=w(n.options,a.stdout,a.error),l=w(n.options,a.stderr,a.error);if(a.error||0!==a.status||null!==a.signal){const e=u({stdout:c,stderr:l,error:a.error,signal:a.signal,exitCode:a.status,command:i,escapedCommand:s,parsed:n,timedOut:a.error&&"ETIMEDOUT"===a.error.code,isCanceled:!1,killed:null!==a.signal});if(!n.options.reject)return e;throw e}return{command:i,escapedCommand:s,exitCode:0,stdout:c,stderr:l,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},e.exports.command=(e,t)=>{const[r,...n]=C(e);return P(r,n,t)},e.exports.commandSync=(e,t)=>{const[r,...n]=C(e);return P.sync(r,n,t)},e.exports.node=(e,t,r={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=[]);const n=l.node(r),o=process.execArgv.filter((e=>!e.startsWith("--inspect"))),{nodePath:i=process.execPath,nodeOptions:s=o}=r;return P(i,[...s,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}},4077:e=>{"use strict";const t=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],r=/^[\w.-]+$/,n=/"/g,o=/ +/g;e.exports={joinCommand:(e,r)=>t(e,r).join(" "),getEscapedCommand:(e,o)=>t(e,o).map((e=>(e=>"string"!=typeof e||r.test(e)?e:`"${e.replace(n,'\\"')}"`)(e))).join(" "),parseCommand:e=>{const t=[];for(const r of e.trim().split(o)){const e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${r}`:t.push(r)}return t}}},4353:(e,t,r)=>{"use strict";const{signalsByName:n}=r(7787);e.exports=({stdout:e,stderr:t,all:r,error:o,signal:i,exitCode:s,command:a,escapedCommand:c,timedOut:u,isCanceled:l,killed:d,parsed:{options:{timeout:p}}})=>{s=null===s?void 0:s;const h=void 0===(i=null===i?void 0:i)?void 0:n[i].description,f=(({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":void 0!==r?`failed with ${r}`:void 0!==n?`was killed with ${n} (${o})`:void 0!==i?`failed with exit code ${i}`:"failed")({timedOut:u,timeout:p,errorCode:o&&o.code,signal:i,signalDescription:h,exitCode:s,isCanceled:l}),g=`Command ${f}: ${a}`,m="[object Error]"===Object.prototype.toString.call(o),_=m?`${g}\n${o.message}`:g,v=[_,t,e].filter(Boolean).join("\n");return m?(o.originalMessage=o.message,o.message=v):o=new Error(v),o.shortMessage=_,o.command=a,o.escapedCommand=c,o.exitCode=s,o.signal=i,o.signalDescription=h,o.stdout=e,o.stderr=t,void 0!==r&&(o.all=r),"bufferedData"in o&&delete o.bufferedData,o.failed=!0,o.timedOut=Boolean(u),o.isCanceled=l,o.killed=d&&!u,o}},3820:(e,t,r)=>{"use strict";const n=r(2037),o=r(7908),i=(e,t,r,n)=>{if(!s(t,r,n))return;const o=c(r),i=setTimeout((()=>{e("SIGKILL")}),o);i.unref&&i.unref()},s=(e,{forceKillAfterTimeout:t},r)=>a(e)&&!1!==t&&r,a=e=>e===n.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),c=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};e.exports={spawnedKill:(e,t="SIGTERM",r={})=>{const n=e(t);return i(e,t,r,n),n},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(0===t||void 0===t)return n;let o;const i=new Promise(((n,i)=>{o=setTimeout((()=>{((e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,r,i)}),t)})),s=n.finally((()=>{clearTimeout(o)}));return Promise.race([i,s])},validateTimeout:({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},setExitHandler:async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;const i=o((()=>{e.kill()}));return n.finally((()=>{i()}))}}},1708:e=>{"use strict";const t=(async()=>{})().constructor.prototype,r=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(t,e)]));e.exports={mergePromise:(e,t)=>{for(const[n,o]of r){const r="function"==typeof t?(...e)=>Reflect.apply(o.value,t(),e):o.value.bind(t);Reflect.defineProperty(e,n,{...o,value:r})}return e},getSpawnedPromise:e=>new Promise(((t,r)=>{e.on("exit",((e,r)=>{t({exitCode:e,signal:r})})),e.on("error",(e=>{r(e)})),e.stdin&&e.stdin.on("error",(e=>{r(e)}))}))}},3111:e=>{"use strict";const t=["stdin","stdout","stderr"],r=e=>{if(!e)return;const{stdio:r}=e;if(void 0===r)return t.map((t=>e[t]));if((e=>t.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${t.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof r)return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);const n=Math.max(r.length,t.length);return Array.from({length:n},((e,t)=>r[t]))};e.exports=r,e.exports.node=e=>{const t=r(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}},4994:(e,t,r)=>{"use strict";const n=r(4970),o=r(31),i=r(4034),s=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},a=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(e&&r)return t?o(e,{encoding:t,maxBuffer:n}):o.buffer(e,{maxBuffer:n})};e.exports={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(n(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const r=i();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},getSpawnedResult:async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},c)=>{const u=a(e,{encoding:n,buffer:o,maxBuffer:i}),l=a(t,{encoding:n,buffer:o,maxBuffer:i}),d=a(r,{encoding:n,buffer:o,maxBuffer:2*i});try{return await Promise.all([c,u,l,d])}catch(n){return Promise.all([{error:n,signal:n.signal,timedOut:n.timedOut},s(e,u),s(t,l),s(r,d)])}},validateInputSync:({input:e})=>{if(n(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}}},139:e=>{"use strict";function t(e){return function(){return e}}var r=function(){};r.thatReturns=t,r.thatReturnsFalse=t(!1),r.thatReturnsTrue=t(!0),r.thatReturnsNull=t(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},8614:e=>{"use strict";var t=Object.prototype.hasOwnProperty;e.exports=function(e,r,n){for(var o in e)t.call(e,o)&&r.call(n,e[o],o,e)}},3759:e=>{"use strict";var t=function(e){};e.exports=function(e,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];if(t(r),!e){var s;if(void 0===r)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(s=new Error(r.replace(/%s/g,(function(){return String(o[a++])})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},2045:e=>{"use strict";e.exports=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")}},8857:e=>{"use strict";e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(e){return r[o++]}))}},3620:(e,t,r)=>{"use strict";var n=r(139);e.exports=n},9828:(e,t,r)=>{WebInspector=r(3996),SourceMap=r(941),e.exports=function(e){var t=new WebInspector.SourceMap(e.file,e),r=new SourceMap.SourceMapGenerator;return r._file=e.file,t.sources().forEach((function(e){var n=t.sourceContent(e);r.setSourceContent(e,n)})),t._mappings.forEach((function(e){if(!(e.length<5)){var t={source:e[2],original:{line:e[3]+1,column:e[4]},generated:{line:e[0]+1,column:e[1]}};r.addMapping(t)}})),r.toJSON()}},3996:(e,t,r)=>{function n(){this.version,this.file,this.sources,this.sections,this.mappings,this.sourceRoot}e=r.nmd(e),WebInspector={},e&&e.exports&&(e.exports=WebInspector),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var r=this.toString();(void 0===t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}}),WebInspector.ParsedURL=function(e){this.isValid=!1,this.url=e,this.scheme="",this.host="",this.port="",this.path="",this.queryParams="",this.fragment="",this.folderPathComponents="",this.lastPathComponent="";var t=e.match(/^([A-Za-z][A-Za-z0-9+.-]*):\/\/([^\s\/:]*)(?::([\d]+))?(?:(\/[^#]*)(?:#(.*))?)?$/i);if(t)this.isValid=!0,this.scheme=t[1].toLowerCase(),this.host=t[2],this.port=t[3],this.path=t[4]||"/",this.fragment=t[5];else{if(this.url.startsWith("data:"))return void(this.scheme="data");if("about:blank"===this.url)return void(this.scheme="about");this.path=this.url}var r=this.path,n=r.indexOf("?");-1!==n&&(this.queryParams=r.substring(n+1),r=r.substring(0,n));var o=r.lastIndexOf("/");-1!==o?(this.folderPathComponents=r.substring(0,o),this.lastPathComponent=r.substring(o+1)):this.lastPathComponent=r},WebInspector.ParsedURL._decodeIfPossible=function(e){var t=e;try{t=decodeURI(e)}catch(e){}return t},WebInspector.ParsedURL.splitURLIntoPathComponents=function(e){var t,r,n,o=WebInspector.ParsedURL._decodeIfPossible(e),i=new WebInspector.ParsedURL(o);i.isValid?(t=i.scheme+"://"+i.host,i.port&&(t+=":"+i.port),r=i.folderPathComponents,n=i.lastPathComponent,i.queryParams&&(n+="?"+i.queryParams)):(t="",r="",n=e);for(var s=[t],a=r.split("/"),c=1;c<a.length;++c)a[c]&&s.push(a[c]);return s.push(n),s},WebInspector.ParsedURL.completeURL=function(e,t){if(!t)return e;var r=t.trim();if(r.startsWith("data:")||r.startsWith("blob:")||r.startsWith("javascript:"))return t;var n=r.asParsedURL();if(n&&n.scheme)return r;var o=e.asParsedURL();if(o){if(o.isDataURL())return t;var i=t,s=i.indexOf("?"),a="";if(-1!==s)a=i.substring(s),i=i.substring(0,s);else{var c=i.indexOf("#");-1!==c&&(a=i.substring(c),i=i.substring(0,c))}if(!i){var u=o.path;if("?"===a.charAt(0)){var l=o.path.indexOf("?");-1!==l&&(u=u.substring(0,l))}return o.scheme+"://"+o.host+(o.port?":"+o.port:"")+u+a}if("/"!==i.charAt(0)){var d=o.path,p=d.indexOf("?");-1!==p&&(d=d.substring(0,p)),i=(d=d.substring(0,d.lastIndexOf("/"))+"/")+i}else if(i.length>1&&"/"===i.charAt(1))return o.scheme+":"+i+a;return o.scheme+"://"+o.host+(o.port?":"+o.port:"")+normalizePath(i)+a}return null},WebInspector.ParsedURL.prototype={get displayName(){return this._displayName?this._displayName:this.isDataURL()?this.dataURLDisplayName():this.isAboutBlank()?this.url:(this._displayName=this.lastPathComponent,this._displayName||(this._displayName=(this.host||"")+"/"),"/"===this._displayName&&(this._displayName=this.url),this._displayName)},dataURLDisplayName:function(){return this._dataURLDisplayName?this._dataURLDisplayName:this.isDataURL()?(this._dataURLDisplayName=this.url.trimEnd(20),this._dataURLDisplayName):""},isAboutBlank:function(){return"about:blank"===this.url},isDataURL:function(){return"data"===this.scheme}},WebInspector.ParsedURL.splitLineAndColumn=function(e){var t,r,n=/:(\d+)(:(\d+))?$/.exec(e);return n?(t=parseInt(n[1],10),t=isNaN(t)?void 0:t-1,"string"==typeof n[3]&&(r=parseInt(n[3],10),r=isNaN(r)?void 0:r-1),{url:e.substring(0,e.length-n[0].length),lineNumber:t,columnNumber:r}):null},String.prototype.asParsedURL=function(){var e=new WebInspector.ParsedURL(this.toString());return e.isValid?e:null},n.Section=function(){this.map,this.offset},n.Offset=function(){this.line,this.column},WebInspector.SourceMap=function(e,t){if(!WebInspector.SourceMap.prototype._base64Map){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";WebInspector.SourceMap.prototype._base64Map={};for(var r=0;r<e.length;++r)WebInspector.SourceMap.prototype._base64Map[e.charAt(r)]=r}this._sourceMappingURL=e,this._reverseMappingsBySourceURL={},this._mappings=[],this._sources={},this._sourceContentByURL={},this._parseMappingPayload(t)},WebInspector.SourceMap.load=function(e,t,r){var n=WebInspector.resourceTreeModel;function o(){NetworkAgent.loadResourceForFrontend(n.mainFrame.id,e,{},i)}function i(n,o,i,s){if(n||!s||o>=400)r(null);else{")]}"===s.slice(0,3)&&(s=s.substring(s.indexOf("\n")));try{var a=JSON.parse(s),c=e.startsWith("data:")?t:e;r(new WebInspector.SourceMap(c,a))}catch(e){console.error(e.message),r(null)}}}n.cachedResourcesLoaded()?o():n.addEventListener(WebInspector.ResourceTreeModel.EventTypes.CachedResourcesLoaded,(function e(){n.removeEventListener(WebInspector.ResourceTreeModel.EventTypes.CachedResourcesLoaded,e),o()}))},WebInspector.SourceMap.prototype={url:function(){return this._sourceMappingURL},sources:function(){return Object.keys(this._sources)},sourceContent:function(e){return this._sourceContentByURL[e]},sourceContentProvider:function(e,t){var r=this.sourceContent(e);return r?new WebInspector.StaticContentProvider(t,r):new WebInspector.CompilerSourceMappingContentProvider(e,t)},_parseMappingPayload:function(e){e.sections?this._parseSections(e.sections):this._parseMap(e,0,0)},_parseSections:function(e){for(var t=0;t<e.length;++t){var r=e[t];this._parseMap(r.map,r.offset.line,r.offset.column)}},findEntry:function(e,t){for(var r=0,n=this._mappings.length;n>1;){var o=n>>1,i=r+o,s=this._mappings[i];e<s[0]||e===s[0]&&t<s[1]?n=o:(r=i,n-=o)}var a=this._mappings[r];return!r&&a&&(e<a[0]||e===a[0]&&t<a[1])?null:a},findEntryReversed:function(e,t,r){for(var n=this._reverseMappingsBySourceURL[e],o="number"==typeof r?Math.min(t+r+1,n.length):n.length;t<o;++t){var i=n[t];if(i)return i}return null},_parseMap:function(e,t,r){for(var n=0,o=0,i=0,s=[],a={},c=0;c<e.sources.length;++c){var u=e.sources[c],l=e.sourceRoot||"";l&&!l.endsWith("/")&&(l+="/");var d=l+u,p=WebInspector.ParsedURL.completeURL(this._sourceMappingURL,d)||d;a[u]=p,s.push(p),this._sources[p]=!0,e.sourcesContent&&e.sourcesContent[c]&&(this._sourceContentByURL[p]=e.sourcesContent[c])}for(var h=new WebInspector.SourceMap.StringCharIterator(e.mappings),f=s[n];;){if(","===h.peek())h.next();else{for(;";"===h.peek();)t+=1,r=0,h.next();if(!h.hasNext())break}if(r+=this._decodeVLQ(h),h.hasNext()&&!this._isSeparator(h.peek())){var g=this._decodeVLQ(h);g&&(f=s[n+=g]),o+=this._decodeVLQ(h),i+=this._decodeVLQ(h),this._isSeparator(h.peek())||this._decodeVLQ(h),this._mappings.push([t,r,f,o,i])}else this._mappings.push([t,r])}for(c=0;c<this._mappings.length;++c){var m=this._mappings[c];if(p=m[2]){this._reverseMappingsBySourceURL[p]||(this._reverseMappingsBySourceURL[p]=[]);var _=this._reverseMappingsBySourceURL[p],v=m[3];_[v]||(_[v]=[m[0],m[1]])}}},_isSeparator:function(e){return","===e||";"===e},_decodeVLQ:function(e){var t=0,r=0;do{var n=this._base64Map[e.next()];t+=(n&this._VLQ_BASE_MASK)<<r,r+=this._VLQ_BASE_SHIFT}while(n&this._VLQ_CONTINUATION_MASK);var o=1&t;return t>>=1,o?-t:t},_VLQ_BASE_SHIFT:5,_VLQ_BASE_MASK:31,_VLQ_CONTINUATION_MASK:32},WebInspector.SourceMap.StringCharIterator=function(e){this._string=e,this._position=0},WebInspector.SourceMap.StringCharIterator.prototype={next:function(){return this._string.charAt(this._position++)},peek:function(){return this._string.charAt(this._position)},hasNext:function(){return this._position<this._string.length}}},941:(e,t,r)=>{t.SourceMapGenerator=r(133).SourceMapGenerator,t.SourceMapConsumer=r(2850).SourceMapConsumer,t.SourceNode=r(1260).SourceNode},2850:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(1713));n((function(e,t,r){var n=e("./util"),o=e("./binary-search"),i=e("./array-set").ArraySet,s=e("./base64-vlq");function a(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),o=n.getArg(t,"sources"),s=n.getArg(t,"names",[]),a=n.getArg(t,"sourceRoot",null),c=n.getArg(t,"sourcesContent",null),u=n.getArg(t,"mappings"),l=n.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);o=o.map(n.normalize),this._names=i.fromArray(s,!0),this._sources=i.fromArray(o,!0),this.sourceRoot=a,this.sourcesContent=c,this._mappings=u,this.file=l}a.fromSourceMap=function(e){var t=Object.create(a.prototype);return t._names=i.fromArray(e._names.toArray(),!0),t._sources=i.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.toArray().slice(),t.__originalMappings=e._mappings.toArray().slice().sort(n.compareByOriginalPositions),t},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?n.join(this.sourceRoot,e):e}),this)}}),a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),a.prototype._nextCharIsMappingSeparator=function(e){var t=e.charAt(0);return";"===t||","===t},a.prototype._parseMappings=function(e,t){for(var r,o=1,i=0,a=0,c=0,u=0,l=0,d=e,p={};d.length>0;)if(";"===d.charAt(0))o++,d=d.slice(1),i=0;else if(","===d.charAt(0))d=d.slice(1);else{if((r={}).generatedLine=o,s.decode(d,p),r.generatedColumn=i+p.value,i=r.generatedColumn,(d=p.rest).length>0&&!this._nextCharIsMappingSeparator(d)){if(s.decode(d,p),r.source=this._sources.at(u+p.value),u+=p.value,0===(d=p.rest).length||this._nextCharIsMappingSeparator(d))throw new Error("Found a source, but no line and column");if(s.decode(d,p),r.originalLine=a+p.value,a=r.originalLine,r.originalLine+=1,0===(d=p.rest).length||this._nextCharIsMappingSeparator(d))throw new Error("Found a source and line, but no column");s.decode(d,p),r.originalColumn=c+p.value,c=r.originalColumn,(d=p.rest).length>0&&!this._nextCharIsMappingSeparator(d)&&(s.decode(d,p),r.name=this._names.at(l+p.value),l+=p.value,d=p.rest)}this.__generatedMappings.push(r),"number"==typeof r.originalLine&&this.__originalMappings.push(r)}this.__generatedMappings.sort(n.compareByGeneratedPositions),this.__originalMappings.sort(n.compareByOriginalPositions)},a.prototype._findMapping=function(e,t,r,n,i){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return o.search(e,t,i)},a.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===t.generatedLine){var i=n.getArg(o,"source",null);return null!=i&&null!=this.sourceRoot&&(i=n.join(this.sourceRoot,i)),{source:i,line:n.getArg(o,"originalLine",null),column:n.getArg(o,"originalColumn",null),name:n.getArg(o,"name",null)}}}return{source:null,line:null,column:null,name:null}},a.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=n.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(null!=this.sourceRoot&&(t=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};null!=this.sourceRoot&&(t.source=n.relative(this.sourceRoot,t.source));var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(r>=0){var o=this._originalMappings[r];return{line:n.getArg(o,"generatedLine",null),column:n.getArg(o,"generatedColumn",null),lastColumn:n.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},a.prototype.allGeneratedPositionsFor=function(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:1/0};null!=this.sourceRoot&&(t.source=n.relative(this.sourceRoot,t.source));var r=[],o=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);if(o>=0)for(var i=this._originalMappings[o];i&&i.originalLine===t.originalLine;)r.push({line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[--o];return r.reverse()},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.prototype.eachMapping=function(e,t,r){var o,i=t||null;switch(r||a.GENERATED_ORDER){case a.GENERATED_ORDER:o=this._generatedMappings;break;case a.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map((function(e){var t=e.source;return null!=t&&null!=s&&(t=n.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}})).forEach(e,i)},t.SourceMapConsumer=a}))},133:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(1713));n((function(e,t,r){var n=e("./base64-vlq"),o=e("./util"),i=e("./array-set").ArraySet,s=e("./mapping-list").MappingList;function a(e){e||(e={}),this._file=o.getArg(e,"file",null),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._skipValidation=o.getArg(e,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,r=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=o.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&r.setSourceContent(t,n)})),r},a.prototype.addMapping=function(e){var t=o.getArg(e,"generated"),r=o.getArg(e,"original",null),n=o.getArg(e,"source",null),i=o.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,i),null==n||this._sources.has(n)||this._sources.add(n),null==i||this._names.has(i)||this._names.add(i),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:i})},a.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=o.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[o.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,r){var n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}var s=this._sourceRoot;null!=s&&(n=o.relative(s,n));var a=new i,c=new i;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=i.source&&(t.source=i.source,null!=r&&(t.source=o.join(r,t.source)),null!=s&&(t.source=o.relative(s,t.source)),t.originalLine=i.line,t.originalColumn=i.column,null!=i.name&&(t.name=i.name))}var u=t.source;null==u||a.has(u)||a.add(u);var l=t.name;null==l||c.has(l)||c.add(l)}),this),this._sources=a,this._names=c,e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=o.join(r,t)),null!=s&&(t=o.relative(s,t)),this.setSourceContent(t,n))}),this)},a.prototype._validateMapping=function(e,t,r,n){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},a.prototype._serializeMappings=function(){for(var e,t=0,r=1,i=0,s=0,a=0,c=0,u="",l=this._mappings.toArray(),d=0,p=l.length;d<p;d++){if((e=l[d]).generatedLine!==r)for(t=0;e.generatedLine!==r;)u+=";",r++;else if(d>0){if(!o.compareByGeneratedPositions(e,l[d-1]))continue;u+=","}u+=n.encode(e.generatedColumn-t),t=e.generatedColumn,null!=e.source&&(u+=n.encode(this._sources.indexOf(e.source)-c),c=this._sources.indexOf(e.source),u+=n.encode(e.originalLine-1-s),s=e.originalLine-1,u+=n.encode(e.originalColumn-i),i=e.originalColumn,null!=e.name&&(u+=n.encode(this._names.indexOf(e.name)-a),a=this._names.indexOf(e.name)))}return u},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=o.relative(t,e));var r=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=a}))},1260:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(1713));n((function(e,t,r){var n=e("./source-map-generator").SourceMapGenerator,o=e("./util"),i=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[s]=!0,null!=n&&this.add(n)}a.fromStringWithSourceMap=function(e,t,r){var n=new a,s=e.split(i),c=function(){return s.shift()+(s.shift()||"")},u=1,l=0,d=null;return t.eachMapping((function(e){if(null!==d){if(!(u<e.generatedLine)){t=(r=s[0]).substr(0,e.generatedColumn-l);return s[0]=r.substr(e.generatedColumn-l),l=e.generatedColumn,p(d,t),void(d=e)}var t="";p(d,c()),u++,l=0}for(;u<e.generatedLine;)n.add(c()),u++;if(l<e.generatedColumn){var r=s[0];n.add(r.substr(0,e.generatedColumn)),s[0]=r.substr(e.generatedColumn),l=e.generatedColumn}d=e}),this),s.length>0&&(d&&p(d,c()),n.add(s.join(""))),t.sources.forEach((function(e){var i=t.sourceContentFor(e);null!=i&&(null!=r&&(e=o.join(r,e)),n.setSourceContent(e,i))})),n;function p(e,t){if(null===e||void 0===e.source)n.add(t);else{var i=r?o.join(r,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,i,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[s]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[o.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(o.fromSetString(n[t]),this.sourceContents[n[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),o=!1,i=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(i===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),i=n.source,s=n.line,a=n.column,c=n.name,o=!0):o&&(r.addMapping({generated:{line:t.line,column:t.column}}),i=null,o=!1);for(var u=0,l=e.length;u<l;u++)10===e.charCodeAt(u)?(t.line++,t.column=0,u+1===l?(i=null,o=!1):o&&r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=a}))},1713:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1713,e.exports=t},7334:(e,t,r)=>{e.exports=l,l.realpath=l,l.sync=d,l.realpathSync=d,l.monkeypatch=function(){n.realpath=l,n.realpathSync=d},l.unmonkeypatch=function(){n.realpath=o,n.realpathSync=i};var n=r(7147),o=n.realpath,i=n.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=r(7059);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,r){if(a)return o(e,t,r);"function"==typeof t&&(r=t,t=null),o(e,t,(function(n,o){u(n)?c.realpath(e,t,r):r(n,o)}))}function d(e,t){if(a)return i(e,t);try{return i(e,t)}catch(r){if(u(r))return c.realpathSync(e,t);throw r}}},7059:(e,t,r)=>{var n=r(1017),o="win32"===process.platform,i=r(7147),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,r(e=t))}}else e=r;return e;function r(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}n.normalize;if(o)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(o)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,a,l,d=e,p={},h={};function f(){var t=u.exec(e);r=t[0].length,s=t[0],a=t[0],l="",o&&!h[a]&&(i.lstatSync(a),h[a]=!0)}for(f();r<e.length;){c.lastIndex=r;var g=c.exec(e);if(l=s,s+=g[0],a=l+g[1],r=c.lastIndex,!(h[a]||t&&t[a]===a)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,a))m=t[a];else{var _=i.lstatSync(a);if(!_.isSymbolicLink()){h[a]=!0,t&&(t[a]=a);continue}var v=null;if(!o){var E=_.dev.toString(32)+":"+_.ino.toString(32);p.hasOwnProperty(E)&&(v=p[E])}null===v&&(i.statSync(a),v=i.readlinkSync(a)),m=n.resolve(l,v),t&&(t[a]=m),o||(p[E]=v)}e=n.resolve(m,e.slice(r)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,r){if("function"!=typeof r&&(r=a(t),t=null),e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(r.bind(null,null,t[e]));var s,l,d,p,h=e,f={},g={};function m(){var t=u.exec(e);s=t[0].length,l=t[0],d=t[0],p="",o&&!g[d]?i.lstat(d,(function(e){if(e)return r(e);g[d]=!0,_()})):process.nextTick(_)}function _(){if(s>=e.length)return t&&(t[h]=e),r(null,e);c.lastIndex=s;var n=c.exec(e);return p=l,l+=n[0],d=p+n[1],s=c.lastIndex,g[d]||t&&t[d]===d?process.nextTick(_):t&&Object.prototype.hasOwnProperty.call(t,d)?y(t[d]):i.lstat(d,v)}function v(e,n){if(e)return r(e);if(!n.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(_);if(!o){var s=n.dev.toString(32)+":"+n.ino.toString(32);if(f.hasOwnProperty(s))return E(null,f[s],d)}i.stat(d,(function(e){if(e)return r(e);i.readlink(d,(function(e,t){o||(f[s]=t),E(e,t)}))}))}function E(e,o,i){if(e)return r(e);var s=n.resolve(p,o);t&&(t[i]=s),y(s)}function y(t){e=n.resolve(t,e.slice(s)),m()}m()}},5105:(e,t,r)=>{"use strict";const{PassThrough:n}=r(2781);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const o="buffer"===r;let i=!1;t?i=!(r||o):r=r||"utf8",o&&(r=null);const s=new n({objectMode:i});r&&s.setEncoding(r);let a=0;const c=[];return s.on("data",(e=>{c.push(e),i?a=c.length:a+=e.length})),s.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),s.getBufferedLength=()=>a,s}},31:(e,t,r)=>{"use strict";const{constants:n}=r(4300),o=r(2781),{promisify:i}=r(3837),s=r(5105),a=i(o.pipeline);class c extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function u(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:r}=t,o=s(t);return await new Promise(((t,i)=>{const s=e=>{e&&o.getBufferedLength()<=n.MAX_LENGTH&&(e.bufferedData=o.getBufferedValue()),i(e)};(async()=>{try{await a(e,o),t()}catch(e){s(e)}})(),o.on("data",(()=>{o.getBufferedLength()>r&&s(new c)}))})),o.getBufferedValue()}e.exports=u,e.exports.buffer=(e,t)=>u(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>u(e,{...t,array:!0}),e.exports.MaxBufferError=c},6772:(e,t,r)=>{function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(e,t,r){r||(r={});if(r.matchBase&&-1===t.indexOf("/")){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=!1!==r.strict,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0);e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,r),e.changedCwd=!1;var i=process.cwd();n(r,"cwd")?(e.cwd=o.resolve(r.cwd),e.changedCwd=e.cwd!==i):e.cwd=i;e.root=r.root||o.resolve(e.cwd,"/"),e.root=o.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new a(t,r),e.options=e.minimatch.options},t.ownProp=n,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,o=e.matches.length;n<o;n++){var i=e.matches[n];if(i&&0!==Object.keys(i).length){var s=Object.keys(i);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?c:u));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[d(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!p(e,t)})));e.found=r},t.mark=function(e,t){var r=d(e,t),n=e.cache[r],o=t;if(n){var i="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(i&&!s?o+="/":!i&&s&&(o=o.slice(0,-1)),o!==t){var a=d(e,o);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return o},t.isIgnored=p,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var o=r(1017),i=r(6522),s=r(4095),a=i.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var r=t;return r="/"===t.charAt(0)?o.join(e.root,t):s(t)||""===t?t:e.changedCwd?o.resolve(e.cwd,t):o.resolve(t),"win32"===process.platform&&(r=r.replace(/\\/g,"/")),r}function p(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},2884:(e,t,r)=>{e.exports=E;var n=r(7147),o=r(7334),i=r(6522),s=(i.Minimatch,r(4378)),a=r(2361).EventEmitter,c=r(1017),u=r(9491),l=r(4095),d=r(4751),p=r(6772),h=(p.alphasort,p.alphasorti,p.setopts),f=p.ownProp,g=r(7844),m=(r(3837),p.childrenIgnored),_=p.isIgnored,v=r(778);function E(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return d(e,t)}return new b(e,t,r)}E.sync=d;var y=E.GlobSync=d.GlobSync;function b(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new y(e,t)}if(!(this instanceof b))return new b(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=v(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return a();for(var i=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--o._processing,o._processing<=0&&(i?process.nextTick((function(){o._finish()})):o._finish())}i=!1}E.glob=E,E.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new b(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},E.Glob=b,s(b,a),b.prototype._finish=function(){if(u(this instanceof b),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();p.finish(this),this.emit("end",this.found)}},b.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},b.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach((function(r,n){r=i._makeAbs(r),o.realpath(r,i.realpathCache,(function(n,o){n?"stat"===n.syscall?a[r]=!0:i.emit("error",n):a[o]=!0,0==--s&&(i.matches[e]=a,t())}))}))},b.prototype._mark=function(e){return p.mark(this,e)},b.prototype._makeAbs=function(e){return p.makeAbs(this,e)},b.prototype.abort=function(){this.aborted=!0,this.emit("abort")},b.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},b.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var o=n[t];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}},b.prototype._process=function(e,t,r,n){if(u(this instanceof b),u("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var o,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:o=null;break;default:o=e.slice(0,s).join("/")}var a,c=e.slice(s);null===o?a=".":l(o)||l(e.join("/"))?(o&&l(o)||(o="/"+o),a=o):a=o;var d=this._makeAbs(a);if(m(this,a))return n();c[0]===i.GLOBSTAR?this._processGlobStar(o,a,d,c,t,r,n):this._processReaddir(o,a,d,c,t,r,n)}},b.prototype._processReaddir=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,(function(c,u){return a._processReaddir2(e,t,r,n,o,i,u,s)}))},b.prototype._processReaddir2=function(e,t,r,n,o,i,s,a){if(!s)return a();for(var u=n[0],l=!!this.minimatch.negate,d=u._glob,p=this.dot||"."===d.charAt(0),h=[],f=0;f<s.length;f++){if("."!==(m=s[f]).charAt(0)||p)(l&&!e?!m.match(u):m.match(u))&&h.push(m)}var g=h.length;if(0===g)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(f=0;f<g;f++){var m=h[f];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=c.join(this.root,m)),this._emitMatch(o,m)}return a()}n.shift();for(f=0;f<g;f++){m=h[f];e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(n),o,i,a)}a()},b.prototype._emitMatch=function(e,t){if(!this.aborted&&!_(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var o=this.statCache[r];o&&this.emit("stat",t,o),this.emit("match",t)}}},b.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,o=g("lstat\0"+e,(function(n,o){if(n&&"ENOENT"===n.code)return t();var i=o&&o.isSymbolicLink();r.symlinks[e]=i,i||!o||o.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));o&&n.lstat(e,o)}},b.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=g("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var o=this.cache[e];if(!o||"FILE"===o)return r();if(Array.isArray(o))return r(null,o)}n.readdir(e,function(e,t,r){return function(n,o){n?e._readdirError(t,n,r):e._readdirEntries(t,o,r)}}(this,e,r))}},b.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var o=t[n];o="/"===e?e+o:e+"/"+o,this.cache[o]=!0}return this.cache[e]=t,r(null,t)}},b.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var o=new Error(t.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=t.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},b.prototype._processGlobStar=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,(function(c,u){a._processGlobStar2(e,t,r,n,o,i,u,s)}))},b.prototype._processGlobStar2=function(e,t,r,n,o,i,s,a){if(!s)return a();var c=n.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,o,!1,a);var d=this.symlinks[r],p=s.length;if(d&&i)return a();for(var h=0;h<p;h++){if("."!==s[h].charAt(0)||this.dot){var f=u.concat(s[h],c);this._process(f,o,!0,a);var g=u.concat(s[h],n);this._process(g,o,!0,a)}}a()},b.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(o,i){n._processSimple2(e,t,o,i,r)}))},b.prototype._processSimple2=function(e,t,r,n,o){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return o();if(e&&l(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),o()},b.prototype._stat=function(e,t){var r=this._makeAbs(e),o="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!o||"DIR"===i)return t(null,i);if(o&&"FILE"===i)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return o&&"FILE"===a?t():t(null,a,s)}var c=this,u=g("stat\0"+r,(function(o,i){if(i&&i.isSymbolicLink())return n.stat(r,(function(n,o){n?c._stat2(e,r,null,i,t):c._stat2(e,r,n,o,t)}));c._stat2(e,r,o,i,t)}));u&&n.lstat(r,u)},b.prototype._stat2=function(e,t,r,n,o){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,o();var i="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return o(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,i&&"FILE"===s?o():o(null,s,n)}},6522:(e,t,r)=>{e.exports=f,f.Minimatch=g;var n=function(){try{return r(1017)}catch(e){}}()||{sep:"/"};f.sep=n.sep;var o=f.GLOBSTAR=g.GLOBSTAR={},i=r(3644),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",d="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var p=/\/+/;function h(e,t){t=t||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function f(e,t,r){return _(t),r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&new g(t,r).match(e)}function g(e,t){if(!(this instanceof g))return new g(e,t);_(e),t||(t={}),e=e.trim(),t.allowWindowsEscape||"/"===n.sep||(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}function m(e,t){return t||(t=this instanceof g?this.options:{}),e=void 0===e?this.pattern:e,_(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:i(e)}f.filter=function(e,t){return t=t||{},function(r,n,o){return f(r,e,t)}},f.defaults=function(e){if(!e||"object"!=typeof e||!Object.keys(e).length)return f;var t=f,r=function(r,n,o){return t(r,n,h(e,o))};return(r.Minimatch=function(r,n){return new t.Minimatch(r,h(e,n))}).defaults=function(r){return t.defaults(h(e,r)).Minimatch},r.filter=function(r,n){return t.filter(r,h(e,n))},r.defaults=function(r){return t.defaults(h(e,r))},r.makeRe=function(r,n){return t.makeRe(r,h(e,n))},r.braceExpand=function(r,n){return t.braceExpand(r,h(e,n))},r.match=function(r,n,o){return t.match(r,n,h(e,o))},r},g.defaults=function(e){return f.defaults(e).Minimatch},g.prototype.debug=function(){},g.prototype.make=function(){var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)});this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(p)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},g.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var o=0,i=e.length;o<i&&"!"===e.charAt(o);o++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},f.braceExpand=function(e,t){return m(e,t)},g.prototype.braceExpand=m;var _=function(e){if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};g.prototype.parse=function(e,t){_(e);var r=this.options;if("**"===e){if(!r.noglobstar)return o;e="*"}if(""===e)return"";var n,i="",u=!!r.nocase,l=!1,p=[],h=[],f=!1,g=-1,m=-1,E="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function b(){if(n){switch(n){case"*":i+=c,u=!0;break;case"?":i+=a,u=!0;break;default:i+="\\"+n}y.debug("clearStateChar %j %j",n,i),n=!1}}for(var S,C=0,A=e.length;C<A&&(S=e.charAt(C));C++)if(this.debug("%s\t%s %s %j",e,C,i,S),l&&d[S])i+="\\"+S,l=!1;else switch(S){case"/":return!1;case"\\":b(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,C,i,S),f){this.debug("  in class"),"!"===S&&C===m+1&&(S="^"),i+=S;continue}y.debug("call clearStateChar %j",n),b(),n=S,r.noext&&b();continue;case"(":if(f){i+="(";continue}if(!n){i+="\\(";continue}p.push({type:n,start:C-1,reStart:i.length,open:s[n].open,close:s[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(f||!p.length){i+="\\)";continue}b(),u=!0;var T=p.pop();i+=T.close,"!"===T.type&&h.push(T),T.reEnd=i.length;continue;case"|":if(f||!p.length||l){i+="\\|",l=!1;continue}b(),i+="|";continue;case"[":if(b(),f){i+="\\"+S;continue}f=!0,m=C,g=i.length,i+=S;continue;case"]":if(C===m+1||!f){i+="\\"+S,l=!1;continue}var w=e.substring(m+1,C);try{RegExp("["+w+"]")}catch(e){var P=this.parse(w,v);i=i.substr(0,g)+"\\["+P[0]+"\\]",u=u||P[1],f=!1;continue}u=!0,f=!1,i+=S;continue;default:b(),l?l=!1:!d[S]||"^"===S&&f||(i+="\\"),i+=S}f&&(w=e.substr(m+1),P=this.parse(w,v),i=i.substr(0,g)+"\\["+P[0],u=u||P[1]);for(T=p.pop();T;T=p.pop()){var O=i.slice(T.reStart+T.open.length);this.debug("setting tail",i,T),O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",O,O,T,i);var I="*"===T.type?c:"?"===T.type?a:"\\"+T.type;u=!0,i=i.slice(0,T.reStart)+I+"\\("+O}b(),l&&(i+="\\\\");var R=!1;switch(i.charAt(0)){case"[":case".":case"(":R=!0}for(var D=h.length-1;D>-1;D--){var N=h[D],M=i.slice(0,N.reStart),x=i.slice(N.reStart,N.reEnd-8),k=i.slice(N.reEnd-8,N.reEnd),F=i.slice(N.reEnd);k+=F;var L=M.split("(").length-1,j=F;for(C=0;C<L;C++)j=j.replace(/\)[+*?]?/,"");var B="";""===(F=j)&&t!==v&&(B="$"),i=M+x+F+B+k}""!==i&&u&&(i="(?=.)"+i);R&&(i=E+i);if(t===v)return[i,u];if(!u)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var U=r.nocase?"i":"";try{var H=new RegExp("^"+i+"$",U)}catch(e){return new RegExp("$.")}return H._glob=e,H._src=i,H};var v={};f.makeRe=function(e,t){return new g(e,t||{}).makeRe()},g.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?c:t.dot?u:l,n=t.nocase?"i":"",i=e.map((function(e){return e.map((function(e){return e===o?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp},f.match=function(e,t,r){var n=new g(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},g.prototype.match=function(e,t){if(void 0===t&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/")),e=e.split(p),this.debug(this.pattern,"split",e);var o,i,s=this.set;for(this.debug(this.pattern,"set",s),i=e.length-1;i>=0&&!(o=e[i]);i--);for(i=0;i<s.length;i++){var a=s[i],c=e;if(r.matchBase&&1===a.length&&(c=[o]),this.matchOne(c,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},g.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var u,l=t[s],d=e[i];if(this.debug(t,l,d),!1===l)return!1;if(l===o){this.debug("GLOBSTAR",[t,l,d]);var p=i,h=s+1;if(h===c){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;p<a;){var f=e[p];if(this.debug("\nglobstar while",e,p,t,h,f),this.matchOne(e.slice(p),t.slice(h),r))return this.debug("globstar found match!",p,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,p,t,h);break}this.debug("globstar swallow a segment, and continue"),p++}return!(!r||(this.debug("\n>>> no match, partial?",e,p,t,h),p!==a))}if("string"==typeof l?(u=d===l,this.debug("string match",l,d,u)):(u=d.match(l),this.debug("pattern match",l,d,u)),!u)return!1}if(i===a&&s===c)return!0;if(i===a)return r;if(s===c)return i===a-1&&""===e[i];throw new Error("wtf?")}},4751:(e,t,r)=>{e.exports=f,f.GlobSync=g;var n=r(7147),o=r(7334),i=r(6522),s=(i.Minimatch,r(2884).Glob,r(3837),r(1017)),a=r(9491),c=r(4095),u=r(6772),l=(u.alphasort,u.alphasorti,u.setopts),d=u.ownProp,p=u.childrenIgnored,h=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(l(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach((function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),n[o.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(i)]=!0}}))}u.finish(this)},g.prototype._process=function(e,t,r){a(this instanceof g);for(var n,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,o).join("/")}var s,u=e.slice(o);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var l=this._makeAbs(s);p(this,s)||(u[0]===i.GLOBSTAR?this._processGlobStar(n,s,l,u,t,r):this._processReaddir(n,s,l,u,t,r))},g.prototype._processReaddir=function(e,t,r,n,o,i){var a=this._readdir(r,i);if(a){for(var c=n[0],u=!!this.minimatch.negate,l=c._glob,d=this.dot||"."===l.charAt(0),p=[],h=0;h<a.length;h++){if("."!==(m=a[h]).charAt(0)||d)(u&&!e?!m.match(c):m.match(c))&&p.push(m)}var f=p.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(h=0;h<f;h++){var g;m=p[h];g=e?[e,m]:[m],this._process(g.concat(n),o,i)}}else{this.matches[o]||(this.matches[o]=Object.create(null));for(var h=0;h<f;h++){var m=p[h];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(o,m)}}}},g.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var o=r&&r.isSymbolicLink();return this.symlinks[e]=o,o||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,r,n,o,i){var s=this._readdir(r,i);if(s){var a=n.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,o,!1);var l=s.length;if(!this.symlinks[r]||!i)for(var d=0;d<l;d++){if("."!==s[d].charAt(0)||this.dot){var p=c.concat(s[d],a);this._process(p,o,!0);var h=c.concat(s[d],n);this._process(h,o,!0)}}}},g.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),r){if(e&&c(e)&&!this.nomount){var n=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),n&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var o=this.cache[t];if(Array.isArray(o)&&(o="DIR"),!r||"DIR"===o)return o;if(r&&"FILE"===o)return!1}var i=this.statCache[t];if(!i){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=n.statSync(t)}catch(e){i=s}else i=s}this.statCache[t]=i;o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,(!r||"FILE"!==o)&&o},g.prototype._mark=function(e){return u.mark(this,e)},g.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},6458:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},77:(e,t,r)=>{var n,o,i=r(7147),s=r(2161),a=r(8520),c=r(6458),u=r(3837);function l(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",o="___graceful-fs.previous");var d,p=function(){};if(u.debuglog?p=u.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=u.format.apply(u,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!i[n]){var h=global[n]||[];l(i,h),i.close=function(e){function t(t,r){return e.call(i,t,(function(e){e||m(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,o,{value:e}),t}(i.close),i.closeSync=function(e){function t(t){e.apply(i,arguments),m()}return Object.defineProperty(t,o,{value:e}),t}(i.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){p(i[n]),r(9491).equal(i[n].length,0)}))}function f(e){s(e),e.gracefulify=f,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){"function"==typeof r&&(n=r,r=null);return function e(r,n,o,i){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof o&&o.apply(this,arguments):g([e,[r,n,o],t,i||Date.now(),Date.now()])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,o){"function"==typeof n&&(o=n,n=null);return function e(t,n,o,i,s){return r(t,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):g([e,[t,n,o,i],r,s||Date.now(),Date.now()])}))}(e,t,n,o)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,o){"function"==typeof r&&(o=r,r=null);return function e(t,r,o,i,s){return n(t,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):g([e,[t,r,o,i],n,s||Date.now(),Date.now()])}))}(e,t,r,o)});var o=e.copyFile;o&&(e.copyFile=function(e,t,r,n){"function"==typeof r&&(n=r,r=0);return function e(t,r,n,i,s){return o(t,r,n,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):g([e,[t,r,n,i],o,s||Date.now(),Date.now()])}))}(e,t,r,n)});var i=e.readdir;e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);var n=c.test(process.version)?function(e,t,r,n){return i(e,o(e,t,r,n))}:function(e,t,r,n){return i(e,t,o(e,t,r,n))};return n(e,t,r);function o(e,t,r,o){return function(i,s){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(s&&s.sort&&s.sort(),"function"==typeof r&&r.call(this,i,s)):g([n,[e,t,r],i,o||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var u=a(e);m=u.ReadStream,_=u.WriteStream}var l=e.ReadStream;l&&(m.prototype=Object.create(l.prototype),m.prototype.open=function(){var e=this;E(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var d=e.WriteStream;d&&(_.prototype=Object.create(d.prototype),_.prototype.open=function(){var e=this;E(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return _},set:function(e){_=e},enumerable:!0,configurable:!0});var p=m;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var h=_;function m(e,t){return this instanceof m?(l.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}function _(e,t){return this instanceof _?(d.apply(this,arguments),this):_.apply(Object.create(_.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0});var v=e.open;function E(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,o,i){return v(t,r,n,(function(s,a){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof o&&o.apply(this,arguments):g([e,[t,r,n,o],s,i||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=E,e}function g(e){p("ENQUEUE",e[0].name,e[1]),i[n].push(e),_()}function m(){for(var e=Date.now(),t=0;t<i[n].length;++t)i[n][t].length>2&&(i[n][t][3]=e,i[n][t][4]=e);_()}function _(){if(clearTimeout(d),d=void 0,0!==i[n].length){var e=i[n].shift(),t=e[0],r=e[1],o=e[2],s=e[3],a=e[4];if(void 0===s)p("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-s>=6e4){p("TIMEOUT",t.name,r);var c=r.pop();"function"==typeof c&&c.call(null,o)}else{var u=Date.now()-a,l=Math.max(a-s,1);u>=Math.min(1.2*l,100)?(p("RETRY",t.name,r),t.apply(null,r.concat([s]))):i[n].push(e)}void 0===d&&(d=setTimeout(_,0))}}global[n]||l(global,i[n]),e.exports=f(c(i)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!i.__patched&&(e.exports=f(i),i.__patched=!0)},8520:(e,t,r)=>{var n=r(2781).Stream;e.exports=function(e){return{ReadStream:function t(r,o){if(!(this instanceof t))return new t(r,o);n.call(this);var i=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var s=Object.keys(o),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=o[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){i._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()}))},WriteStream:function t(r,o){if(!(this instanceof t))return new t(r,o);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),s=0,a=i.length;s<a;s++){var c=i[s];this[c]=o[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},2161:(e,t,r)=>{var n=r(2057),o=process.cwd,i=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return i||(i=o.call(process)),i};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var a=process.chdir;process.chdir=function(e){i=null,a.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,a)}e.exports=function(e){n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,o){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?o&&o(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lchmodSync=function(t,r){var o,i=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{o=e.fchmodSync(i,r),s=!1}finally{if(s)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return o}}(e);e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,r,o,i){e.open(t,n.O_SYMLINK,(function(t,n){t?i&&i(t):e.futimes(n,r,o,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lutimesSync=function(t,r,o){var i,s=e.openSync(t,n.O_SYMLINK),a=!0;try{i=e.futimesSync(s,r,o),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return i}):e.futimes&&(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e);e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=i(e.chownSync),e.fchownSync=i(e.fchownSync),e.lchownSync=i(e.lchownSync),e.chmodSync=r(e.chmodSync),e.fchmodSync=r(e.fchmodSync),e.lchmodSync=r(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){});e.chown&&!e.lchown&&(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){});"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function r(r,n,o){var i=Date.now(),s=0;t(r,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-i<6e4)return setTimeout((function(){e.stat(n,(function(e,i){e&&"ENOENT"===e.code?t(r,n,a):o(c)}))}),s),void(s<100&&(s+=10));o&&o(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.rename));function t(t){return t?function(r,n,o){return t.call(e,r,n,(function(e){u(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function r(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!u(e))throw e}}:t}function o(t){return t?function(r,n,o,i){return t.call(e,r,n,o,(function(e){u(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(r,n,o){try{return t.call(e,r,n,o)}catch(e){if(!u(e))throw e}}:t}function a(t){return t?function(r,n,o){function i(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof n&&(o=n,n=null),n?t.call(e,r,n,i):t.call(e,r,i)}:t}function c(t){return t?function(r,n){var o=n?t.call(e,r,n):t.call(e,r);return o&&(o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296)),o}:t}function u(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read="function"!=typeof e.read?e.read:function(t){function r(r,n,o,i,s,a){var c;if(a&&"function"==typeof a){var u=0;c=function(l,d,p){if(l&&"EAGAIN"===l.code&&u<10)return u++,t.call(e,r,n,o,i,s,c);a.apply(this,arguments)}}return t.call(e,r,n,o,i,s,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(l=e.readSync,function(t,r,n,o,i){for(var s=0;;)try{return l.call(e,t,r,n,o,i)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}});var l}},7:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGNALS=void 0;t.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]},7787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signalsByNumber=t.signalsByName=void 0;var n=r(2037),o=r(8699),i=r(7603);const s=function(e,{name:t,number:r,description:n,supported:o,action:i,forced:s,standard:a}){return{...e,[t]:{name:t,number:r,description:n,supported:o,action:i,forced:s,standard:a}}},a=(0,o.getSignals)().reduce(s,{});t.signalsByName=a;const c=function(e,t){const r=u(e,t);if(void 0===r)return{};const{name:n,description:o,supported:i,action:s,forced:a,standard:c}=r;return{[e]:{name:n,number:e,description:o,supported:i,action:s,forced:a,standard:c}}},u=function(e,t){const r=t.find((({name:t})=>n.constants.signals[t]===e));return void 0!==r?r:t.find((t=>t.number===e))},l=function(){const e=(0,o.getSignals)(),t=i.SIGRTMAX+1,r=Array.from({length:t},((t,r)=>c(r,e)));return Object.assign({},...r)}();t.signalsByNumber=l},7603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGRTMAX=t.getRealtimeSignals=void 0;t.getRealtimeSignals=function(){const e=o-n+1;return Array.from({length:e},r)};const r=function(e,t){return{name:`SIGRT${t+1}`,number:n+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},n=34,o=64;t.SIGRTMAX=o},8699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSignals=void 0;var n=r(2037),o=r(7),i=r(7603);t.getSignals=function(){const e=(0,i.getRealtimeSignals)();return[...o.SIGNALS,...e].map(s)};const s=function({name:e,number:t,description:r,action:o,forced:i=!1,standard:s}){const{signals:{[e]:a}}=n.constants,c=void 0!==a;return{name:e,number:c?a:t,description:r,supported:c,action:o,forced:i,standard:s}}},4269:e=>{
/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */
!function(){var t;function r(e,n){var o=this instanceof r?this:t;if(o.reset(n),"string"==typeof e&&e.length>0&&o.hash(e),o!==this)return o}r.prototype.hash=function(e){var t,r,n,o,i;switch(i=e.length,this.len+=i,r=this.k1,n=0,this.rem){case 0:r^=i>n?65535&e.charCodeAt(n++):0;case 1:r^=i>n?(65535&e.charCodeAt(n++))<<8:0;case 2:r^=i>n?(65535&e.charCodeAt(n++))<<16:0;case 3:r^=i>n?(255&e.charCodeAt(n))<<24:0,r^=i>n?(65280&e.charCodeAt(n++))>>8:0}if(this.rem=i+this.rem&3,(i-=this.rem)>0){for(t=this.h1;t=5*(t=(t^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|t>>>19)+3864292196&4294967295,!(n>=i);)r=65535&e.charCodeAt(n++)^(65535&e.charCodeAt(n++))<<8^(65535&e.charCodeAt(n++))<<16,r^=(255&(o=e.charCodeAt(n++)))<<24^(65280&o)>>8;switch(r=0,this.rem){case 3:r^=(65535&e.charCodeAt(n+2))<<16;case 2:r^=(65535&e.charCodeAt(n+1))<<8;case 1:r^=65535&e.charCodeAt(n)}this.h1=t}return this.k1=r,this},r.prototype.result=function(){var e,t;return e=this.k1,t=this.h1,e>0&&(t^=e=13715*(e=(e=11601*e+3432906752*(65535&e)&4294967295)<<15|e>>>17)+461832192*(65535&e)&4294967295),t^=this.len,t=51819*(t^=t>>>16)+2246770688*(65535&t)&4294967295,t=44597*(t^=t>>>13)+3266445312*(65535&t)&4294967295,(t^=t>>>16)>>>0},r.prototype.reset=function(e){return this.h1="number"==typeof e?e:0,this.rem=this.k1=this.len=0,this},t=new r,e.exports=r}()},7844:(e,t,r)=>{var n=r(2479),o=Object.create(null),i=r(778);e.exports=n((function(e,t){return o[e]?(o[e].push(t),null):(o[e]=[t],function(e){return i((function t(){var r=o[e],n=r.length,i=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}(arguments);try{for(var s=0;s<n;s++)r[s].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick((function(){t.apply(null,i)}))):delete o[e]}}))}(e))}))},4378:(e,t,r)=>{try{var n=r(3837);if("function"!=typeof n.inherits)throw"";e.exports=n.inherits}catch(t){e.exports=r(5717)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},413:(e,t,r)=>{"use strict";var n=t,o=r(4300).Buffer,i=r(2037);n.toBuffer=function(e,t,r){var n;if(r=~~r,this.isV4Format(e))n=t||new o(r+4),e.split(/\./g).map((function(e){n[r++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var i,s=e.split(":",8);for(i=0;i<s.length;i++){var a;this.isV4Format(s[i])&&(a=this.toBuffer(s[i]),s[i]=a.slice(0,2).toString("hex")),a&&++i<8&&s.splice(i,0,a.slice(2,4).toString("hex"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(i=0;i<s.length&&""!==s[i];i++);var c=[i,1];for(i=9-s.length;i>0;i--)c.push("0");s.splice.apply(s,c)}for(n=t||new o(r+16),i=0;i<s.length;i++){var u=parseInt(s[i],16);n[r++]=u>>8&255,n[r++]=255&u}}if(!n)throw Error("Invalid ip address: "+e);return n},n.toString=function(e,t,r){t=~~t;var n=[];if(4===(r=r||e.length-t)){for(var o=0;o<r;o++)n.push(e[t+o]);n=n.join(".")}else if(16===r){for(o=0;o<r;o+=2)n.push(e.readUInt16BE(t+o).toString(16));n=(n=(n=n.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return n};var s=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}n.isV4Format=function(e){return s.test(e)},n.isV6Format=function(e){return a.test(e)},n.fromPrefixLen=function(e,t){var r=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(r=16);for(var i=new o(r),s=0,a=i.length;s<a;++s){var u=8;e<8&&(u=e),e-=u,i[s]=255&~(255>>u)}return n.toString(i)},n.mask=function(e,t){e=n.toBuffer(e),t=n.toBuffer(t);var r=new o(Math.max(e.length,t.length)),i=0;if(e.length===t.length)for(i=0;i<e.length;i++)r[i]=e[i]&t[i];else if(4===t.length)for(i=0;i<t.length;i++)r[i]=e[e.length-4+i]&t[i];else{for(i=0;i<r.length-6;i++)r[i]=0;for(r[10]=255,r[11]=255,i=0;i<e.length;i++)r[i+12]=e[i]&t[i+12];i+=12}for(;i<r.length;i++)r[i]=0;return n.toString(r)},n.cidr=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var o=n.fromPrefixLen(parseInt(t[1],10));return n.mask(r,o)},n.subnet=function(e,t){for(var r=n.toLong(n.mask(e,t)),o=n.toBuffer(t),i=0,s=0;s<o.length;s++)if(255===o[s])i+=8;else for(var a=255&o[s];a;)a=a<<1&255,i++;var c=Math.pow(2,32-i);return{networkAddress:n.fromLong(r),firstAddress:c<=2?n.fromLong(r):n.fromLong(r+1),lastAddress:c<=2?n.fromLong(r+c-1):n.fromLong(r+c-2),broadcastAddress:n.fromLong(r+c-1),subnetMask:t,subnetMaskLength:i,numHosts:c<=2?c:c-2,length:c,contains:function(e){return r===n.toLong(n.mask(e,t))}}},n.cidrSubnet=function(e){var t=e.split("/"),r=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+r);var o=n.fromPrefixLen(parseInt(t[1],10));return n.subnet(r,o)},n.not=function(e){for(var t=n.toBuffer(e),r=0;r<t.length;r++)t[r]=255^t[r];return n.toString(t)},n.or=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;++r)e[r]|=t[r];return n.toString(e)}var o=e,i=t;t.length>e.length&&(o=t,i=e);var s=o.length-i.length;for(r=s;r<o.length;++r)o[r]|=i[r-s];return n.toString(o)},n.isEqual=function(e,t){if(e=n.toBuffer(e),t=n.toBuffer(t),e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(4===t.length){var o=t;t=e,e=o}for(r=0;r<10;r++)if(0!==t[r])return!1;var i=t.readUInt16BE(10);if(0!==i&&65535!==i)return!1;for(r=0;r<4;r++)if(e[r]!==t[r+12])return!1;return!0},n.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.isPublic=function(e){return!n.isPrivate(e)},n.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},n.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},n.address=function(e,t){var r,o=i.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var s=o[e].filter((function(e){return e.family.toLowerCase()===t}));if(0===s.length)return;return s[0].address}return(r=Object.keys(o).map((function(r){var i=o[r].filter((function(r){return r.family=r.family.toLowerCase(),r.family===t&&!n.isLoopback(r.address)&&(!e||("public"===e?n.isPrivate(r.address):n.isPublic(r.address)))}));return i.length?i[0].address:void 0})).filter(Boolean)).length?r[0]:n.loopback(t)},n.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},n.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}},3813:e=>{"use strict";e.exports=e=>{const t=typeof e;return null!==e&&("object"===t||"function"===t)}},4970:e=>{"use strict";const t=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;t.writable=e=>t(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,t.readable=e=>t(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,t.duplex=e=>t.writable(e)&&t.readable(e),t.transform=e=>t.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,e.exports=t},4501:e=>{e.exports=n,n.strict=o,n.loose=i;var t=Object.prototype.toString,r={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function n(e){return o(e)||i(e)}function o(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function i(e){return r[t.call(e)]}},1959:(e,t,r)=>{var n;r(7147);function o(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,n){o(e,t||{},(function(e,t){e?n(e):r(t)}))}))}n(e,t||{},(function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)}))}n="win32"===process.platform||global.TESTING_WINDOWS?r(1429):r(4601),e.exports=o,o.sync=function(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},4601:(e,t,r)=>{e.exports=o,o.sync=function(e,t){return i(n.statSync(e),t)};var n=r(7147);function o(e,t,r){n.stat(e,(function(e,n){r(e,!e&&i(n,t))}))}function i(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,o=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=a|c;return r&u||r&c&&o===s||r&a&&n===i||r&l&&0===i}(e,t)}},1429:(e,t,r)=>{e.exports=i,i.sync=function(e,t){return o(n.statSync(e),e,t)};var n=r(7147);function o(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,r)}function i(e,t,r){n.stat(e,(function(n,i){r(n,!n&&o(i,e,t))}))}},3169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(4194)),o=i(r(5736));function i(e){return e&&e.__esModule?e:{default:e}}t.default={parse:n.default,stringify:o.default},e.exports=t.default},4194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t){i=String(e),s="start",a=[],c=0,u=1,l=0,d=void 0,p=void 0,h=void 0;do{d=y(),P[s]()}while("eof"!==d.type);if("function"==typeof t)return f({"":h},"",t);return h};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(8299));var i=void 0,s=void 0,a=void 0,c=void 0,u=void 0,l=void 0,d=void 0,p=void 0,h=void 0;function f(e,t,r){var o=e[t];if(null!=o&&"object"===(void 0===o?"undefined":n(o)))for(var i in o){var s=f(o,i,r);void 0===s?delete o[i]:o[i]=s}return r.call(e,t,o)}var g=void 0,m=void 0,_=void 0,v=void 0,E=void 0;function y(){for(g="default",m="",_=!1,v=1;;){E=b();var e=C[g]();if(e)return e}}function b(){if(i[c])return String.fromCodePoint(i.codePointAt(c))}function S(){var e=b();return"\n"===e?(u++,l=0):e?l+=e.length:l++,e&&(c+=e.length),e}var C={default:function(){switch(E){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void S();case"/":return S(),void(g="comment");case void 0:return S(),A("eof")}if(!o.isSpaceSeparator(E))return C[s]();S()},comment:function(){switch(E){case"*":return S(),void(g="multiLineComment");case"/":return S(),void(g="singleLineComment")}throw R(S())},multiLineComment:function(){switch(E){case"*":return S(),void(g="multiLineCommentAsterisk");case void 0:throw R(S())}S()},multiLineCommentAsterisk:function(){switch(E){case"*":return void S();case"/":return S(),void(g="default");case void 0:throw R(S())}S(),g="multiLineComment"},singleLineComment:function(){switch(E){case"\n":case"\r":case"\u2028":case"\u2029":return S(),void(g="default");case void 0:return S(),A("eof")}S()},value:function(){switch(E){case"{":case"[":return A("punctuator",S());case"n":return S(),T("ull"),A("null",null);case"t":return S(),T("rue"),A("boolean",!0);case"f":return S(),T("alse"),A("boolean",!1);case"-":case"+":return"-"===S()&&(v=-1),void(g="sign");case".":return m=S(),void(g="decimalPointLeading");case"0":return m=S(),void(g="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return m=S(),void(g="decimalInteger");case"I":return S(),T("nfinity"),A("numeric",1/0);case"N":return S(),T("aN"),A("numeric",NaN);case'"':case"'":return _='"'===S(),m="",void(g="string")}throw R(S())},identifierNameStartEscape:function(){if("u"!==E)throw R(S());S();var e=w();switch(e){case"$":case"_":break;default:if(!o.isIdStartChar(e))throw N()}m+=e,g="identifierName"},identifierName:function(){switch(E){case"$":case"_":case"‌":case"‍":return void(m+=S());case"\\":return S(),void(g="identifierNameEscape")}if(!o.isIdContinueChar(E))return A("identifier",m);m+=S()},identifierNameEscape:function(){if("u"!==E)throw R(S());S();var e=w();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!o.isIdContinueChar(e))throw N()}m+=e,g="identifierName"},sign:function(){switch(E){case".":return m=S(),void(g="decimalPointLeading");case"0":return m=S(),void(g="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return m=S(),void(g="decimalInteger");case"I":return S(),T("nfinity"),A("numeric",v*(1/0));case"N":return S(),T("aN"),A("numeric",NaN)}throw R(S())},zero:function(){switch(E){case".":return m+=S(),void(g="decimalPoint");case"e":case"E":return m+=S(),void(g="decimalExponent");case"x":case"X":return m+=S(),void(g="hexadecimal")}return A("numeric",0*v)},decimalInteger:function(){switch(E){case".":return m+=S(),void(g="decimalPoint");case"e":case"E":return m+=S(),void(g="decimalExponent")}if(!o.isDigit(E))return A("numeric",v*Number(m));m+=S()},decimalPointLeading:function(){if(o.isDigit(E))return m+=S(),void(g="decimalFraction");throw R(S())},decimalPoint:function(){switch(E){case"e":case"E":return m+=S(),void(g="decimalExponent")}return o.isDigit(E)?(m+=S(),void(g="decimalFraction")):A("numeric",v*Number(m))},decimalFraction:function(){switch(E){case"e":case"E":return m+=S(),void(g="decimalExponent")}if(!o.isDigit(E))return A("numeric",v*Number(m));m+=S()},decimalExponent:function(){switch(E){case"+":case"-":return m+=S(),void(g="decimalExponentSign")}if(o.isDigit(E))return m+=S(),void(g="decimalExponentInteger");throw R(S())},decimalExponentSign:function(){if(o.isDigit(E))return m+=S(),void(g="decimalExponentInteger");throw R(S())},decimalExponentInteger:function(){if(!o.isDigit(E))return A("numeric",v*Number(m));m+=S()},hexadecimal:function(){if(o.isHexDigit(E))return m+=S(),void(g="hexadecimalInteger");throw R(S())},hexadecimalInteger:function(){if(!o.isHexDigit(E))return A("numeric",v*Number(m));m+=S()},string:function(){switch(E){case"\\":return S(),void(m+=function(){switch(b()){case"b":return S(),"\b";case"f":return S(),"\f";case"n":return S(),"\n";case"r":return S(),"\r";case"t":return S(),"\t";case"v":return S(),"\v";case"0":if(S(),o.isDigit(b()))throw R(S());return"\0";case"x":return S(),function(){var e="",t=b();if(!o.isHexDigit(t))throw R(S());if(e+=S(),t=b(),!o.isHexDigit(t))throw R(S());return e+=S(),String.fromCodePoint(parseInt(e,16))}();case"u":return S(),w();case"\n":case"\u2028":case"\u2029":return S(),"";case"\r":return S(),"\n"===b()&&S(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw R(S())}return S()}());case'"':return _?(S(),A("string",m)):void(m+=S());case"'":return _?void(m+=S()):(S(),A("string",m));case"\n":case"\r":throw R(S());case"\u2028":case"\u2029":!function(e){console.warn("JSON5: '"+e+"' is not valid ECMAScript; consider escaping")}(E);break;case void 0:throw R(S())}m+=S()},start:function(){switch(E){case"{":case"[":return A("punctuator",S())}g="value"},beforePropertyName:function(){switch(E){case"$":case"_":return m=S(),void(g="identifierName");case"\\":return S(),void(g="identifierNameStartEscape");case"}":return A("punctuator",S());case'"':case"'":return _='"'===S(),void(g="string")}if(o.isIdStartChar(E))return m+=S(),void(g="identifierName");throw R(S())},afterPropertyName:function(){if(":"===E)return A("punctuator",S());throw R(S())},beforePropertyValue:function(){g="value"},afterPropertyValue:function(){switch(E){case",":case"}":return A("punctuator",S())}throw R(S())},beforeArrayValue:function(){if("]"===E)return A("punctuator",S());g="value"},afterArrayValue:function(){switch(E){case",":case"]":return A("punctuator",S())}throw R(S())},end:function(){throw R(S())}};function A(e,t){return{type:e,value:t,line:u,column:l}}function T(e){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;if(b()!==s)throw R(S());S()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}function w(){for(var e="",t=4;t-- >0;){var r=b();if(!o.isHexDigit(r))throw R(S());e+=S()}return String.fromCodePoint(parseInt(e,16))}var P={start:function(){if("eof"===d.type)throw D();O()},beforePropertyName:function(){switch(d.type){case"identifier":case"string":return p=d.value,void(s="afterPropertyName");case"punctuator":return void I();case"eof":throw D()}},afterPropertyName:function(){if("eof"===d.type)throw D();s="beforePropertyValue"},beforePropertyValue:function(){if("eof"===d.type)throw D();O()},beforeArrayValue:function(){if("eof"===d.type)throw D();"punctuator"!==d.type||"]"!==d.value?O():I()},afterPropertyValue:function(){if("eof"===d.type)throw D();switch(d.value){case",":return void(s="beforePropertyName");case"}":I()}},afterArrayValue:function(){if("eof"===d.type)throw D();switch(d.value){case",":return void(s="beforeArrayValue");case"]":I()}},end:function(){}};function O(){var e=void 0;switch(d.type){case"punctuator":switch(d.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=d.value}if(void 0===h)h=e;else{var t=a[a.length-1];Array.isArray(t)?t.push(e):t[p]=e}if(null!==e&&"object"===(void 0===e?"undefined":n(e)))a.push(e),s=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var r=a[a.length-1];s=null==r?"end":Array.isArray(r)?"afterArrayValue":"afterPropertyValue"}}function I(){a.pop();var e=a[a.length-1];s=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function R(e){return M(void 0===e?"JSON5: invalid end of input at "+u+":"+l:"JSON5: invalid character '"+function(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}(e)+"' at "+u+":"+l)}function D(){return M("JSON5: invalid end of input at "+u+":"+l)}function N(){return M("JSON5: invalid identifier character at "+u+":"+(l-=5))}function M(e){var t=new SyntaxError(e);return t.lineNumber=u,t.columnNumber=l,t}e.exports=t.default},5736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t,r){var i=[],s="",a=void 0,c=void 0,u="",l=void 0;null==t||"object"!==(void 0===t?"undefined":n(t))||Array.isArray(t)||(r=t.space,l=t.quote,t=t.replacer);if("function"==typeof t)c=t;else if(Array.isArray(t)){a=[];var d=!0,p=!1,h=void 0;try{for(var f,g=t[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var m=f.value,_=void 0;"string"==typeof m?_=m:("number"==typeof m||m instanceof String||m instanceof Number)&&(_=String(m)),void 0!==_&&a.indexOf(_)<0&&a.push(_)}}catch(e){p=!0,h=e}finally{try{!d&&g.return&&g.return()}finally{if(p)throw h}}}r instanceof Number?r=Number(r):r instanceof String&&(r=String(r));"number"==typeof r?r>0&&(r=Math.min(10,Math.floor(r)),u="          ".substr(0,r)):"string"==typeof r&&(u=r.substr(0,10));return v("",{"":e});function v(e,t){var r=t[e];switch(null!=r&&("function"==typeof r.toJSON5?r=r.toJSON5(e):"function"==typeof r.toJSON&&(r=r.toJSON(e))),c&&(r=c.call(t,e,r)),r instanceof Number?r=Number(r):r instanceof String?r=String(r):r instanceof Boolean&&(r=r.valueOf()),r){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof r?E(r):"number"==typeof r?String(r):"object"===(void 0===r?"undefined":n(r))?Array.isArray(r)?function(e){if(i.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");i.push(e);var t=s;s+=u;for(var r=[],n=0;n<e.length;n++){var o=v(String(n),e);r.push(void 0!==o?o:"null")}var a=void 0;if(0===r.length)a="[]";else if(""===u){a="["+r.join(",")+"]"}else{var c=",\n"+s,l=r.join(c);a="[\n"+s+l+",\n"+t+"]"}return i.pop(),s=t,a}(r):function(e){if(i.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");i.push(e);var t=s;s+=u;var r=a||Object.keys(e),n=[],o=!0,c=!1,l=void 0;try{for(var d,p=r[Symbol.iterator]();!(o=(d=p.next()).done);o=!0){var h=d.value,f=v(h,e);if(void 0!==f){var g=y(h)+":";""!==u&&(g+=" "),g+=f,n.push(g)}}}catch(e){c=!0,l=e}finally{try{!o&&p.return&&p.return()}finally{if(c)throw l}}var m=void 0;if(0===n.length)m="{}";else{var _=void 0;if(""===u)m="{"+(_=n.join(","))+"}";else{var E=",\n"+s;_=n.join(E),m="{\n"+s+_+",\n"+t+"}"}}return i.pop(),s=t,m}(r):void 0}function E(e){var t={"'":.1,'"':.2},r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},n="",o=!0,i=!1,s=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value;switch(u){case"'":case'"':t[u]++,n+=u;continue}if(r[u])n+=r[u];else if(u<" "){var d=u.charCodeAt(0).toString(16);n+="\\x"+("00"+d).substring(d.length)}else n+=u}}catch(e){i=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw s}}var p=l||Object.keys(t).reduce((function(e,r){return t[e]<t[r]?e:r}));return p+(n=n.replace(new RegExp(p,"g"),r[p]))+p}function y(e){if(0===e.length)return E(e);var t=String.fromCodePoint(e.codePointAt(0));if(!o.isIdStartChar(t))return E(e);for(var r=t.length;r<e.length;r++)if(!o.isIdContinueChar(String.fromCodePoint(e.codePointAt(r))))return E(e);return e}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(8299));e.exports=t.default},1450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,t.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,t.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},8299:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpaceSeparator=function(e){return n.Space_Separator.test(e)},t.isIdStartChar=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||n.ID_Start.test(e)},t.isIdContinueChar=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||n.ID_Continue.test(e)},t.isDigit=function(e){return/[0-9]/.test(e)},t.isHexDigit=function(e){return/[0-9A-Fa-f]/.test(e)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1450))},516:(e,t,r)=>{"use strict";function n(e,t){void 0===t&&(t=!1);var r=e.length,n=0,a="",c=0,u=16,l=0,d=0,p=0,h=0,f=0;function g(t,r){for(var o=0,i=0;o<t||!r;){var s=e.charCodeAt(n);if(s>=48&&s<=57)i=16*i+s-48;else if(s>=65&&s<=70)i=16*i+s-65+10;else{if(!(s>=97&&s<=102))break;i=16*i+s-97+10}n++,o++}return o<t&&(i=-1),i}function m(){if(a="",f=0,c=n,d=l,h=p,n>=r)return c=r,u=17;var t=e.charCodeAt(n);if(o(t)){do{n++,a+=String.fromCharCode(t),t=e.charCodeAt(n)}while(o(t));return u=15}if(i(t))return n++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,a+="\n"),l++,p=n,u=14;switch(t){case 123:return n++,u=1;case 125:return n++,u=2;case 91:return n++,u=3;case 93:return n++,u=4;case 58:return n++,u=6;case 44:return n++,u=5;case 34:return n++,a=function(){for(var t="",o=n;;){if(n>=r){t+=e.substring(o,n),f=2;break}var s=e.charCodeAt(n);if(34===s){t+=e.substring(o,n),n++;break}if(92!==s){if(s>=0&&s<=31){if(i(s)){t+=e.substring(o,n),f=2;break}f=6}n++}else{if(t+=e.substring(o,n),++n>=r){f=2;break}switch(e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=g(4,!0);a>=0?t+=String.fromCharCode(a):f=4;break;default:f=5}o=n}}return t}(),u=10;case 47:var m=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<r&&!i(e.charCodeAt(n));)n++;return a=e.substring(m,n),u=12}if(42===e.charCodeAt(n+1)){n+=2;for(var v=r-1,E=!1;n<v;){var y=e.charCodeAt(n);if(42===y&&47===e.charCodeAt(n+1)){n+=2,E=!0;break}n++,i(y)&&(13===y&&10===e.charCodeAt(n)&&n++,l++,p=n)}return E||(n++,f=1),a=e.substring(m,n),u=13}return a+=String.fromCharCode(t),n++,u=16;case 45:if(a+=String.fromCharCode(t),++n===r||!s(e.charCodeAt(n)))return u=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&s(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&s(e.charCodeAt(n))))return f=3,e.substring(t,n);for(n++;n<e.length&&s(e.charCodeAt(n));)n++}var r=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&s(e.charCodeAt(n))){for(n++;n<e.length&&s(e.charCodeAt(n));)n++;r=n}else f=3;return e.substring(t,r)}(),u=11;default:for(;n<r&&_(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(a=e.substring(c,n)){case"true":return u=8;case"false":return u=9;case"null":return u=7}return u=16}return a+=String.fromCharCode(t),n++,u=16}}function _(e){if(o(e)||i(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,a="",c=0,u=16,f=0},getPosition:function(){return n},scan:t?function(){var e;do{e=m()}while(e>=12&&e<=15);return e}:m,getToken:function(){return u},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenStartLine:function(){return d},getTokenStartCharacter:function(){return c-h},getTokenError:function(){return f}}}function o(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function i(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function a(e,t,r){var o,i,s,a,l;if(t){for(a=t.offset,l=a+t.length,s=a;s>0&&!u(e,s-1);)s--;for(var d=l;d<e.length&&!u(e,d);)d++;i=e.substring(s,d),o=function(e,t){var r=0,n=0,o=t.tabSize||4;for(;r<e.length;){var i=e.charAt(r);if(" "===i)n++;else{if("\t"!==i)break;n+=o}r++}return Math.floor(n/o)}(i,r)}else i=e,o=0,s=0,a=0,l=e.length;var p,h=function(e,t){for(var r=0;r<t.length;r++){var n=t.charAt(r);if("\r"===n)return r+1<t.length&&"\n"===t.charAt(r+1)?"\r\n":"\r";if("\n"===n)return"\n"}return e&&e.eol||"\n"}(r,e),f=!1,g=0;p=r.insertSpaces?c(" ",r.tabSize||4):"\t";var m=n(i,!1),_=!1;function v(){return h+c(p,o+g)}function E(){var e=m.scan();for(f=!1;15===e||14===e;)f=f||14===e,e=m.scan();return _=16===e||0!==m.getTokenError(),e}var y=[];function b(r,n,o){_||t&&!(n<l&&o>a)||e.substring(n,o)===r||y.push({offset:n,length:o-n,content:r})}var S=E();if(17!==S){var C=m.getTokenOffset()+s;b(c(p,o),s,C)}for(;17!==S;){for(var A=m.getTokenOffset()+m.getTokenLength()+s,T=E(),w="",P=!1;!f&&(12===T||13===T);){b(" ",A,m.getTokenOffset()+s),A=m.getTokenOffset()+m.getTokenLength()+s,w=(P=12===T)?v():"",T=E()}if(2===T)1!==S&&(g--,w=v());else if(4===T)3!==S&&(g--,w=v());else{switch(S){case 3:case 1:g++,w=v();break;case 5:case 12:w=v();break;case 13:f?w=v():P||(w=" ");break;case 6:P||(w=" ");break;case 10:if(6===T){P||(w="");break}case 7:case 8:case 9:case 11:case 2:case 4:12===T||13===T?P||(w=" "):5!==T&&17!==T&&(_=!0);break;case 16:_=!0}!f||12!==T&&13!==T||(w=v())}17===T&&(w=r.insertFinalNewline?h:""),b(w,A,m.getTokenOffset()+s),S=T}return y}function c(e,t){for(var r="",n=0;n<t;n++)r+=e;return r}function u(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var l;function d(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=l.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(e){"property"===n.type&&(n.length=e-n.offset,n=n.parent)}function i(e){return n.children.push(e),e}h(e,{onObjectBegin:function(e){n=i({type:"object",offset:e,length:-1,parent:n,children:[]})},onObjectProperty:function(e,t,r){(n=i({type:"property",offset:t,length:-1,parent:n,children:[]})).children.push({type:"string",value:e,offset:t,length:r,parent:n})},onObjectEnd:function(e,t){o(e+t),n.length=e+t-n.offset,n=n.parent,o(e+t)},onArrayBegin:function(e,t){n=i({type:"array",offset:e,length:-1,parent:n,children:[]})},onArrayEnd:function(e,t){n.length=e+t-n.offset,n=n.parent,o(e+t)},onLiteralValue:function(e,t,r){i({type:f(e),offset:t,length:r,parent:n,value:e}),o(t+r)},onSeparator:function(e,t,r){"property"===n.type&&(":"===e?n.colonOffset=t:","===e&&o(t))},onError:function(e,r,n){t.push({error:e,offset:r,length:n})}},r);var s=n.children[0];return s&&delete s.parent,s}function p(e,t){if(e){for(var r=e,n=0,o=t;n<o.length;n++){var i=o[n];if("string"==typeof i){if("object"!==r.type||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var u=c[a];if(Array.isArray(u.children)&&u.children[0].value===i){r=u.children[1],s=!0;break}}if(!s)return}else{var l=i;if("array"!==r.type||l<0||!Array.isArray(r.children)||l>=r.children.length)return;r=r.children[l]}}return r}}function h(e,t,r){void 0===r&&(r=l.DEFAULT);var o=n(e,!1);function i(e){return e?function(){return e(o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter())}:function(){return!0}}function s(e){return e?function(t){return e(t,o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter())}:function(){return!0}}var a=i(t.onObjectBegin),c=s(t.onObjectProperty),u=i(t.onObjectEnd),d=i(t.onArrayBegin),p=i(t.onArrayEnd),h=s(t.onLiteralValue),f=s(t.onSeparator),g=i(t.onComment),m=s(t.onError),_=r&&r.disallowComments,v=r&&r.allowTrailingComma;function E(){for(;;){var e=o.scan();switch(o.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:_||y(11);break;case 2:y(12);break;case 6:y(16)}switch(e){case 12:case 13:_?y(10):g();break;case 16:y(1);break;case 15:case 14:break;default:return e}}}function y(e,t,r){if(void 0===t&&(t=[]),void 0===r&&(r=[]),m(e),t.length+r.length>0)for(var n=o.getToken();17!==n;){if(-1!==t.indexOf(n)){E();break}if(-1!==r.indexOf(n))break;n=E()}}function b(e){var t=o.getTokenValue();return e?h(t):c(t),E(),!0}function S(){switch(o.getToken()){case 3:return function(){d(),E();for(var e=!1;4!==o.getToken()&&17!==o.getToken();){if(5===o.getToken()){if(e||y(4,[],[]),f(","),E(),4===o.getToken()&&v)break}else e&&y(6,[],[]);S()||y(4,[],[4,5]),e=!0}return p(),4!==o.getToken()?y(8,[4],[]):E(),!0}();case 1:return function(){a(),E();for(var e=!1;2!==o.getToken()&&17!==o.getToken();){if(5===o.getToken()){if(e||y(4,[],[]),f(","),E(),2===o.getToken()&&v)break}else e&&y(6,[],[]);(10!==o.getToken()?(y(3,[],[2,5]),0):(b(!1),6===o.getToken()?(f(":"),E(),S()||y(4,[],[2,5])):y(5,[],[2,5]),1))||y(4,[],[2,5]),e=!0}return u(),2!==o.getToken()?y(7,[2],[]):E(),!0}();case 10:return b(!0);default:return function(){switch(o.getToken()){case 11:var e=o.getTokenValue(),t=Number(e);isNaN(t)&&(y(2),t=0),h(t);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return E(),!0}()}}return E(),17===o.getToken()?!!r.allowEmptyContent||(y(4,[],[]),!1):S()?(17!==o.getToken()&&y(9,[],[]),!0):(y(4,[],[]),!1)}function f(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}function g(e,t,r,n){for(var o,i=t.slice(),s=d(e,[]),a=void 0,c=void 0;i.length>0&&(c=i.pop(),void 0===(a=p(s,i))&&void 0!==r);)"string"==typeof c?((o={})[c]=r,r=o):r=[r];if(a){if("object"===a.type&&"string"==typeof c&&Array.isArray(a.children)){var u=p(a,[c]);if(void 0!==u){if(void 0===r){if(!u.parent)throw new Error("Malformed AST");var l=a.children.indexOf(u.parent),h=void 0,f=u.parent.offset+u.parent.length;if(l>0)h=(C=a.children[l-1]).offset+C.length;else if(h=a.offset+1,a.children.length>1)f=a.children[1].offset;return m(e,{offset:h,length:f-h,content:""},n)}return m(e,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n)}if(void 0===r)return[];var g=JSON.stringify(c)+": "+JSON.stringify(r),_=void 0;return m(e,_=(A=n.getInsertionIndex?n.getInsertionIndex(a.children.map((function(e){return e.children[0].value}))):a.children.length)>0?{offset:(C=a.children[A-1]).offset+C.length,length:0,content:","+g}:0===a.children.length?{offset:a.offset+1,length:0,content:g}:{offset:a.offset+1,length:0,content:g+","},n)}if("array"===a.type&&"number"==typeof c&&Array.isArray(a.children)){var v=c;if(-1===v){g=""+JSON.stringify(r),_=void 0;if(0===a.children.length)_={offset:a.offset+1,length:0,content:g};else _={offset:(C=a.children[a.children.length-1]).offset+C.length,length:0,content:","+g};return m(e,_,n)}if(void 0===r&&a.children.length>=0){var E=c,y=a.children[E];_=void 0;if(1===a.children.length)_={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===E){var b=(C=a.children[E-1]).offset+C.length;_={offset:b,length:a.offset+a.length-2-b,content:""}}else _={offset:y.offset,length:a.children[E+1].offset-y.offset,content:""};return m(e,_,n)}if(void 0!==r){_=void 0,g=""+JSON.stringify(r);if(!n.isArrayInsertion&&a.children.length>c){var S=a.children[c];_={offset:S.offset,length:S.length,content:g}}else if(0===a.children.length||0===c)_={offset:a.offset+1,length:0,content:0===a.children.length?g:g+","};else{var C,A=c>a.children.length?a.children.length:c;_={offset:(C=a.children[A-1]).offset+C.length,length:0,content:","+g}}return m(e,_,n)}throw new Error("Can not "+(void 0===r?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+v+" as length is not sufficient")}throw new Error("Can not add "+("number"!=typeof c?"index":"property")+" to parent of type "+a.type)}if(void 0===r)throw new Error("Can not delete in empty document");return m(e,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(r)},n)}function m(e,t,r){if(!r.formattingOptions)return[t];var n=_(e,t),o=t.offset,i=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;o>0&&!u(n,o-1);)o--;for(;i<n.length&&!u(n,i);)i++}for(var s=a(n,{offset:o,length:i-o},r.formattingOptions),c=s.length-1;c>=0;c--){var l=s[c];n=_(n,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}return[{offset:o,length:e.length-(n.length-i)-o,content:n.substring(o,i)}]}function _(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}r.r(t),r.d(t,{applyEdits:()=>D,createScanner:()=>v,findNodeAtLocation:()=>S,findNodeAtOffset:()=>C,format:()=>I,getLocation:()=>E,getNodePath:()=>A,getNodeValue:()=>T,modify:()=>R,parse:()=>y,parseTree:()=>b,printParseErrorCode:()=>O,stripComments:()=>P,visit:()=>w}),function(e){e.DEFAULT={allowTrailingComma:!1}}(l||(l={}));var v=n,E=function(e,t){var r=[],n=new Object,o=void 0,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(e,t,r,n){i.value=e,i.offset=t,i.length=r,i.type=n,i.colonOffset=void 0,o=i}try{h(e,{onObjectBegin:function(e,i){if(t<=e)throw n;o=void 0,s=t>e,r.push("")},onObjectProperty:function(e,o,i){if(t<o)throw n;if(a(e,o,i,"property"),r[r.length-1]=e,t<=o+i)throw n},onObjectEnd:function(e,i){if(t<=e)throw n;o=void 0,r.pop()},onArrayBegin:function(e,i){if(t<=e)throw n;o=void 0,r.push(0)},onArrayEnd:function(e,i){if(t<=e)throw n;o=void 0,r.pop()},onLiteralValue:function(e,r,o){if(t<r)throw n;if(a(e,r,o,f(e)),t<=r+o)throw n},onSeparator:function(e,i,a){if(t<=i)throw n;if(":"===e&&o&&"property"===o.type)o.colonOffset=i,s=!1,o=void 0;else if(","===e){var c=r[r.length-1];"number"==typeof c?r[r.length-1]=c+1:(s=!0,r[r.length-1]=""),o=void 0}}})}catch(e){if(e!==n)throw e}return{path:r,previousNode:o,isAtPropertyKey:s,matches:function(e){for(var t=0,n=0;t<e.length&&n<r.length;n++)if(e[t]===r[n]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},y=function(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=l.DEFAULT);var n=null,o=[],i=[];function s(e){Array.isArray(o)?o.push(e):null!==n&&(o[n]=e)}return h(e,{onObjectBegin:function(){var e={};s(e),i.push(o),o=e,n=null},onObjectProperty:function(e){n=e},onObjectEnd:function(){o=i.pop()},onArrayBegin:function(){var e=[];s(e),i.push(o),o=e,n=null},onArrayEnd:function(){o=i.pop()},onLiteralValue:s,onError:function(e,r,n){t.push({error:e,offset:r,length:n})}},r),o[0]},b=d,S=p,C=function e(t,r,n){if(void 0===n&&(n=!1),function(e,t,r){return void 0===r&&(r=!1),t>=e.offset&&t<e.offset+e.length||r&&t===e.offset+e.length}(t,r,n)){var o=t.children;if(Array.isArray(o))for(var i=0;i<o.length&&o[i].offset<=r;i++){var s=e(o[i],r,n);if(s)return s}return t}},A=function e(t){if(!t.parent||!t.parent.children)return[];var r=e(t.parent);if("property"===t.parent.type){var n=t.parent.children[0].value;r.push(n)}else if("array"===t.parent.type){var o=t.parent.children.indexOf(t);-1!==o&&r.push(o)}return r},T=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var r=Object.create(null),n=0,o=t.children;n<o.length;n++){var i=o[n],s=i.children[1];s&&(r[i.children[0].value]=e(s))}return r;case"null":case"string":case"number":case"boolean":return t.value;default:return}},w=h,P=function(e,t){var r,o,i=n(e),s=[],a=0;do{switch(o=i.getPosition(),r=i.scan()){case 12:case 13:case 17:a!==o&&s.push(e.substring(a,o)),void 0!==t&&s.push(i.getTokenValue().replace(/[^\r\n]/g,t)),a=i.getPosition()}}while(17!==r);return s.join("")};function O(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function I(e,t,r){return a(e,t,r)}function R(e,t,r,n){return g(e,t,r,n)}function D(e,t){for(var r=t.length-1;r>=0;r--)e=_(e,t[r]);return e}},789:(e,t,r)=>{"use strict";const n=r(7147),o=r(1017),{promisify:i}=r(3837),s=r(6625).satisfies(process.version,">=10.12.0"),a=e=>{if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(o.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},c=e=>({...{mode:511,fs:n},...e}),u=e=>{const t=new Error(`operation not permitted, mkdir '${e}'`);return t.code="EPERM",t.errno=-4048,t.path=e,t.syscall="mkdir",t};e.exports=async(e,t)=>{a(e),t=c(t);const r=i(t.fs.mkdir),l=i(t.fs.stat);if(s&&t.fs.mkdir===n.mkdir){const n=o.resolve(e);return await r(n,{mode:t.mode,recursive:!0}),n}const d=async e=>{try{return await r(e,t.mode),e}catch(t){if("EPERM"===t.code)throw t;if("ENOENT"===t.code){if(o.dirname(e)===e)throw u(e);if(t.message.includes("null bytes"))throw t;return await d(o.dirname(e)),d(e)}try{if(!(await l(e)).isDirectory())throw new Error("The path is not a directory")}catch(e){throw t}return e}};return d(o.resolve(e))},e.exports.sync=(e,t)=>{if(a(e),t=c(t),s&&t.fs.mkdirSync===n.mkdirSync){const r=o.resolve(e);return n.mkdirSync(r,{mode:t.mode,recursive:!0}),r}const r=e=>{try{t.fs.mkdirSync(e,t.mode)}catch(n){if("EPERM"===n.code)throw n;if("ENOENT"===n.code){if(o.dirname(e)===e)throw u(e);if(n.message.includes("null bytes"))throw n;return r(o.dirname(e)),r(e)}try{if(!t.fs.statSync(e).isDirectory())throw new Error("The path is not a directory")}catch(e){throw n}}return e};return r(o.resolve(e))}},4034:(e,t,r)=>{"use strict";const{PassThrough:n}=r(2781);e.exports=function(){var e=[],t=new n({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=function(){return 0==e.length},t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(n){return Array.isArray(n)?(n.forEach(r),this):(e.push(n),n.once("end",o.bind(null,n)),n.once("error",t.emit.bind(t,"error")),n.pipe(t,{end:!1}),this)}function o(r){!(e=e.filter((function(e){return e!==r}))).length&&t.readable&&t.end()}}},4341:e=>{"use strict";const t=(e,t)=>{for(const r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};e.exports=t,e.exports.default=t},1890:(e,t,r)=>{const n=r(4231),o=r(3610),{mkdirpNative:i,mkdirpNativeSync:s}=r(9378),{mkdirpManual:a,mkdirpManualSync:c}=r(8600),{useNative:u,useNativeSync:l}=r(6167),d=(e,t)=>(e=o(e),t=n(t),u(t)?i(e,t):a(e,t));d.sync=(e,t)=>(e=o(e),t=n(t),l(t)?s(e,t):c(e,t)),d.native=(e,t)=>i(o(e),n(t)),d.manual=(e,t)=>a(o(e),n(t)),d.nativeSync=(e,t)=>s(o(e),n(t)),d.manualSync=(e,t)=>c(o(e),n(t)),e.exports=d},8812:(e,t,r)=>{const{dirname:n}=r(1017),o=(e,t,r=undefined)=>r===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?r:void 0),(r=>"ENOENT"===r.code?o(e,n(t),t):void 0)),i=(e,t,r=undefined)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(r){return"ENOENT"===r.code?i(e,n(t),t):void 0}};e.exports={findMade:o,findMadeSync:i}},8600:(e,t,r)=>{const{dirname:n}=r(1017),o=(e,t,r)=>{t.recursive=!1;const i=n(e);return i===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>r||e),(n=>{if("ENOENT"===n.code)return o(i,t).then((r=>o(e,t,r)));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;return t.statAsync(e).then((e=>{if(e.isDirectory())return r;throw n}),(()=>{throw n}))}))},i=(e,t,r)=>{const o=n(e);if(t.recursive=!1,o===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),r||e}catch(n){if("ENOENT"===n.code)return i(e,t,i(o,t,r));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;try{if(!t.statSync(e).isDirectory())throw n}catch(e){throw n}}};e.exports={mkdirpManual:o,mkdirpManualSync:i}},9378:(e,t,r)=>{const{dirname:n}=r(1017),{findMade:o,findMadeSync:i}=r(8812),{mkdirpManual:s,mkdirpManualSync:a}=r(8600);e.exports={mkdirpNative:(e,t)=>{t.recursive=!0;return n(e)===e?t.mkdirAsync(e,t):o(t,e).then((r=>t.mkdirAsync(e,t).then((()=>r)).catch((r=>{if("ENOENT"===r.code)return s(e,t);throw r}))))},mkdirpNativeSync:(e,t)=>{t.recursive=!0;if(n(e)===e)return t.mkdirSync(e,t);const r=i(t,e);try{return t.mkdirSync(e,t),r}catch(r){if("ENOENT"===r.code)return a(e,t);throw r}}}},4231:(e,t,r)=>{const{promisify:n}=r(3837),o=r(7147);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511&~process.umask(),fs:o,...e};else if("number"==typeof e)e={mode:e,fs:o};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:o}}else e={mode:511&~process.umask(),fs:o};return e.mkdir=e.mkdir||e.fs.mkdir||o.mkdir,e.mkdirAsync=n(e.mkdir),e.stat=e.stat||e.fs.stat||o.stat,e.statAsync=n(e.stat),e.statSync=e.statSync||e.fs.statSync||o.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||o.mkdirSync,e}},3610:(e,t,r)=>{const n=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:o,parse:i}=r(1017);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=o(e),"win32"===n){const t=/[*|"<>?:]/,{root:r}=i(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},6167:(e,t,r)=>{const n=r(7147),o=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),i=+o[0]>10||10==+o[0]&&+o[1]>=12,s=i?e=>e.mkdir===n.mkdir:()=>!1,a=i?e=>e.mkdirSync===n.mkdirSync:()=>!1;e.exports={useNative:s,useNativeSync:a}},6147:(e,t,r)=>{"use strict";const n=r(1017),o=r(3024),i=e=>{let t;e={cwd:process.cwd(),path:process.env[o()],execPath:process.execPath,...e};let r=n.resolve(e.cwd);const i=[];for(;t!==r;)i.push(n.join(r,"node_modules/.bin")),t=r,r=n.resolve(r,"..");const s=n.resolve(e.cwd,e.execPath,"..");return i.push(s),i.concat(e.path).join(n.delimiter)};e.exports=i,e.exports.default=i,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},n=o({env:r});return t.path=r[n],r[n]=e.exports(t),r}},778:(e,t,r)=>{var n=r(2479);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(i),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))},7678:(e,t,r)=>{"use strict";const n=r(4341),o=new WeakMap,i=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,i=0;const s=e.displayName||e.name||"<anonymous>",a=function(...n){if(o.set(a,++i),1===i)r=e.apply(this,n),e=null;else if(!0===t.throw)throw new Error(`Function \`${s}\` can only be called once`);return r};return n(a,e),o.set(a,i),a};e.exports=i,e.exports.default=i,e.exports.callCount=e=>{if(!o.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return o.get(e)}},289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exec=void 0,t.default=s;var n=r(2081),o=function(e){return"function"==typeof e},i={"cms.verify":/^verification successful/i,genrsa:/^generating/i,pkcs12:/^mac verified ok/i,"req.new":/^generating/i,"req.verify":/^verify ok/i,rsa:/^writing rsa key/i,"smime.verify":/^verification successful/i,"x509.req":/^signature ok/i};function s(e,t,r,s){var a=t,c=r,u=s;Buffer.isBuffer(a)||(u=c,c=a,a=!1),o(c)&&(u=c,c={});var l=e.split(".").map((function(e,t){return t?"-"+e:e})),d=[];Object.keys(c).forEach((function(e){!1===c[e]?d.push(e):!0===c[e]?l.push("-"+e):Array.isArray(c[e])?c[e].forEach((function(t){l.push("-"+e,t)})):l.push("-"+e,c[e])})),l=l.concat(d);var p=(0,n.spawn)("openssl",l),h=[],f=0,g=[],m=0;return p.stdout.on("data",(function(e){f+=e.length,h.push(e)})),p.stderr.on("data",(function(e){m+=e.length,g.push(e)})),p.on("close",(function(t){var r=Buffer.concat(h,f),n=Buffer.concat(g,m).toString("utf8"),s=i[e],a=null;(t||n&&s&&!n.match(s))&&((a=new Error(n)).code=t),o(u)&&u.apply(null,[a,r])})),a&&p.stdin.write(a),p.stdin.end(),p}t.exec=s},9591:(e,t,r)=>{"use strict";const{Deflate:n,deflate:o,deflateRaw:i,gzip:s}=r(4555),{Inflate:a,inflate:c,inflateRaw:u,ungzip:l}=r(8843),d=r(1619);e.exports.Deflate=n,e.exports.deflate=o,e.exports.deflateRaw=i,e.exports.gzip=s,e.exports.Inflate=a,e.exports.inflate=c,e.exports.inflateRaw=u,e.exports.ungzip=l,e.exports.constants=d},4555:(e,t,r)=>{"use strict";const n=r(405),o=r(4236),i=r(9373),s=r(8898),a=r(2292),c=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:l,Z_FULL_FLUSH:d,Z_FINISH:p,Z_OK:h,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:m,Z_DEFLATED:_}=r(1619);function v(e){this.options=o.assign({level:g,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:m},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=n.deflateSetDictionary(this.strm,e),r!==h)throw new Error(s[r]);this._dict_set=!0}}function E(e,t){const r=new v(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}v.prototype.push=function(e,t){const r=this.strm,o=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?p:u,"string"==typeof e?r.input=i.string2buf(e):"[object ArrayBuffer]"===c.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),(a===l||a===d)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(s=n.deflate(r,a),s===f)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),s=n.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===h;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===h&&(this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=v,e.exports.deflate=E,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,E(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,E(e,t)},e.exports.constants=r(1619)},8843:(e,t,r)=>{"use strict";const n=r(7948),o=r(4236),i=r(9373),s=r(8898),a=r(2292),c=r(2401),u=Object.prototype.toString,{Z_NO_FLUSH:l,Z_FINISH:d,Z_OK:p,Z_STREAM_END:h,Z_NEED_DICT:f,Z_STREAM_ERROR:g,Z_DATA_ERROR:m,Z_MEM_ERROR:_}=r(1619);function v(e){this.options=o.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==p)throw new Error(s[r]);if(this.header=new c,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary),r!==p)))throw new Error(s[r])}function E(e,t){const r=new v(t);if(r.push(e),r.err)throw r.msg||s[r.err];return r.result}v.prototype.push=function(e,t){const r=this.strm,o=this.options.chunkSize,s=this.options.dictionary;let a,c,v;if(this.ended)return!1;for(c=t===~~t?t:!0===t?d:l,"[object ArrayBuffer]"===u.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),a=n.inflate(r,c),a===f&&s&&(a=n.inflateSetDictionary(r,s),a===p?a=n.inflate(r,c):a===m&&(a=f));r.avail_in>0&&a===h&&r.state.wrap>0&&0!==e[r.next_in];)n.inflateReset(r),a=n.inflate(r,c);switch(a){case g:case m:case f:case _:return this.onEnd(a),this.ended=!0,!1}if(v=r.avail_out,r.next_out&&(0===r.avail_out||a===h))if("string"===this.options.to){let e=i.utf8border(r.output,r.next_out),t=r.next_out-e,n=i.buf2string(r.output,e);r.next_out=t,r.avail_out=o-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==p||0!==v){if(a===h)return a=n.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},v.prototype.onData=function(e){this.chunks.push(e)},v.prototype.onEnd=function(e){e===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=v,e.exports.inflate=E,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,E(e,t)},e.exports.ungzip=E,e.exports.constants=r(1619)},4236:e=>{"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)t(n,r)&&(e[r]=n[r])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,o=e.length;t<o;t++){let o=e[t];r.set(o,n),n+=o.length}return r}},9373:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,e.exports.string2buf=e=>{let t,r,n,o,i,s=e.length,a=0;for(o=0;o<s;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),i=0,o=0;i<a;o++)r=e.charCodeAt(o),55296==(64512&r)&&o+1<s&&(n=e.charCodeAt(o+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|63&r):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|63&r):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|63&r);return t};e.exports.buf2string=(e,n)=>{let o,i;const s=n||e.length,a=new Array(2*s);for(i=0,o=0;o<s;){let t=e[o++];if(t<128){a[i++]=t;continue}let n=r[t];if(n>4)a[i++]=65533,o+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&o<s;)t=t<<6|63&e[o++],n--;n>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,r)=>{if(r<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let t=0;t<r;t++)n+=String.fromCharCode(e[t]);return n})(a,i)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},6069:e=>{"use strict";e.exports=(e,t,r,n)=>{let o=65535&e|0,i=e>>>16&65535|0,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do{o=o+t[n++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16|0}},1619:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:e=>{"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());e.exports=(e,r,n,o)=>{const i=t,s=o+n;e^=-1;for(let t=o;t<s;t++)e=e>>>8^i[255&(e^r[t])];return-1^e}},405:(e,t,r)=>{"use strict";const{_tr_init:n,_tr_stored_block:o,_tr_flush_block:i,_tr_tally:s,_tr_align:a}=r(342),c=r(6069),u=r(2869),l=r(8898),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:p,Z_FULL_FLUSH:h,Z_FINISH:f,Z_BLOCK:g,Z_OK:m,Z_STREAM_END:_,Z_STREAM_ERROR:v,Z_DATA_ERROR:E,Z_BUF_ERROR:y,Z_DEFAULT_COMPRESSION:b,Z_FILTERED:S,Z_HUFFMAN_ONLY:C,Z_RLE:A,Z_FIXED:T,Z_DEFAULT_STRATEGY:w,Z_UNKNOWN:P,Z_DEFLATED:O}=r(1619),I=286,R=30,D=19,N=2*I+1,M=15,x=258,k=262,F=103,L=113,j=666,B=(e,t)=>(e.msg=l[t],t),U=e=>(e<<1)-(e>4?9:0),H=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let G=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const V=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},q=(e,t)=>{i(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,V(e.strm)},$=(e,t)=>{e.pending_buf[e.pending++]=t},W=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},z=(e,t,r,n)=>{let o=e.avail_in;return o>n&&(o=n),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),r),1===e.state.wrap?e.adler=c(e.adler,t,o,r):2===e.state.wrap&&(e.adler=u(e.adler,t,o,r)),e.next_in+=o,e.total_in+=o,o)},K=(e,t)=>{let r,n,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-k?e.strstart-(e.w_size-k):0,u=e.window,l=e.w_mask,d=e.prev,p=e.strstart+x;let h=u[i+s-1],f=u[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,u[r+s]===f&&u[r+s-1]===h&&u[r]===u[i]&&u[++r]===u[i+1]){i+=2,r++;do{}while(u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&u[++i]===u[++r]&&i<p);if(n=x-(p-i),i=p-x,n>s){if(e.match_start=t,s=n,n>=a)break;h=u[i+s-1],f=u[i+s]}}}while((t=d[t&l])>c&&0!=--o);return s<=e.lookahead?s:e.lookahead},X=e=>{const t=e.w_size;let r,n,o,i,s;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-k)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do{o=e.head[--r],e.head[r]=o>=t?o-t:0}while(--n);n=t,r=n;do{o=e.prev[--r],e.prev[r]=o>=t?o-t:0}while(--n);i+=t}if(0===e.strm.avail_in)break;if(n=z(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=G(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=G(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<k&&0!==e.strm.avail_in)},Y=(e,t)=>{let r,n;for(;;){if(e.lookahead<k){if(X(e),e.lookahead<k&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=G(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-k&&(e.match_length=K(e,r)),e.match_length>=3)if(n=s(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=G(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=G(e,e.ins_h,e.window[e.strstart+1]);else n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(q(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===f?(q(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?1:2},J=(e,t)=>{let r,n,o;for(;;){if(e.lookahead<k){if(X(e),e.lookahead<k&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=G(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-k&&(e.match_length=K(e,r),e.match_length<=5&&(e.strategy===S||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,n=s(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=G(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(q(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=s(e,0,e.window[e.strstart-1]),n&&q(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===f?(q(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?1:2};function Q(e,t,r,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=o}const Z=[new Q(0,0,0,0,((e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(X(e),0===e.lookahead&&t===d)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,q(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-k&&(q(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===f?(q(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(q(e,!1),e.strm.avail_out),1)})),new Q(4,4,8,4,Y),new Q(4,5,16,8,Y),new Q(4,6,32,32,Y),new Q(4,4,16,16,J),new Q(8,16,32,32,J),new Q(8,16,128,128,J),new Q(8,32,128,256,J),new Q(32,128,258,1024,J),new Q(32,258,258,4096,J)];function ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*N),this.dyn_dtree=new Uint16Array(2*(2*R+1)),this.bl_tree=new Uint16Array(2*(2*D+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(M+1),this.heap=new Uint16Array(2*I+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*I+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const te=e=>{if(!e||!e.state)return B(e,v);e.total_in=e.total_out=0,e.data_type=P;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:L,e.adler=2===t.wrap?0:1,t.last_flush=d,n(t),m},re=e=>{const t=te(e);var r;return t===m&&((r=e.state).window_size=2*r.w_size,H(r.head),r.max_lazy_match=Z[r.level].max_lazy,r.good_match=Z[r.level].good_length,r.nice_match=Z[r.level].nice_length,r.max_chain_length=Z[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},ne=(e,t,r,n,o,i)=>{if(!e)return v;let s=1;if(t===b&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||r!==O||n<8||n>15||t<0||t>9||i<0||i>T)return B(e,v);8===n&&(n=9);const a=new ee;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,re(e)};e.exports.deflateInit=(e,t)=>ne(e,t,O,15,8,w),e.exports.deflateInit2=ne,e.exports.deflateReset=re,e.exports.deflateResetKeep=te,e.exports.deflateSetHeader=(e,t)=>e&&e.state?2!==e.state.wrap?v:(e.state.gzhead=t,m):v,e.exports.deflate=(e,t)=>{let r,n;if(!e||!e.state||t>g||t<0)return e?B(e,v):v;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===j&&t!==f)return B(e,0===e.avail_out?y:v);i.strm=e;const c=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,$(i,31),$(i,139),$(i,8),i.gzhead?($(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),$(i,255&i.gzhead.time),$(i,i.gzhead.time>>8&255),$(i,i.gzhead.time>>16&255),$(i,i.gzhead.time>>24&255),$(i,9===i.level?2:i.strategy>=C||i.level<2?4:0),$(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&($(i,255&i.gzhead.extra.length),$(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=u(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):($(i,0),$(i,0),$(i,0),$(i,0),$(i,0),$(i,9===i.level?2:i.strategy>=C||i.level<2?4:0),$(i,3),i.status=L);else{let t=O+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=C||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=r<<6,0!==i.strstart&&(t|=32),t+=31-t%31,i.status=L,W(i,t),0!==i.strstart&&(W(i,e.adler>>>16),W(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=u(e.adler,i.pending_buf,i.pending-r,r)),V(e),r=i.pending,i.pending!==i.pending_buf_size));)$(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=u(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=u(e.adler,i.pending_buf,i.pending-r,r)),V(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,$(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=u(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=u(e.adler,i.pending_buf,i.pending-r,r)),V(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,$(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=u(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=F)}else i.status=F;if(i.status===F&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&V(e),i.pending+2<=i.pending_buf_size&&($(i,255&e.adler),$(i,e.adler>>8&255),e.adler=0,i.status=L)):i.status=L),0!==i.pending){if(V(e),0===e.avail_out)return i.last_flush=-1,m}else if(0===e.avail_in&&U(t)<=U(c)&&t!==f)return B(e,y);if(i.status===j&&0!==e.avail_in)return B(e,y);if(0!==e.avail_in||0!==i.lookahead||t!==d&&i.status!==j){let r=i.strategy===C?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(X(e),0===e.lookahead)){if(t===d)return 1;break}if(e.match_length=0,r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(q(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===f?(q(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===A?((e,t)=>{let r,n,o,i;const a=e.window;for(;;){if(e.lookahead<=x){if(X(e),e.lookahead<=x&&t===d)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,n=a[o],n===a[++o]&&n===a[++o]&&n===a[++o])){i=e.strstart+x;do{}while(n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&n===a[++o]&&o<i);e.match_length=x-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(q(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===f?(q(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(q(e,!1),0===e.strm.avail_out)?1:2})(i,t):Z[i.level].func(i,t);if(3!==r&&4!==r||(i.status=j),1===r||3===r)return 0===e.avail_out&&(i.last_flush=-1),m;if(2===r&&(t===p?a(i):t!==g&&(o(i,0,0,!1),t===h&&(H(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),V(e),0===e.avail_out))return i.last_flush=-1,m}return t!==f?m:i.wrap<=0?_:(2===i.wrap?($(i,255&e.adler),$(i,e.adler>>8&255),$(i,e.adler>>16&255),$(i,e.adler>>24&255),$(i,255&e.total_in),$(i,e.total_in>>8&255),$(i,e.total_in>>16&255),$(i,e.total_in>>24&255)):(W(i,e.adler>>>16),W(i,65535&e.adler)),V(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?m:_)},e.exports.deflateEnd=e=>{if(!e||!e.state)return v;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==F&&t!==L&&t!==j?B(e,v):(e.state=null,t===L?B(e,E):m)},e.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(!e||!e.state)return v;const n=e.state,o=n.wrap;if(2===o||1===o&&42!==n.status||n.lookahead)return v;if(1===o&&(e.adler=c(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===o&&(H(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,X(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=G(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,X(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,n.wrap=o,m},e.exports.deflateInfo="pako deflate (from Nodeca project)"},2401:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},4264:e=>{"use strict";e.exports=function(e,t){let r,n,o,i,s,a,c,u,l,d,p,h,f,g,m,_,v,E,y,b,S,C,A,T;const w=e.state;r=e.next_in,A=e.input,n=r+(e.avail_in-5),o=e.next_out,T=e.output,i=o-(t-e.avail_out),s=o+(e.avail_out-257),a=w.dmax,c=w.wsize,u=w.whave,l=w.wnext,d=w.window,p=w.hold,h=w.bits,f=w.lencode,g=w.distcode,m=(1<<w.lenbits)-1,_=(1<<w.distbits)-1;e:do{h<15&&(p+=A[r++]<<h,h+=8,p+=A[r++]<<h,h+=8),v=f[p&m];t:for(;;){if(E=v>>>24,p>>>=E,h-=E,E=v>>>16&255,0===E)T[o++]=65535&v;else{if(!(16&E)){if(0==(64&E)){v=f[(65535&v)+(p&(1<<E)-1)];continue t}if(32&E){w.mode=12;break e}e.msg="invalid literal/length code",w.mode=30;break e}y=65535&v,E&=15,E&&(h<E&&(p+=A[r++]<<h,h+=8),y+=p&(1<<E)-1,p>>>=E,h-=E),h<15&&(p+=A[r++]<<h,h+=8,p+=A[r++]<<h,h+=8),v=g[p&_];r:for(;;){if(E=v>>>24,p>>>=E,h-=E,E=v>>>16&255,!(16&E)){if(0==(64&E)){v=g[(65535&v)+(p&(1<<E)-1)];continue r}e.msg="invalid distance code",w.mode=30;break e}if(b=65535&v,E&=15,h<E&&(p+=A[r++]<<h,h+=8,h<E&&(p+=A[r++]<<h,h+=8)),b+=p&(1<<E)-1,b>a){e.msg="invalid distance too far back",w.mode=30;break e}if(p>>>=E,h-=E,E=o-i,b>E){if(E=b-E,E>u&&w.sane){e.msg="invalid distance too far back",w.mode=30;break e}if(S=0,C=d,0===l){if(S+=c-E,E<y){y-=E;do{T[o++]=d[S++]}while(--E);S=o-b,C=T}}else if(l<E){if(S+=c+l-E,E-=l,E<y){y-=E;do{T[o++]=d[S++]}while(--E);if(S=0,l<y){E=l,y-=E;do{T[o++]=d[S++]}while(--E);S=o-b,C=T}}}else if(S+=l-E,E<y){y-=E;do{T[o++]=d[S++]}while(--E);S=o-b,C=T}for(;y>2;)T[o++]=C[S++],T[o++]=C[S++],T[o++]=C[S++],y-=3;y&&(T[o++]=C[S++],y>1&&(T[o++]=C[S++]))}else{S=o-b;do{T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],y-=3}while(y>2);y&&(T[o++]=T[S++],y>1&&(T[o++]=T[S++]))}break}}break}}while(r<n&&o<s);y=h>>3,r-=y,h-=y<<3,p&=(1<<h)-1,e.next_in=r,e.next_out=o,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=o<s?s-o+257:257-(o-s),w.hold=p,w.bits=h}},7948:(e,t,r)=>{"use strict";const n=r(6069),o=r(2869),i=r(4264),s=r(9241),{Z_FINISH:a,Z_BLOCK:c,Z_TREES:u,Z_OK:l,Z_STREAM_END:d,Z_NEED_DICT:p,Z_STREAM_ERROR:h,Z_DATA_ERROR:f,Z_MEM_ERROR:g,Z_BUF_ERROR:m,Z_DEFLATED:_}=r(1619),v=12,E=30,y=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const S=e=>{if(!e||!e.state)return h;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,l},C=e=>{if(!e||!e.state)return h;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,S(e)},A=(e,t)=>{let r;if(!e||!e.state)return h;const n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?h:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,C(e))},T=(e,t)=>{if(!e)return h;const r=new b;e.state=r,r.window=null;const n=A(e,t);return n!==l&&(e.state=null),n};let w,P,O=!0;const I=e=>{if(O){w=new Int32Array(512),P=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,P,0,e.work,{bits:5}),O=!1}e.lencode=w,e.lenbits=9,e.distcode=P,e.distbits=5},R=(e,t,r,n)=>{let o;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),i.window.set(t.subarray(r-n,r-n+o),i.wnext),(n-=o)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};e.exports.inflateReset=C,e.exports.inflateReset2=A,e.exports.inflateResetKeep=S,e.exports.inflateInit=e=>T(e,15),e.exports.inflateInit2=T,e.exports.inflate=(e,t)=>{let r,b,S,C,A,T,w,P,O,D,N,M,x,k,F,L,j,B,U,H,G,V,q=0;const $=new Uint8Array(4);let W,z;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;r=e.state,r.mode===v&&(r.mode=13),A=e.next_out,S=e.output,w=e.avail_out,C=e.next_in,b=e.input,T=e.avail_in,P=r.hold,O=r.bits,D=T,N=w,V=l;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;O<16;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(2&r.wrap&&35615===P){r.check=0,$[0]=255&P,$[1]=P>>>8&255,r.check=o(r.check,$,2,0),P=0,O=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&P)<<8)+(P>>8))%31){e.msg="incorrect header check",r.mode=E;break}if((15&P)!==_){e.msg="unknown compression method",r.mode=E;break}if(P>>>=4,O-=4,G=8+(15&P),0===r.wbits)r.wbits=G;else if(G>r.wbits){e.msg="invalid window size",r.mode=E;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&P?10:v,P=0,O=0;break;case 2:for(;O<16;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(r.flags=P,(255&r.flags)!==_){e.msg="unknown compression method",r.mode=E;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=E;break}r.head&&(r.head.text=P>>8&1),512&r.flags&&($[0]=255&P,$[1]=P>>>8&255,r.check=o(r.check,$,2,0)),P=0,O=0,r.mode=3;case 3:for(;O<32;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}r.head&&(r.head.time=P),512&r.flags&&($[0]=255&P,$[1]=P>>>8&255,$[2]=P>>>16&255,$[3]=P>>>24&255,r.check=o(r.check,$,4,0)),P=0,O=0,r.mode=4;case 4:for(;O<16;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}r.head&&(r.head.xflags=255&P,r.head.os=P>>8),512&r.flags&&($[0]=255&P,$[1]=P>>>8&255,r.check=o(r.check,$,2,0)),P=0,O=0,r.mode=5;case 5:if(1024&r.flags){for(;O<16;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}r.length=P,r.head&&(r.head.extra_len=P),512&r.flags&&($[0]=255&P,$[1]=P>>>8&255,r.check=o(r.check,$,2,0)),P=0,O=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(M=r.length,M>T&&(M=T),M&&(r.head&&(G=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(b.subarray(C,C+M),G)),512&r.flags&&(r.check=o(r.check,b,M,C)),T-=M,C+=M,r.length-=M),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===T)break e;M=0;do{G=b[C+M++],r.head&&G&&r.length<65536&&(r.head.name+=String.fromCharCode(G))}while(G&&M<T);if(512&r.flags&&(r.check=o(r.check,b,M,C)),T-=M,C+=M,G)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===T)break e;M=0;do{G=b[C+M++],r.head&&G&&r.length<65536&&(r.head.comment+=String.fromCharCode(G))}while(G&&M<T);if(512&r.flags&&(r.check=o(r.check,b,M,C)),T-=M,C+=M,G)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;O<16;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(P!==(65535&r.check)){e.msg="header crc mismatch",r.mode=E;break}P=0,O=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=v;break;case 10:for(;O<32;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}e.adler=r.check=y(P),P=0,O=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=A,e.avail_out=w,e.next_in=C,e.avail_in=T,r.hold=P,r.bits=O,p;e.adler=r.check=1,r.mode=v;case v:if(t===c||t===u)break e;case 13:if(r.last){P>>>=7&O,O-=7&O,r.mode=27;break}for(;O<3;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}switch(r.last=1&P,P>>>=1,O-=1,3&P){case 0:r.mode=14;break;case 1:if(I(r),r.mode=20,t===u){P>>>=2,O-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=E}P>>>=2,O-=2;break;case 14:for(P>>>=7&O,O-=7&O;O<32;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if((65535&P)!=(P>>>16^65535)){e.msg="invalid stored block lengths",r.mode=E;break}if(r.length=65535&P,P=0,O=0,r.mode=15,t===u)break e;case 15:r.mode=16;case 16:if(M=r.length,M){if(M>T&&(M=T),M>w&&(M=w),0===M)break e;S.set(b.subarray(C,C+M),A),T-=M,C+=M,w-=M,A+=M,r.length-=M;break}r.mode=v;break;case 17:for(;O<14;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(r.nlen=257+(31&P),P>>>=5,O-=5,r.ndist=1+(31&P),P>>>=5,O-=5,r.ncode=4+(15&P),P>>>=4,O-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=E;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;O<3;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}r.lens[K[r.have++]]=7&P,P>>>=3,O-=3}for(;r.have<19;)r.lens[K[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,W={bits:r.lenbits},V=s(0,r.lens,0,19,r.lencode,0,r.work,W),r.lenbits=W.bits,V){e.msg="invalid code lengths set",r.mode=E;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;q=r.lencode[P&(1<<r.lenbits)-1],F=q>>>24,L=q>>>16&255,j=65535&q,!(F<=O);){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(j<16)P>>>=F,O-=F,r.lens[r.have++]=j;else{if(16===j){for(z=F+2;O<z;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(P>>>=F,O-=F,0===r.have){e.msg="invalid bit length repeat",r.mode=E;break}G=r.lens[r.have-1],M=3+(3&P),P>>>=2,O-=2}else if(17===j){for(z=F+3;O<z;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}P>>>=F,O-=F,G=0,M=3+(7&P),P>>>=3,O-=3}else{for(z=F+7;O<z;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}P>>>=F,O-=F,G=0,M=11+(127&P),P>>>=7,O-=7}if(r.have+M>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=E;break}for(;M--;)r.lens[r.have++]=G}}if(r.mode===E)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=E;break}if(r.lenbits=9,W={bits:r.lenbits},V=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,W),r.lenbits=W.bits,V){e.msg="invalid literal/lengths set",r.mode=E;break}if(r.distbits=6,r.distcode=r.distdyn,W={bits:r.distbits},V=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,W),r.distbits=W.bits,V){e.msg="invalid distances set",r.mode=E;break}if(r.mode=20,t===u)break e;case 20:r.mode=21;case 21:if(T>=6&&w>=258){e.next_out=A,e.avail_out=w,e.next_in=C,e.avail_in=T,r.hold=P,r.bits=O,i(e,N),A=e.next_out,S=e.output,w=e.avail_out,C=e.next_in,b=e.input,T=e.avail_in,P=r.hold,O=r.bits,r.mode===v&&(r.back=-1);break}for(r.back=0;q=r.lencode[P&(1<<r.lenbits)-1],F=q>>>24,L=q>>>16&255,j=65535&q,!(F<=O);){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(L&&0==(240&L)){for(B=F,U=L,H=j;q=r.lencode[H+((P&(1<<B+U)-1)>>B)],F=q>>>24,L=q>>>16&255,j=65535&q,!(B+F<=O);){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}P>>>=B,O-=B,r.back+=B}if(P>>>=F,O-=F,r.back+=F,r.length=j,0===L){r.mode=26;break}if(32&L){r.back=-1,r.mode=v;break}if(64&L){e.msg="invalid literal/length code",r.mode=E;break}r.extra=15&L,r.mode=22;case 22:if(r.extra){for(z=r.extra;O<z;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}r.length+=P&(1<<r.extra)-1,P>>>=r.extra,O-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;q=r.distcode[P&(1<<r.distbits)-1],F=q>>>24,L=q>>>16&255,j=65535&q,!(F<=O);){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(0==(240&L)){for(B=F,U=L,H=j;q=r.distcode[H+((P&(1<<B+U)-1)>>B)],F=q>>>24,L=q>>>16&255,j=65535&q,!(B+F<=O);){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}P>>>=B,O-=B,r.back+=B}if(P>>>=F,O-=F,r.back+=F,64&L){e.msg="invalid distance code",r.mode=E;break}r.offset=j,r.extra=15&L,r.mode=24;case 24:if(r.extra){for(z=r.extra;O<z;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}r.offset+=P&(1<<r.extra)-1,P>>>=r.extra,O-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=E;break}r.mode=25;case 25:if(0===w)break e;if(M=N-w,r.offset>M){if(M=r.offset-M,M>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=E;break}M>r.wnext?(M-=r.wnext,x=r.wsize-M):x=r.wnext-M,M>r.length&&(M=r.length),k=r.window}else k=S,x=A-r.offset,M=r.length;M>w&&(M=w),w-=M,r.length-=M;do{S[A++]=k[x++]}while(--M);0===r.length&&(r.mode=21);break;case 26:if(0===w)break e;S[A++]=r.length,w--,r.mode=21;break;case 27:if(r.wrap){for(;O<32;){if(0===T)break e;T--,P|=b[C++]<<O,O+=8}if(N-=w,e.total_out+=N,r.total+=N,N&&(e.adler=r.check=r.flags?o(r.check,S,N,A-N):n(r.check,S,N,A-N)),N=w,(r.flags?P:y(P))!==r.check){e.msg="incorrect data check",r.mode=E;break}P=0,O=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;O<32;){if(0===T)break e;T--,P+=b[C++]<<O,O+=8}if(P!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=E;break}P=0,O=0}r.mode=29;case 29:V=d;break e;case E:V=f;break e;case 31:return g;default:return h}return e.next_out=A,e.avail_out=w,e.next_in=C,e.avail_in=T,r.hold=P,r.bits=O,(r.wsize||N!==e.avail_out&&r.mode<E&&(r.mode<27||t!==a))&&R(e,e.output,e.next_out,N-e.avail_out)?(r.mode=31,g):(D-=e.avail_in,N-=e.avail_out,e.total_in+=D,e.total_out+=N,r.total+=N,r.wrap&&N&&(e.adler=r.check=r.flags?o(r.check,S,N,e.next_out-N):n(r.check,S,N,e.next_out-N)),e.data_type=r.bits+(r.last?64:0)+(r.mode===v?128:0)+(20===r.mode||15===r.mode?256:0),(0===D&&0===N||t===a)&&V===l&&(V=m),V)},e.exports.inflateEnd=e=>{if(!e||!e.state)return h;let t=e.state;return t.window&&(t.window=null),e.state=null,l},e.exports.inflateGetHeader=(e,t)=>{if(!e||!e.state)return h;const r=e.state;return 0==(2&r.wrap)?h:(r.head=t,t.done=!1,l)},e.exports.inflateSetDictionary=(e,t)=>{const r=t.length;let o,i,s;return e&&e.state?(o=e.state,0!==o.wrap&&11!==o.mode?h:11===o.mode&&(i=1,i=n(i,t,r,0),i!==o.check)?f:(s=R(e,t,r,r),s?(o.mode=31,g):(o.havedict=1,l))):h},e.exports.inflateInfo="pako inflate (from Nodeca project)"},9241:e=>{"use strict";const t=15,r=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),o=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),i=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,s,a,c,u,l,d,p)=>{const h=p.bits;let f,g,m,_,v,E,y=0,b=0,S=0,C=0,A=0,T=0,w=0,P=0,O=0,I=0,R=null,D=0;const N=new Uint16Array(16),M=new Uint16Array(16);let x,k,F,L=null,j=0;for(y=0;y<=t;y++)N[y]=0;for(b=0;b<c;b++)N[s[a+b]]++;for(A=h,C=t;C>=1&&0===N[C];C--);if(A>C&&(A=C),0===C)return u[l++]=20971520,u[l++]=20971520,p.bits=1,0;for(S=1;S<C&&0===N[S];S++);for(A<S&&(A=S),P=1,y=1;y<=t;y++)if(P<<=1,P-=N[y],P<0)return-1;if(P>0&&(0===e||1!==C))return-1;for(M[1]=0,y=1;y<t;y++)M[y+1]=M[y]+N[y];for(b=0;b<c;b++)0!==s[a+b]&&(d[M[s[a+b]]++]=b);if(0===e?(R=L=d,E=19):1===e?(R=r,D-=257,L=n,j-=257,E=256):(R=o,L=i,E=-1),I=0,b=0,y=S,v=l,T=A,w=0,m=-1,O=1<<A,_=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){x=y-w,d[b]<E?(k=0,F=d[b]):d[b]>E?(k=L[j+d[b]],F=R[D+d[b]]):(k=96,F=0),f=1<<y-w,g=1<<T,S=g;do{g-=f,u[v+(I>>w)+g]=x<<24|k<<16|F|0}while(0!==g);for(f=1<<y-1;I&f;)f>>=1;if(0!==f?(I&=f-1,I+=f):I=0,b++,0==--N[y]){if(y===C)break;y=s[a+d[b]]}if(y>A&&(I&_)!==m){for(0===w&&(w=A),v+=S,T=y-w,P=1<<T;T+w<C&&(P-=N[T+w],!(P<=0));)T++,P<<=1;if(O+=1<<T,1===e&&O>852||2===e&&O>592)return 1;m=I&_,u[m]=A<<24|T<<16|v-l|0}}return 0!==I&&(u[v+I]=y-w<<24|64<<16|0),p.bits=A,0}},8898:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:e=>{"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const r=256,n=286,o=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),u=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=new Array(576);t(l);const d=new Array(60);t(d);const p=new Array(512);t(p);const h=new Array(256);t(h);const f=new Array(29);t(f);const g=new Array(o);function m(e,t,r,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}let _,v,E;function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(g);const b=e=>e<256?p[e]:p[256+(e>>>7)],S=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},C=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},A=(e,t,r)=>{C(e,r[2*t],r[2*t+1])},T=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},w=(e,t,r)=>{const n=new Array(16);let o,s,a=0;for(o=1;o<=i;o++)n[o]=a=a+r[o-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=T(n[t]++,t))}},P=e=>{let t;for(t=0;t<n;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},O=e=>{e.bi_valid>8?S(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,r,n)=>{const o=2*t,i=2*r;return e[o]<e[i]||e[o]===e[i]&&n[t]<=n[r]},R=(e,t,r)=>{const n=e.heap[r];let o=r<<1;for(;o<=e.heap_len&&(o<e.heap_len&&I(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!I(t,n,e.heap[o],e.depth));)e.heap[r]=e.heap[o],r=o,o<<=1;e.heap[r]=n},D=(e,t,n)=>{let o,i,c,u,l=0;if(0!==e.last_lit)do{o=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===o?A(e,i,t):(c=h[i],A(e,c+r+1,t),u=s[c],0!==u&&(i-=f[c],C(e,i,u)),o--,c=b(o),A(e,c,n),u=a[c],0!==u&&(o-=g[c],C(e,o,u)))}while(l<e.last_lit);A(e,256,t)},N=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.elems;let a,c,u,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)0!==r[2*a]?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=l<2?++l:0,r[2*u]=1,e.depth[u]=0,e.opt_len--,o&&(e.static_len-=n[2*u+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)R(e,r,a);u=s;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,r,1),c=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=c,r[2*u]=r[2*a]+r[2*c],e.depth[u]=(e.depth[a]>=e.depth[c]?e.depth[a]:e.depth[c])+1,r[2*a+1]=r[2*c+1]=u,e.heap[1]=u++,R(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,u=t.stat_desc.max_length;let l,d,p,h,f,g,m=0;for(h=0;h<=i;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],h=r[2*r[2*d+1]+1]+1,h>u&&(h=u,m++),r[2*d+1]=h,d>n||(e.bl_count[h]++,f=0,d>=c&&(f=a[d-c]),g=r[2*d],e.opt_len+=g*(h+f),s&&(e.static_len+=g*(o[2*d+1]+f)));if(0!==m){do{for(h=u-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(h=u;0!==h;h--)for(d=e.bl_count[h];0!==d;)p=e.heap[--l],p>n||(r[2*p+1]!==h&&(e.opt_len+=(h-r[2*p+1])*r[2*p],r[2*p+1]=h),d--)}})(e,t),w(r,l,e.bl_count)},M=(e,t,r)=>{let n,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)o=s,s=t[2*(n+1)+1],++a<c&&o===s||(a<u?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=o,0===s?(c=138,u=3):o===s?(c=6,u=3):(c=7,u=4))},x=(e,t,r)=>{let n,o,i=-1,s=t[1],a=0,c=7,u=4;for(0===s&&(c=138,u=3),n=0;n<=r;n++)if(o=s,s=t[2*(n+1)+1],!(++a<c&&o===s)){if(a<u)do{A(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(A(e,o,e.bl_tree),a--),A(e,16,e.bl_tree),C(e,a-3,2)):a<=10?(A(e,17,e.bl_tree),C(e,a-3,3)):(A(e,18,e.bl_tree),C(e,a-11,7));a=0,i=o,0===s?(c=138,u=3):o===s?(c=6,u=3):(c=7,u=4)}};let k=!1;const F=(e,t,r,n)=>{C(e,0+(n?1:0),3),((e,t,r,n)=>{O(e),n&&(S(e,r),S(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r})(e,t,r,!0)};e.exports._tr_init=e=>{k||((()=>{let e,t,r,u,y;const b=new Array(16);for(r=0,u=0;u<28;u++)for(f[u]=r,e=0;e<1<<s[u];e++)h[r++]=u;for(h[r-1]=u,y=0,u=0;u<16;u++)for(g[u]=y,e=0;e<1<<a[u];e++)p[y++]=u;for(y>>=7;u<o;u++)for(g[u]=y<<7,e=0;e<1<<a[u]-7;e++)p[256+y++]=u;for(t=0;t<=i;t++)b[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,b[8]++;for(;e<=255;)l[2*e+1]=9,e++,b[9]++;for(;e<=279;)l[2*e+1]=7,e++,b[7]++;for(;e<=287;)l[2*e+1]=8,e++,b[8]++;for(w(l,287,b),e=0;e<o;e++)d[2*e+1]=5,d[2*e]=T(e,5);_=new m(l,s,257,n,i),v=new m(d,a,0,o,i),E=new m(new Array(0),c,0,19,7)})(),k=!0),e.l_desc=new y(e.dyn_ltree,_),e.d_desc=new y(e.dyn_dtree,v),e.bl_desc=new y(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,P(e)},e.exports._tr_stored_block=F,e.exports._tr_flush_block=(e,t,n,o)=>{let i,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<r;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),N(e,e.l_desc),N(e,e.d_desc),a=(e=>{let t;for(M(e,e.dyn_ltree,e.l_desc.max_code),M(e,e.dyn_dtree,e.d_desc.max_code),N(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?F(e,t,n,o):4===e.strategy||s===i?(C(e,2+(o?1:0),3),D(e,l,d)):(C(e,4+(o?1:0),3),((e,t,r,n)=>{let o;for(C(e,t-257,5),C(e,r-1,5),C(e,n-4,4),o=0;o<n;o++)C(e,e.bl_tree[2*u[o]+1],3);x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),D(e,e.dyn_ltree,e.dyn_dtree)),P(e),o&&O(e)},e.exports._tr_tally=(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(h[n]+r+1)]++,e.dyn_dtree[2*b(t)]++),e.last_lit===e.lit_bufsize-1),e.exports._tr_align=e=>{C(e,2,3),A(e,256,l),(e=>{16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},2292:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4095:e=>{"use strict";function t(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===process.platform?r:t,e.exports.posix=t,e.exports.win32=r},3024:e=>{"use strict";const t=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};e.exports=t,e.exports.default=t},9291:(e,t,r)=>{"use strict";!function(){if("arm"!==process.arch){var t=[];!function(){for(var e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r>>>0}}(),e.exports=function(){for(var e=arguments.length,t=-1,r=0;r<e;r++)t=n(t,new Buffer(arguments[r]));return t=(-1^t)>>>0}}else e.exports=r(3481);function n(e,r){for(var n=r.length,o=0;o<n;o++)e=t[255&(e^r[o])]^e>>>8;return e}}()},3481:e=>{"use strict";for(var t=[],r=0;r<256;r++){var n=t[r]=new Buffer(4);n.writeUInt32BE(r,0);for(var o=0;o<8;o++){var i=1&n[0],s=1&n[1],a=1&n[2],c=1&n[3];n[0]=n[0]>>1^(c?237:0),n[1]=n[1]>>1^(c?184:0)^(i?128:0),n[2]=n[2]>>1^(c?131:0)^(s?128:0),n[3]=n[3]>>1^(c?32:0)^(a?128:0)}}function u(e,r){for(var n=r.length,o=0;o<n;o++){var i=t[e[3]^r[o]];e[3]=i[3]^e[2],e[2]=i[2]^e[1],e[1]=i[1]^e[0],e[0]=i[0]}}e.exports=function(){var e=arguments.length,t=new Buffer(4);t.fill(255);for(var r=0;r<e;r++)u(t,new Buffer(arguments[r]));return t[0]=255^t[0],t[1]=255^t[1],t[2]=255^t[2],t[3]=255^t[3],t.readUInt32BE(0)}},3381:e=>{"use strict";function t(e,t,r){for(var n=1<<t-1;n;n>>>=1)e.push(n&r?1:0)}var r=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=r;return t}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");function n(e,o){var i,s=typeof e;if("string"==s||"number"==s)i=""+e,e=new Buffer(i);else if(Buffer.isBuffer(e))i=e.toString();else{if(!Array.isArray(e))throw new Error("Bad data");i=(e=new Buffer(e)).toString()}if(/^[0-9]+$/.test(i)){if(e.length>7089)throw new Error("Too much data");return function(e){for(var r=e.length,n=[],o=0;o<r;o+=3){var i=e.substr(o,3);t(n,Math.ceil(10*i.length/3),parseInt(i,10))}var s,a={};return t(s=[0,0,0,1],14,r),a.data27=s.concat(n),r<4096&&(t(s=[0,0,0,1],12,r),a.data10=s.concat(n)),r<1024&&(t(s=[0,0,0,1],10,r),a.data1=s.concat(n)),a}(i)}if(/^[0-9A-Z \$%\*\+\.\/\:\-]+$/.test(i)){if(e.length>4296)throw new Error("Too much data");return function(e){for(var n=e.length,o=[],i=0;i<n;i+=2){var s=6,a=r[e[i]];e[i+1]&&(s=11,a=45*a+r[e[i+1]]),t(o,s,a)}var c,u={};return t(c=[0,0,1,0],13,n),u.data27=c.concat(o),n<2048&&(t(c=[0,0,1,0],11,n),u.data10=c.concat(o)),n<512&&(t(c=[0,0,1,0],9,n),u.data1=c.concat(o)),u}(i)}if(o&&/^https?:/i.test(i))return function(e){var t=e.indexOf("/",8)+1||e.length,r=n(e.slice(0,t).toUpperCase(),!1);if(t>=e.length)return r;var o=n(e.slice(t),!1);return r.data27=r.data27.concat(o.data27),r.data10&&o.data10&&(r.data10=r.data10.concat(o.data10)),r.data1&&o.data1&&(r.data1=r.data1.concat(o.data1)),r}(i);if(e.length>2953)throw new Error("Too much data");return function(e){for(var r=e.length,n=[],o=0;o<r;o++)t(n,8,e[o]);var i,s={};return t(i=[0,1,0,0],16,r),s.data10=s.data27=i.concat(n),r<256&&(t(i=[0,1,0,0],8,r),s.data1=i.concat(n)),s}(e)}e.exports=n},2126:e=>{"use strict";for(var t=[1],r=[],n=1;n<256;n++){var o=t[n-1]<<1;o>255&&(o^=285),t[n]=o}for(n=0;n<255;n++)r[t[n]]=n;function i(e){for(;e<0;)e+=255;for(;e>255;)e-=255;return t[e]}function s(e){if(e<1||e>255)throw Error("Bad log("+e+")");return r[e]}var a=[[0],[0,0],[0,25,1]];function c(e){if(a[e])return a[e];var t=c(e-1),r=[];r[0]=t[0];for(var n=1;n<=e;n++)r[n]=s(i(t[n])^i(t[n-1]+e-1));return a[e]=r,r}e.exports=function(e,t){e=[].slice.call(e);for(var r=c(t),n=0;n<t;n++)e.push(0);for(;e.length>t;)if(e[0]){var o=s(e[0]);for(n=0;n<=t;n++)e[n]=e[n]^i(r[n]+o);e.shift()}else e.shift();return new Buffer(e)}},9691:e=>{"use strict";function t(e){var t=4*e+17,r=[],n=new Buffer(t);n.fill(0),n=[].slice.call(n);for(var o=0;o<t;o++)r[o]=n.slice();return r}function r(e){for(var t=e.length,r=-3;r<=3;r++)for(var n=-3;n<=3;n++){var o=Math.max(r,n),i=Math.min(r,n),s=2==o&&i>=-2||-2==i&&o<=2?128:129;e[3+r][3+n]=s,e[3+r][t-4+n]=s,e[t-4+r][3+n]=s}for(r=0;r<8;r++)e[7][r]=e[r][7]=e[7][t-r-1]=e[r][t-8]=e[t-8][r]=e[t-1-r][7]=128}function n(e){var t=e.length;if(t>21){var r=t-13,n=Math.round(r/Math.ceil(r/28));n%2&&n++;for(var o=[],i=r+6;i>10;i-=n)o.unshift(i);o.unshift(6);for(var s=0;s<o.length;s++)for(var a=0;a<o.length;a++){var c=o[s],u=o[a];if(!e[c][u])for(var l=-2;l<=2;l++)for(var d=-2;d<=2;d++){var p=Math.max(l,d),h=Math.min(l,d),f=1==p&&h>=-1||-1==h&&p<=1?128:129;e[c+l][u+d]=f}}}for(s=8;s<t-8;s++)e[6][s]=e[s][6]=s%2?128:129}function o(e){for(var t=e.length,r=0;r<8;r++)6!=r&&(e[8][r]=e[r][8]=128),e[8][t-1-r]=128,e[t-1-r][8]=128;if(e[8][8]=128,e[t-8][8]=129,!(t<45))for(r=t-11;r<t-8;r++)for(var n=0;n<6;n++)e[r][n]=e[n][r]=128}var i,s=function(){for(var e=Array(32),t=Array(40),r=0;r<32;r++){for(var n=r<<10,o=5;o>0;o--)n>>>9+o&&(n^=1335<<o-1);e[r]=21522^(n|r<<10)}for(var i=7;i<=40;i++){for(n=i<<12,o=6;o>0;o--)n>>>11+o&&(n^=7973<<o-1);t[i]=n|i<<12}var s={L:1,M:0,Q:3,H:2};return function(r,n,o){var i=r.length,a=e[s[n]<<3|o];function c(e){return a>>e&1?129:128}for(var u=0;u<8;u++)r[8][i-1-u]=c(u),u<6&&(r[u][8]=c(u));for(u=8;u<15;u++)r[i-15+u][8]=c(u),u>8&&(r[8][14-u]=c(u));r[7][8]=c(6),r[8][8]=c(7),r[8][7]=c(8);var l=t[(i-17)/4];if(l)for(u=0;u<6;u++)for(var d=0;d<3;d++)r[i-11+d][u]=r[u][i-11+d]=l>>3*u+d&1?129:128}}(),a=(i=[function(e,t){return(e+t)%2==0},function(e,t){return e%2==0},function(e,t){return t%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return(e*t%3+(e+t)%2)%2==0}],function(e,t,r){var n,o,s=e.length,a=-1;n=o=s-1;for(var c=i[r],u=t.blocks[t.blocks.length-1].length,l=0;l<u;l++)for(var d=0;d<t.blocks.length;d++)t.blocks[d].length<=l||p(t.blocks[d][l]);for(u=t.ec_len,l=0;l<u;l++)for(d=0;d<t.ec.length;d++)p(t.ec[d][l]);if(o>-1)do{e[n][o]=c(n,o)?1:0}while(h());function p(t){for(var r=128;r;r>>=1){var i=!!(r&t);c(n,o)&&(i=!i),e[n][o]=i?1:0,h()}}function h(){do{if(o%2^o<6?a<0&&0==n||a>0&&n==s-1?(o--,a=-a):(o++,n+=a):o--,6==o&&o--,o<0)return!1}while(240&e[n][o]);return!0}});function c(e){for(var t=e.length,r=0,n=0;n<t;n++){for(var o=1&e[n][0],i=1,s=1;s<t;s++){(a=1&e[n][s])!=o?(i>=5&&(r+=i-2),o=a,i=1):i++}i>=5&&(r+=i-2)}for(s=0;s<t;s++){for(o=1&e[0][s],i=1,n=1;n<t;n++){var a;(a=1&e[n][s])!=o?(i>=5&&(r+=i-2),o=a,i=1):i++}i>=5&&(r+=i-2)}for(n=0;n<t-1;n++)for(s=0;s<t-1;s++){var c=e[n][s]+e[n][s+1]+e[n+1][s]+e[n+1][s+1]&7;0!=c&&4!=c||(r+=3)}function u(t){return 1&e[n][s+t]}function l(t){return 1&e[n+t][s]}for(n=0;n<t;n++)for(s=0;s<t;s++)s<t-6&&u(0)&&!u(1)&&u(2)&&u(3)&&u(4)&&!u(5)&&u(6)&&(s>=4&&!(u(-4)||u(-3)||u(-2)||u(-1))&&(r+=40),s<t-10&&!(u(7)||u(8)||u(9)||u(10))&&(r+=40)),n<t-6&&l(0)&&!l(1)&&l(2)&&l(3)&&l(4)&&!l(5)&&l(6)&&(n>=4&&!(l(-4)||l(-3)||l(-2)||l(-1))&&(r+=40),n<t-10&&!(l(7)||l(8)||l(9)||l(10))&&(r+=40));var d=0;for(n=0;n<t;n++)for(s=0;s<t;s++)1&e[n][s]&&d++;return r+=10*Math.floor(Math.abs(10-20*d/(t*t)))}e.exports={getMatrix:function(e){var i=t(e.version);r(i),n(i),o(i);for(var u=1/0,l=0,d=0;d<8;d++){a(i,e,d),s(i,e.ec_level,d);var p=c(i);p<u&&(u=p,l=d)}return a(i,e,l),s(i,e.ec_level,l),i.map((function(e){return e.map((function(e){return 1&e}))}))},init:t,fillFinders:r,fillAlignAndTiming:n,fillStub:o,fillReserved:s,fillData:a,calculatePenalty:c}},7100:(e,t,r)=>{"use strict";var n=r(9796),o=r(9291),i=new Buffer([137,80,78,71,13,10,26,10]),s=new Buffer([0,0,0,13,73,72,68,82,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0]),a=new Buffer([0,0,0,0,73,68,65,84]),c=new Buffer([0,0,0,0,73,69,78,68,174,66,96,130]);e.exports={bitmap:function(e,t,r){var n=e.length,o=(n+2*r)*t,i=new Buffer((o+1)*o);i.fill(255);for(var s=0;s<o;s++)i[s*(o+1)]=0;for(s=0;s<n;s++)for(var a=0;a<n;a++)if(e[s][a]){var c=((r+s)*(o+1)+(r+a))*t+1;i.fill(0,c,c+t);for(var u=1;u<t;u++)i.copy(i,c+u*(o+1),c,c+t)}return{data:i,size:o}},png:function(e,t){t.push(i);var r=Buffer.concat([s]);r.writeUInt32BE(e.size,8),r.writeUInt32BE(e.size,12),r.writeUInt32BE(o(r.slice(4,-4)),21),t.push(r);var u=Buffer.concat([a,n.deflateSync(e.data,{level:9}),new Buffer(4)]);u.writeUInt32BE(u.length-12,0),u.writeUInt32BE(o(u.slice(4,-4)),u.length-4),t.push(u),t.push(c),t.push(null)}}},247:(e,t,r)=>{"use strict";var n=r(3381),o=r(2126),i=r(9691);function s(e){return JSON.parse(JSON.stringify(e))}var a=["L","M","Q","H"],c=[[],[26,7,1,10,1,13,1,17,1],[44,10,1,16,1,22,1,28,1],[70,15,1,26,1,36,2,44,2],[100,20,1,36,2,52,2,64,4],[134,26,1,48,2,72,4,88,4],[172,36,2,64,4,96,4,112,4],[196,40,2,72,4,108,6,130,5],[242,48,2,88,4,132,6,156,6],[292,60,2,110,5,160,8,192,8],[346,72,4,130,5,192,8,224,8],[404,80,4,150,5,224,8,264,11],[466,96,4,176,8,260,10,308,11],[532,104,4,198,9,288,12,352,16],[581,120,4,216,9,320,16,384,16],[655,132,6,240,10,360,12,432,18],[733,144,6,280,10,408,17,480,16],[815,168,6,308,11,448,16,532,19],[901,180,6,338,13,504,18,588,21],[991,196,7,364,14,546,21,650,25],[1085,224,8,416,16,600,20,700,25],[1156,224,8,442,17,644,23,750,25],[1258,252,9,476,17,690,23,816,34],[1364,270,9,504,18,750,25,900,30],[1474,300,10,560,20,810,27,960,32],[1588,312,12,588,21,870,29,1050,35],[1706,336,12,644,23,952,34,1110,37],[1828,360,12,700,25,1020,34,1200,40],[1921,390,13,728,26,1050,35,1260,42],[2051,420,14,784,28,1140,38,1350,45],[2185,450,15,812,29,1200,40,1440,48],[2323,480,16,868,31,1290,43,1530,51],[2465,510,17,924,33,1350,45,1620,54],[2611,540,18,980,35,1440,48,1710,57],[2761,570,19,1036,37,1530,51,1800,60],[2876,570,19,1064,38,1590,53,1890,63],[3034,600,20,1120,40,1680,56,1980,66],[3196,630,21,1204,43,1770,59,2100,70],[3362,660,22,1260,45,1860,62,2220,74],[3532,720,24,1316,47,1950,65,2310,77],[3706,750,25,1372,49,2040,68,2430,81]];function u(e,t){var r,n=1;for(e.data1?r=Math.ceil(e.data1.length/8):n=10;n<10;n++){if((o=c[n][t]).data_len>=r)return s(o)}for(e.data10?r=Math.ceil(e.data10.length/8):n=27;n<27;n++){if((o=c[n][t]).data_len>=r)return s(o)}for(r=Math.ceil(e.data27.length/8);n<41;n++){var o;if((o=c[n][t]).data_len>=r)return s(o)}throw new Error("Too much data")}function l(e,t){var r=new Buffer(t.data_len);r.fill(0);for(var n=(e=t.version<10?e.data1:t.version<27?e.data10:e.data27).length,i=0;i<n;i+=8){for(var s=0,a=0;a<8;a++)s=s<<1|(e[i+a]?1:0);r[i/8]=s}var c=236;for(i=Math.ceil((n+4)/8);i<r.length;i++)r[i]=c,c=236==c?17:236;var u=0;return t.blocks=t.blocks.map((function(e){var n=r.slice(u,u+e);return u+=e,t.ec.push(o(n,t.ec_len)),n})),t}c=c.map((function(e,t){if(!t)return{};for(var r={},n=1;n<8;n+=2){for(var o=e[0]-e[n],i=e[n+1],s=a[n/2|0],c={version:t,ec_level:s,data_len:o,ec_len:e[n]/i,blocks:[],ec:[]},u=i,l=o;u>0;u--){var d=l/u|0;c.blocks.push(d),l-=d}r[s]=c}return r})),e.exports={QR:function(e,t,r){t=a.indexOf(t)>-1?t:"M";var o=n(e,r),s=l(o,u(o,t));return i.getMatrix(s)},getTemplate:u,fillTemplate:l}},7318:(e,t,r)=>{"use strict";var n=r(2781).Readable,o=r(247).QR,i=r(7100),s=r(1559),a=function(){},c={parse_url:!1,ec_level:"M",size:5,margin:4,customize:null},u={parse_url:!1,ec_level:"M",margin:1,size:0};function l(e,t){e="string"==typeof e?{ec_level:e}:e||{};var r={type:String(t||e.type||"png").toLowerCase()},n="png"==r.type?c:u;for(var o in n)r[o]=o in e?e[o]:n[o];return r}e.exports={matrix:o,image:function(e,t){t=l(t);var r=o(e,t.ec_level,t.parse_url),c=new n;switch(c._read=a,t.type){case"svg":case"pdf":case"eps":process.nextTick((function(){s[t.type](r,c,t.margin,t.size)}));break;case"svgpath":process.nextTick((function(){var e=s.svg_object(r,t.margin,t.size);c.push(e.path),c.push(null)}));break;default:process.nextTick((function(){var e=i.bitmap(r,t.size,t.margin);t.customize&&t.customize(e),i.png(e,c)}))}return c},imageSync:function(e,t){t=l(t);var r,n=o(e,t.ec_level,t.parse_url),a=[];switch(t.type){case"svg":case"pdf":case"eps":s[t.type](n,a,t.margin,t.size),r=a.filter(Boolean).join("");break;default:var c=i.bitmap(n,t.size,t.margin);t.customize&&t.customize(c),i.png(c,a),r=Buffer.concat(a.filter(Boolean))}return r},svgObject:function(e,t){t=l(t,"svg");var r=o(e,t.ec_level);return s.svg_object(r,t.margin)}}},1559:e=>{"use strict";function t(e){for(var t=e.length,r=[],n=-1;n<=t;n++)r[n]=[];var o=[];for(n=0;n<t;n++)for(var i=0;i<t;i++)r[n][i]||(r[n][i]=1,s(n,i)?s(n-1,i)||o.push(a(n,i,"right")):s(n,i-1)&&o.push(a(n,i,"down")));return o;function s(r,n){return!(r<0||n<0||r>=t||n>=t)&&!!e[r][n]}function a(e,t,n){r[e][t]=1;var o=[];o.push(["M",t,e]);var i=e,a=t,c=0;do{switch(n){case"right":r[i][a]=1,s(i,a)?(r[i-1][a]=1,s(i-1,a)?(o.push(["h",c]),c=0,n="up"):(c++,a++)):(o.push(["h",c]),c=0,n="down");break;case"left":r[i-1][a-1]=1,s(i-1,a-1)?(r[i][a-1]=1,s(i,a-1)?(o.push(["h",-c]),c=0,n="down"):(c++,a--)):(o.push(["h",-c]),c=0,n="up");break;case"down":r[i][a-1]=1,s(i,a-1)?(r[i][a]=1,s(i,a)?(o.push(["v",c]),c=0,n="right"):(c++,i++)):(o.push(["v",c]),c=0,n="left");break;case"up":r[i-1][a]=1,s(i-1,a)?(r[i-1][a-1]=1,s(i-1,a-1)?(o.push(["v",-c]),c=0,n="left"):(c++,i--)):(o.push(["v",-c]),c=0,n="right")}}while(i!=e||a!=t);return o}}function r(e,r,n){t(e).forEach((function(e){for(var t="",o=0;o<e.length;o++){var i=e[o];if("M"===i[0])t+="M"+(i[1]+n)+" "+(i[2]+n);else t+=i.join("")}t+="z",r.push(t)}))}e.exports={svg:function(e,t,n,o){var i=e.length+2*n;if(t.push('<svg xmlns="http://www.w3.org/2000/svg" '),o>0){var s=i*o;t.push('width="'+s+'" height="'+s+'" ')}t.push('viewBox="0 0 '+i+" "+i+'">'),t.push('<path d="'),r(e,t,n),t.push('"/></svg>'),t.push(null)},eps:function(e,r,n){var o=e.length,i=9*(o+2*n);r.push(["%!PS-Adobe-3.0 EPSF-3.0","%%BoundingBox: 0 0 "+i+" "+i,"/h { 0 rlineto } bind def","/v { 0 exch neg rlineto } bind def","/M { neg "+(o+n)+" add moveto } bind def","/z { closepath } bind def","9 9 scale",""].join("\n")),t(e).forEach((function(e){for(var t="",o=0;o<e.length;o++){var i=e[o];if("M"===i[0])t+=i[1]+n+" "+i[2]+" M ";else t+=i[1]+" "+i[0]+" "}t+="z\n",r.push(t)})),r.push("fill\n%%EOF\n"),r.push(null)},pdf:function(e,r,n){var o=e.length,i=9*(o+2*n),s=["%PDF-1.0\n\n","1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj\n","2 0 obj << /Type /Pages /Count 1 /Kids [ 3 0 R ] >> endobj\n"];s.push("3 0 obj << /Type /Page /Parent 2 0 R /Resources <<>> /Contents 4 0 R /MediaBox [ 0 0 "+i+" "+i+" ] >> endobj\n");var a="9 0 0 9 0 0 cm\n";a+=t(e).map((function(e){for(var t,r,i="",s=0;s<e.length;s++){var a=e[s];switch(a[0]){case"M":i+=(t=a[1]+n)+" "+(r=o-a[2]+n)+" m ";break;case"h":i+=(t+=a[1])+" "+r+" l ";break;case"v":i+=t+" "+(r-=a[1])+" l "}}return i+="h"})).join("\n"),a+="\nf\n",s.push("4 0 obj << /Length "+a.length+" >> stream\n"+a+"endstream\nendobj\n");for(var c="xref\n0 5\n0000000000 65535 f \n",u=1,l=s[0].length;u<5;u++)c+=("0000000000"+l).substr(-10)+" 00000 n \n",l+=s[u].length;s.push(c,"trailer << /Root 1 0 R /Size 5 >>\n","startxref\n"+l+"\n%%EOF\n"),r.push(s.join("")),r.push(null)},svg_object:function(e,t){var n=[];return r(e,n,t),{size:e.length+2*t,path:n.filter(Boolean).join("")}}}},7793:(e,t,r)=>{var n=r(9977),o=r(6688),i="[47m  [0m",s=function(e){return e?"[40m  [0m":i},a=function(e){return{times:function(t){return new Array(t).join(e)}}};e.exports={error:o.L,generate:function(e,t,r){"function"==typeof t&&(r=t,t={});var o=new n(-1,this.error);o.addData(e),o.make();var c="";if(t&&t.small){var u=!1,l=o.getModuleCount(),d=o.modules.slice(),p=l%2==1;p&&d.push(function(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=t;return r}(l,u));var h={WHITE_ALL:"█",WHITE_BLACK:"▀",BLACK_WHITE:"▄",BLACK_ALL:" "},f=a(h.BLACK_WHITE).times(l+3),g=a(h.WHITE_BLACK).times(l+3);c+=f+"\n";for(var m=0;m<l;m+=2){c+=h.WHITE_ALL;for(var _=0;_<l;_++)d[m][_]===u&&d[m+1][_]===u?c+=h.WHITE_ALL:d[m][_]===u&&true===d[m+1][_]?c+=h.WHITE_BLACK:true===d[m][_]&&d[m+1][_]===u?c+=h.BLACK_WHITE:c+=h.BLACK_ALL;c+=h.WHITE_ALL+"\n"}p||(c+=g)}else{var v=a(i).times(o.getModuleCount()+3);c+=v+"\n",o.modules.forEach((function(e){c+=i,c+=e.map(s).join(""),c+=i+"\n"})),c+=v}r?r(c):console.log(c)},setErrorLevel:function(e){this.error=o[e]||this.error}}},8041:(e,t,r)=>{var n=r(5451);function o(e){this.mode=n.MODE_8BIT_BYTE,this.data=e}o.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=o},3182:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},6688:e=>{e.exports={L:1,M:0,Q:3,H:2}},7633:e=>{e.exports={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7}},2956:e=>{for(var t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},r=0;r<8;r++)t.EXP_TABLE[r]=1<<r;for(r=8;r<256;r++)t.EXP_TABLE[r]=t.EXP_TABLE[r-4]^t.EXP_TABLE[r-5]^t.EXP_TABLE[r-6]^t.EXP_TABLE[r-8];for(r=0;r<255;r++)t.LOG_TABLE[t.EXP_TABLE[r]]=r;e.exports=t},5451:e=>{e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},9437:(e,t,r)=>{var n=r(2956);function o(e,t){if(void 0===e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0===e[r];)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}o.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var i=0;i<e.getLength();i++)t[r+i]^=n.gexp(n.glog(this.get(r))+n.glog(e.get(i)));return new o(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=n.glog(this.get(0))-n.glog(e.get(0)),r=new Array(this.getLength()),i=0;i<this.getLength();i++)r[i]=this.get(i);for(var s=0;s<e.getLength();s++)r[s]^=n.gexp(n.glog(e.get(s))+t);return new o(r,0).mod(e)}},e.exports=o},9079:(e,t,r)=>{var n=r(6688);function o(e,t){this.totalCount=e,this.dataCount=t}o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(e,t){var r=o.getRsBlockTable(e,t);if(void 0===r)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,i=[],s=0;s<n;s++)for(var a=r[3*s+0],c=r[3*s+1],u=r[3*s+2],l=0;l<a;l++)i.push(new o(c,u));return i},o.getRsBlockTable=function(e,t){switch(t){case n.L:return o.RS_BLOCK_TABLE[4*(e-1)+0];case n.M:return o.RS_BLOCK_TABLE[4*(e-1)+1];case n.Q:return o.RS_BLOCK_TABLE[4*(e-1)+2];case n.H:return o.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=o},9490:(e,t,r)=>{var n=r(5451),o=r(9437),i=r(2956),s=r(7633),a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;a.getBCHDigit(t)-a.getBCHDigit(a.G15)>=0;)t^=a.G15<<a.getBCHDigit(t)-a.getBCHDigit(a.G15);return(e<<10|t)^a.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;a.getBCHDigit(t)-a.getBCHDigit(a.G18)>=0;)t^=a.G18<<a.getBCHDigit(t)-a.getBCHDigit(a.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},getPatternPosition:function(e){return a.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case s.PATTERN000:return(t+r)%2==0;case s.PATTERN001:return t%2==0;case s.PATTERN010:return r%3==0;case s.PATTERN011:return(t+r)%3==0;case s.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case s.PATTERN101:return t*r%2+t*r%3==0;case s.PATTERN110:return(t*r%2+t*r%3)%2==0;case s.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new o([1],0),r=0;r<e;r++)t=t.multiply(new o([1,i.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){var t=e.getModuleCount(),r=0,n=0,o=0;for(n=0;n<t;n++)for(o=0;o<t;o++){for(var i=0,s=e.isDark(n,o),a=-1;a<=1;a++)if(!(n+a<0||t<=n+a))for(var c=-1;c<=1;c++)o+c<0||t<=o+c||0===a&&0===c||s===e.isDark(n+a,o+c)&&i++;i>5&&(r+=3+i-5)}for(n=0;n<t-1;n++)for(o=0;o<t-1;o++){var u=0;e.isDark(n,o)&&u++,e.isDark(n+1,o)&&u++,e.isDark(n,o+1)&&u++,e.isDark(n+1,o+1)&&u++,0!==u&&4!==u||(r+=3)}for(n=0;n<t;n++)for(o=0;o<t-6;o++)e.isDark(n,o)&&!e.isDark(n,o+1)&&e.isDark(n,o+2)&&e.isDark(n,o+3)&&e.isDark(n,o+4)&&!e.isDark(n,o+5)&&e.isDark(n,o+6)&&(r+=40);for(o=0;o<t;o++)for(n=0;n<t-6;n++)e.isDark(n,o)&&!e.isDark(n+1,o)&&e.isDark(n+2,o)&&e.isDark(n+3,o)&&e.isDark(n+4,o)&&!e.isDark(n+5,o)&&e.isDark(n+6,o)&&(r+=40);var l=0;for(o=0;o<t;o++)for(n=0;n<t;n++)e.isDark(n,o)&&l++;return r+=10*(Math.abs(100*l/t/t-50)/5)}};e.exports=a},9977:(e,t,r)=>{var n=r(8041),o=r(9490),i=r(9437),s=r(9079),a=r(3182);function c(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}c.prototype={addData:function(e){var t=new n(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=s.getRSBlocks(e,this.errorCorrectLevel),r=new a,n=0,i=0;i<t.length;i++)n+=t[i].dataCount;for(var c=0;c<this.dataList.length;c++){var u=this.dataList[c];r.put(u.mode,4),r.put(u.getLength(),o.getLengthInBits(u.mode,e)),u.write(r)}if(r.getLengthInBits()<=8*n)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null===this.dataCache&&(this.dataCache=c.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+r][t+n]=0<=r&&r<=6&&(0===n||6===n)||0<=n&&n<=6&&(0===r||6===r)||2<=r&&r<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=o.getLostPoint(this);(0===r||e>n)&&(e=n,t=r)}return t},createMovieClip:function(e,t,r){var n=e.createEmptyMovieClip(t,r);this.make();for(var o=0;o<this.modules.length;o++)for(var i=1*o,s=0;s<this.modules[o].length;s++){var a=1*s;this.modules[o][s]&&(n.beginFill(0,100),n.moveTo(a,i),n.lineTo(a+1,i),n.lineTo(a+1,i+1),n.lineTo(a,i+1),n.endFill())}return n},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null===this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null===this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=o.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],i=e[r];if(null===this.modules[n][i])for(var s=-2;s<=2;s++)for(var a=-2;a<=2;a++)2===Math.abs(s)||2===Math.abs(a)||0===s&&0===a?this.modules[n+s][i+a]=!0:this.modules[n+s][i+a]=!1}},setupTypeNumber:function(e){for(var t,r=o.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++)t=!e&&1==(r>>n&1),this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=t;for(var i=0;i<18;i++)t=!e&&1==(r>>i&1),this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=t},setupTypeInfo:function(e,t){for(var r,n=this.errorCorrectLevel<<3|t,i=o.getBCHTypeInfo(n),s=0;s<15;s++)r=!e&&1==(i>>s&1),s<6?this.modules[s][8]=r:s<8?this.modules[s+1][8]=r:this.modules[this.moduleCount-15+s][8]=r;for(var a=0;a<15;a++)r=!e&&1==(i>>a&1),a<8?this.modules[8][this.moduleCount-a-1]=r:a<9?this.modules[8][15-a-1+1]=r:this.modules[8][15-a-1]=r;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,n=this.moduleCount-1,i=7,s=0,a=this.moduleCount-1;a>0;a-=2)for(6===a&&a--;;){for(var c=0;c<2;c++)if(null===this.modules[n][a-c]){var u=!1;s<e.length&&(u=1==(e[s]>>>i&1)),o.getMask(t,n,a-c)&&(u=!u),this.modules[n][a-c]=u,-1===--i&&(s++,i=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}}},c.PAD0=236,c.PAD1=17,c.createData=function(e,t,r){for(var n=s.getRSBlocks(e,t),i=new a,u=0;u<r.length;u++){var l=r[u];i.put(l.mode,4),i.put(l.getLength(),o.getLengthInBits(l.mode,e)),l.write(i)}for(var d=0,p=0;p<n.length;p++)d+=n[p].dataCount;if(i.getLengthInBits()>8*d)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*d+")");for(i.getLengthInBits()+4<=8*d&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*d||(i.put(c.PAD0,8),i.getLengthInBits()>=8*d));)i.put(c.PAD1,8);return c.createBytes(i,n)},c.createBytes=function(e,t){for(var r=0,n=0,s=0,a=new Array(t.length),c=new Array(t.length),u=0;u<t.length;u++){var l=t[u].dataCount,d=t[u].totalCount-l;n=Math.max(n,l),s=Math.max(s,d),a[u]=new Array(l);for(var p=0;p<a[u].length;p++)a[u][p]=255&e.buffer[p+r];r+=l;var h=o.getErrorCorrectPolynomial(d),f=new i(a[u],h.getLength()-1).mod(h);c[u]=new Array(h.getLength()-1);for(var g=0;g<c[u].length;g++){var m=g+f.getLength()-c[u].length;c[u][g]=m>=0?f.get(m):0}}for(var _=0,v=0;v<t.length;v++)_+=t[v].totalCount;for(var E=new Array(_),y=0,b=0;b<n;b++)for(var S=0;S<t.length;S++)b<a[S].length&&(E[y++]=a[S][b]);for(var C=0;C<s;C++)for(var A=0;A<t.length;A++)C<c[A].length&&(E[y++]=c[A][C]);return E},e.exports=c},984:(e,t,r)=>{const n=r(9491),o=r(1017),i=r(7147);let s;try{s=r(2884)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const u="win32"===process.platform,l=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||i[t],e[t+="Sync"]=e[t]||i[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===s)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},d=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),l(t);let o=0,i=null,a=0;const u=(e,n)=>e?r(e):(a=n.length,0===a?r():void n.forEach((e=>{const n=s=>{if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&o<t.maxBusyTries)return o++,setTimeout((()=>p(e,t,n)),100*o);if("EMFILE"===s.code&&c<t.emfileWait)return setTimeout((()=>p(e,t,n)),c++);"ENOENT"===s.code&&(s=null)}c=0,(e=>{i=i||e,0==--a&&r(i)})(s)};p(e,t,n)})));if(t.disableGlob||!s.hasMagic(e))return u(null,[e]);t.lstat(e,((r,n)=>{if(!r)return u(null,[e]);s(e,t.glob,u)}))},p=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.lstat(e,((n,o)=>n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&u&&h(e,t,n,r),o&&o.isDirectory()?g(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return u?h(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)})))))},h=(e,t,r,o)=>{n(e),n(t),n("function"==typeof o),t.chmod(e,438,(n=>{n?o("ENOENT"===n.code?null:r):t.stat(e,((n,i)=>{n?o("ENOENT"===n.code?null:r):i.isDirectory()?g(e,t,r,o):t.unlink(e,o)}))}))},f=(e,t,r)=>{n(e),n(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}let o;try{o=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}o.isDirectory()?v(e,t,r):t.unlinkSync(e)},g=(e,t,r,o)=>{n(e),n(t),n("function"==typeof o),t.rmdir(e,(n=>{!n||"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code?n&&"ENOTDIR"===n.code?o(r):o(n):m(e,t,o)}))},m=(e,t,r)=>{n(e),n(t),n("function"==typeof r),t.readdir(e,((n,i)=>{if(n)return r(n);let s,a=i.length;if(0===a)return t.rmdir(e,r);i.forEach((n=>{d(o.join(e,n),t,(n=>{if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))}))}))}))},_=(e,t)=>{let r;if(l(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=s.sync(e,t.glob)}if(r.length)for(let e=0;e<r.length;e++){const n=r[e];let o;try{o=t.lstatSync(n)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&u&&f(n,t,e)}try{o&&o.isDirectory()?v(n,t,null):t.unlinkSync(n)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return u?f(n,t,e):v(n,t,e);if("EISDIR"!==e.code)throw e;v(n,t,e)}}},v=(e,t,r)=>{n(e),n(t);try{t.rmdirSync(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code)throw r;"ENOTEMPTY"!==n.code&&"EEXIST"!==n.code&&"EPERM"!==n.code||E(e,t)}},E=(e,t)=>{n(e),n(t),t.readdirSync(e).forEach((r=>_(o.join(e,r),t)));const r=u?100:1;let i=0;for(;;){let n=!0;try{const r=t.rmdirSync(e,t);return n=!1,r}finally{if(++i<r&&n)continue}}};e.exports=d,d.sync=_},2453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeWellKnownAuthMetadata=function(e,t){if(e===i.UNPARSEABLE_AUTH_TYPE||e===i.UNKNOWN_RESERVED_AUTH_TYPE)throw new Error(`Illegal WellKnownAuthType[${e.toString()}]. Only allowed AuthType should be used`);const r=(0,o.createBuffer)(a);return r.writeUInt8(e.identifier|l),n.LiteBuffer.concat([r,t])},t.encodeCustomAuthMetadata=function(e,t){const r=(0,o.toBuffer)(e);if(r.byteLength!==e.length)throw new Error("Custom auth type must be US_ASCII characters only");if(r.byteLength<1||r.byteLength>128)throw new Error("Custom auth type must have a strictly positive length that fits on 7 unsigned bits, ie 1-128");const i=(0,o.createBuffer)(c+r.byteLength);return i.writeUInt8(r.byteLength-1),i.write(e,c),n.LiteBuffer.concat([i,t])},t.encodeSimpleAuthMetadata=function(e,t){const r=(0,o.toBuffer)(e),s=(0,o.toBuffer)(t),c=r.byteLength;if(c>65535)throw new Error(`Username should be shorter than or equal to 65535 bytes length in UTF-8 encoding but the given was ${c}`);const d=a+u,p=(0,o.createBuffer)(d);return p.writeUInt8(i.SIMPLE.identifier|l),p.writeUInt16BE(c,1),n.LiteBuffer.concat([p,r,s])},t.encodeBearerAuthMetadata=function(e){const t=(0,o.toBuffer)(e),r=(0,o.createBuffer)(a);return r.writeUInt8(i.BEARER.identifier|l),n.LiteBuffer.concat([r,t])},t.decodeAuthMetadata=function(e){if(e.byteLength<1)throw new Error("Unable to decode Auth metadata. Not enough readable bytes");const t=e.readUInt8(),r=t&d;if(r!==t){const t=i.default.fromIdentifier(r);return{payload:e.slice(1),type:{identifier:t.identifier,string:t.string}}}{const r=t+1;if(e.byteLength<r+c)throw new Error("Unable to decode custom Auth type. Malformed length or auth type string");const n=e.toString("utf8",c,c+r);return{payload:e.slice(r+c),type:{identifier:i.UNPARSEABLE_AUTH_TYPE.identifier,string:n}}}},t.decodeSimpleAuthPayload=function(e){if(e.byteLength<u)throw new Error("Unable to decode Simple Auth Payload. Not enough readable bytes");const t=e.readUInt16BE();if(e.byteLength<t+u)throw new Error("Unable to decode Simple Auth Payload. Not enough readable bytes");const r=e.slice(u,u+t);return{password:e.slice(u+t),username:r}};var n=r(7771),o=r(3502),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(8063));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}const a=1,c=1,u=2,l=128,d=127},6145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeCompositeMetadata=function(e){let t=(0,o.createBuffer)(0);for(const[r,n]of e){const e="function"==typeof n?n():n;t=r instanceof i.default||"number"==typeof r||"WellKnownMimeType"===r.constructor.name?u(t,r,e):c(t,r,e)}return t},t.encodeAndAddCustomMetadata=c,t.encodeAndAddWellKnownMetadata=u,t.decodeMimeAndContentBuffersSlices=l,t.decodeMimeTypeFromMimeBuffer=d,t.encodeCustomMetadataHeader=p,t.encodeWellKnownMetadataHeader=h,t.decodeCompositeMetadata=f,t.WellKnownMimeTypeEntry=t.ReservedMimeTypeEntry=t.ExplicitMimeTimeEntry=t.CompositeMetadata=void 0;var n=r(7771),o=r(3502),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(8369));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}class a{constructor(e){this._buffer=e}iterator(){return f(this._buffer)}[Symbol.iterator](){return f(this._buffer)}}function c(e,t,r){return n.LiteBuffer.concat([e,p(t,r.byteLength),r])}function u(e,t,r){let o;return o=Number.isInteger(t)?t:t.identifier,n.LiteBuffer.concat([e,h(o,r.byteLength),r])}function l(e,t){const r=e.readInt8(t);let n,i=t;if((r&y)===y)n=e.slice(i,i+1),i+=1;else{const t=1+(255&r);if(!(e.byteLength>i+t))throw new Error("Metadata is malformed. Inappropriately formed Mime Length");n=e.slice(i,i+t+1),i+=t+1}if(e.byteLength>=i+3){const t=(0,o.readUInt24BE)(e,i);if(i+=3,e.byteLength>=t+i){return[n,e.slice(i,i+t)]}throw new Error("Metadata is malformed. Inappropriately formed Metadata Length or malformed content")}throw new Error("Metadata is malformed. Metadata Length is absent or malformed")}function d(e){if(e.length<2)throw new Error("Unable to decode explicit MIME type");return e.toString("ascii",1)}function p(e,t){const r=(0,o.createBuffer)(4+e.length),n=r.write(e,1);if(!function(e,t){let r=!0;for(let n=t,o=e.length;n<o;n++)if(e[n]>127){r=!1;break}return r}(r,1))throw new Error("Custom mime type must be US_ASCII characters only");if(n<1||n>128)throw new Error("Custom mime type must have a strictly positive length that fits on 7 unsigned bits, ie 1-128");return r.writeUInt8(n-1),(0,o.writeUInt24BE)(r,t,n+1),r}function h(e,t){const r=n.LiteBuffer.alloc(4);return r.writeUInt8(e|y),(0,o.writeUInt24BE)(r,t,1),r}function*f(e){const t=e.byteLength;let r=0;for(;r<t;){const t=l(e,r),o=t[0],s=t[1];if(n=s,r=r+o.byteLength+3+n.byteLength,!E(o)){const e=d(o);if(!e)throw new Error("MIME type cannot be null");yield new g(s,e);continue}const a=v(o),c=i.default.fromIdentifier(a);i.UNKNOWN_RESERVED_MIME_TYPE!==c?yield new _(s,c):yield new m(s,a)}var n}t.CompositeMetadata=a;class g{constructor(e,t){this._content=e,this._type=t}get content(){return this._content}get mimeType(){return this._type}}t.ExplicitMimeTimeEntry=g;class m{constructor(e,t){this._content=e,this._type=t}get content(){return this._content}get mimeType(){}get type(){return this._type}}t.ReservedMimeTypeEntry=m;class _{constructor(e,t){this._content=e,this._type=t}get content(){return this._content}get mimeType(){return this._type.string}get type(){return this._type}}function v(e){return E(e)?e.readInt8()&b:i.UNPARSEABLE_MIME_TYPE.identifier}function E(e){return 1===e.byteLength}t.WellKnownMimeTypeEntry=_;const y=128,b=127},7771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiteBuffer=t.Buffer=void 0;var n,o=(n=r(4300))&&n.__esModule?n:{default:n};const i="undefined"!=typeof global&&global.hasOwnProperty("Buffer");function s(e){return null==e||"utf8"===e||"utf-8"===e?"utf8":function(e){switch(e.length){case 4:if("UTF8"===e)return"utf8";if("ucs2"===e||"UCS2"===e)return"utf16le";if("utf8"===(e=`${e}`.toLowerCase()))return"utf8";if("ucs2"===e)return"utf16le";break;case 3:if("hex"===e||"HEX"===e||"hex"===`${e}`.toLowerCase())return"hex";break;case 5:if("ascii"===e)return"ascii";if("ucs-2"===e)return"utf16le";if("UTF-8"===e)return"utf8";if("ASCII"===e)return"ascii";if("UCS-2"===e)return"utf16le";if("utf-8"===(e=`${e}`.toLowerCase()))return"utf8";if("ascii"===e)return"ascii";if("ucs-2"===e)return"utf16le";break;case 6:if("base64"===e)return"base64";if("latin1"===e||"binary"===e)return"latin1";if("BASE64"===e)return"base64";if("LATIN1"===e||"BINARY"===e)return"latin1";if("base64"===(e=`${e}`.toLowerCase()))return"base64";if("latin1"===e||"binary"===e)return"latin1";break;case 7:if("utf16le"===e||"UTF16LE"===e||"utf16le"===`${e}`.toLowerCase())return"utf16le";break;case 8:if("utf-16le"===e||"UTF-16LE"===e||"utf-16le"===`${e}`.toLowerCase())return"utf16le";break;default:if(""===e)return"utf8"}}(e)}function a(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}const c=["base64","hex","ascii","binary","latin1","ucs2","utf16le"];function u(e="utf8",t=!0){if("string"!=typeof e||t&&""===e){if(!t)return"utf8";throw new TypeError(`Unknown encoding: ${e}`)}const r=s(e);if(void 0===r)throw new TypeError(`Unknown encoding: ${e}`);return c.includes(e)&&function(e){throw new Error(e?`Not implemented: ${e}`:"Not implemented")}(`"${e}" encoding`),r}const l={ascii:{byteLength:e=>e.length},base64:{byteLength:e=>function(e,t){61===e.charCodeAt(t-1)&&t--;t>1&&61===e.charCodeAt(t-1)&&t--;return 3*t>>>2}(e,e.length)},hex:{byteLength:e=>e.length>>>1},latin1:{byteLength:e=>e.length},ucs2:{byteLength:e=>2*e.length},utf16le:{byteLength:e=>2*e.length},utf8:{byteLength:e=>p(e).length}};const d=4096;function p(e,t=1/0){let r,n=t;const o=e.length;let i=null;const s=[];for(let t=0;t<o;++t){if(r=e.charCodeAt(t),r>55295&&r<57344){if(!i){if(r>56319){(n-=3)>-1&&s.push(239,191,189);continue}if(t+1===o){(n-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(n-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(n-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((n-=1)<0)break;s.push(r)}else if(r<2048){if((n-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((n-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function h(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[o+1],n=e[o+2],a=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(e){const t=e.length;if(t<=d)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=d));return r}(n)}class f extends Uint8Array{constructor(e,t,r){super(e,t,r)}static alloc(e,t=0,r="utf8"){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);const n=new f(e);if(0===e)return n;let o;if("string"==typeof t)r=u(r),1===t.length&&"utf8"===r?n.fill(t.charCodeAt(0)):o=f.from(t,r);else if("number"==typeof t)n.fill(t);else if(a(t,Uint8Array)){if(0===t.length)throw new TypeError(`The argument "value" is invalid. Received ${t.constructor.name} []`);o=t}if(o){o.length>n.length&&(o=o.subarray(0,n.length));let t=0;for(;t<e&&(n.set(o,t),t+=o.length,!(t+o.length>=e)););t!==e&&n.set(o.subarray(0,e-t),t)}return n}static allocUnsafe(e){return new f(e)}static byteLength(e,t="utf8"){return"string"!=typeof e?e.byteLength:(t=s(t)||"utf8",l[t].byteLength(e))}static concat(e,t){if(null==t){t=0;for(const r of e)t+=r.length}const r=new f(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}static from(e,t,r){const n="string"==typeof t?void 0:t;let o="string"==typeof t?t:void 0;if("string"==typeof e||"String"===e.constructor.name){if(e=e.toString(),o=u(o,!1),"utf8"===o)return"undefined"!=typeof TextEncoder?new f((new TextEncoder).encode(e).buffer):new f(p(e));throw new TypeError("Unknown encoding: "+o)}return new f(e,n,r)}static isBuffer(e){return a(e,f)}static isEncoding(e){return"string"==typeof e&&0!==e.length&&void 0!==s(e)}copy(e,t=0,r=0,n=this.length){const o=this.subarray(r,n);return e.set(o,t),o.length}equals(e){if(!a(e,Uint8Array))throw new TypeError('The "otherBuffer" argument must be an instance of Buffer or Uint8Array. Received type '+typeof e);if(this===e)return!0;if(this.byteLength!==e.byteLength)return!1;for(let t=0;t<this.length;t++)if(this[t]!==e[t])return!1;return!0}readDoubleBE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat64(e)}readDoubleLE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat64(e,!0)}readFloatBE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat32(e)}readFloatLE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getFloat32(e,!0)}readInt8(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt8(e)}readInt16BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt16(e)}readInt16LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt16(e,!0)}readInt32BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt32(e)}readInt32LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getInt32(e,!0)}readUInt8(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint8(e)}readUInt16BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint16(e)}readUInt16LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint16(e,!0)}readUInt32BE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint32(e)}readUInt32LE(e=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).getUint32(e,!0)}slice(e=0,t=this.length){return this.subarray(e,t)}subarray(e=0,t=this.length){return new f(super.subarray(e,t))}toJSON(){return{data:Array.from(this),type:"Buffer"}}toString(e="utf8",t=0,r=this.length){if(e=u(e),"undefined"!=typeof TextDecoder){const e=this.subarray(t,r);return(new TextDecoder).decode(e)}return this.slowToString(e,t,r)}slowToString(e="utf8",t=0,r=this.length){if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";if("utf8"===(e=u(e)))return h(this,t,r);throw new TypeError("Unsupported encoding: "+e)}write(e,t=0,r=this.length,n="utf8"){if("utf8"===(n=u(n))){if("undefined"!=typeof TextEncoder){const n=(new TextEncoder).encode(e);return this.set(n,t),n.byteLength>r-t?r-t:n.byteLength}return function(e,t,r,n){return function(e,t,r,n){let o=0;for(;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}(p(t,e.length-r),e,r,n)}(this,e,t,r)}throw new TypeError("Unknown encoding: "+n)}writeDoubleBE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat64(t,e),t+8}writeDoubleLE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat64(t,e,!0),t+8}writeFloatBE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat32(t,e),t+4}writeFloatLE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setFloat32(t,e,!0),t+4}writeInt8(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt8(t,e),t+1}writeInt16BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt16(t,e),t+2}writeInt16LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt16(t,e,!0),t+2}writeInt32BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint32(t,e),t+4}writeInt32LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setInt32(t,e,!0),t+4}writeUInt8(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint8(t,e),t+1}writeUInt16BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint16(t,e),t+2}writeUInt16LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint16(t,e,!0),t+2}writeUInt32BE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint32(t,e),t+4}writeUInt32LE(e,t=0){return new DataView(this.buffer,this.byteOffset,this.byteLength).setUint32(t,e,!0),t+4}}t.Buffer=f,i||(o.default.hasOwnProperty("Buffer")&&Object.defineProperty(o.default,"Buffer",{configurable:!0,enumerable:!1,value:f,writable:!0}),Object.defineProperty(window,"Buffer",{configurable:!0,enumerable:!1,value:f,writable:!0}));const g=i?global.Buffer:f;t.LiteBuffer=g},4776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeFrameWithLength=function(e,t){const r=(0,a.readUInt24BE)(e,0);return l(e.slice(u,u+r),t)},t.deserializeFrames=function(e,t){const r=[];let n=0;for(;n+u<e.length;){const o=(0,a.readUInt24BE)(e,n),i=n+u,s=i+o;if(s>e.length)break;const c=l(e.slice(i,s),t);r.push(c),n=s}return[r,e.slice(n,e.length)]},t.serializeFrameWithLength=function(e,t){const r=d(e,t),n=(0,a.createBuffer)(r.length+u);return(0,a.writeUInt24BE)(n,r.length,0),r.copy(n,u,0,r.length),n},t.deserializeFrame=l,t.serializeFrame=d,t.sizeOfFrame=function(e,t){switch(t=t||s.Utf8Encoders,e.type){case i.FRAME_TYPES.SETUP:return function(e,t){const r=null!=e.resumeToken?t.resumeToken.byteLength(e.resumeToken):0,n=null!=e.metadataMimeType?t.metadataMimeType.byteLength(e.metadataMimeType):0,o=null!=e.dataMimeType?t.dataMimeType.byteLength(e.dataMimeType):0,i=S(e,t);return c+p+(r?h+r:0)+n+o+i}(e,t);case i.FRAME_TYPES.PAYLOAD:return function(e,t){const r=S(e,t);return c+r}(e,t);case i.FRAME_TYPES.ERROR:return function(e,t){const r=null!=e.message?t.message.byteLength(e.message):0;return c+f+r}(e,t);case i.FRAME_TYPES.KEEPALIVE:return function(e,t){const r=null!=e.data?t.data.byteLength(e.data):0;return c+g+r}(e,t);case i.FRAME_TYPES.REQUEST_FNF:case i.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t){const r=S(e,t);return c+r}(e,t);case i.FRAME_TYPES.REQUEST_STREAM:case i.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t){const r=S(e,t);return c+_+r}(e,t);case i.FRAME_TYPES.REQUEST_N:return c+v;case i.FRAME_TYPES.RESUME:return function(e,t){const r=t.resumeToken.byteLength(e.resumeToken);return c+E+r}(e,t);case i.FRAME_TYPES.RESUME_OK:return c+y;case i.FRAME_TYPES.CANCEL:return c;case i.FRAME_TYPES.LEASE:return function(e,t){const r=null!=e.metadata?t.metadata.byteLength(e.metadata):0;return c+m+r}(e,t);default:(0,o.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,i.getFrameTypeName)(e.type))}};var n,o=(n=r(3759))&&n.__esModule?n:{default:n},i=r(1148),s=r(9882),a=r(3502);const c=6,u=3;function l(e,t){t=t||s.Utf8Encoders;let r=0;const n=e.readInt32BE(r);r+=4,(0,o.default)(n>=0,"RSocketBinaryFraming: Invalid frame, expected a positive stream id, got `%s.",n);const u=e.readUInt16BE(r);r+=2;const l=u>>>i.FRAME_TYPE_OFFFSET,d=u&i.FLAGS_MASK;switch(l){case i.FRAME_TYPES.SETUP:return function(e,t,r,n){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid SETUP frame, expected stream id to be 0.");const s=e.length;let a=c;const u=e.readUInt16BE(a);a+=2;const l=e.readUInt16BE(a);a+=2;const d=e.readInt32BE(a);a+=4,(0,o.default)(d>=0&&d<=i.MAX_KEEPALIVE,"RSocketBinaryFraming: Invalid SETUP frame, expected keepAlive to be >= 0 and <= %s. Got `%s`.",i.MAX_KEEPALIVE,d);const p=e.readInt32BE(a);a+=4,(0,o.default)(p>=0&&p<=i.MAX_LIFETIME,"RSocketBinaryFraming: Invalid SETUP frame, expected lifetime to be >= 0 and <= %s. Got `%s`.",i.MAX_LIFETIME,p);let h=null;if(r&i.FLAGS.RESUME_ENABLE){const t=e.readInt16BE(a);a+=2,(0,o.default)(t>=0&&t<=i.MAX_RESUME_LENGTH,"RSocketBinaryFraming: Invalid SETUP frame, expected resumeToken length to be >= 0 and <= %s. Got `%s`.",i.MAX_RESUME_LENGTH,t),h=n.resumeToken.decode(e,a,a+t),a+=t}const f=e.readUInt8(a);a+=1;const g=n.metadataMimeType.decode(e,a,a+f);a+=f;const m=e.readUInt8(a);a+=1;const _=n.dataMimeType.decode(e,a,a+m);a+=m;const v={data:null,dataMimeType:_,flags:r,keepAlive:d,length:s,lifetime:p,majorVersion:u,metadata:null,metadataMimeType:g,minorVersion:l,resumeToken:h,streamId:t,type:i.FRAME_TYPES.SETUP};return A(e,v,n,a),v}(e,n,d,t);case i.FRAME_TYPES.PAYLOAD:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid PAYLOAD frame, expected stream id to be > 0.");const s=e.length,a={data:null,flags:r,length:s,metadata:null,streamId:t,type:i.FRAME_TYPES.PAYLOAD};return A(e,a,n,c),a}(e,n,d,t);case i.FRAME_TYPES.ERROR:return function(e,t,r,n){const s=e.length;let a=c;const u=e.readInt32BE(a);a+=4,(0,o.default)(u>=0&&u<=i.MAX_CODE,"RSocketBinaryFraming: Invalid ERROR frame, expected code to be >= 0 and <= %s. Got `%s`.",i.MAX_CODE,u);const l=e.length-a;let d="";l>0&&(d=n.message.decode(e,a,a+l),a+=l);return{code:u,flags:r,length:s,message:d,streamId:t,type:i.FRAME_TYPES.ERROR}}(e,n,d,t);case i.FRAME_TYPES.KEEPALIVE:return function(e,t,r,n){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid KEEPALIVE frame, expected stream id to be 0.");const s=e.length;let u=c;const l=(0,a.readUInt64BE)(e,u);u+=8;let d=null;u<e.length&&(d=n.data.decode(e,u,e.length));return{data:d,flags:r,lastReceivedPosition:l,length:s,streamId:t,type:i.FRAME_TYPES.KEEPALIVE}}(e,n,d,t);case i.FRAME_TYPES.REQUEST_FNF:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_FNF frame, expected stream id to be > 0.");const s=e.length,a={data:null,flags:r,length:s,metadata:null,streamId:t,type:i.FRAME_TYPES.REQUEST_FNF};return A(e,a,n,c),a}(e,n,d,t);case i.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_RESPONSE frame, expected stream id to be > 0.");const s=e.length,a={data:null,flags:r,length:s,metadata:null,streamId:t,type:i.FRAME_TYPES.REQUEST_RESPONSE};return A(e,a,n,c),a}(e,n,d,t);case i.FRAME_TYPES.REQUEST_STREAM:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected stream id to be > 0.");const s=e.length;let a=c;const u=e.readInt32BE(a);a+=4,(0,o.default)(u>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",u);const l={data:null,flags:r,length:s,metadata:null,requestN:u,streamId:t,type:i.FRAME_TYPES.REQUEST_STREAM};return A(e,l,n,a),l}(e,n,d,t);case i.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_CHANNEL frame, expected stream id to be > 0.");const s=e.length;let a=c;const u=e.readInt32BE(a);a+=4,(0,o.default)(u>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",u);const l={data:null,flags:r,length:s,metadata:null,requestN:u,streamId:t,type:i.FRAME_TYPES.REQUEST_CHANNEL};return A(e,l,n,a),l}(e,n,d,t);case i.FRAME_TYPES.REQUEST_N:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid REQUEST_N frame, expected stream id to be > 0.");const s=e.length,a=e.readInt32BE(c);return(0,o.default)(a>0,"RSocketBinaryFraming: Invalid REQUEST_STREAM frame, expected requestN to be > 0, got `%s`.",a),{flags:r,length:s,requestN:a,streamId:t,type:i.FRAME_TYPES.REQUEST_N}}(e,n,d);case i.FRAME_TYPES.RESUME:return function(e,t,r,n){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid RESUME frame, expected stream id to be 0.");const s=e.length;let u=c;const l=e.readUInt16BE(u);u+=2;const d=e.readUInt16BE(u);u+=2;const p=e.readInt16BE(u);u+=2,(0,o.default)(p>=0&&p<=i.MAX_RESUME_LENGTH,"RSocketBinaryFraming: Invalid SETUP frame, expected resumeToken length to be >= 0 and <= %s. Got `%s`.",i.MAX_RESUME_LENGTH,p);const h=n.resumeToken.decode(e,u,u+p);u+=p;const f=(0,a.readUInt64BE)(e,u);u+=8;const g=(0,a.readUInt64BE)(e,u);return u+=8,{clientPosition:g,flags:r,length:s,majorVersion:l,minorVersion:d,resumeToken:h,serverPosition:f,streamId:t,type:i.FRAME_TYPES.RESUME}}(e,n,d,t);case i.FRAME_TYPES.RESUME_OK:return function(e,t,r,n){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid RESUME frame, expected stream id to be 0.");const s=e.length,u=(0,a.readUInt64BE)(e,c);return{clientPosition:u,flags:r,length:s,streamId:t,type:i.FRAME_TYPES.RESUME_OK}}(e,n,d);case i.FRAME_TYPES.CANCEL:return function(e,t,r,n){(0,o.default)(t>0,"RSocketBinaryFraming: Invalid CANCEL frame, expected stream id to be > 0.");const s=e.length;return{flags:r,length:s,streamId:t,type:i.FRAME_TYPES.CANCEL}}(e,n,d);case i.FRAME_TYPES.LEASE:return function(e,t,r,n){(0,o.default)(0===t,"RSocketBinaryFraming: Invalid LEASE frame, expected stream id to be 0.");const s=e.length;let a=c;const u=e.readUInt32BE(a);a+=4;const l=e.readUInt32BE(a);a+=4;let d=null;a<e.length&&(d=n.metadata.decode(e,a,e.length));return{flags:r,length:s,metadata:d,requestCount:l,streamId:t,ttl:u,type:i.FRAME_TYPES.LEASE}}(e,n,d,t);default:(0,o.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,i.getFrameTypeName)(l))}}function d(e,t){switch(t=t||s.Utf8Encoders,e.type){case i.FRAME_TYPES.SETUP:return function(e,t){const r=null!=e.resumeToken?t.resumeToken.byteLength(e.resumeToken):0,n=null!=e.metadataMimeType?t.metadataMimeType.byteLength(e.metadataMimeType):0,o=null!=e.dataMimeType?t.dataMimeType.byteLength(e.dataMimeType):0,s=S(e,t),u=(0,a.createBuffer)(c+p+(r?h+r:0)+n+o+s);let l=b(e,u);l=u.writeUInt16BE(e.majorVersion,l),l=u.writeUInt16BE(e.minorVersion,l),l=u.writeUInt32BE(e.keepAlive,l),l=u.writeUInt32BE(e.lifetime,l),e.flags&i.FLAGS.RESUME_ENABLE&&(l=u.writeUInt16BE(r,l),null!=e.resumeToken&&(l=t.resumeToken.encode(e.resumeToken,u,l,l+r)));l=u.writeUInt8(n,l),null!=e.metadataMimeType&&(l=t.metadataMimeType.encode(e.metadataMimeType,u,l,l+n));l=u.writeUInt8(o,l),null!=e.dataMimeType&&(l=t.dataMimeType.encode(e.dataMimeType,u,l,l+o));return C(e,u,t,l),u}(e,t);case i.FRAME_TYPES.PAYLOAD:return function(e,t){const r=S(e,t),n=(0,a.createBuffer)(c+r),o=b(e,n);return C(e,n,t,o),n}(e,t);case i.FRAME_TYPES.ERROR:return function(e,t){const r=null!=e.message?t.message.byteLength(e.message):0,n=(0,a.createBuffer)(c+f+r);let o=b(e,n);o=n.writeUInt32BE(e.code,o),null!=e.message&&t.message.encode(e.message,n,o,o+r);return n}(e,t);case i.FRAME_TYPES.KEEPALIVE:return function(e,t){const r=null!=e.data?t.data.byteLength(e.data):0,n=(0,a.createBuffer)(c+g+r);let o=b(e,n);o=(0,a.writeUInt64BE)(n,e.lastReceivedPosition,o),null!=e.data&&t.data.encode(e.data,n,o,o+r);return n}(e,t);case i.FRAME_TYPES.REQUEST_FNF:case i.FRAME_TYPES.REQUEST_RESPONSE:return function(e,t){const r=S(e,t),n=(0,a.createBuffer)(c+r),o=b(e,n);return C(e,n,t,o),n}(e,t);case i.FRAME_TYPES.REQUEST_STREAM:case i.FRAME_TYPES.REQUEST_CHANNEL:return function(e,t){const r=S(e,t),n=(0,a.createBuffer)(c+_+r);let o=b(e,n);return o=n.writeUInt32BE(e.requestN,o),C(e,n,t,o),n}(e,t);case i.FRAME_TYPES.REQUEST_N:return function(e,t){const r=(0,a.createBuffer)(c+v),n=b(e,r);return r.writeUInt32BE(e.requestN,n),r}(e);case i.FRAME_TYPES.RESUME:return function(e,t){const r=t.resumeToken.byteLength(e.resumeToken),n=(0,a.createBuffer)(c+E+r);let o=b(e,n);return o=n.writeUInt16BE(e.majorVersion,o),o=n.writeUInt16BE(e.minorVersion,o),o=n.writeUInt16BE(r,o),o=t.resumeToken.encode(e.resumeToken,n,o,o+r),o=(0,a.writeUInt64BE)(n,e.serverPosition,o),(0,a.writeUInt64BE)(n,e.clientPosition,o),n}(e,t);case i.FRAME_TYPES.RESUME_OK:return function(e,t){const r=(0,a.createBuffer)(c+y),n=b(e,r);return(0,a.writeUInt64BE)(r,e.clientPosition,n),r}(e);case i.FRAME_TYPES.CANCEL:return function(e,t){const r=(0,a.createBuffer)(c);return b(e,r),r}(e);case i.FRAME_TYPES.LEASE:return function(e,t){const r=null!=e.metadata?t.metadata.byteLength(e.metadata):0,n=(0,a.createBuffer)(c+m+r);let o=b(e,n);o=n.writeUInt32BE(e.ttl,o),o=n.writeUInt32BE(e.requestCount,o),null!=e.metadata&&t.metadata.encode(e.metadata,n,o,o+r);return n}(e,t);default:(0,o.default)(!1,"RSocketBinaryFraming: Unsupported frame type `%s`.",(0,i.getFrameTypeName)(e.type))}}const p=14,h=2;const f=4;const g=8;const m=8;const _=4;const v=4;const E=22;const y=8;function b(e,t){const r=t.writeInt32BE(e.streamId,0);return t.writeUInt16BE(e.type<<i.FRAME_TYPE_OFFFSET|e.flags&i.FLAGS_MASK,r)}function S(e,t){let r=0;return null!=e.data&&(r+=t.data.byteLength(e.data)),(0,i.isMetadata)(e.flags)&&(r+=u,null!=e.metadata&&(r+=t.metadata.byteLength(e.metadata))),r}function C(e,t,r,n){if((0,i.isMetadata)(e.flags))if(null!=e.metadata){const o=r.metadata.byteLength(e.metadata);n=(0,a.writeUInt24BE)(t,o,n),n=r.metadata.encode(e.metadata,t,n,n+o)}else n=(0,a.writeUInt24BE)(t,0,n);null!=e.data&&r.data.encode(e.data,t,n,t.length)}function A(e,t,r,n){if((0,i.isMetadata)(t.flags)){const o=(0,a.readUInt24BE)(e,n);n+=u,o>0&&(t.metadata=r.metadata.decode(e,n,n+o),n+=o)}n<e.length&&(t.data=r.data.decode(e,n,e.length))}},3502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readUInt24BE=function(e,t){const r=e.readUInt8(t)<<16,n=e.readUInt8(t+1)<<8,o=e.readUInt8(t+2);return r|n|o},t.writeUInt24BE=function(e,t,r){return r=e.writeUInt8(t>>>16,r),r=e.writeUInt8(t>>>8&255,r),e.writeUInt8(255&t,r)},t.readUInt64BE=function(e,t){const r=e.readUInt32BE(t),n=e.readUInt32BE(t+4);return r*o+n},t.writeUInt64BE=function(e,t,r){const n=t/o|0,i=t%o;return r=e.writeUInt32BE(n,r),e.writeUInt32BE(i,r)},t.byteLength=function(e,t){if(null==e)return 0;return n.LiteBuffer.byteLength(e,t)},t.createBuffer=t.toBuffer=void 0;var n=r(7771);const o=4294967296;const i="function"==typeof n.LiteBuffer.from?(...e)=>e[0]instanceof n.LiteBuffer?e[0]:n.LiteBuffer.from.apply(n.LiteBuffer,e):(...e)=>e[0]instanceof n.LiteBuffer?e[0]:new(n.LiteBuffer.bind.apply(n.LiteBuffer,[n.LiteBuffer,...e]));t.toBuffer=i;const s="function"==typeof n.LiteBuffer.alloc?e=>n.LiteBuffer.alloc(e):e=>new n.LiteBuffer(e).fill(0);t.createBuffer=s},6694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(7956),i=(n=r(3759))&&n.__esModule?n:{default:n},s=r(1148),a=r(8605),c=r(8491),u=r(2307),l=r(1075),d=r(1357);t.default=class{constructor(e){this._checkConfig(e),this._cancel=null,this._config=e,this._connection=null,this._socket=null}close(){this._config.transport.close()}connect(){return(0,i.default)(!this._connection,"RSocketClient: Unexpected call to connect(), already connected."),this._connection=new o.Single((e=>{const t=this._config.transport;let r;t.connectionStatus().subscribe({onNext:n=>{"CONNECTED"===n.kind?(r&&r.cancel(),e.onComplete(new p(this._config,new d.ReassemblyDuplexConnection(t)))):"ERROR"===n.kind?(r&&r.cancel(),e.onError(n.error)):"CLOSED"===n.kind&&(r&&r.cancel(),e.onError(new Error("RSocketClient: Connection closed.")))},onSubscribe:n=>{r=n,e.onSubscribe((()=>{n.cancel(),t.close()})),r.request(Number.MAX_SAFE_INTEGER)}}),t.connect()})),this._connection}_checkConfig(e){const t=e.setup,r=t&&t.keepAlive;try{const e=window&&window.navigator;r>3e4&&e&&e.userAgent&&(e.userAgent.includes("Trident")||e.userAgent.includes("Edg"))&&console.warn("rsocket-js: Due to a browser bug, Internet Explorer and Edge users may experience WebSocket instability with keepAlive values longer than 30 seconds.")}catch(e){}}};class p{constructor(e,t){let r,n;const i=e.leases;if(i){const e=i();r=new u.RequesterLeaseHandler(e._receiver),n=new u.ResponderLeaseHandler(e._sender,e._stats)}const{keepAlive:a,lifetime:l}=e.setup;this._machine=(0,c.createClientMachine)(t,(e=>t.receive().subscribe(e)),l,e.serializers,e.responder,e.errorHandler,r,n),t.sendOne(this._buildSetupFrame(e));const d=(0,o.every)(a).map((()=>({data:null,flags:s.FLAGS.RESPOND,lastReceivedPosition:0,streamId:s.CONNECTION_STREAM_ID,type:s.FRAME_TYPES.KEEPALIVE})));t.send(d)}fireAndForget(e){this._machine.fireAndForget(e)}requestResponse(e){return this._machine.requestResponse(e)}requestStream(e){return this._machine.requestStream(e)}requestChannel(e){return this._machine.requestChannel(e)}metadataPush(e){return this._machine.metadataPush(e)}close(){this._machine.close()}connectionStatus(){return this._machine.connectionStatus()}availability(){return this._machine.availability()}_buildSetupFrame(e){const{dataMimeType:t,keepAlive:r,lifetime:n,metadataMimeType:o,payload:i}=e.setup,c=e.serializers||l.IdentitySerializers,u=i?c.data.serialize(i.data):void 0,d=i?c.metadata.serialize(i.metadata):void 0;let p=0;return void 0!==d&&(p|=s.FLAGS.METADATA),{data:u,dataMimeType:t,flags:p|(e.leases?s.FLAGS.LEASE:0),keepAlive:r,lifetime:n,majorVersion:a.MAJOR_VERSION,metadata:d,metadataMimeType:o,minorVersion:a.MINOR_VERSION,resumeToken:null,streamId:s.CONNECTION_STREAM_ID,type:s.FRAME_TYPES.SETUP}}}},9882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferEncoders=t.Utf8Encoders=t.BufferEncoder=t.UTF8Encoder=void 0;var n,o=r(3502),i=(n=r(3759))&&n.__esModule?n:{default:n};const s={byteLength:e=>(0,o.byteLength)(e,"utf8"),decode:(e,t,r)=>e.toString("utf8",t,r),encode:(e,t,r,n)=>((0,i.default)("string"==typeof e,"RSocketEncoding: Expected value to be a string, got `%s`.",e),t.write(e,r,n-r,"utf8"),n)};t.UTF8Encoder=s;const a={byteLength:e=>((0,i.default)(Buffer.isBuffer(e),"RSocketEncoding: Expected value to be a buffer, got `%s`.",e),e.length),decode:(e,t,r)=>e.slice(t,r),encode:(e,t,r,n)=>((0,i.default)(Buffer.isBuffer(e),"RSocketEncoding: Expected value to be a buffer, got `%s`.",e),e.copy(t,r,0,e.length),n)};t.BufferEncoder=a;const c={data:s,dataMimeType:s,message:s,metadata:s,metadataMimeType:s,resumeToken:s};t.Utf8Encoders=c;const u={data:a,dataMimeType:s,message:s,metadata:a,metadataMimeType:s,resumeToken:a};t.BufferEncoders=u},1148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIgnore=function(e){return(e&l.IGNORE)===l.IGNORE},t.isMetadata=function(e){return(e&l.METADATA)===l.METADATA},t.isComplete=function(e){return(e&l.COMPLETE)===l.COMPLETE},t.isNext=function(e){return(e&l.NEXT)===l.NEXT},t.isRespond=function(e){return(e&l.RESPOND)===l.RESPOND},t.isResumeEnable=function(e){return(e&l.RESUME_ENABLE)===l.RESUME_ENABLE},t.isLease=function(e){return(e&l.LEASE)===l.LEASE},t.isFollows=function(e){return(e&l.FOLLOWS)===l.FOLLOWS},t.isResumePositionFrameType=function(e){return e===c.CANCEL||e===c.ERROR||e===c.PAYLOAD||e===c.REQUEST_CHANNEL||e===c.REQUEST_FNF||e===c.REQUEST_RESPONSE||e===c.REQUEST_STREAM||e===c.REQUEST_N},t.getFrameTypeName=h,t.createErrorFromFrame=function(e){const{code:t,message:r}=e,n=f(t),i=new Error((0,o.default)("RSocket error %s (%s): %s. See error `source` property for details.",g(t),n,r));return i.source={code:t,explanation:n,message:r},i},t.getErrorCodeExplanation=f,t.printFrame=function(e){const t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);t.type=h(e.type)+` (${g(e.type)})`;const r=[];(0,n.default)(l,((t,n)=>{(e.flags&t)===t&&r.push(n)})),r.length||r.push("NO FLAGS");t.flags=r.join(" | ")+` (${g(e.flags)})`,e.type===c.ERROR&&(t.code=f(e.code)+` (${g(e.code)})`);return JSON.stringify(t,null,2)},t.MAX_VERSION=t.MAX_TTL=t.MAX_STREAM_ID=t.MAX_RESUME_LENGTH=t.MAX_REQUEST_N=t.MAX_REQUEST_COUNT=t.MAX_MIME_LENGTH=t.MAX_METADATA_LENGTH=t.MAX_LIFETIME=t.MAX_KEEPALIVE=t.MAX_CODE=t.FRAME_TYPE_OFFFSET=t.FLAGS_MASK=t.ERROR_EXPLANATIONS=t.ERROR_CODES=t.FLAGS=t.FRAME_TYPE_NAMES=t.FRAME_TYPES=t.CONNECTION_STREAM_ID=void 0;var n=i(r(8614)),o=i(r(8857));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.CONNECTION_STREAM_ID=0;const c={CANCEL:9,ERROR:11,EXT:63,KEEPALIVE:3,LEASE:2,METADATA_PUSH:12,PAYLOAD:10,REQUEST_CHANNEL:7,REQUEST_FNF:5,REQUEST_N:8,REQUEST_RESPONSE:4,REQUEST_STREAM:6,RESERVED:0,RESUME:13,RESUME_OK:14,SETUP:1};t.FRAME_TYPES=c;const u={};t.FRAME_TYPE_NAMES=u,(0,n.default)(c,((e,t)=>{u[e]=t}));const l={COMPLETE:64,FOLLOWS:128,IGNORE:512,LEASE:64,METADATA:256,NEXT:32,RESPOND:128,RESUME_ENABLE:128};t.FLAGS=l;const d={APPLICATION_ERROR:513,CANCELED:515,CONNECTION_CLOSE:258,CONNECTION_ERROR:257,INVALID:516,INVALID_SETUP:1,REJECTED:514,REJECTED_RESUME:4,REJECTED_SETUP:3,RESERVED:0,RESERVED_EXTENSION:4294967295,UNSUPPORTED_SETUP:2};t.ERROR_CODES=d;const p={};t.ERROR_EXPLANATIONS=p,(0,n.default)(d,((e,t)=>{p[e]=t}));t.FLAGS_MASK=1023;t.FRAME_TYPE_OFFFSET=10;t.MAX_CODE=2147483647;t.MAX_KEEPALIVE=2147483647;t.MAX_LIFETIME=2147483647;t.MAX_METADATA_LENGTH=16777215;t.MAX_MIME_LENGTH=255;t.MAX_REQUEST_COUNT=2147483647;t.MAX_REQUEST_N=2147483647;t.MAX_RESUME_LENGTH=65535;t.MAX_STREAM_ID=2147483647;t.MAX_TTL=2147483647;function h(e){const t=u[e];return null!=t?t:g(e)}function f(e){const t=p[e];return null!=t?t:e<=768?"RESERVED (PROTOCOL)":"RESERVED (APPLICATION)"}function g(e){return"0x"+e.toString(16)}t.MAX_VERSION=65535},2307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponderLeaseHandler=t.RequesterLeaseHandler=t.Leases=t.Lease=void 0;var n,o=(n=r(3759))&&n.__esModule?n:{default:n},i=r(7956),s=r(1148);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(e,t,r){(0,o.default)(e>0,"Lease time-to-live must be positive"),(0,o.default)(t>0,"Lease allowed requests must be positive"),this.timeToLiveMillis=e,this.allowedRequests=t,this.startingAllowedRequests=t,this.expiry=Date.now()+e,this.metadata=r}expired(){return Date.now()>this.expiry}valid(){return this.allowedRequests>0&&!this.expired()}_use(){if(this.expired())return!1;const e=this.allowedRequests,t=e>0;return t&&(this.allowedRequests=e-1),t}}t.Lease=c;t.Leases=class{constructor(){a(this,"_sender",(()=>i.Flowable.never())),a(this,"_receiver",(e=>{}))}sender(e){return this._sender=e,this}receiver(e){return this._receiver=e,this}stats(e){return this._stats=e,this}};t.RequesterLeaseHandler=class{constructor(e){a(this,"_requestN",-1),e(new i.Flowable((e=>{this._subscriber?e.onError(new Error("only 1 subscriber is allowed")):this.isDisposed()?e.onComplete():(this._subscriber=e,e.onSubscribe({cancel:()=>{this.dispose()},request:t=>{if(t<=0&&e.onError(new Error(`request demand must be positive: ${t}`)),!this.isDisposed()){const e=this._requestN;this._onRequestN(e),this._requestN=Math.min(Number.MAX_SAFE_INTEGER,Math.max(0,e)+t)}}}))})))}use(){const e=this._lease;return!!e&&e._use()}errorMessage(){return u(this._lease)}receive(e){if(!this.isDisposed()){const t=e.ttl,r=e.requestCount,n=e.metadata;this._onLease(new c(t,r,n))}}availability(){const e=this._lease;return e&&e.valid()?e.allowedRequests/e.startingAllowedRequests:0}dispose(){if(!this._isDisposed){this._isDisposed=!0;const e=this._subscriber;e&&e.onComplete()}}isDisposed(){return this._isDisposed}_onRequestN(e){const t=this._lease,r=this._subscriber;e<0&&t&&r&&r.onNext(t)}_onLease(e){const t=this._subscriber,r=this._requestN-1;r>=0&&t&&t.onNext(e),this._requestN=Math.max(-1,r),this._lease=e}};function u(e){if(!e)return"Lease was not received yet";if(e.valid())return"Missing leases";{const t=e.expired(),r=e.allowedRequests;return`Missing leases. Expired: ${t.toString()}, allowedRequests: ${r}`}}t.ResponderLeaseHandler=class{constructor(e,t,r){this._leaseSender=e,this._stats=t,this._errorConsumer=r}use(){const e=this._lease,t=!!e&&e._use();return this._onStatsEvent(t),t}errorMessage(){return u(this._lease)}send(e){let t,r;return this._leaseSender(this._stats).subscribe({onComplete:()=>this._onStatsEvent(),onError:e=>{this._onStatsEvent();const t=this._errorConsumer;t&&t(e)},onNext:t=>{this._lease=t,e(t)},onSubscribe:e=>{r?e.cancel():(e.request(s.MAX_REQUEST_N),t=e)}}),{dispose(){r||(r=!0,this._onStatsEvent(),t&&t.cancel())},isDisposed:()=>r}}_onStatsEvent(e){const t=this._stats;if(t){const r=void 0===e?"Terminate":e?"Accept":"Reject";t.onEvent(r)}}}},8491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createServerMachine=function(e,t,r,n,o,i,s){return new h("SERVER",e,t,r,n,void 0,o,i,s)},t.createClientMachine=function(e,t,r,n,o,i,s,a){return new h("CLIENT",e,t,r,n,o,i,s,a)};var n=r(7956),o=c(r(139)),i=(c(r(3759)),c(r(3620))),s=r(1148),a=r(1075);r(2307);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p{constructor(e){this._responder=e||{}}setResponder(e){this._responder=e||{}}fireAndForget(e){if(this._responder.fireAndForget)try{this._responder.fireAndForget(e)}catch(e){console.error("fireAndForget threw an exception",e)}}requestResponse(e){let t;if(this._responder.requestResponse)try{return this._responder.requestResponse(e)}catch(e){console.error("requestResponse threw an exception",e),t=e}return n.Single.error(t||new Error("not implemented"))}requestStream(e){let t;if(this._responder.requestStream)try{return this._responder.requestStream(e)}catch(e){console.error("requestStream threw an exception",e),t=e}return n.Flowable.error(t||new Error("not implemented"))}requestChannel(e){let t;if(this._responder.requestChannel)try{return this._responder.requestChannel(e)}catch(e){console.error("requestChannel threw an exception",e),t=e}return n.Flowable.error(t||new Error("not implemented"))}metadataPush(e){let t;if(this._responder.metadataPush)try{return this._responder.metadataPush(e)}catch(e){console.error("metadataPush threw an exception",e),t=e}return n.Single.error(t||new Error("not implemented"))}}class h{constructor(e,t,r,n,o,i,c,u,l){d(this,"_connectionAvailability",1),d(this,"_handleTransportClose",(()=>{this._handleError(new Error("RSocket: The connection was closed."))})),d(this,"_handleError",(e=>{this._receivers.forEach((t=>{t.onError(e)})),this._receivers.clear(),this._subscriptions.forEach((e=>{e.cancel()})),this._subscriptions.clear(),this._connectionAvailability=0,this._dispose(this._requesterLeaseHandler,this._responderLeaseSenderDisposable);const t=this._keepAliveTimerHandle;t&&(clearTimeout(t),this._keepAliveTimerHandle=null)})),d(this,"_handleFrame",(e=>{const{streamId:t}=e;t===s.CONNECTION_STREAM_ID?this._handleConnectionFrame(e):this._handleStreamFrame(t,e)})),this._connection=t,this._requesterLeaseHandler=u,this._responderLeaseHandler=l,this._nextStreamId="CLIENT"===e?1:2,this._receivers=new Map,this._subscriptions=new Map,this._serializers=o||a.IdentitySerializers,this._requestHandler=new p(i),this._errorHandler=c,r({onComplete:this._handleTransportClose,onError:this._handleError,onNext:this._handleFrame,onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)});const h=this._responderLeaseHandler;h&&(this._responderLeaseSenderDisposable=h.send(this._leaseFrameSender())),this._connection.connectionStatus().subscribe({onNext:e=>{"CLOSED"===e.kind?this._handleTransportClose():"ERROR"===e.kind&&this._handleError(e.error)},onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER)});this._keepAliveLastReceivedMillis=Date.now();const f=()=>{const e=Date.now()-this._keepAliveLastReceivedMillis;e>=n?this._handleConnectionError(new Error(`No keep-alive acks for ${n} millis`)):this._keepAliveTimerHandle=setTimeout(f,Math.max(100,n-e))};this._keepAliveTimerHandle=setTimeout(f,n)}setRequestHandler(e){this._requestHandler.setResponder(e)}close(){this._connection.close()}connectionStatus(){return this._connection.connectionStatus()}availability(){const e=this._requesterLeaseHandler,t=e?e.availability():1;return Math.min(this._connectionAvailability,t)}fireAndForget(e){if(this._useLeaseOrError(this._requesterLeaseHandler))return;const t=this._getNextStreamId(this._receivers),r=this._serializers.data.serialize(e.data),n=this._serializers.metadata.serialize(e.metadata),o={data:r,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:n,streamId:t,type:s.FRAME_TYPES.REQUEST_FNF};this._connection.sendOne(o)}requestResponse(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return n.Single.error(new Error(t));const r=this._getNextStreamId(this._receivers);return new n.Single((t=>{this._receivers.set(r,{onComplete:o.default,onError:e=>t.onError(e),onNext:e=>t.onComplete(e)});const n=this._serializers.data.serialize(e.data),i=this._serializers.metadata.serialize(e.metadata),a={data:n,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:i,streamId:r,type:s.FRAME_TYPES.REQUEST_RESPONSE};this._connection.sendOne(a),t.onSubscribe((()=>{this._receivers.delete(r);const e={flags:0,streamId:r,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(e)}))}))}requestStream(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return n.Flowable.error(new Error(t));const r=this._getNextStreamId(this._receivers);return new n.Flowable((t=>{this._receivers.set(r,t);let n=!1;t.onSubscribe({cancel:()=>{if(this._receivers.delete(r),!n)return;const e={flags:0,streamId:r,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(e)},request:t=>{if(t>s.MAX_REQUEST_N&&(t=s.MAX_REQUEST_N),n){const e={flags:0,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_N};this._connection.sendOne(e)}else{n=!0;const o=this._serializers.data.serialize(e.data),i=this._serializers.metadata.serialize(e.metadata),a={data:o,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:i,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_STREAM};this._connection.sendOne(a)}}})}),s.MAX_REQUEST_N)}requestChannel(e){const t=this._useLeaseOrError(this._requesterLeaseHandler);if(t)return n.Flowable.error(new Error(t));const r=this._getNextStreamId(this._receivers);let o=!1;return new n.Flowable((t=>{try{this._receivers.set(r,t);let n=!1;t.onSubscribe({cancel:()=>{if(this._receivers.delete(r),!n)return;const e={flags:0,streamId:r,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(e)},request:t=>{if(t>s.MAX_REQUEST_N&&(t=s.MAX_REQUEST_N),n){const e={flags:0,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_N};this._connection.sendOne(e)}else o?(0,i.default)(!1,"RSocketClient: re-entrant call to request n before initial channel established."):(o=!0,e.subscribe({onComplete:()=>{this._sendStreamComplete(r)},onError:e=>{this._sendStreamError(r,e.message)},onNext:e=>{const o=this._serializers.data.serialize(e.data),i=this._serializers.metadata.serialize(e.metadata);if(n){const t={data:o,flags:s.FLAGS.NEXT|(void 0!==e.metadata?s.FLAGS.METADATA:0),metadata:i,streamId:r,type:s.FRAME_TYPES.PAYLOAD};this._connection.sendOne(t)}else{n=!0;const a={data:o,flags:void 0!==e.metadata?s.FLAGS.METADATA:0,metadata:i,requestN:t,streamId:r,type:s.FRAME_TYPES.REQUEST_CHANNEL};this._connection.sendOne(a)}},onSubscribe:e=>{this._subscriptions.set(r,e),e.request(1)}}))}})}catch(e){console.warn("Exception while subscribing to channel flowable:"+e)}}),s.MAX_REQUEST_N)}metadataPush(e){throw new Error("metadataPush() is not implemented")}_getNextStreamId(e){const t=this._nextStreamId;do{this._nextStreamId=this._nextStreamId+2&s.MAX_STREAM_ID}while(0===this._nextStreamId||e.has(t));return t}_useLeaseOrError(e){if(e&&!e.use())return e.errorMessage()}_leaseFrameSender(){return e=>this._connection.sendOne({flags:0,metadata:e.metadata,requestCount:e.allowedRequests,streamId:s.CONNECTION_STREAM_ID,ttl:e.timeToLiveMillis,type:s.FRAME_TYPES.LEASE})}_dispose(...e){e.forEach((e=>{e&&e.dispose()}))}_isRequest(e){switch(e){case s.FRAME_TYPES.REQUEST_FNF:case s.FRAME_TYPES.REQUEST_RESPONSE:case s.FRAME_TYPES.REQUEST_STREAM:case s.FRAME_TYPES.REQUEST_CHANNEL:return!0;default:return!1}}_handleConnectionError(e){this._handleError(e),this._connection.close();const t=this._errorHandler;t&&t(e)}_handleConnectionFrame(e){switch(e.type){case s.FRAME_TYPES.ERROR:const t=(0,s.createErrorFromFrame)(e);this._handleConnectionError(t);break;case s.FRAME_TYPES.EXT:break;case s.FRAME_TYPES.KEEPALIVE:this._keepAliveLastReceivedMillis=Date.now(),(0,s.isRespond)(e.flags)&&this._connection.sendOne(l(l({},e),{},{flags:e.flags^s.FLAGS.RESPOND,lastReceivedPosition:0}));break;case s.FRAME_TYPES.LEASE:const r=this._requesterLeaseHandler;r&&r.receive(e);case s.FRAME_TYPES.METADATA_PUSH:case s.FRAME_TYPES.REQUEST_CHANNEL:case s.FRAME_TYPES.REQUEST_FNF:case s.FRAME_TYPES.REQUEST_RESPONSE:case s.FRAME_TYPES.REQUEST_STREAM:case s.FRAME_TYPES.RESERVED:case s.FRAME_TYPES.RESUME:case s.FRAME_TYPES.RESUME_OK:}}_handleStreamFrame(e,t){if(this._isRequest(t.type)){const t=this._useLeaseOrError(this._responderLeaseHandler);if(t)return void this._sendStreamError(e,t)}switch(t.type){case s.FRAME_TYPES.CANCEL:this._handleCancel(e,t);break;case s.FRAME_TYPES.REQUEST_N:this._handleRequestN(e,t);break;case s.FRAME_TYPES.REQUEST_FNF:this._handleFireAndForget(e,t);break;case s.FRAME_TYPES.REQUEST_RESPONSE:this._handleRequestResponse(e,t);break;case s.FRAME_TYPES.REQUEST_STREAM:this._handleRequestStream(e,t);break;case s.FRAME_TYPES.REQUEST_CHANNEL:this._handleRequestChannel(e,t);break;case s.FRAME_TYPES.ERROR:const r=(0,s.createErrorFromFrame)(t);this._handleStreamError(e,r);break;case s.FRAME_TYPES.PAYLOAD:const n=this._receivers.get(e);if(null!=n){if((0,s.isNext)(t.flags)){const e={data:this._serializers.data.deserialize(t.data),metadata:this._serializers.metadata.deserialize(t.metadata)};n.onNext(e)}(0,s.isComplete)(t.flags)&&(this._receivers.delete(e),n.onComplete())}}}_handleCancel(e,t){const r=this._subscriptions.get(e);r&&(r.cancel(),this._subscriptions.delete(e))}_handleRequestN(e,t){const r=this._subscriptions.get(e);r&&r.request(t.requestN)}_handleFireAndForget(e,t){const r=this._deserializePayload(t);this._requestHandler.fireAndForget(r)}_handleRequestResponse(e,t){const r=this._deserializePayload(t);this._requestHandler.requestResponse(r).subscribe({onComplete:t=>{this._sendStreamPayload(e,t,!0)},onError:t=>this._sendStreamError(e,t.message),onSubscribe:t=>{const r={cancel:t,request:o.default};this._subscriptions.set(e,r)}})}_handleRequestStream(e,t){const r=this._deserializePayload(t);this._requestHandler.requestStream(r).subscribe({onComplete:()=>this._sendStreamComplete(e),onError:t=>this._sendStreamError(e,t.message),onNext:t=>this._sendStreamPayload(e,t),onSubscribe:r=>{this._subscriptions.set(e,r),r.request(t.requestN)}})}_handleRequestChannel(e,t){if(this._subscriptions.get(e))return;const r=new n.Flowable((r=>{let n=!0;r.onSubscribe({cancel:()=>{this._receivers.delete(e);const t={flags:0,streamId:e,type:s.FRAME_TYPES.CANCEL};this._connection.sendOne(t)},request:o=>{if(o>s.MAX_REQUEST_N&&(o=s.MAX_REQUEST_N),n&&o--,o>0){const t={flags:0,requestN:o,streamId:e,type:s.FRAME_TYPES.REQUEST_N};this._connection.sendOne(t)}n&&o>=0&&(n=!1,r.onNext(t))}})}),s.MAX_REQUEST_N),o=new n.FlowableProcessor(r,(e=>this._deserializePayload(e)));this._receivers.set(e,o),this._requestHandler.requestChannel(o).subscribe({onComplete:()=>this._sendStreamComplete(e),onError:t=>this._sendStreamError(e,t.message),onNext:t=>this._sendStreamPayload(e,t),onSubscribe:r=>{this._subscriptions.set(e,r),r.request(t.requestN)}})}_sendStreamComplete(e){this._subscriptions.delete(e),this._connection.sendOne({data:null,flags:s.FLAGS.COMPLETE,metadata:null,streamId:e,type:s.FRAME_TYPES.PAYLOAD})}_sendStreamError(e,t){this._subscriptions.delete(e),this._connection.sendOne({code:s.ERROR_CODES.APPLICATION_ERROR,flags:0,message:t,streamId:e,type:s.FRAME_TYPES.ERROR})}_sendStreamPayload(e,t,r=!1){let n=s.FLAGS.NEXT;r&&(n|=s.FLAGS.COMPLETE,this._subscriptions.delete(e));const o=this._serializers.data.serialize(t.data),i=this._serializers.metadata.serialize(t.metadata);this._connection.sendOne({data:o,flags:n,metadata:i,streamId:e,type:s.FRAME_TYPES.PAYLOAD})}_deserializePayload(e){return function(e,t){return{data:e.data.deserialize(t.data),metadata:e.metadata.deserialize(t.metadata)}}(this._serializers,e)}_handleStreamError(e,t){const r=this._receivers.get(e);null!=r&&(this._receivers.delete(e),r.onError(t))}}},9986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(7956),i=(n=r(3759))&&n.__esModule?n:{default:n},s=r(1148),a=r(9904),c=r(4776);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=class{constructor(e,t,r){(0,i.default)(t.bufferSize>=0,"RSocketResumableTransport: bufferSize option must be >= 0, got `%s`.",t.bufferSize),this._encoders=r,this._bufferSize=t.bufferSize,this._sentFramesSize=0,this._position={client:0,server:0},this._currentConnection=null,this._statusSubscription=null,this._receiveSubscription=null,this._receivers=new Set,this._resumeToken=t.resumeToken,this._sessionTimeoutMillis=1e3*t.sessionDurationSeconds,this._sessionTimeoutHandle=null,this._senders=new Set,this._sentFrames=[],this._setupFrame=null,this._source=e,this._status=a.CONNECTION_STATUS.NOT_CONNECTED,this._statusSubscribers=new Set}close(){this._close()}connect(){(0,i.default)(!this._isTerminated(),"RSocketResumableTransport: Cannot connect(), connection terminated (%s: %s).",this._status.kind,"ERROR"===this._status.kind?this._status.error.message:"no message");try{this._disconnect(),this._currentConnection=null,this._receiveSubscription=null,this._statusSubscription=null,this._setConnectionStatus(a.CONNECTION_STATUS.CONNECTING);const e=this._source();e.connectionStatus().subscribe({onNext:t=>{t.kind!==this._status.kind&&("CONNECTED"===t.kind?(this._sessionTimeoutHandle&&(clearTimeout(this._sessionTimeoutHandle),this._sessionTimeoutHandle=null),null==this._setupFrame?this._handleConnected(e):this._handleResume(e)):this._isTerminationStatus(t)&&(this._sessionTimeoutHandle||(this._sessionTimeoutHandle=setTimeout((()=>this._close(this._resumeTimeoutError())),this._sessionTimeoutMillis)),this._disconnect(),this._setConnectionStatus(a.CONNECTION_STATUS.NOT_CONNECTED)))},onSubscribe:e=>{this._statusSubscription=e,e.request(Number.MAX_SAFE_INTEGER)}}),e.connect()}catch(e){this._close(e)}}connectionStatus(){return new o.Flowable((e=>{e.onSubscribe({cancel:()=>{this._statusSubscribers.delete(e)},request:()=>{this._statusSubscribers.add(e),e.onNext(this._status)}})}))}receive(){return new o.Flowable((e=>{let t=!1;e.onSubscribe({cancel:()=>{this._receivers.delete(e)},request:()=>{t||(t=!0,this._receivers.add(e))}})}))}sendOne(e){try{this._writeFrame(e)}catch(e){this._close(e)}}send(e){let t;e.subscribe({onComplete:()=>{t&&this._senders.delete(t)},onError:e=>{t&&this._senders.delete(t),this._close(e)},onNext:e=>this._writeFrame(e),onSubscribe:e=>{t=e,this._senders.add(t),t.request(Number.MAX_SAFE_INTEGER)}})}_close(e){if(this._isTerminated())return;e?this._setConnectionStatus({error:e,kind:"ERROR"}):this._setConnectionStatus(a.CONNECTION_STATUS.CLOSED);const t=this._receivers;t.forEach((e=>e.onComplete())),t.clear();const r=this._senders;r.forEach((e=>e.cancel())),r.clear(),this._sentFrames.length=0,this._disconnect()}_disconnect(){this._statusSubscription&&(this._statusSubscription.cancel(),this._statusSubscription=null),this._receiveSubscription&&(this._receiveSubscription.cancel(),this._receiveSubscription=null),this._currentConnection&&(this._currentConnection.close(),this._currentConnection=null)}_handleConnected(e){this._currentConnection=e,this._flushFrames(),this._setConnectionStatus(a.CONNECTION_STATUS.CONNECTED),e.receive().subscribe({onNext:e=>{try{this._receiveFrame(e)}catch(e){this._close(e)}},onSubscribe:e=>{this._receiveSubscription=e,e.request(Number.MAX_SAFE_INTEGER)}})}_handleResume(e){e.receive().take(1).subscribe({onNext:t=>{try{if(t.type===s.FRAME_TYPES.RESUME_OK){const{clientPosition:r}=t;if(r<this._position.client)return void this._close(this._nonResumableStateError());let n=r-this._position.client,o=0;for(;n>0;){const e=this._onReleasedTailFrame(this._sentFrames[o]);if(!e)return void this._close(this._absentLengthError(t));n-=e,o++}if(0!==n)return void this._close(this._inconsistentImpliedPositionError());o>0&&this._sentFrames.splice(0,o),this._handleConnected(e)}else{const e=t.type===s.FRAME_TYPES.ERROR?(0,s.createErrorFromFrame)(t):new Error("RSocketResumableTransport: Resumption failed for an unspecified reason.");this._close(e)}}catch(e){this._close(e)}},onSubscribe:e=>{this._receiveSubscription=e,e.request(1)}});const t=this._setupFrame;(0,i.default)(t,"RSocketResumableTransport: Cannot resume, setup frame has not been sent."),e.sendOne({clientPosition:this._position.client,flags:0,majorVersion:t.majorVersion,minorVersion:t.minorVersion,resumeToken:this._resumeToken,serverPosition:this._position.server,streamId:s.CONNECTION_STREAM_ID,type:s.FRAME_TYPES.RESUME})}_absentLengthError(e){return new Error("RSocketResumableTransport: absent frame.length for type "+e.type)}_inconsistentImpliedPositionError(){return new Error("RSocketResumableTransport: local frames are inconsistent with remote implied position")}_nonResumableStateError(){return new Error("RSocketResumableTransport: resumption failed, server is missing frames that are no longer in the client buffer.")}_resumeTimeoutError(){return new Error("RSocketResumableTransport: resumable session timed out")}_isTerminated(){return this._isTerminationStatus(this._status)}_isTerminationStatus(e){const t=e.kind;return"CLOSED"===t||"ERROR"===t}_setConnectionStatus(e){e.kind!==this._status.kind&&(this._status=e,this._statusSubscribers.forEach((t=>t.onNext(e))))}_receiveFrame(e){(0,s.isResumePositionFrameType)(e.type)&&e.length&&(this._position.server+=e.length),this._receivers.forEach((t=>t.onNext(e)))}_flushFrames(){this._sentFrames.forEach((e=>{const t=this._currentConnection;t&&t.sendOne(e)}))}_onReleasedTailFrame(e){const t=e.length;if(t)return this._sentFramesSize-=t,this._position.client+=t,t}_writeFrame(e){if(e.type===s.FRAME_TYPES.SETUP&&(e=l(l({},e),{},{flags:e.flags|s.FLAGS.RESUME_ENABLE,resumeToken:this._resumeToken}),this._setupFrame=e),e.length=(0,c.sizeOfFrame)(e,this._encoders),(0,s.isResumePositionFrameType)(e.type)){let t=this._bufferSize-this._sentFramesSize;const r=e.length;if(!r)return void this._close(this._absentLengthError(e));for(;t<r;){const r=this._sentFrames.shift();if(!r)break;{const n=this._onReleasedTailFrame(r);if(!n)return void this._close(this._absentLengthError(e));t+=n}}t>=r?(this._sentFrames.push(e),this._sentFramesSize+=r):this._position.client+=r}const t=this._currentConnection;t&&t.sendOne(e)}}},1075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdentitySerializers=t.IdentitySerializer=t.JsonSerializers=t.JsonSerializer=void 0;var n,o=r(7771),i=(n=r(3759))&&n.__esModule?n:{default:n};const s={deserialize:e=>{let t;if(null==e)return null;if("string"==typeof e)t=e;else if(o.LiteBuffer.isBuffer(e)){t=e.toString("utf8")}else{t=o.LiteBuffer.from(e).toString("utf8")}return JSON.parse(t)},serialize:JSON.stringify};t.JsonSerializer=s;const a={data:s,metadata:s};t.JsonSerializers=a;const c={deserialize:e=>((0,i.default)(null==e||"string"==typeof e||o.LiteBuffer.isBuffer(e)||e instanceof Uint8Array,"RSocketSerialization: Expected data to be a string, Buffer, or Uint8Array. Got `%s`.",e),e),serialize:e=>e};t.IdentitySerializer=c;const u={data:c,metadata:c};t.IdentitySerializers=u},7268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;r(7956);var n,o=(n=r(3759))&&n.__esModule?n:{default:n},i=r(1148),s=r(1075),a=r(8491),c=r(2307),u=r(1357);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=class{constructor(e){l(this,"_handleTransportComplete",(()=>{this._handleTransportError(new Error("RSocketServer: Connection closed unexpectedly."))})),l(this,"_handleTransportError",(e=>{this._connections.forEach((e=>{e.close()}))})),l(this,"_handleTransportConnection",(e=>{const t=new d;let r;(e=new u.ReassemblyDuplexConnection(e)).receive().subscribe(t.swap({onError:e=>console.error(e),onNext:r=>{switch(r.type){case i.FRAME_TYPES.RESUME:e.sendOne({code:i.ERROR_CODES.REJECTED_RESUME,flags:0,message:"RSocketServer: RESUME not supported.",streamId:i.CONNECTION_STREAM_ID,type:i.FRAME_TYPES.ERROR}),e.close();break;case i.FRAME_TYPES.SETUP:if(this._setupLeaseError(r)){e.sendOne({code:i.ERROR_CODES.INVALID_SETUP,flags:0,message:"RSocketServer: LEASE not supported.",streamId:i.CONNECTION_STREAM_ID,type:i.FRAME_TYPES.ERROR}),e.close();break}const n=this._getSerializers();let s,u;const l=this._config.leases;if(l){const e=l();s=new c.RequesterLeaseHandler(e._receiver),u=new c.ResponderLeaseHandler(e._sender,e._stats)}const d=(0,a.createServerMachine)(e,(e=>{t.swap(e)}),r.lifetime,n,this._config.errorHandler,s,u);try{const e=this._config.getRequestHandler(d,function(e,t){return{data:e.data.deserialize(t.data),metadata:e.metadata.deserialize(t.metadata)}}(n,r));d.setRequestHandler(e),this._connections.add(d)}catch(t){e.sendOne({code:i.ERROR_CODES.REJECTED_SETUP,flags:0,message:"Application rejected setup, reason: "+t.message,streamId:i.CONNECTION_STREAM_ID,type:i.FRAME_TYPES.ERROR}),e.close()}break;default:(0,o.default)(!1,"RSocketServer: Expected first frame to be SETUP or RESUME, got `%s`.",(0,i.getFrameTypeName)(r.type))}},onSubscribe:e=>{r=e,r.request(1)}}))})),this._config=e,this._connections=new Set,this._started=!1,this._subscription=null}start(){(0,o.default)(!this._started,"RSocketServer: Unexpected call to start(), already started."),this._started=!0,this._config.transport.start().subscribe({onComplete:this._handleTransportComplete,onError:this._handleTransportError,onNext:this._handleTransportConnection,onSubscribe:e=>{this._subscription=e,e.request(Number.MAX_SAFE_INTEGER)}})}stop(){this._subscription&&this._subscription.cancel(),this._config.transport.stop(),this._handleTransportError(new Error("RSocketServer: Connection terminated via stop()."))}_getSerializers(){return this._config.serializers||s.IdentitySerializers}_setupLeaseError(e){const t=(e.flags&i.FLAGS.LEASE)===i.FLAGS.LEASE,r=this._config.leases;return t&&!r}};class d{constructor(e){this._target=e}swap(e){return this._target=e,this._subscription&&this._target.onSubscribe&&this._target.onSubscribe(this._subscription),this}onComplete(){(0,o.default)(this._target,"must have target"),this._target.onComplete&&this._target.onComplete()}onError(e){(0,o.default)(this._target,"must have target"),this._target.onError&&this._target.onError(e)}onNext(e){(0,o.default)(this._target,"must have target"),this._target.onNext&&this._target.onNext(e)}onSubscribe(e){(0,o.default)(this._target,"must have target"),this._subscription=e,this._target.onSubscribe&&this._target.onSubscribe(e)}}},8605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_VERSION=t.MAJOR_VERSION=void 0;t.MAJOR_VERSION=1;t.MINOR_VERSION=0},1357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReassemblyDuplexConnection=void 0;var n=r(7771),o=(r(7956),r(1148));t.ReassemblyDuplexConnection=class{constructor(e){this._source=e}sendOne(e){this._source.sendOne(e)}send(e){this._source.send(e)}receive(){return this._source.receive().lift((e=>new i(e)))}close(){this._source.close()}connect(){this._source.connect()}connectionStatus(){return this._source.connectionStatus()}};class i{constructor(e){var t,r,n;t=this,r="_framesReassemblyMap",n=new Map,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._actual=e}request(e){this._subscription.request(e)}cancel(){this._subscription.cancel(),this._framesReassemblyMap.clear()}onSubscribe(e){null==this._subscription?(this._subscription=e,this._actual.onSubscribe(this)):e.cancel()}onComplete(){this._actual.onComplete()}onError(e){this._actual.onError(e)}onNext(e){const t=e.streamId;if(t!==o.CONNECTION_STREAM_ID){const r=(0,o.isFollows)(e.flags),n=(0,o.isComplete)(e.flags),i=e.type===o.FRAME_TYPES.ERROR||e.type===o.FRAME_TYPES.CANCEL,a=this._framesReassemblyMap.get(t);if(a){if(!i)return a.metadata&&e.metadata&&(a.metadata=s(a.metadata,e.metadata)),a.data&&e.data?a.data=s(a.data,e.data):!a.data&&e.data&&(a.data=e.data),void(r&&!n||(n&&(a.flags|=o.FLAGS.COMPLETE),this._framesReassemblyMap.delete(t),this._actual.onNext(a)));this._framesReassemblyMap.delete(t)}else if(r&&!n&&!i)return void this._framesReassemblyMap.set(t,e)}this._actual.onNext(e)}}const s=(e,t)=>{switch(e.constructor.name){case"String":return e+t;case"Uint8Array":const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r;default:return n.LiteBuffer.concat([e,t])}}},9794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeRoutes=function(...e){if(e.length<1)throw new Error("routes should be non empty array");return n.LiteBuffer.concat(e.map((e=>s(e))))},t.encodeRoute=s,t.decodeRoutes=a,t.RoutingMetadata=void 0;var n=r(7771),o=r(3502);class i{constructor(e){this._buffer=e}iterator(){return a(this._buffer)}[Symbol.iterator](){return a(this._buffer)}}function s(e){const t=(0,o.toBuffer)(e,"utf8");if(t.length>255)throw new Error(`route length should fit into unsigned byte length but the given one is ${t.length}`);const r=(0,o.createBuffer)(1);return r.writeUInt8(t.length),n.LiteBuffer.concat([r,t])}function*a(e){const t=e.byteLength;let r=0;for(;r<t;){const n=e.readUInt8(r++);if(r+n>t)throw new Error(`Malformed RouteMetadata. Offset(${r}) + RouteLength(${n}) is greater than TotalLength`);const o=e.toString("utf8",r,r+n);r+=n,yield o}}t.RoutingMetadata=i},8063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_BY_AUTH_STRING=t.TYPES_BY_AUTH_ID=t.BEARER=t.SIMPLE=t.UNKNOWN_RESERVED_AUTH_TYPE=t.UNPARSEABLE_AUTH_TYPE=t.default=void 0;class r{constructor(e,t){this._string=e,this._identifier=t}static fromIdentifier(e){return e<0||e>127?n:a[e]}static fromString(e){if(!e)throw new Error("type must be non-null");return e===o.string?n:c.get(e)||n}get identifier(){return this._identifier}get string(){return this._string}toString(){return this._string}}t.default=r;const n=new r("UNPARSEABLE_AUTH_TYPE_DO_NOT_USE",-2);t.UNPARSEABLE_AUTH_TYPE=n;const o=new r("UNKNOWN_YET_RESERVED_DO_NOT_USE",-1);t.UNKNOWN_RESERVED_AUTH_TYPE=o;const i=new r("simple",0);t.SIMPLE=i;const s=new r("bearer",1);t.BEARER=s;const a=new Array(128);t.TYPES_BY_AUTH_ID=a;const c=new Map;t.TYPES_BY_AUTH_STRING=c;const u=[n,o,i,s];a.fill(o);for(const e of u)e.identifier>=0&&(a[e.identifier]=e,c.set(e.string,e));Object.seal&&Object.seal(a)},8369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES_BY_MIME_STRING=t.TYPES_BY_MIME_ID=t.MESSAGE_RSOCKET_COMPOSITE_METADATA=t.MESSAGE_RSOCKET_ROUTING=t.MESSAGE_RSOCKET_TRACING_ZIPKIN=t.MESSAGE_RSOCKET_AUTHENTICATION=t.MESSAGE_RSOCKET_ACCEPT_MIMETYPES=t.MESSAGE_RSOCKET_MIMETYPE=t.APPLICATION_CLOUDEVENTS_JSON=t.APPLICATION_JAVA_OBJECT=t.APPLICATION_HESSIAN=t.VIDEO_VP8=t.VIDEO_H265=t.VIDEO_H264=t.TEXT_XML=t.TEXT_PLAIN=t.TEXT_HTML=t.TEXT_CSV=t.TEXT_CSS=t.MULTIPART_MIXED=t.IMAGE_TIFF=t.IMAGE_PNG=t.IMAGE_JPEG=t.IMAGE_HEIF=t.IMAGE_HEIF_SEQUENCE=t.IMAGE_HEIC=t.IMAGE_HEIC_SEQUENCE=t.IMAGE_GIG=t.IMAGE_BMP=t.AUDIO_VORBIS=t.AUDIO_OPUS=t.AUDIO_OGG=t.AUDIO_MPEG=t.AUDIO_MPEG3=t.AUDIO_MP4=t.AUDIO_MP3=t.AUDIO_AAC=t.APPLICATION_ZIP=t.APPLICATION_XML=t.APPLICATION_PROTOBUF=t.APPLICATION_THRIFT=t.APPLICATION_PDF=t.APPLICATION_OCTET_STREAM=t.APPLICATION_JSON=t.APPLICATION_JAVASCRIPT=t.APPLICATION_GZIP=t.APPLICATION_GRAPHQL=t.APPLICATION_CBOR=t.APPLICATION_AVRO=t.UNKNOWN_RESERVED_MIME_TYPE=t.UNPARSEABLE_MIME_TYPE=t.default=void 0;class r{constructor(e,t){this._string=e,this._identifier=t}static fromIdentifier(e){return e<0||e>127?n:Q[e]}static fromString(e){if(!e)throw new Error("type must be non-null");return e===o.string?n:Z.get(e)||n}get identifier(){return this._identifier}get string(){return this._string}toString(){return this._string}}t.default=r;const n=new r("UNPARSEABLE_MIME_TYPE_DO_NOT_USE",-2);t.UNPARSEABLE_MIME_TYPE=n;const o=new r("UNKNOWN_YET_RESERVED_DO_NOT_USE",-1);t.UNKNOWN_RESERVED_MIME_TYPE=o;const i=new r("application/avro",0);t.APPLICATION_AVRO=i;const s=new r("application/cbor",1);t.APPLICATION_CBOR=s;const a=new r("application/graphql",2);t.APPLICATION_GRAPHQL=a;const c=new r("application/gzip",3);t.APPLICATION_GZIP=c;const u=new r("application/javascript",4);t.APPLICATION_JAVASCRIPT=u;const l=new r("application/json",5);t.APPLICATION_JSON=l;const d=new r("application/octet-stream",6);t.APPLICATION_OCTET_STREAM=d;const p=new r("application/pdf",7);t.APPLICATION_PDF=p;const h=new r("application/vnd.apache.thrift.binary",8);t.APPLICATION_THRIFT=h;const f=new r("application/vnd.google.protobuf",9);t.APPLICATION_PROTOBUF=f;const g=new r("application/xml",10);t.APPLICATION_XML=g;const m=new r("application/zip",11);t.APPLICATION_ZIP=m;const _=new r("audio/aac",12);t.AUDIO_AAC=_;const v=new r("audio/mp3",13);t.AUDIO_MP3=v;const E=new r("audio/mp4",14);t.AUDIO_MP4=E;const y=new r("audio/mpeg3",15);t.AUDIO_MPEG3=y;const b=new r("audio/mpeg",16);t.AUDIO_MPEG=b;const S=new r("audio/ogg",17);t.AUDIO_OGG=S;const C=new r("audio/opus",18);t.AUDIO_OPUS=C;const A=new r("audio/vorbis",19);t.AUDIO_VORBIS=A;const T=new r("image/bmp",20);t.IMAGE_BMP=T;const w=new r("image/gif",21);t.IMAGE_GIG=w;const P=new r("image/heic-sequence",22);t.IMAGE_HEIC_SEQUENCE=P;const O=new r("image/heic",23);t.IMAGE_HEIC=O;const I=new r("image/heif-sequence",24);t.IMAGE_HEIF_SEQUENCE=I;const R=new r("image/heif",25);t.IMAGE_HEIF=R;const D=new r("image/jpeg",26);t.IMAGE_JPEG=D;const N=new r("image/png",27);t.IMAGE_PNG=N;const M=new r("image/tiff",28);t.IMAGE_TIFF=M;const x=new r("multipart/mixed",29);t.MULTIPART_MIXED=x;const k=new r("text/css",30);t.TEXT_CSS=k;const F=new r("text/csv",31);t.TEXT_CSV=F;const L=new r("text/html",32);t.TEXT_HTML=L;const j=new r("text/plain",33);t.TEXT_PLAIN=j;const B=new r("text/xml",34);t.TEXT_XML=B;const U=new r("video/H264",35);t.VIDEO_H264=U;const H=new r("video/H265",36);t.VIDEO_H265=H;const G=new r("video/VP8",37);t.VIDEO_VP8=G;const V=new r("application/x-hessian",38);t.APPLICATION_HESSIAN=V;const q=new r("application/x-java-object",39);t.APPLICATION_JAVA_OBJECT=q;const $=new r("application/cloudevents+json",40);t.APPLICATION_CLOUDEVENTS_JSON=$;const W=new r("message/x.rsocket.mime-type.v0",122);t.MESSAGE_RSOCKET_MIMETYPE=W;const z=new r("message/x.rsocket.accept-mime-types.v0",123);t.MESSAGE_RSOCKET_ACCEPT_MIMETYPES=z;const K=new r("message/x.rsocket.authentication.v0",124);t.MESSAGE_RSOCKET_AUTHENTICATION=K;const X=new r("message/x.rsocket.tracing-zipkin.v0",125);t.MESSAGE_RSOCKET_TRACING_ZIPKIN=X;const Y=new r("message/x.rsocket.routing.v0",126);t.MESSAGE_RSOCKET_ROUTING=Y;const J=new r("message/x.rsocket.composite-metadata.v0",127);t.MESSAGE_RSOCKET_COMPOSITE_METADATA=J;const Q=new Array(128);t.TYPES_BY_MIME_ID=Q;const Z=new Map;t.TYPES_BY_MIME_STRING=Z;const ee=[n,o,i,s,a,c,u,l,d,p,h,f,g,m,_,v,E,y,b,S,C,A,T,w,P,O,I,R,D,N,M,x,k,F,L,j,B,U,H,G,V,q,$,W,z,K,X,Y,J];Q.fill(o);for(const e of ee)e.identifier>=0&&(Q[e.identifier]=e,Z.set(e.string,e));Object.seal&&Object.seal(Q)},1269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RSocketClient",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"RSocketServer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"RSocketResumableTransport",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"WellKnownMimeType",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"UNPARSEABLE_MIME_TYPE",{enumerable:!0,get:function(){return s.UNPARSEABLE_MIME_TYPE}}),Object.defineProperty(t,"UNKNOWN_RESERVED_MIME_TYPE",{enumerable:!0,get:function(){return s.UNKNOWN_RESERVED_MIME_TYPE}}),Object.defineProperty(t,"APPLICATION_AVRO",{enumerable:!0,get:function(){return s.APPLICATION_AVRO}}),Object.defineProperty(t,"APPLICATION_CBOR",{enumerable:!0,get:function(){return s.APPLICATION_CBOR}}),Object.defineProperty(t,"APPLICATION_GRAPHQL",{enumerable:!0,get:function(){return s.APPLICATION_GRAPHQL}}),Object.defineProperty(t,"APPLICATION_GZIP",{enumerable:!0,get:function(){return s.APPLICATION_GZIP}}),Object.defineProperty(t,"APPLICATION_JAVASCRIPT",{enumerable:!0,get:function(){return s.APPLICATION_JAVASCRIPT}}),Object.defineProperty(t,"APPLICATION_JSON",{enumerable:!0,get:function(){return s.APPLICATION_JSON}}),Object.defineProperty(t,"APPLICATION_OCTET_STREAM",{enumerable:!0,get:function(){return s.APPLICATION_OCTET_STREAM}}),Object.defineProperty(t,"APPLICATION_PDF",{enumerable:!0,get:function(){return s.APPLICATION_PDF}}),Object.defineProperty(t,"APPLICATION_THRIFT",{enumerable:!0,get:function(){return s.APPLICATION_THRIFT}}),Object.defineProperty(t,"APPLICATION_PROTOBUF",{enumerable:!0,get:function(){return s.APPLICATION_PROTOBUF}}),Object.defineProperty(t,"APPLICATION_XML",{enumerable:!0,get:function(){return s.APPLICATION_XML}}),Object.defineProperty(t,"APPLICATION_ZIP",{enumerable:!0,get:function(){return s.APPLICATION_ZIP}}),Object.defineProperty(t,"AUDIO_AAC",{enumerable:!0,get:function(){return s.AUDIO_AAC}}),Object.defineProperty(t,"AUDIO_MP3",{enumerable:!0,get:function(){return s.AUDIO_MP3}}),Object.defineProperty(t,"AUDIO_MP4",{enumerable:!0,get:function(){return s.AUDIO_MP4}}),Object.defineProperty(t,"AUDIO_MPEG3",{enumerable:!0,get:function(){return s.AUDIO_MPEG3}}),Object.defineProperty(t,"AUDIO_MPEG",{enumerable:!0,get:function(){return s.AUDIO_MPEG}}),Object.defineProperty(t,"AUDIO_OGG",{enumerable:!0,get:function(){return s.AUDIO_OGG}}),Object.defineProperty(t,"AUDIO_OPUS",{enumerable:!0,get:function(){return s.AUDIO_OPUS}}),Object.defineProperty(t,"AUDIO_VORBIS",{enumerable:!0,get:function(){return s.AUDIO_VORBIS}}),Object.defineProperty(t,"IMAGE_BMP",{enumerable:!0,get:function(){return s.IMAGE_BMP}}),Object.defineProperty(t,"IMAGE_GIG",{enumerable:!0,get:function(){return s.IMAGE_GIG}}),Object.defineProperty(t,"IMAGE_HEIC_SEQUENCE",{enumerable:!0,get:function(){return s.IMAGE_HEIC_SEQUENCE}}),Object.defineProperty(t,"IMAGE_HEIC",{enumerable:!0,get:function(){return s.IMAGE_HEIC}}),Object.defineProperty(t,"IMAGE_HEIF_SEQUENCE",{enumerable:!0,get:function(){return s.IMAGE_HEIF_SEQUENCE}}),Object.defineProperty(t,"IMAGE_HEIF",{enumerable:!0,get:function(){return s.IMAGE_HEIF}}),Object.defineProperty(t,"IMAGE_JPEG",{enumerable:!0,get:function(){return s.IMAGE_JPEG}}),Object.defineProperty(t,"IMAGE_PNG",{enumerable:!0,get:function(){return s.IMAGE_PNG}}),Object.defineProperty(t,"IMAGE_TIFF",{enumerable:!0,get:function(){return s.IMAGE_TIFF}}),Object.defineProperty(t,"MULTIPART_MIXED",{enumerable:!0,get:function(){return s.MULTIPART_MIXED}}),Object.defineProperty(t,"TEXT_CSS",{enumerable:!0,get:function(){return s.TEXT_CSS}}),Object.defineProperty(t,"TEXT_CSV",{enumerable:!0,get:function(){return s.TEXT_CSV}}),Object.defineProperty(t,"TEXT_HTML",{enumerable:!0,get:function(){return s.TEXT_HTML}}),Object.defineProperty(t,"TEXT_PLAIN",{enumerable:!0,get:function(){return s.TEXT_PLAIN}}),Object.defineProperty(t,"TEXT_XML",{enumerable:!0,get:function(){return s.TEXT_XML}}),Object.defineProperty(t,"VIDEO_H264",{enumerable:!0,get:function(){return s.VIDEO_H264}}),Object.defineProperty(t,"VIDEO_H265",{enumerable:!0,get:function(){return s.VIDEO_H265}}),Object.defineProperty(t,"VIDEO_VP8",{enumerable:!0,get:function(){return s.VIDEO_VP8}}),Object.defineProperty(t,"APPLICATION_HESSIAN",{enumerable:!0,get:function(){return s.APPLICATION_HESSIAN}}),Object.defineProperty(t,"APPLICATION_JAVA_OBJECT",{enumerable:!0,get:function(){return s.APPLICATION_JAVA_OBJECT}}),Object.defineProperty(t,"APPLICATION_CLOUDEVENTS_JSON",{enumerable:!0,get:function(){return s.APPLICATION_CLOUDEVENTS_JSON}}),Object.defineProperty(t,"MESSAGE_RSOCKET_MIMETYPE",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_MIMETYPE}}),Object.defineProperty(t,"MESSAGE_RSOCKET_ACCEPT_MIMETYPES",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_ACCEPT_MIMETYPES}}),Object.defineProperty(t,"MESSAGE_RSOCKET_AUTHENTICATION",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_AUTHENTICATION}}),Object.defineProperty(t,"MESSAGE_RSOCKET_TRACING_ZIPKIN",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_TRACING_ZIPKIN}}),Object.defineProperty(t,"MESSAGE_RSOCKET_ROUTING",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_ROUTING}}),Object.defineProperty(t,"MESSAGE_RSOCKET_COMPOSITE_METADATA",{enumerable:!0,get:function(){return s.MESSAGE_RSOCKET_COMPOSITE_METADATA}}),Object.defineProperty(t,"WellKnownAuthType",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"UNPARSEABLE_AUTH_TYPE",{enumerable:!0,get:function(){return a.UNPARSEABLE_AUTH_TYPE}}),Object.defineProperty(t,"UNKNOWN_RESERVED_AUTH_TYPE",{enumerable:!0,get:function(){return a.UNKNOWN_RESERVED_AUTH_TYPE}}),Object.defineProperty(t,"SIMPLE",{enumerable:!0,get:function(){return a.SIMPLE}}),Object.defineProperty(t,"BEARER",{enumerable:!0,get:function(){return a.BEARER}}),Object.defineProperty(t,"CONNECTION_STREAM_ID",{enumerable:!0,get:function(){return c.CONNECTION_STREAM_ID}}),Object.defineProperty(t,"ERROR_CODES",{enumerable:!0,get:function(){return c.ERROR_CODES}}),Object.defineProperty(t,"ERROR_EXPLANATIONS",{enumerable:!0,get:function(){return c.ERROR_EXPLANATIONS}}),Object.defineProperty(t,"FLAGS_MASK",{enumerable:!0,get:function(){return c.FLAGS_MASK}}),Object.defineProperty(t,"FLAGS",{enumerable:!0,get:function(){return c.FLAGS}}),Object.defineProperty(t,"FRAME_TYPE_OFFFSET",{enumerable:!0,get:function(){return c.FRAME_TYPE_OFFFSET}}),Object.defineProperty(t,"FRAME_TYPES",{enumerable:!0,get:function(){return c.FRAME_TYPES}}),Object.defineProperty(t,"MAX_CODE",{enumerable:!0,get:function(){return c.MAX_CODE}}),Object.defineProperty(t,"MAX_KEEPALIVE",{enumerable:!0,get:function(){return c.MAX_KEEPALIVE}}),Object.defineProperty(t,"MAX_LIFETIME",{enumerable:!0,get:function(){return c.MAX_LIFETIME}}),Object.defineProperty(t,"MAX_MIME_LENGTH",{enumerable:!0,get:function(){return c.MAX_MIME_LENGTH}}),Object.defineProperty(t,"MAX_RESUME_LENGTH",{enumerable:!0,get:function(){return c.MAX_RESUME_LENGTH}}),Object.defineProperty(t,"MAX_STREAM_ID",{enumerable:!0,get:function(){return c.MAX_STREAM_ID}}),Object.defineProperty(t,"MAX_VERSION",{enumerable:!0,get:function(){return c.MAX_VERSION}}),Object.defineProperty(t,"createErrorFromFrame",{enumerable:!0,get:function(){return c.createErrorFromFrame}}),Object.defineProperty(t,"getErrorCodeExplanation",{enumerable:!0,get:function(){return c.getErrorCodeExplanation}}),Object.defineProperty(t,"isComplete",{enumerable:!0,get:function(){return c.isComplete}}),Object.defineProperty(t,"isIgnore",{enumerable:!0,get:function(){return c.isIgnore}}),Object.defineProperty(t,"isLease",{enumerable:!0,get:function(){return c.isLease}}),Object.defineProperty(t,"isMetadata",{enumerable:!0,get:function(){return c.isMetadata}}),Object.defineProperty(t,"isNext",{enumerable:!0,get:function(){return c.isNext}}),Object.defineProperty(t,"isRespond",{enumerable:!0,get:function(){return c.isRespond}}),Object.defineProperty(t,"isResumeEnable",{enumerable:!0,get:function(){return c.isResumeEnable}}),Object.defineProperty(t,"printFrame",{enumerable:!0,get:function(){return c.printFrame}}),Object.defineProperty(t,"deserializeFrame",{enumerable:!0,get:function(){return u.deserializeFrame}}),Object.defineProperty(t,"deserializeFrameWithLength",{enumerable:!0,get:function(){return u.deserializeFrameWithLength}}),Object.defineProperty(t,"deserializeFrames",{enumerable:!0,get:function(){return u.deserializeFrames}}),Object.defineProperty(t,"serializeFrame",{enumerable:!0,get:function(){return u.serializeFrame}}),Object.defineProperty(t,"serializeFrameWithLength",{enumerable:!0,get:function(){return u.serializeFrameWithLength}}),Object.defineProperty(t,"byteLength",{enumerable:!0,get:function(){return l.byteLength}}),Object.defineProperty(t,"createBuffer",{enumerable:!0,get:function(){return l.createBuffer}}),Object.defineProperty(t,"readUInt24BE",{enumerable:!0,get:function(){return l.readUInt24BE}}),Object.defineProperty(t,"toBuffer",{enumerable:!0,get:function(){return l.toBuffer}}),Object.defineProperty(t,"writeUInt24BE",{enumerable:!0,get:function(){return l.writeUInt24BE}}),Object.defineProperty(t,"BufferEncoders",{enumerable:!0,get:function(){return d.BufferEncoders}}),Object.defineProperty(t,"BufferEncoder",{enumerable:!0,get:function(){return d.BufferEncoder}}),Object.defineProperty(t,"Utf8Encoders",{enumerable:!0,get:function(){return d.Utf8Encoders}}),Object.defineProperty(t,"UTF8Encoder",{enumerable:!0,get:function(){return d.UTF8Encoder}}),Object.defineProperty(t,"IdentitySerializer",{enumerable:!0,get:function(){return p.IdentitySerializer}}),Object.defineProperty(t,"IdentitySerializers",{enumerable:!0,get:function(){return p.IdentitySerializers}}),Object.defineProperty(t,"JsonSerializer",{enumerable:!0,get:function(){return p.JsonSerializer}}),Object.defineProperty(t,"JsonSerializers",{enumerable:!0,get:function(){return p.JsonSerializers}}),Object.defineProperty(t,"Leases",{enumerable:!0,get:function(){return h.Leases}}),Object.defineProperty(t,"Lease",{enumerable:!0,get:function(){return h.Lease}}),Object.defineProperty(t,"CompositeMetadata",{enumerable:!0,get:function(){return f.CompositeMetadata}}),Object.defineProperty(t,"ReservedMimeTypeEntry",{enumerable:!0,get:function(){return f.ReservedMimeTypeEntry}}),Object.defineProperty(t,"WellKnownMimeTypeEntry",{enumerable:!0,get:function(){return f.WellKnownMimeTypeEntry}}),Object.defineProperty(t,"ExplicitMimeTimeEntry",{enumerable:!0,get:function(){return f.ExplicitMimeTimeEntry}}),Object.defineProperty(t,"encodeAndAddCustomMetadata",{enumerable:!0,get:function(){return f.encodeAndAddCustomMetadata}}),Object.defineProperty(t,"encodeAndAddWellKnownMetadata",{enumerable:!0,get:function(){return f.encodeAndAddWellKnownMetadata}}),Object.defineProperty(t,"encodeCompositeMetadata",{enumerable:!0,get:function(){return f.encodeCompositeMetadata}}),Object.defineProperty(t,"decodeCompositeMetadata",{enumerable:!0,get:function(){return f.decodeCompositeMetadata}}),Object.defineProperty(t,"RoutingMetadata",{enumerable:!0,get:function(){return g.RoutingMetadata}}),Object.defineProperty(t,"encodeRoute",{enumerable:!0,get:function(){return g.encodeRoute}}),Object.defineProperty(t,"encodeRoutes",{enumerable:!0,get:function(){return g.encodeRoutes}}),Object.defineProperty(t,"decodeRoutes",{enumerable:!0,get:function(){return g.decodeRoutes}}),Object.defineProperty(t,"encodeSimpleAuthMetadata",{enumerable:!0,get:function(){return m.encodeSimpleAuthMetadata}}),Object.defineProperty(t,"encodeBearerAuthMetadata",{enumerable:!0,get:function(){return m.encodeBearerAuthMetadata}}),Object.defineProperty(t,"encodeWellKnownAuthMetadata",{enumerable:!0,get:function(){return m.encodeWellKnownAuthMetadata}}),Object.defineProperty(t,"encodeCustomAuthMetadata",{enumerable:!0,get:function(){return m.encodeCustomAuthMetadata}}),Object.defineProperty(t,"decodeSimpleAuthPayload",{enumerable:!0,get:function(){return m.decodeSimpleAuthPayload}}),Object.defineProperty(t,"decodeAuthMetadata",{enumerable:!0,get:function(){return m.decodeAuthMetadata}});var n=E(r(6694)),o=E(r(7268)),i=E(r(9986)),s=v(r(8369)),a=v(r(8063)),c=r(1148),u=r(4776),l=r(3502),d=r(9882),p=r(1075),h=r(2307),f=r(6145),g=r(9794),m=r(2453);function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function E(e){return e&&e.__esModule?e:{default:e}}},2046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r(5758)),o=c(r(2688)),i=c(r(3759)),s=c(r(3620)),a=c(r(139));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l{static just(...e){return new l((t=>{let r=!1,n=0;t.onSubscribe({cancel:()=>{r=!0},request:o=>{for(;!r&&o>0&&n<e.length;)t.onNext(e[n++]),o--;r||n!=e.length||t.onComplete()}})}))}static error(e){return new l((t=>{t.onSubscribe({cancel:()=>{},request:()=>{t.onError(e)}})}))}static never(){return new l((e=>{e.onSubscribe({cancel:a.default,request:a.default})}))}constructor(e,t=Number.MAX_SAFE_INTEGER){this._max=t,this._source=e}subscribe(e){let t;t="function"==typeof e?this._wrapCallback(e):e;const r=new d(t,this._max);this._source(r)}lift(e){return new l((t=>this._source(e(t))))}map(e){return this.lift((t=>new n.default(t,e)))}take(e){return this.lift((t=>new o.default(t,e)))}_wrapCallback(e){const t=this._max;return{onNext:e,onSubscribe(e){e.request(t)}}}}t.default=l;class d{constructor(e,t){u(this,"_cancel",(()=>{this._active&&(this._active=!1,this._subscription&&this._subscription.cancel())})),u(this,"_request",(e=>{(0,i.default)(Number.isInteger(e)&&e>=1&&e<=this._max,"Flowable: Expected request value to be an integer with a value greater than 0 and less than or equal to %s, got `%s`.",this._max,e),this._active&&(e===this._max?this._pending=this._max:(this._pending+=e,this._pending>=this._max&&(this._pending=this._max)),this._subscription&&this._subscription.request(e))})),this._active=!1,this._max=t,this._pending=0,this._started=!1,this._subscriber=e||{},this._subscription=null}onComplete(){if(this._active){this._active=!1,this._started=!0;try{this._subscriber.onComplete&&this._subscriber.onComplete()}catch(e){this._subscriber.onError&&this._subscriber.onError(e)}}else(0,s.default)(!1,"Flowable: Invalid call to onComplete(): %s.",this._started?"onComplete/onError was already called":"onSubscribe has not been called")}onError(e){!this._started||this._active?(this._active=!1,this._started=!0,this._subscriber.onError&&this._subscriber.onError(e)):(0,s.default)(!1,"Flowable: Invalid call to onError(): %s.",this._active?"onComplete/onError was already called":"onSubscribe has not been called")}onNext(e){if(this._active)if(0!==this._pending){this._pending!==this._max&&this._pending--;try{this._subscriber.onNext&&this._subscriber.onNext(e)}catch(e){this._subscription&&this._subscription.cancel(),this.onError(e)}}else(0,s.default)(!1,"Flowable: Invalid call to onNext(), all request()ed values have been published.");else(0,s.default)(!1,"Flowable: Invalid call to onNext(): %s.",this._active?"onComplete/onError was already called":"onSubscribe has not been called")}onSubscribe(e){if(this._started)(0,s.default)(!1,"Flowable: Invalid call to onSubscribe(): already called.");else{this._active=!0,this._started=!0,this._subscription=e;try{this._subscriber.onSubscribe&&this._subscriber.onSubscribe({cancel:this._cancel,request:this._request})}catch(e){this.onError(e)}}}}},5758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(2045))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this._fn=t,this._subscriber=e,this._subscription=null}onComplete(){this._subscriber.onComplete()}onError(e){this._subscriber.onError(e)}onNext(e){try{this._subscriber.onNext(this._fn(e))}catch(e){(0,o.default)(this._subscription).cancel(),this._subscriber.onError(e)}}onSubscribe(e){this._subscription=e,this._subscriber.onSubscribe(e)}}},2827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(3620))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this._source=e,this._transformer=t,this._done=!1,this._mappers=[]}onSubscribe(e){this._subscription=e}onNext(e){if(!this._sink)return void(0,o.default)("Warning, premature onNext for processor, dropping value");let t=e;this._transformer&&(t=this._transformer(e));const r=this._mappers.reduce(((e,t)=>t(e)),t);this._sink.onNext(r)}onError(e){this._error=e,this._sink?this._sink.onError(e):(0,o.default)("Warning, premature onError for processor, marking complete/errored")}onComplete(){this._done=!0,this._sink?this._sink.onComplete():(0,o.default)("Warning, premature onError for processor, marking complete")}subscribe(e){this._source.subscribe&&this._source.subscribe(this),this._sink=e,this._sink.onSubscribe(this),this._error?this._sink.onError(this._error):this._done&&this._sink.onComplete()}map(e){return this._mappers.push(e),this}request(e){this._subscription&&this._subscription.request(e)}cancel(){this._subscription&&this._subscription.cancel()}}},2688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(2045))&&n.__esModule?n:{default:n};t.default=class{constructor(e,t){this._subscriber=e,this._subscription=null,this._toTake=t}onComplete(){this._subscriber.onComplete()}onError(e){this._subscriber.onError(e)}onNext(e){try{this._subscriber.onNext(e),0==--this._toTake&&this._cancelAndComplete()}catch(e){(0,o.default)(this._subscription).cancel(),this._subscriber.onError(e)}}onSubscribe(e){this._subscription=e,this._subscriber.onSubscribe(e),this._toTake<=0&&this._cancelAndComplete()}_cancelAndComplete(){(0,o.default)(this._subscription).cancel(),this._subscriber.onComplete()}}},2727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.every=function(e){return new o.default((t=>{let r=null,n=0;t.onSubscribe({cancel:()=>{null!=r&&(clearInterval(r),r=null)},request:o=>{o<Number.MAX_SAFE_INTEGER?n+=o:n=Number.MAX_SAFE_INTEGER,null==r&&(r=setInterval((()=>{n>0&&(n!==Number.MAX_SAFE_INTEGER&&n--,t.onNext(Date.now()))}),e))}})}))};var n,o=(n=r(2046))&&n.__esModule?n:{default:n}},6941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(3620)),o=i(r(139));function i(e){return e&&e.__esModule?e:{default:e}}class s{static of(e){return new s((t=>{t.onSubscribe(),t.onComplete(e)}))}static error(e){return new s((t=>{t.onSubscribe(),t.onError(e)}))}static never(){return new s((e=>{e.onSubscribe()}))}constructor(e){this._source=e}subscribe(e){const t=new a(e);try{this._source(t)}catch(e){t.onError(e)}}flatMap(e){return new s((t=>{let r;const n=()=>{r&&r(),r=null};this._source({onComplete:n=>{e(n).subscribe({onComplete:e=>{t.onComplete(e)},onError:e=>t.onError(e),onSubscribe:e=>{r=e}})},onError:e=>t.onError(e),onSubscribe:e=>{r=e,t.onSubscribe(n)}})}))}map(e){return new s((t=>this._source({onComplete:r=>t.onComplete(e(r)),onError:e=>t.onError(e),onSubscribe:e=>t.onSubscribe(e)})))}then(e,t){this.subscribe({onComplete:e||o.default,onError:t||o.default})}}t.default=s;class a{constructor(e){this._active=!1,this._started=!1,this._subscriber=e||{}}onComplete(e){if(this._active){this._active=!1,this._started=!0;try{this._subscriber.onComplete&&this._subscriber.onComplete(e)}catch(e){this._subscriber.onError&&this._subscriber.onError(e)}}else(0,n.default)(!1,"Single: Invalid call to onComplete(): %s.",this._started?"onComplete/onError was already called":"onSubscribe has not been called")}onError(e){!this._started||this._active?(this._active=!1,this._started=!0,this._subscriber.onError&&this._subscriber.onError(e)):(0,n.default)(!1,"Single: Invalid call to onError(): %s.",this._active?"onComplete/onError was already called":"onSubscribe has not been called")}onSubscribe(e){if(this._started)(0,n.default)(!1,"Single: Invalid call to onSubscribe(): already called.");else{this._active=!0,this._started=!0;try{this._subscriber.onSubscribe&&this._subscriber.onSubscribe((()=>{this._active&&(this._active=!1,e&&e())}))}catch(e){this.onError(e)}}}}},7956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Flowable",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Single",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"FlowableProcessor",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"every",{enumerable:!0,get:function(){return s.every}});var n=a(r(2046)),o=a(r(6941)),i=a(r(2827)),s=r(2727);function a(e){return e&&e.__esModule?e:{default:e}}},1160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RSocketTlsClient=t.RSocketTcpClient=t.RSocketTcpConnection=void 0;var n=u(r(1808)),o=u(r(4404)),i=r(7956),s=u(r(3759)),a=r(1269),c=r(9904);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d{constructor(e,t){l(this,"_handleError",(e=>{e=e||new Error("RSocketTcpClient: Socket closed unexpectedly."),this._close(e)})),l(this,"_handleData",(e=>{try{this._readFrames(e).forEach((e=>{this._receivers.forEach((t=>t.onNext(e)))}))}catch(e){this._handleError(e)}})),this._buffer=(0,a.createBuffer)(0),this._encoders=t,this._receivers=new Set,this._senders=new Set,this._statusSubscribers=new Set,e?(this.setupSocket(e),this._status=c.CONNECTION_STATUS.CONNECTED):(this._socket=null,this._status=c.CONNECTION_STATUS.NOT_CONNECTED)}close(){this._close()}connect(){throw new Error("not supported")}setupSocket(e){this._socket=e,e.on("close",this._handleError),e.on("end",this._handleError),e.on("error",this._handleError),e.on("data",this._handleData)}connectionStatus(){return new i.Flowable((e=>{e.onSubscribe({cancel:()=>{this._statusSubscribers.delete(e)},request:()=>{this._statusSubscribers.add(e),e.onNext(this._status)}})}))}receive(){return new i.Flowable((e=>{e.onSubscribe({cancel:()=>{this._receivers.delete(e)},request:()=>{this._receivers.add(e)}})}))}sendOne(e){this._writeFrame(e)}send(e){let t;e.subscribe({onComplete:()=>{t&&this._senders.delete(t)},onError:e=>{t&&this._senders.delete(t),this._handleError(e)},onNext:e=>this._writeFrame(e),onSubscribe:e=>{t=e,this._senders.add(t),t.request(Number.MAX_SAFE_INTEGER)}})}getConnectionState(){return this._status}setConnectionStatus(e){this._status=e,this._statusSubscribers.forEach((t=>t.onNext(e)))}_close(e){if("CLOSED"===this._status.kind||"ERROR"===this._status.kind)return;const t=e?{error:e,kind:"ERROR"}:c.CONNECTION_STATUS.CLOSED;this.setConnectionStatus(t),this._receivers.forEach((t=>{e?t.onError(e):t.onComplete()})),this._receivers.clear(),this._senders.forEach((e=>e.cancel())),this._senders.clear();const r=this._socket;r&&(r.removeAllListeners(),r.end(),this._socket=null)}_readFrames(e){const t=Buffer.concat([this._buffer,e]),[r,n]=(0,a.deserializeFrames)(t,this._encoders);return this._buffer=n,r}_writeFrame(e){try{const t=(0,a.serializeFrameWithLength)(e,this._encoders);(0,s.default)(this._socket,"RSocketTcpClient: Cannot send frame, not connected."),this._socket.write(t)}catch(e){this._handleError(e)}}}t.RSocketTcpConnection=d;t.RSocketTcpClient=class extends d{constructor(e,t){super(null,t),l(this,"_handleOpened",(()=>{this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTED)})),this._options=e}connect(){(0,s.default)("NOT_CONNECTED"===this.getConnectionState().kind,"RSocketTcpClient: Cannot connect(), a connection is already established."),this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTING);const e=n.default.connect(this._options);this.setupSocket(e),e.on("connect",this._handleOpened)}};t.RSocketTlsClient=class extends d{constructor(e,t){super(null,t),l(this,"_handleOpened",(()=>{this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTED)})),this._options=e}connect(){(0,s.default)("NOT_CONNECTED"===this.getConnectionState().kind,"RSocketTlsClient: Cannot connect(), a connection is already established."),this.setConnectionStatus(c.CONNECTION_STATUS.CONNECTING);const e=o.default.connect(this._options);this.setupSocket(e),e.on("connect",this._handleOpened)}}},7876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RSocketTcpConnection",{enumerable:!0,get:function(){return n.RSocketTcpConnection}}),t.default=void 0;var n=r(1160),o=n.RSocketTcpClient;t.default=o},637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(7876),o=a(r(2361)),i=a(r(1808)),s=r(7956);function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e,t){this._emitter=new o.default,this._encoders=t,this._options=e}start(){return new s.Flowable((e=>{let t;const r=()=>{t&&t.close(),e.onComplete()},o=t=>e.onError(t),s=t=>{e.onNext(new n.RSocketTcpConnection(t,this._encoders))};e.onSubscribe({cancel:()=>{t&&(t.removeListener("connection",s),t.removeListener("error",o),this._emitter.removeListener("close",r),t.close(),t=null)},request:e=>{if(!t){const e=this._options.serverFactory||i.default.createServer;t=e(s),t.listen(this._options.port,this._options.host),t.on("error",o),this._emitter.on("close",r)}}})}))}stop(){this._emitter.emit("close")}}},381:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=((n=r(637))&&n.__esModule?n:{default:n}).default;t.default=o},2628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECTION_STATUS=void 0;const r={CLOSED:Object.freeze({kind:"CLOSED"}),CONNECTED:Object.freeze({kind:"CONNECTED"}),CONNECTING:Object.freeze({kind:"CONNECTING"}),NOT_CONNECTED:Object.freeze({kind:"NOT_CONNECTED"})};t.CONNECTION_STATUS=r},8945:()=>{},9904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2628);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(8945);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},6625:(e,t)=>{var r;t=e.exports=_,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=n-6,s=t.re=[],a=t.safeRe=[],c=t.src=[],u=t.tokens={},l=0;function d(e){u[e]=l++}var p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",n],[p,i]];function f(e){for(var t=0;t<h.length;t++){var r=h[t][0],n=h[t][1];e=e.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return e}d("NUMERICIDENTIFIER"),c[u.NUMERICIDENTIFIER]="0|[1-9]\\d*",d("NUMERICIDENTIFIERLOOSE"),c[u.NUMERICIDENTIFIERLOOSE]="\\d+",d("NONNUMERICIDENTIFIER"),c[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-]"+p+"*",d("MAINVERSION"),c[u.MAINVERSION]="("+c[u.NUMERICIDENTIFIER]+")\\.("+c[u.NUMERICIDENTIFIER]+")\\.("+c[u.NUMERICIDENTIFIER]+")",d("MAINVERSIONLOOSE"),c[u.MAINVERSIONLOOSE]="("+c[u.NUMERICIDENTIFIERLOOSE]+")\\.("+c[u.NUMERICIDENTIFIERLOOSE]+")\\.("+c[u.NUMERICIDENTIFIERLOOSE]+")",d("PRERELEASEIDENTIFIER"),c[u.PRERELEASEIDENTIFIER]="(?:"+c[u.NUMERICIDENTIFIER]+"|"+c[u.NONNUMERICIDENTIFIER]+")",d("PRERELEASEIDENTIFIERLOOSE"),c[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+c[u.NUMERICIDENTIFIERLOOSE]+"|"+c[u.NONNUMERICIDENTIFIER]+")",d("PRERELEASE"),c[u.PRERELEASE]="(?:-("+c[u.PRERELEASEIDENTIFIER]+"(?:\\."+c[u.PRERELEASEIDENTIFIER]+")*))",d("PRERELEASELOOSE"),c[u.PRERELEASELOOSE]="(?:-?("+c[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+c[u.PRERELEASEIDENTIFIERLOOSE]+")*))",d("BUILDIDENTIFIER"),c[u.BUILDIDENTIFIER]=p+"+",d("BUILD"),c[u.BUILD]="(?:\\+("+c[u.BUILDIDENTIFIER]+"(?:\\."+c[u.BUILDIDENTIFIER]+")*))",d("FULL"),d("FULLPLAIN"),c[u.FULLPLAIN]="v?"+c[u.MAINVERSION]+c[u.PRERELEASE]+"?"+c[u.BUILD]+"?",c[u.FULL]="^"+c[u.FULLPLAIN]+"$",d("LOOSEPLAIN"),c[u.LOOSEPLAIN]="[v=\\s]*"+c[u.MAINVERSIONLOOSE]+c[u.PRERELEASELOOSE]+"?"+c[u.BUILD]+"?",d("LOOSE"),c[u.LOOSE]="^"+c[u.LOOSEPLAIN]+"$",d("GTLT"),c[u.GTLT]="((?:<|>)?=?)",d("XRANGEIDENTIFIERLOOSE"),c[u.XRANGEIDENTIFIERLOOSE]=c[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",d("XRANGEIDENTIFIER"),c[u.XRANGEIDENTIFIER]=c[u.NUMERICIDENTIFIER]+"|x|X|\\*",d("XRANGEPLAIN"),c[u.XRANGEPLAIN]="[v=\\s]*("+c[u.XRANGEIDENTIFIER]+")(?:\\.("+c[u.XRANGEIDENTIFIER]+")(?:\\.("+c[u.XRANGEIDENTIFIER]+")(?:"+c[u.PRERELEASE]+")?"+c[u.BUILD]+"?)?)?",d("XRANGEPLAINLOOSE"),c[u.XRANGEPLAINLOOSE]="[v=\\s]*("+c[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+c[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+c[u.XRANGEIDENTIFIERLOOSE]+")(?:"+c[u.PRERELEASELOOSE]+")?"+c[u.BUILD]+"?)?)?",d("XRANGE"),c[u.XRANGE]="^"+c[u.GTLT]+"\\s*"+c[u.XRANGEPLAIN]+"$",d("XRANGELOOSE"),c[u.XRANGELOOSE]="^"+c[u.GTLT]+"\\s*"+c[u.XRANGEPLAINLOOSE]+"$",d("COERCE"),c[u.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",d("COERCERTL"),s[u.COERCERTL]=new RegExp(c[u.COERCE],"g"),a[u.COERCERTL]=new RegExp(f(c[u.COERCE]),"g"),d("LONETILDE"),c[u.LONETILDE]="(?:~>?)",d("TILDETRIM"),c[u.TILDETRIM]="(\\s*)"+c[u.LONETILDE]+"\\s+",s[u.TILDETRIM]=new RegExp(c[u.TILDETRIM],"g"),a[u.TILDETRIM]=new RegExp(f(c[u.TILDETRIM]),"g");d("TILDE"),c[u.TILDE]="^"+c[u.LONETILDE]+c[u.XRANGEPLAIN]+"$",d("TILDELOOSE"),c[u.TILDELOOSE]="^"+c[u.LONETILDE]+c[u.XRANGEPLAINLOOSE]+"$",d("LONECARET"),c[u.LONECARET]="(?:\\^)",d("CARETTRIM"),c[u.CARETTRIM]="(\\s*)"+c[u.LONECARET]+"\\s+",s[u.CARETTRIM]=new RegExp(c[u.CARETTRIM],"g"),a[u.CARETTRIM]=new RegExp(f(c[u.CARETTRIM]),"g");d("CARET"),c[u.CARET]="^"+c[u.LONECARET]+c[u.XRANGEPLAIN]+"$",d("CARETLOOSE"),c[u.CARETLOOSE]="^"+c[u.LONECARET]+c[u.XRANGEPLAINLOOSE]+"$",d("COMPARATORLOOSE"),c[u.COMPARATORLOOSE]="^"+c[u.GTLT]+"\\s*("+c[u.LOOSEPLAIN]+")$|^$",d("COMPARATOR"),c[u.COMPARATOR]="^"+c[u.GTLT]+"\\s*("+c[u.FULLPLAIN]+")$|^$",d("COMPARATORTRIM"),c[u.COMPARATORTRIM]="(\\s*)"+c[u.GTLT]+"\\s*("+c[u.LOOSEPLAIN]+"|"+c[u.XRANGEPLAIN]+")",s[u.COMPARATORTRIM]=new RegExp(c[u.COMPARATORTRIM],"g"),a[u.COMPARATORTRIM]=new RegExp(f(c[u.COMPARATORTRIM]),"g");d("HYPHENRANGE"),c[u.HYPHENRANGE]="^\\s*("+c[u.XRANGEPLAIN]+")\\s+-\\s+("+c[u.XRANGEPLAIN]+")\\s*$",d("HYPHENRANGELOOSE"),c[u.HYPHENRANGELOOSE]="^\\s*("+c[u.XRANGEPLAINLOOSE]+")\\s+-\\s+("+c[u.XRANGEPLAINLOOSE]+")\\s*$",d("STAR"),c[u.STAR]="(<|>)?=?\\s*\\*";for(var g=0;g<l;g++)r(g,c[g]),s[g]||(s[g]=new RegExp(c[g]),a[g]=new RegExp(f(c[g])));function m(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof _)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?a[u.LOOSE]:a[u.FULL]).test(e))return null;try{return new _(e,t)}catch(e){return null}}function _(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof _){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof _))return new _(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?a[u.LOOSE]:a[u.FULL]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=m,t.valid=function(e,t){var r=m(e,t);return r?r.version:null},t.clean=function(e,t){var r=m(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=_,_.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},_.prototype.toString=function(){return this.version},_.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof _||(e=new _(e,this.options)),this.compareMain(e)||this.comparePre(e)},_.prototype.compareMain=function(e){return e instanceof _||(e=new _(e,this.options)),E(this.major,e.major)||E(this.minor,e.minor)||E(this.patch,e.patch)},_.prototype.comparePre=function(e){if(e instanceof _||(e=new _(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return E(n,o)}while(++t)},_.prototype.compareBuild=function(e){e instanceof _||(e=new _(e,this.options));var t=0;do{var n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return E(n,o)}while(++t)},_.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new _(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(C(e,t))return null;var r=m(e),n=m(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},t.compareIdentifiers=E;var v=/^[0-9]+$/;function E(e,t){var r=v.test(e),n=v.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function y(e,t,r){return new _(e,r).compare(new _(t,r))}function b(e,t,r){return y(e,t,r)>0}function S(e,t,r){return y(e,t,r)<0}function C(e,t,r){return 0===y(e,t,r)}function A(e,t,r){return 0!==y(e,t,r)}function T(e,t,r){return y(e,t,r)>=0}function w(e,t,r){return y(e,t,r)<=0}function P(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return C(e,r,n);case"!=":return A(e,r,n);case">":return b(e,r,n);case">=":return T(e,r,n);case"<":return S(e,r,n);case"<=":return w(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function O(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof O){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof O))return new O(e,t);e=e.trim().split(/\s+/).join(" "),r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===I?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return E(t,e)},t.major=function(e,t){return new _(e,t).major},t.minor=function(e,t){return new _(e,t).minor},t.patch=function(e,t){return new _(e,t).patch},t.compare=y,t.compareLoose=function(e,t){return y(e,t,!0)},t.compareBuild=function(e,t,r){var n=new _(e,r),o=new _(t,r);return n.compare(o)||n.compareBuild(o)},t.rcompare=function(e,t,r){return y(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compareBuild(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.compareBuild(n,e,r)}))},t.gt=b,t.lt=S,t.eq=C,t.neq=A,t.gte=T,t.lte=w,t.cmp=P,t.Comparator=O;var I={};function R(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof R)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new R(e.raw,t);if(e instanceof O)return new R(e.value,t);if(!(this instanceof R))return new R(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function D(e,t){for(var r=!0,n=e.slice(),o=n.pop();r&&n.length;)r=n.every((function(e){return o.intersects(e,t)})),o=n.pop();return r}function N(e){return!e||"x"===e.toLowerCase()||"*"===e}function M(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=N(r)?"":N(n)?">="+r+".0.0":N(o)?">="+r+"."+n+".0":">="+t)+" "+(a=N(c)?"":N(u)?"<"+(+c+1)+".0.0":N(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function x(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==I&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function k(e,t,r){try{t=new R(t,r)}catch(e){return!1}return t.test(e)}function F(e,t,r,n){var o,i,s,a,c;switch(e=new _(e,n),t=new R(t,n),r){case">":o=b,i=w,s=S,a=">",c=">=";break;case"<":o=S,i=T,s=b,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(k(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===I&&(e=new O(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c)return!1;if((!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}O.prototype.parse=function(e){var t=this.options.loose?a[u.COMPARATORLOOSE]:a[u.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new _(r[2],this.options.loose):this.semver=I},O.prototype.toString=function(){return this.value},O.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===I||e===I)return!0;if("string"==typeof e)try{e=new _(e,this.options)}catch(e){return!1}return P(e,this.operator,this.semver,this.options)},O.prototype.intersects=function(e,t){if(!(e instanceof O))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new R(e.value,t),k(this.value,r,t));if(""===e.operator)return""===e.value||(r=new R(this.value,t),k(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=P(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=P(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},t.Range=R,R.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},R.prototype.toString=function(){return this.range},R.prototype.parseRange=function(e){var t=this.options.loose,n=t?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];e=e.replace(n,M),r("hyphen replace",e),e=e.replace(a[u.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,a[u.COMPARATORTRIM]),e=(e=(e=e.replace(a[u.TILDETRIM],"$1~")).replace(a[u.CARETTRIM],"$1^")).split(/\s+/).join(" ");var o=t?a[u.COMPARATORLOOSE]:a[u.COMPARATOR],i=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?a[u.CARETLOOSE]:a[u.CARET];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),N(n)?a="":N(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":N(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?a[u.TILDELOOSE]:a[u.TILDE];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),N(n)?a="":N(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":N(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return e.replace(n,(function(n,o,i,s,a,c){r("xRange",e,n,o,i,s,a,c);var u=N(i),l=u||N(s),d=l||N(a),p=d;return"="===o&&p&&(o=""),c=t.includePrerelease?"-0":"",u?n=">"===o||"<"===o?"<0.0.0-0":"*":o&&p?(l&&(s=0),a=0,">"===o?(o=">=",l?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):"<="===o&&(o="<",l?i=+i+1:s=+s+1),n=o+i+"."+s+"."+a+c):l?n=">="+i+".0.0"+c+" <"+(+i+1)+".0.0"+c:d&&(n=">="+i+"."+s+".0"+c+" <"+i+"."+(+s+1)+".0"+c),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(a[u.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter((function(e){return!!e.match(o)}))),i=i.map((function(e){return new O(e,this.options)}),this)},R.prototype.intersects=function(e,t){if(!(e instanceof R))throw new TypeError("a Range is required");return this.set.some((function(r){return D(r,t)&&e.set.some((function(e){return D(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new R(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},R.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new _(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1},t.satisfies=k,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new R(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new _(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new R(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new _(n=e,r)))})),n},t.minVersion=function(e,t){e=new R(e,t);var r=new _("0.0.0");if(e.test(r))return r;if(r=new _("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new _(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!b(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new R(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return F(e,t,"<",r)},t.gtr=function(e,t,r){return F(e,t,">",r)},t.outside=F,t.prerelease=function(e,t){var r=m(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new R(e,r),t=new R(t,r),e.intersects(t)},t.coerce=function(e,t){if(e instanceof _)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=a[u.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),a[u.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;a[u.COERCERTL].lastIndex=-1}else r=e.match(a[u.COERCE]);if(null===r)return null;return m(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}},2063:(e,t,r)=>{"use strict";const n=r(9395);e.exports=(e="")=>{const t=e.match(n);if(!t)return null;const[r,o]=t[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return"env"===i?o:o?`${i} ${o}`:i}},9395:e=>{"use strict";e.exports=/^#!(.*)/},7908:(e,t,r)=>{var n,o=r(9491),i=r(5397),s=/^win/i.test(process.platform),a=r(2361);function c(){d&&(d=!1,i.forEach((function(e){try{process.removeListener(e,l[e])}catch(e){}})),process.emit=g,process.reallyExit=h,n.count-=1)}function u(e,t,r){n.emitted[e]||(n.emitted[e]=!0,n.emit(e,t,r))}"function"!=typeof a&&(a=a.EventEmitter),process.__signal_exit_emitter__?n=process.__signal_exit_emitter__:((n=process.__signal_exit_emitter__=new a).count=0,n.emitted={}),n.infinite||(n.setMaxListeners(1/0),n.infinite=!0),e.exports=function(e,t){o.equal(typeof e,"function","a callback must be provided for exit handler"),!1===d&&p();var r="exit";t&&t.alwaysLast&&(r="afterexit");return n.on(r,e),function(){n.removeListener(r,e),0===n.listeners("exit").length&&0===n.listeners("afterexit").length&&c()}},e.exports.unload=c;var l={};i.forEach((function(e){l[e]=function(){process.listeners(e).length===n.count&&(c(),u("exit",null,e),u("afterexit",null,e),s&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}})),e.exports.signals=function(){return i},e.exports.load=p;var d=!1;function p(){d||(d=!0,n.count+=1,i=i.filter((function(e){try{return process.on(e,l[e]),!0}catch(e){return!1}})),process.emit=m,process.reallyExit=f)}var h=process.reallyExit;function f(e){process.exitCode=e||0,u("exit",process.exitCode,null),u("afterexit",process.exitCode,null),h.call(process,process.exitCode)}var g=process.emit;function m(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var r=g.apply(this,arguments);return u("exit",process.exitCode,null),u("afterexit",process.exitCode,null),r}return g.apply(this,arguments)}},5397:e=>{e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},6028:(e,t,r)=>{var n=r(4020);e.exports=function(e){return n(e.replace(/\+/g,"%2B"))}},6027:(e,t,r)=>{var n=r(7310);e.exports=function(){return Array.prototype.reduce.call(arguments,(function(e,t){return n.resolve(e,t)}))}},9564:(e,t,r)=>{var n=r(6636),o=r(6027),i=r(6028),s=r(8146),a=r(3825);function c(e,t,r){setImmediate((function(){e(t,r)}))}function u(e,t){try{return JSON.parse(e.replace(/^\)\]\}'/,""))}catch(e){throw e.sourceMapData=t,e}}function l(e,t,r){var n=i(t);try{return String(e(n))}catch(e){throw e.sourceMapData=r,e}}function d(e,t,r,n){var o;try{o=_(e,t)}catch(e){return c(n,e)}if(!o||o.map)return c(n,null,o);r(i(o.url),(function(e,t){if(e)return e.sourceMapData=o,n(e);o.map=String(t);try{o.map=u(o.map,o)}catch(e){return n(e)}n(null,o)}))}function p(e,t,r){var n=_(e,t);return!n||n.map||(n.map=l(r,n.url,n),n.map=u(n.map,n)),n}var h=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,f=/^(?:application|text)\/json$/,g="utf-8";function m(e){if("undefined"==typeof TextDecoder||"undefined"==typeof Uint8Array)return a(e);var t=function(e){for(var t=a(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n}(e);return new TextDecoder(g,{fatal:!0}).decode(t)}function _(e,t){t=s(t);var r=n.getFrom(e);if(!r)return null;var i=r.match(h);if(i){var a=i[1]||"text/plain",c=i[2]||"",l=i[3]||"",d={sourceMappingURL:r,url:null,sourcesRelativeTo:t,map:l};if(!f.test(a)){var p=new Error("Unuseful data uri mime type: "+a);throw p.sourceMapData=d,p}try{d.map=u(";base64"===c?m(l):decodeURIComponent(l),d)}catch(p){throw p.sourceMapData=d,p}return d}var g=o(t,r);return{sourceMappingURL:r,url:g,sourcesRelativeTo:g,map:null}}function v(e,t,r,n,o){"function"==typeof n&&(o=n,n={});var s=e.sources?e.sources.length:0,a={sourcesResolved:[],sourcesContent:[]};if(0!==s){var u=function(){0===--s&&o(null,a)};b(e,t,n,(function(e,t,n){if(a.sourcesResolved[n]=e,"string"==typeof t)a.sourcesContent[n]=t,c(u,null);else{var o=i(e);r(o,(function(e,t){a.sourcesContent[n]=e||String(t),u()}))}}))}else c(o,null,a)}function E(e,t,r,n){var o={sourcesResolved:[],sourcesContent:[]};return e.sources&&0!==e.sources.length?(b(e,t,n,(function(e,t,n){if(o.sourcesResolved[n]=e,null!==r)if("string"==typeof t)o.sourcesContent[n]=t;else{var s=i(e);try{o.sourcesContent[n]=String(r(s))}catch(e){o.sourcesContent[n]=e}}})),o):o}var y=/\/?$/;function b(e,t,r,n){var i;r=r||{},t=s(t);for(var a=0,c=e.sources.length;a<c;a++)i=null,"string"==typeof r.sourceRoot?i=r.sourceRoot:"string"==typeof e.sourceRoot&&!1!==r.sourceRoot&&(i=e.sourceRoot),n(null===i||""===i?o(t,e.sources[a]):o(t,i.replace(y,"/"),e.sources[a]),(e.sourcesContent||[])[a],a)}e.exports={resolveSourceMap:d,resolveSourceMapSync:p,resolveSources:v,resolveSourcesSync:E,resolve:function(e,t,r,n,o){if("function"==typeof n&&(o=n,n={}),null===e){var s={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null},a=i(t);r(a,(function(e,t){if(e)return e.sourceMapData=s,o(e);s.map=String(t);try{s.map=u(s.map,s)}catch(e){return o(e)}c(s)}))}else d(e,t,r,(function(e,t){return e?o(e):t?void c(t):o(null,null)}));function c(e){v(e.map,e.sourcesRelativeTo,r,n,(function(t,r){if(t)return o(t);e.sourcesResolved=r.sourcesResolved,e.sourcesContent=r.sourcesContent,o(null,e)}))}},resolveSync:function(e,t,r,n){var o;if(null===e){(o={sourceMappingURL:null,url:t,sourcesRelativeTo:t,map:null}).map=l(r,t,o),o.map=u(o.map,o)}else if(!(o=p(e,t,r)))return null;var i=E(o.map,o.sourcesRelativeTo,r,n);return o.sourcesResolved=i.sourcesResolved,o.sourcesContent=i.sourcesContent,o},parseMapToJSON:u}},9502:(e,t,r)=>{r(1079).SourceMapGenerator,t.SourceMapConsumer=r(1656).SourceMapConsumer,r(5574).SourceNode},1656:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(4514));n((function(e,t,r){var n=e("./util"),o=e("./binary-search"),i=e("./array-set").ArraySet,s=e("./base64-vlq");function a(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),o=n.getArg(t,"sources"),s=n.getArg(t,"names",[]),a=n.getArg(t,"sourceRoot",null),c=n.getArg(t,"sourcesContent",null),u=n.getArg(t,"mappings"),l=n.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);this._names=i.fromArray(s,!0),this._sources=i.fromArray(o,!0),this.sourceRoot=a,this.sourcesContent=c,this._mappings=u,this.file=l}a.fromSourceMap=function(e){var t=Object.create(a.prototype);return t._names=i.fromArray(e._names.toArray(),!0),t._sources=i.fromArray(e._sources.toArray(),!0),t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file,t.__generatedMappings=e._mappings.slice().sort(n.compareByGeneratedPositions),t.__originalMappings=e._mappings.slice().sort(n.compareByOriginalPositions),t},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return this.sourceRoot?n.join(this.sourceRoot,e):e}),this)}}),a.prototype.__generatedMappings=null,Object.defineProperty(a.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__generatedMappings}}),a.prototype.__originalMappings=null,Object.defineProperty(a.prototype,"_originalMappings",{get:function(){return this.__originalMappings||(this.__generatedMappings=[],this.__originalMappings=[],this._parseMappings(this._mappings,this.sourceRoot)),this.__originalMappings}}),a.prototype._parseMappings=function(e,t){for(var r,o,i=1,a=0,c=0,u=0,l=0,d=0,p=/^[,;]/,h=e;h.length>0;)if(";"===h.charAt(0))i++,h=h.slice(1),a=0;else if(","===h.charAt(0))h=h.slice(1);else{if((r={}).generatedLine=i,o=s.decode(h),r.generatedColumn=a+o.value,a=r.generatedColumn,(h=o.rest).length>0&&!p.test(h.charAt(0))){if(o=s.decode(h),r.source=this._sources.at(l+o.value),l+=o.value,0===(h=o.rest).length||p.test(h.charAt(0)))throw new Error("Found a source, but no line and column");if(o=s.decode(h),r.originalLine=c+o.value,c=r.originalLine,r.originalLine+=1,0===(h=o.rest).length||p.test(h.charAt(0)))throw new Error("Found a source and line, but no column");o=s.decode(h),r.originalColumn=u+o.value,u=r.originalColumn,(h=o.rest).length>0&&!p.test(h.charAt(0))&&(o=s.decode(h),r.name=this._names.at(d+o.value),d+=o.value,h=o.rest)}this.__generatedMappings.push(r),"number"==typeof r.originalLine&&this.__originalMappings.push(r)}this.__generatedMappings.sort(n.compareByGeneratedPositions),this.__originalMappings.sort(n.compareByOriginalPositions)},a.prototype._findMapping=function(e,t,r,n,i){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return o.search(e,t,i)},a.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositions);if(r){var o=n.getArg(r,"source",null);return o&&this.sourceRoot&&(o=n.join(this.sourceRoot,o)),{source:o,line:n.getArg(r,"originalLine",null),column:n.getArg(r,"originalColumn",null),name:n.getArg(r,"name",null)}}return{source:null,line:null,column:null,name:null}},a.prototype.sourceContentFor=function(e){if(!this.sourcesContent)return null;if(this.sourceRoot&&(e=n.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var t;if(this.sourceRoot&&(t=n.urlParse(this.sourceRoot))){var r=e.replace(/^file:\/\//,"");if("file"==t.scheme&&this._sources.has(r))return this.sourcesContent[this._sources.indexOf(r)];if((!t.path||"/"==t.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}throw new Error('"'+e+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(e){var t={source:n.getArg(e,"source"),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")};this.sourceRoot&&(t.source=n.relative(this.sourceRoot,t.source));var r=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions);return r?{line:n.getArg(r,"generatedLine",null),column:n.getArg(r,"generatedColumn",null)}:{line:null,column:null}},a.GENERATED_ORDER=1,a.ORIGINAL_ORDER=2,a.prototype.eachMapping=function(e,t,r){var o,i=t||null;switch(r||a.GENERATED_ORDER){case a.GENERATED_ORDER:o=this._generatedMappings;break;case a.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map((function(e){var t=e.source;return t&&s&&(t=n.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:e.name}})).forEach(e,i)},t.SourceMapConsumer=a}))},1079:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(4514));n((function(e,t,r){var n=e("./base64-vlq"),o=e("./util"),i=e("./array-set").ArraySet;function s(e){this._file=o.getArg(e,"file"),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._sources=new i,this._names=new i,this._mappings=[],this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(e){var t=e.sourceRoot,r=new s({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};e.source&&(n.source=e.source,t&&(n.source=o.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(t){var n=e.sourceContentFor(t);n&&r.setSourceContent(t,n)})),r},s.prototype.addMapping=function(e){var t=o.getArg(e,"generated"),r=o.getArg(e,"original",null),n=o.getArg(e,"source",null),i=o.getArg(e,"name",null);this._validateMapping(t,r,n,i),n&&!this._sources.has(n)&&this._sources.add(n),i&&!this._names.has(i)&&this._names.add(i),this._mappings.push({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:i})},s.prototype.setSourceContent=function(e,t){var r=e;this._sourceRoot&&(r=o.relative(this._sourceRoot,r)),null!==t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[o.toSetString(r)]=t):(delete this._sourcesContents[o.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(e,t){t||(t=e.file);var r=this._sourceRoot;r&&(t=o.relative(r,t));var n=new i,s=new i;this._mappings.forEach((function(i){if(i.source===t&&i.originalLine){var a=e.originalPositionFor({line:i.originalLine,column:i.originalColumn});null!==a.source&&(i.source=r?o.relative(r,a.source):a.source,i.originalLine=a.line,i.originalColumn=a.column,null!==a.name&&null!==i.name&&(i.name=a.name))}var c=i.source;c&&!n.has(c)&&n.add(c);var u=i.name;u&&!s.has(u)&&s.add(u)}),this),this._sources=n,this._names=s,e.sources.forEach((function(t){var n=e.sourceContentFor(t);n&&(r&&(t=o.relative(r,t)),this.setSourceContent(t,n))}),this)},s.prototype._validateMapping=function(e,t,r,n){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},s.prototype._serializeMappings=function(){var e,t=0,r=1,i=0,s=0,a=0,c=0,u="";this._mappings.sort(o.compareByGeneratedPositions);for(var l=0,d=this._mappings.length;l<d;l++){if((e=this._mappings[l]).generatedLine!==r)for(t=0;e.generatedLine!==r;)u+=";",r++;else if(l>0){if(!o.compareByGeneratedPositions(e,this._mappings[l-1]))continue;u+=","}u+=n.encode(e.generatedColumn-t),t=e.generatedColumn,e.source&&(u+=n.encode(this._sources.indexOf(e.source)-c),c=this._sources.indexOf(e.source),u+=n.encode(e.originalLine-1-s),s=e.originalLine-1,u+=n.encode(e.originalColumn-i),i=e.originalColumn,e.name&&(u+=n.encode(this._names.indexOf(e.name)-a),a=this._names.indexOf(e.name)))}return u},s.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;t&&(e=o.relative(t,e));var r=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},s.prototype.toJSON=function(){var e={version:this._version,file:this._file,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},s.prototype.toString=function(){return JSON.stringify(this)},t.SourceMapGenerator=s}))},5574:(e,t,r)=>{if(e=r.nmd(e),"function"!=typeof n)var n=r(5233)(e,r(4514));n((function(e,t,r){var n=e("./source-map-generator").SourceMapGenerator,o=e("./util");function i(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=void 0===e?null:e,this.column=void 0===t?null:t,this.source=void 0===r?null:r,this.name=void 0===o?null:o,null!=n&&this.add(n)}i.fromStringWithSourceMap=function(e,t){var r=new i,n=e.split("\n"),o=1,s=0,a=null;return t.eachMapping((function(e){if(null===a){for(;o<e.generatedLine;)r.add(n.shift()+"\n"),o++;if(s<e.generatedColumn){var t=n[0];r.add(t.substr(0,e.generatedColumn)),n[0]=t.substr(e.generatedColumn),s=e.generatedColumn}}else if(o<e.generatedLine){var i="";do{i+=n.shift()+"\n",o++,s=0}while(o<e.generatedLine);if(s<e.generatedColumn)i+=(t=n[0]).substr(0,e.generatedColumn),n[0]=t.substr(e.generatedColumn),s=e.generatedColumn;c(a,i)}else{i=(t=n[0]).substr(0,e.generatedColumn-s);n[0]=t.substr(e.generatedColumn-s),s=e.generatedColumn,c(a,i)}a=e}),this),c(a,n.join("\n")),t.sources.forEach((function(e){var n=t.sourceContentFor(e);n&&r.setSourceContent(e,n)})),r;function c(e,t){null===e||void 0===e.source?r.add(t):r.add(new i(e.originalLine,e.originalColumn,e.source,t,e.name))}},i.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!(e instanceof i||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},i.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!(e instanceof i||"string"==typeof e))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},i.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])instanceof i?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},i.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r instanceof i?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},i.prototype.setSourceContent=function(e,t){this.sourceContents[o.toSetString(e)]=t},i.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t]instanceof i&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(o.fromSetString(n[t]),this.sourceContents[n[t]])},i.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},i.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),o=!1,i=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(i===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),i=n.source,s=n.line,a=n.column,c=n.name,o=!0):o&&(r.addMapping({generated:{line:t.line,column:t.column}}),i=null,o=!1),e.split("").forEach((function(e){"\n"===e?(t.line++,t.column=0):t.column++}))})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=i}))},4514:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4514,e.exports=t},6252:(e,t,r)=>{var n=r(9502).SourceMapConsumer,o=r(1017),i=r(7147),s=!1,a=!1,c=!1,u="auto",l={},d={},p=/^data:application\/json[^,]+base64,/,h=[],f=[];function g(){return"browser"===u||"node"!==u&&("undefined"!=typeof window&&"function"==typeof XMLHttpRequest)}function m(e){return function(t){for(var r=0;r<e.length;r++){var n=e[r](t);if(n)return n}return null}}var _=m(h);function v(e,t){if(!e)return t;var r=o.dirname(e),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"";return i+o.resolve(r.slice(i.length),t)}h.push((function(e){if((e=e.trim())in l)return l[e];try{if(g()){var t=new XMLHttpRequest;t.open("GET",e,!1),t.send(null);var r=null;4===t.readyState&&200===t.status&&(r=t.responseText)}else r=i.readFileSync(e,"utf8")}catch(e){r=null}return l[e]=r}));var E=m(f);function y(e){var t=d[e.source];if(!t){var r=E(e.source);r?(t=d[e.source]={url:r.url,map:new n(r.map)}).map.sourcesContent&&t.map.sources.forEach((function(e,r){var n=t.map.sourcesContent[r];if(n){var o=v(t.url,e);l[o]=n}})):t=d[e.source]={url:null,map:null}}if(t&&t.map){var o=t.map.originalPositionFor(e);if(null!==o.source)return o.source=v(t.url,o.source),o}return e}function b(e){var t=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(e);if(t){var r=y({source:t[2],line:t[3],column:t[4]-1});return"eval at "+t[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return(t=/^eval at ([^(]+) \((.+)\)$/.exec(e))?"eval at "+t[1]+" ("+b(t[2])+")":e}function S(){var e,t="";if(this.isNative())t="native";else{!(e=this.getScriptNameOrSourceURL())&&this.isEval()&&(t=this.getEvalOrigin(),t+=", "),t+=e||"<anonymous>";var r=this.getLineNumber();if(null!=r){t+=":"+r;var n=this.getColumnNumber();n&&(t+=":"+n)}}var o="",i=this.getFunctionName(),s=!0,a=this.isConstructor();if(!(this.isToplevel()||a)){var c=this.getTypeName(),u=this.getMethodName();i?(c&&0!=i.indexOf(c)&&(o+=c+"."),o+=i,u&&i.indexOf("."+u)!=i.length-u.length-1&&(o+=" [as "+u+"]")):o+=c+"."+(u||"<anonymous>")}else a?o+="new "+(i||"<anonymous>"):i?o+=i:(o+=t,s=!1);return s&&(o+=" ("+t+")"),o}function C(e){var t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(r){t[r]=/^(?:is|get)/.test(r)?function(){return e[r].call(e)}:e[r]})),t.toString=S,t}function A(e){var t=e.getFileName()||e.getScriptNameOrSourceURL();if(t){var r=e.getLineNumber(),n=e.getColumnNumber()-1;1!==r||g()||e.isEval()||(n-=62);var o=y({source:t,line:r,column:n});return(e=C(e)).getFileName=function(){return o.source},e.getLineNumber=function(){return o.line},e.getColumnNumber=function(){return o.column+1},e.getScriptNameOrSourceURL=function(){return o.source},e}var i=e.isEval()&&e.getEvalOrigin();return i?(i=b(i),(e=C(e)).getEvalOrigin=function(){return i},e):e}function T(e,t){return c&&(l={},d={}),e+t.map((function(e){return"\n    at "+A(e)})).join("")}function w(e){var t=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(t){var r=t[1],n=+t[2],o=+t[3],s=l[r];if(!s&&i.existsSync(r)&&(s=i.readFileSync(r,"utf8")),s){var a=s.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+"\n"+a+"\n"+new Array(o).join(" ")+"^"}}return null}function P(){var e=process.emit;process.emit=function(t){if("uncaughtException"===t){var r=arguments[1]&&arguments[1].stack,n=this.listeners(t).length>0;if(r&&!n)return(i=w(o=arguments[1]))&&(console.error(),console.error(i)),console.error(o.stack),void process.exit(1)}var o,i;return e.apply(this,arguments)}}f.push((function(e){var t,r=function(e){var t;if(g()){var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),t=4===r.readyState?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}t=_(e);for(var o,i,s=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/)[ \t]*$)/gm;i=s.exec(t);)o=i;return o?o[1]:null}(e);if(!r)return null;if(p.test(r)){var n=r.slice(r.indexOf(",")+1);t=new Buffer(n,"base64").toString(),r=null}else r=v(e,r),t=_(r);return t?{url:r,map:t}:null})),t.wrapCallSite=A,t.getErrorSource=w,t.mapSourcePosition=y,t.retrieveSourceMap=E,t.install=function(e){if((e=e||{}).environment&&(u=e.environment,-1===["node","browser","auto"].indexOf(u)))throw new Error("environment "+u+" was unknown. Available options are {auto, browser, node}");(e.retrieveFile&&(e.overrideRetrieveFile&&(h.length=0),h.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(f.length=0),f.unshift(e.retrieveSourceMap)),c||(c="emptyCacheBetweenOperations"in e&&e.emptyCacheBetweenOperations),s||(s=!0,Error.prepareStackTrace=T),a)||(!("handleUncaughtExceptions"in e)||e.handleUncaughtExceptions)&&"object"==typeof process&&null!==process&&"function"==typeof process.on&&(a=!0,P())}},6636:function(e,t,r){var n,o;void 0===(o="function"==typeof(n=function(){var e=/[#@] sourceMappingURL=([^\s'"]*)/,t=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+e.source+")\\s*\\*/|//(?:"+e.source+"))\\s*");return{regex:t,_innerRegex:e,getFrom:function(e){var r=e.match(t);return r?r[1]||r[2]||"":null},existsIn:function(e){return t.test(e)},removeFrom:function(e){return e.replace(t,"")},insertBefore:function(e,r){var n=e.match(t);return n?e.slice(0,n.index)+r+e.slice(n.index):e+r}}})?n.call(t,r,t,e):n)||(e.exports=o)},8213:(e,t,r)=>{{var n=r(2728);function o(){this._array=[],this._set={}}o.fromArray=function(e,t){for(var r=new o,n=0,i=e.length;n<i;n++)r.add(e[n],t);return r},o.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(e,t){var r=n.toSetString(e),o=this._set.hasOwnProperty(r),i=this._array.length;o&&!t||this._array.push(e),o||(this._set[r]=i)},o.prototype.has=function(e){var t=n.toSetString(e);return this._set.hasOwnProperty(t)},o.prototype.indexOf=function(e){var t=n.toSetString(e);if(this._set.hasOwnProperty(t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},o.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},o.prototype.toArray=function(){return this._array.slice()},t.I=o}},6400:(e,t,r)=>{var n=r(7923);t.encode=function(e){var t,r="",o=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&o,(o>>>=5)>0&&(t|=32),r+=n.encode(t)}while(o>0);return r},t.decode=function(e,t,r){var o,i,s,a,c=e.length,u=0,l=0;do{if(t>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=n.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(32&i),u+=(i&=31)<<l,l+=5}while(o);r.value=(a=(s=u)>>1,1==(1&s)?-a:a),r.rest=t}},7923:(e,t)=>{var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},9216:(e,t)=>{{function r(e,n,o,i,s,a){var c=Math.floor((n-e)/2)+e,u=s(o,i[c],!0);return 0===u?c:u>0?n-c>1?r(c,n,o,i,s,a):a==t.LEAST_UPPER_BOUND?n<i.length?n:-1:c:c-e>1?r(e,c,o,i,s,a):a==t.LEAST_UPPER_BOUND?c:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,n,o,i){if(0===n.length)return-1;var s=r(-1,n.length,e,n,o,i||t.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===o(n[s],n[s-1],!0);)--s;return s}}},1188:(e,t,r)=>{{var n=r(2728);function o(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}o.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},o.prototype.add=function(e){var t,r,o,i,s,a;t=this._last,r=e,o=t.generatedLine,i=r.generatedLine,s=t.generatedColumn,a=r.generatedColumn,i>o||i==o&&a>=s||n.compareByGeneratedPositionsInflated(t,r)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},o.prototype.toArray=function(){return this._sorted||(this._array.sort(n.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.H=o}},2826:(e,t)=>{{function r(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function n(e,t,o,i){if(o<i){var s=o-1;r(e,(l=o,d=i,Math.round(l+Math.random()*(d-l))),i);for(var a=e[i],c=o;c<i;c++)t(e[c],a)<=0&&r(e,s+=1,c);r(e,s+1,c);var u=s+1;n(e,t,o,u-1),n(e,t,u+1,i)}var l,d}t.U=function(e,t){n(e,t,0,e.length-1)}}},6771:(e,t,r)=>{{var n=r(2728),o=r(9216),i=r(8213).I,s=r(6400),a=r(2826).U;function c(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new d(t):new u(t)}function u(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),o=n.getArg(t,"sources"),s=n.getArg(t,"names",[]),a=n.getArg(t,"sourceRoot",null),c=n.getArg(t,"sourcesContent",null),u=n.getArg(t,"mappings"),l=n.getArg(t,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);o=o.map(n.normalize).map((function(e){return a&&n.isAbsolute(a)&&n.isAbsolute(e)?n.relative(a,e):e})),this._names=i.fromArray(s,!0),this._sources=i.fromArray(o,!0),this.sourceRoot=a,this.sourcesContent=c,this._mappings=u,this.file=l}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var r=n.getArg(t,"version"),o=n.getArg(t,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new i,this._names=new i;var s={line:-1,column:0};this._sections=o.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=n.getArg(e,"offset"),r=n.getArg(t,"line"),o=n.getArg(t,"column");if(r<s.line||r===s.line&&o<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new c(n.getArg(e,"map"))}}))}c.fromSourceMap=function(e){return u.fromSourceMap(e)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},c.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(e,t,r){var o,i=t||null;switch(r||c.GENERATED_ORDER){case c.GENERATED_ORDER:o=this._generatedMappings;break;case c.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;o.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=n.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,i)},c.prototype.allGeneratedPositionsFor=function(e){var t=n.getArg(e,"line"),r={source:n.getArg(e,"source"),originalLine:t,originalColumn:n.getArg(e,"column",0)};if(null!=this.sourceRoot&&(r.source=n.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var i=[],s=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,o.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:n.getArg(a,"generatedLine",null),column:n.getArg(a,"generatedColumn",null),lastColumn:n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var u=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==u;)i.push({line:n.getArg(a,"generatedLine",null),column:n.getArg(a,"generatedColumn",null),lastColumn:n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return i},t.SourceMapConsumer=c,u.prototype=Object.create(c.prototype),u.prototype.consumer=c,u.fromSourceMap=function(e){var t=Object.create(u.prototype),r=t._names=i.fromArray(e._names.toArray(),!0),o=t._sources=i.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),c=t.__generatedMappings=[],d=t.__originalMappings=[],p=0,h=s.length;p<h;p++){var f=s[p],g=new l;g.generatedLine=f.generatedLine,g.generatedColumn=f.generatedColumn,f.source&&(g.source=o.indexOf(f.source),g.originalLine=f.originalLine,g.originalColumn=f.originalColumn,f.name&&(g.name=r.indexOf(f.name)),d.push(g)),c.push(g)}return a(t.__originalMappings,n.compareByOriginalPositions),t},u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?n.join(this.sourceRoot,e):e}),this)}}),u.prototype._parseMappings=function(e,t){for(var r,o,i,c,u,d=1,p=0,h=0,f=0,g=0,m=0,_=e.length,v=0,E={},y={},b=[],S=[];v<_;)if(";"===e.charAt(v))d++,v++,p=0;else if(","===e.charAt(v))v++;else{for((r=new l).generatedLine=d,c=v;c<_&&!this._charIsMappingSeparator(e,c);c++);if(i=E[o=e.slice(v,c)])v+=o.length;else{for(i=[];v<c;)s.decode(e,v,y),u=y.value,v=y.rest,i.push(u);if(2===i.length)throw new Error("Found a source, but no line and column");if(3===i.length)throw new Error("Found a source and line, but no column");E[o]=i}r.generatedColumn=p+i[0],p=r.generatedColumn,i.length>1&&(r.source=g+i[1],g+=i[1],r.originalLine=h+i[2],h=r.originalLine,r.originalLine+=1,r.originalColumn=f+i[3],f=r.originalColumn,i.length>4&&(r.name=m+i[4],m+=i[4])),S.push(r),"number"==typeof r.originalLine&&b.push(r)}a(S,n.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,a(b,n.compareByOriginalPositions),this.__originalMappings=b},u.prototype._findMapping=function(e,t,r,n,i,s){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return o.search(e,t,i,s)},u.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},u.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",n.compareByGeneratedPositionsDeflated,n.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===t.generatedLine){var i=n.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=n.join(this.sourceRoot,i)));var s=n.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:n.getArg(o,"originalLine",null),column:n.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},u.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=n.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var r;if(null!=this.sourceRoot&&(r=n.urlParse(this.sourceRoot))){var o=e.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!r.path||"/"==r.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(e){var t=n.getArg(e,"source");if(null!=this.sourceRoot&&(t=n.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var r={source:t=this._sources.indexOf(t),originalLine:n.getArg(e,"line"),originalColumn:n.getArg(e,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",n.compareByOriginalPositions,n.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:n.getArg(i,"generatedLine",null),column:n.getArg(i,"generatedColumn",null),lastColumn:n.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},u,d.prototype=Object.create(c.prototype),d.prototype.constructor=c,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:n.getArg(e,"line"),generatedColumn:n.getArg(e,"column")},r=o.search(t,this._sections,(function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn})),i=this._sections[r];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer.sources.indexOf(n.getArg(e,"source"))){var o=r.consumer.generatedPositionFor(e);if(o)return{line:o.line+(r.generatedOffset.generatedLine-1),column:o.column+(r.generatedOffset.generatedLine===o.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var o=this._sections[r],i=o.consumer._generatedMappings,s=0;s<i.length;s++){var c=i[s],u=o.consumer._sources.at(c.source);null!==o.consumer.sourceRoot&&(u=n.join(o.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var l=o.consumer._names.at(c.name);this._names.add(l),l=this._names.indexOf(l);var d={source:u,generatedLine:c.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(o.generatedOffset.generatedLine===c.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:l};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}a(this.__generatedMappings,n.compareByGeneratedPositionsDeflated),a(this.__originalMappings,n.compareByOriginalPositions)},d}},4433:(e,t,r)=>{{var n=r(6400),o=r(2728),i=r(8213).I,s=r(1188).H;function a(e){e||(e={}),this._file=o.getArg(e,"file",null),this._sourceRoot=o.getArg(e,"sourceRoot",null),this._skipValidation=o.getArg(e,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,r=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=o.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&r.setSourceContent(t,n)})),r},a.prototype.addMapping=function(e){var t=o.getArg(e,"generated"),r=o.getArg(e,"original",null),n=o.getArg(e,"source",null),i=o.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,i),null==n||this._sources.has(n)||this._sources.add(n),null==i||this._names.has(i)||this._names.add(i),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:i})},a.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=o.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[o.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,r){var n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}var s=this._sourceRoot;null!=s&&(n=o.relative(s,n));var a=new i,c=new i;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=i.source&&(t.source=i.source,null!=r&&(t.source=o.join(r,t.source)),null!=s&&(t.source=o.relative(s,t.source)),t.originalLine=i.line,t.originalColumn=i.column,null!=i.name&&(t.name=i.name))}var u=t.source;null==u||a.has(u)||a.add(u);var l=t.name;null==l||c.has(l)||c.add(l)}),this),this._sources=a,this._names=c,e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=o.join(r,t)),null!=s&&(t=o.relative(s,t)),this.setSourceContent(t,n))}),this)},a.prototype._validateMapping=function(e,t,r,n){if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},a.prototype._serializeMappings=function(){for(var e,t,r,i=0,s=1,a=0,c=0,u=0,l=0,d="",p=this._mappings.toArray(),h=0,f=p.length;h<f;h++){if((e=p[h]).generatedLine!==s)for(i=0;e.generatedLine!==s;)d+=";",s++;else if(h>0){if(!o.compareByGeneratedPositionsInflated(e,p[h-1]))continue;d+=","}d+=n.encode(e.generatedColumn-i),i=e.generatedColumn,null!=e.source&&(r=this._sources.indexOf(e.source),d+=n.encode(r-l),l=r,d+=n.encode(e.originalLine-1-c),c=e.originalLine-1,d+=n.encode(e.originalColumn-a),a=e.originalColumn,null!=e.name&&(t=this._names.indexOf(e.name),d+=n.encode(t-u),u=t))}return d},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=o.relative(t,e));var r=o.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.SourceMapGenerator=a}},7085:(e,t,r)=>{{var n=r(4433).SourceMapGenerator,o=r(2728),i=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[s]=!0,null!=n&&this.add(n)}a.fromStringWithSourceMap=function(e,t,r){var n=new a,s=e.split(i),c=function(){return s.shift()+(s.shift()||"")},u=1,l=0,d=null;return t.eachMapping((function(e){if(null!==d){if(!(u<e.generatedLine)){var t=(r=s[0]).substr(0,e.generatedColumn-l);return s[0]=r.substr(e.generatedColumn-l),l=e.generatedColumn,p(d,t),void(d=e)}p(d,c()),u++,l=0}for(;u<e.generatedLine;)n.add(c()),u++;if(l<e.generatedColumn){var r=s[0];n.add(r.substr(0,e.generatedColumn)),s[0]=r.substr(e.generatedColumn),l=e.generatedColumn}d=e}),this),s.length>0&&(d&&p(d,c()),n.add(s.join(""))),t.sources.forEach((function(e){var i=t.sourceContentFor(e);null!=i&&(null!=r&&(e=o.join(r,e)),n.setSourceContent(e,i))})),n;function p(e,t){if(null===e||void 0===e.source)n.add(t);else{var i=r?o.join(r,e.source):e.source;n.add(new a(e.originalLine,e.originalColumn,i,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[s]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[o.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(o.fromSetString(n[t]),this.sourceContents[n[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new n(e),o=!1,i=null,s=null,a=null,c=null;return this.walk((function(e,n){t.code+=e,null!==n.source&&null!==n.line&&null!==n.column?(i===n.source&&s===n.line&&a===n.column&&c===n.name||r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name}),i=n.source,s=n.line,a=n.column,c=n.name,o=!0):o&&(r.addMapping({generated:{line:t.line,column:t.column}}),i=null,o=!1);for(var u=0,l=e.length;u<l;u++)10===e.charCodeAt(u)?(t.line++,t.column=0,u+1===l?(i=null,o=!1):o&&r.addMapping({source:n.source,original:{line:n.line,column:n.column},generated:{line:t.line,column:t.column},name:n.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}},t.SourceNode=a}},2728:(e,t)=>{{t.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,n=/^data:.+\,.+$/;function o(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var r=e,n=o(e);if(n){if(!n.path)return e;r=n.path}for(var s,a=t.isAbsolute(r),c=r.split(/\/+/),u=0,l=c.length-1;l>=0;l--)"."===(s=c[l])?c.splice(l,1):".."===s?u++:u>0&&(""===s?(c.splice(l+1,u),u=0):(c.splice(l,2),u--));return""===(r=c.join("/"))&&(r=a?"/":"."),n?(n.path=r,i(n)):r}function a(e,t){return e===t?0:e>t?1:-1}t.urlParse=o,t.urlGenerate=i,t.normalize=s,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var r=o(t),a=o(e);if(a&&(e=a.path||"/"),r&&!r.scheme)return a&&(r.scheme=a.scheme),i(r);if(r||t.match(n))return t;if(a&&!a.host&&!a.path)return a.host=t,i(a);var c="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=c,i(a)):c},t.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(r)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)},t.toSetString=function(e){return"$"+e},t.fromSetString=function(e){return e.substr(1)},t.compareByOriginalPositions=function(e,t,r){var n=e.source-t.source;return 0!==n||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)||r||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=e.generatedLine-t.generatedLine)?n:e.name-t.name},t.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=e.source-t.source)||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:e.name-t.name},t.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=a(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:a(e.name,t.name)}}},9125:(e,t,r)=>{t.SourceMapGenerator=r(4433).SourceMapGenerator,t.SourceMapConsumer=r(6771).SourceMapConsumer,t.SourceNode=r(7085).SourceNode},8150:e=>{"use strict";e.exports=e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),r="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e}},1409:e=>{"use strict";function t(){return""}function r(e,t,r){return e.slice(t,r).replace(/\S/g," ")}e.exports=function(e,n){for(var o,i,s=!1,a=!1,c=0,u="",l=!1===(n=n||{}).whitespace?t:r,d=0;d<e.length;d++){if(o=e[d],i=e[d+1],!a&&'"'===o)"\\"===e[d-1]&&"\\"!==e[d-2]||(s=!s);if(!s)if(a||o+i!=="//"){if(1===a&&o+i==="\r\n"){a=!1,u+=l(e,c,++d),c=d;continue}if(1===a&&"\n"===o)a=!1,u+=l(e,c,d),c=d;else{if(!a&&o+i==="/*"){u+=e.slice(c,d),c=d,a=2,d++;continue}if(2===a&&o+i==="*/"){a=!1,u+=l(e,c,++d+1),c=d+1;continue}}}else u+=e.slice(c,d),c=d,a=1,d++}return u+(a?l(e.substr(c)):e.substr(c))}},7504:(e,t,r)=>{"use strict";const{promisify:n}=r(3837),o=r(6276);e.exports.fileSync=o.fileSync;const i=n(((e,t)=>o.file(e,((e,r,o,i)=>e?t(e):t(void 0,{path:r,fd:o,cleanup:n(i)})))));e.exports.file=async e=>i(e),e.exports.withFile=async function(t,r){const{path:n,fd:o,cleanup:i}=await e.exports.file(r);try{return await t({path:n,fd:o})}finally{await i()}},e.exports.dirSync=o.dirSync;const s=n(((e,t)=>o.dir(e,((e,r,o)=>e?t(e):t(void 0,{path:r,cleanup:n(o)})))));e.exports.dir=async e=>s(e),e.exports.withDir=async function(t,r){const{path:n,cleanup:o}=await e.exports.dir(r);try{return await t({path:n})}finally{await o()}},e.exports.tmpNameSync=o.tmpNameSync,e.exports.tmpName=n(o.tmpName),e.exports.tmpdir=o.tmpdir,e.exports.setGracefulCleanup=o.setGracefulCleanup},6276:(e,t,r)=>{
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
const n=r(7147),o=r(2037),i=r(1017),s=r(6113),a={fs:n.constants,os:o.constants},c=r(984),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,d=3,p=(a.O_CREAT||a.fs.O_CREAT)|(a.O_EXCL||a.fs.O_EXCL)|(a.O_RDWR||a.fs.O_RDWR),h="win32"===o.platform(),f=a.EBADF||a.os.errno.EBADF,g=a.ENOENT||a.os.errno.ENOENT,m=448,_=384,v=[],E=n.rmdirSync.bind(n),y=c.sync;let b=!1;function S(e,t){const r=N(e,t),o=r[0],i=r[1];try{x(o)}catch(e){return i(e)}let s=o.tries;!function e(){try{const t=M(o);n.stat(t,(function(r){if(!r)return s-- >0?e():i(new Error("Could not get a unique tmp filename, max tries reached "+t));i(null,t)}))}catch(e){i(e)}}()}function C(e){const t=N(e)[0];x(t);let r=t.tries;do{const e=M(t);try{n.statSync(e)}catch(t){return e}}while(r-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function A(e,t){const r=function(e){if(e&&!j(e))return t(e);t()};0<=e[0]?n.close(e[0],(function(){n.unlink(e[1],r)})):n.unlink(e[1],r)}function T(e){let t=null;try{0<=e[0]&&n.closeSync(e[0])}catch(e){if(!(r=e,B(r,-f,"EBADF")||j(e)))throw e}finally{try{n.unlinkSync(e[1])}catch(e){j(e)||(t=e)}}var r;if(null!==t)throw t}function w(e,t,r,n){const o=O(T,[t,e],n),i=O(A,[t,e],n,o);return r.keep||v.unshift(o),n?o:i}function P(e,t,r){const o=t.unsafeCleanup?c:n.rmdir.bind(n),i=O(t.unsafeCleanup?y:E,e,r),s=O(o,e,r,i);return t.keep||v.unshift(i),r?i:s}function O(e,t,r,n){let o=!1;return function i(s){if(!o){const a=n||i,c=v.indexOf(a);return c>=0&&v.splice(c,1),o=!0,r||e===E||e===y?e(t):e(t,s||function(){})}}}function I(e){let t=[],r=null;try{r=s.randomBytes(e)}catch(t){r=s.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(u[r[n]%u.length]);return t.join("")}function R(e){return null===e||D(e)||!e.trim()}function D(e){return void 0===e}function N(e,t){if("function"==typeof e)return[{},e];if(D(e))return[{},t];const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=e[t];return[r,t]}function M(e){const t=e.tmpdir;if(!D(e.name))return i.join(t,e.dir,e.name);if(!D(e.template))return i.join(t,e.dir,e.template).replace(l,I(6));const r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",I(12),e.postfix?"-"+e.postfix:""].join("");return i.join(t,e.dir,r)}function x(e){e.tmpdir=U(e);const t=e.tmpdir;if(D(e.name)||L(e.name,"name",t),D(e.dir)||L(e.dir,"dir",t),!D(e.template)&&(L(e.template,"template",t),!e.template.match(l)))throw new Error(`Invalid template, found "${e.template}".`);if(!D(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=D(e.name)?e.tries||d:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=D(e.dir)?"":i.relative(t,k(e.dir,t)),e.template=D(e.template)?void 0:i.relative(t,k(e.template,t)),e.template=R(e.template)?void 0:i.relative(e.dir,e.template),e.name=D(e.name)?void 0:F(e.name),e.prefix=D(e.prefix)?"":e.prefix,e.postfix=D(e.postfix)?"":e.postfix}function k(e,t){const r=F(e);return r.startsWith(t)?i.resolve(r):i.resolve(i.join(t,r))}function F(e){return R(e)?e:e.replace(/["']/g,"")}function L(e,t,r){if("name"===t){if(i.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let r=i.basename(e);if(".."===r||"."===r||r!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(i.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let n=k(e,r);if(!n.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${n}".`)}}function j(e){return B(e,-g,"ENOENT")}function B(e,t,r){return h?e.code===r:e.code===r&&e.errno===t}function U(e){return i.resolve(F(e&&e.tmpdir||o.tmpdir()))}process.addListener("exit",(function(){if(b)for(;v.length;)try{v[0]()}catch(e){}})),Object.defineProperty(e.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return U()}}),e.exports.dir=function(e,t){const r=N(e,t),o=r[0],i=r[1];S(o,(function(e,t){if(e)return i(e);n.mkdir(t,o.mode||m,(function(e){if(e)return i(e);i(null,t,P(t,o,!1))}))}))},e.exports.dirSync=function(e){const t=N(e)[0],r=C(t);return n.mkdirSync(r,t.mode||m),{name:r,removeCallback:P(r,t,!0)}},e.exports.file=function(e,t){const r=N(e,t),o=r[0],i=r[1];S(o,(function(e,t){if(e)return i(e);n.open(t,p,o.mode||_,(function(e,r){if(e)return i(e);if(o.discardDescriptor)return n.close(r,(function(e){return i(e,t,void 0,w(t,-1,o,!1))}));{const e=o.discardDescriptor||o.detachDescriptor;i(null,t,r,w(t,e?-1:r,o,!1))}}))}))},e.exports.fileSync=function(e){const t=N(e)[0],r=t.discardDescriptor||t.detachDescriptor,o=C(t);var i=n.openSync(o,p,t.mode||_);return t.discardDescriptor&&(n.closeSync(i),i=void 0),{name:o,fd:i,removeCallback:w(o,r?-1:i,t,!0)}},e.exports.tmpName=S,e.exports.tmpNameSync=C,e.exports.setGracefulCleanup=function(){b=!0}},5054:(e,t,r)=>{var n=r(4501).strict;e.exports=function(e){if(n(e)){var t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return Buffer.from(e)}},6277:(e,t,r)=>{"use strict";const n=r(511);e.exports=()=>n(32)},8146:(e,t,r)=>{var n=r(1017);e.exports=function(e){return"\\"===n.sep?e.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):e}},2600:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>w,parse:()=>v,stringify:()=>p,v1:()=>_,v3:()=>S,v4:()=>A,v5:()=>T,validate:()=>u,version:()=>P});var n=r(6113),o=r.n(n);const i=new Uint8Array(256);let s=i.length;function a(){return s>i.length-16&&(o().randomFillSync(i),s=0),i.slice(s,s+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const u=function(e){return"string"==typeof e&&c.test(e)},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function d(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const p=function(e,t=0){const r=d(e,t);if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let h,f,g=0,m=0;const _=function(e,t,r){let n=t&&r||0;const o=t||new Array(16);let i=(e=e||{}).node||h,s=void 0!==e.clockseq?e.clockseq:f;if(null==i||null==s){const t=e.random||(e.rng||a)();null==i&&(i=h=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==s&&(s=f=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const l=c-g+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(s=s+1&16383),(l<0||c>g)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,m=u,f=s,c+=122192928e5;const p=(1e4*(268435455&c)+u)%4294967296;o[n++]=p>>>24&255,o[n++]=p>>>16&255,o[n++]=p>>>8&255,o[n++]=255&p;const _=c/4294967296*1e4&268435455;o[n++]=_>>>8&255,o[n++]=255&_,o[n++]=_>>>24&15|16,o[n++]=_>>>16&255,o[n++]=s>>>8|128,o[n++]=255&s;for(let e=0;e<6;++e)o[n+e]=i[e];return t||d(o)};const v=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};const E="6ba7b810-9dad-11d1-80b4-00c04fd430c8",y="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function b(e,t,r){function n(e,n,o,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=v(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(let e=0;e<16;++e)o[i+e]=a[e];return o}return d(a)}try{n.name=e}catch(e){}return n.DNS=E,n.URL=y,n}const S=b("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()})),C={randomUUID:o().randomUUID};const A=function(e,t,r){if(C.randomUUID&&!t&&!e)return C.randomUUID();const n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return d(n)};const T=b("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()})),w="00000000-0000-0000-0000-000000000000";const P=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},3949:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.error.message),this.cause=e}}t.CdpError=r},3706:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(2361),i=r(3949),s=r(6117);t.Connection=class{constructor(e){this.transport=e,this.api=new Proxy({},{get:(e,t)=>{var r;return e[t]=null!=(r=e[t])?r:this.createDomain(t)}}),this.lastId=0,this.callbacks=new Map,this.innerEmitter=new o.EventEmitter,this.commandEmitter=new s.EventEmitter,this.replyEmitter=new s.EventEmitter,this.onError=this.transport.onError,this.onEnd=this.transport.onEnd,this.onCommand=this.commandEmitter.addListener,this.onReply=this.replyEmitter.addListener,e.onMessage((e=>this.processResponse(e)))}pause(){this.pauseQueue=this.pauseQueue||[]}unpause(){if(console.log("process",this.pauseQueue),!this.pauseQueue)return;const e=this.pauseQueue;this.pauseQueue=void 0;for(const t of e)this.processResponse(t)}getId(){return this.lastId++}send(e){this.transport.send(e)}call(e,t){const r=this.lastId++,n={id:r,method:e,params:t};return this.transport.send(n),new Promise(((e,t)=>{this.callbacks.set(r,{resolve:e,reject:t})}))}close(){return n(this,void 0,void 0,(function*(){yield this.transport.close();for(const{reject:e}of this.callbacks.values())e(new s.TaskCancelledError("CDP connection closed"));this.callbacks.clear()}))}createDomain(e){return new Proxy({},{get:(t,r)=>"on"===r?(t,r)=>{const n=`${e}.${t}`;return this.innerEmitter.on(n,r),()=>this.innerEmitter.off(n,r)}:t=>this.call(`${e}.${r}`,t)})}processResponse(e){if(this.pauseQueue&&this.pauseQueue.push(e),void 0===e.id){const t=e;return this.commandEmitter.emit(t),void this.innerEmitter.emit(t.method,t.params)}this.replyEmitter.emit(e);const t=this.callbacks.get(e.id);t&&(this.callbacks.delete(e.id),"error"in e?t.reject(new i.CdpError(e)):"result"in e&&t.resolve(e.result))}}},8973:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(8155)),n(r(3706)),n(r(3949)),n(r(7510))},8155:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(8777),i=r(6117),s=r(3706),a=r(7510),c=r(3685);class u{constructor(e,t){this.wss=e,this.httpServer=t,this.connectionEmitter=new i.EventEmitter,this.onConnection=this.connectionEmitter.addListener,this.address=this.httpServer.address(),e.on("connection",((e,t)=>{this.connectionEmitter.emit([new s.Connection(new a.WebSocketTransport(e)),t])}))}static create(e={}){return n(this,void 0,void 0,(function*(){const{host:t="127.0.0.1",port:r=0}=e,n=c.createServer(((e,o)=>{const i=r||n.address().port;o.write(JSON.stringify({webSocketDebuggerUrl:`ws://${t}:${i}/ws`})),o.end()})),i=new o.Server({server:n});return n.listen(r),new u(i,n)}))}dispose(){this.wss.close(),this.httpServer.close()}}t.Server=u},7510:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(8777),i=r(6117);class s extends Error{constructor(e){super(e.message),this.cause=e}}t.WebSocketError=s;class a{constructor(e){this.endEmitter=new i.EventEmitter,this.messageEmitter=new i.EventEmitter,this.errorEmitter=new i.EventEmitter,this.onMessage=this.messageEmitter.addListener,this.onError=this.errorEmitter.addListener,this.onEnd=this.endEmitter.addListener,this.ws=e,this.ws.addEventListener("message",(e=>{this.messageEmitter.emit(JSON.parse(e.data))})),this.ws.addEventListener("close",(()=>{this.endEmitter.emit()})),this.ws.addEventListener("error",(e=>{this.errorEmitter.emit(new s(e))}))}static create(e,t=i.CancellationToken.None){return n(this,void 0,void 0,(function*(){const r=new o(e,[],{perMessageDeflate:!1,maxPayload:268435456});return yield new Promise(((e,n)=>{const o=t.onCancellationRequested((()=>{r.close(),n(new i.TaskCancelledError)}));r.addEventListener("open",(()=>{e(new a(r)),o.dispose()})),r.addEventListener("error",(()=>{n(),o.dispose()}))}))}))}send(e){var t;null===(t=this.ws)||void 0===t||t.send(JSON.stringify(e))}close(){return n(this,void 0,void 0,(function*(){if(!this.ws)return;let e;const t=new Promise((t=>e=t));return this.ws.addEventListener("close",(()=>e())),this.ws.close(),this.ws=void 0,t}))}}t.WebSocketTransport=a},8361:(e,t,r)=>{var n=Object.create,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&d(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&d(e,r,t[r]);return e},h=e=>o(e,"__esModule",{value:!0}),f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),g=e=>((e,t,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of s(t))!u.call(e,n)&&"default"!==n&&o(e,n,{get:()=>t[n],enumerable:!(r=i(t,n))||r.enumerable});return e})(h(o(null!=e?n(c(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),m=f(((e,t)=>{"use strict";var r=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=r})),_=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var n=hn(),o=r(2361),i=function(){function e(){}return e.prototype.active=function(){var e=this,r=n.CorrelationContextManager.getCurrentContext();return t(t({},r),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&r:(e._activeSymbol=t,r)},setValue:function(){}})},e.prototype.with=function(t,r){var o=t.parentSpanId,i=t.name,s=e._spanToContext(t,o,i);return n.CorrelationContextManager.runWithContext(s,r)()},e.prototype.bind=function(e){return"function"==typeof e?n.CorrelationContextManager.wrapCallback(e):(e instanceof o.EventEmitter&&n.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return n.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return n.CorrelationContextManager.disable(),this},e._spanToContext=function(e,r,o){var i=r?"|"+e.spanContext().traceId+"."+r+".":e.spanContext().traceId,s=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return n.CorrelationContextManager.spanToContextObject(s,i,o)},e}();e.OpenTelemetryScopeManagerWrapper=i,e.AsyncScopeManager=new i})),v=f(((e,t)=>{var r;e=t.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var _=a++;s[_]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[_]+"(?:\\."+s[_]+")*))";var E=a++,y="v?"+s[d]+s[g]+"?"+s[v]+"?";s[E]="^"+y+"$";var b="[v=\\s]*"+s[p]+s[m]+"?"+s[v]+"?",S=a++;s[S]="^"+b+"$";var C=a++;s[C]="((?:<|>)?=?)";var A=a++;s[A]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var w=a++;s[w]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var P=a++;s[P]="[v=\\s]*("+s[A]+")(?:\\.("+s[A]+")(?:\\.("+s[A]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var O=a++;s[O]="^"+s[C]+"\\s*"+s[w]+"$";var I=a++;s[I]="^"+s[C]+"\\s*"+s[P]+"$";var R=a++;s[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=a++;s[D]="(?:~>?)";var N=a++;s[N]="(\\s*)"+s[D]+"\\s+",i[N]=new RegExp(s[N],"g");var M=a++;s[M]="^"+s[D]+s[w]+"$";var x=a++;s[x]="^"+s[D]+s[P]+"$";var k=a++;s[k]="(?:\\^)";var F=a++;s[F]="(\\s*)"+s[k]+"\\s+",i[F]=new RegExp(s[F],"g");var L=a++;s[L]="^"+s[k]+s[w]+"$";var j=a++;s[j]="^"+s[k]+s[P]+"$";var B=a++;s[B]="^"+s[C]+"\\s*("+b+")$|^$";var U=a++;s[U]="^"+s[C]+"\\s*("+y+")$|^$";var H=a++;s[H]="(\\s*)"+s[C]+"\\s*("+b+"|"+s[w]+")",i[H]=new RegExp(s[H],"g");var G=a++;s[G]="^\\s*("+s[w]+")\\s+-\\s+("+s[w]+")\\s*$";var V=a++;s[V]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var q,$=a++;for(s[$]="(<|>)?=?\\s*\\*",q=0;q<35;q++)r(q,s[q]),i[q]||(i[q]=new RegExp(s[q]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?i[S]:i[E]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?i[S]:i[E]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var r=W(e,t);return r?r.version:null},e.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=W(e),n=W(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function Y(e,t,r){return new z(e,r).compare(new z(t,r))}function J(e,t,r){return Y(e,t,r)>0}function Q(e,t,r){return Y(e,t,r)<0}function Z(e,t,r){return 0===Y(e,t,r)}function ee(e,t,r){return 0!==Y(e,t,r)}function te(e,t,r){return Y(e,t,r)>=0}function re(e,t,r){return Y(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return J(e,r,n);case">=":return te(e,r,n);case"<":return Q(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new z(e,t).major},e.minor=function(e,t){return new z(e,t).minor},e.patch=function(e,t){return new z(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,r){return Y(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=J,e.lt=Q,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=oe;var ie={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function de(e,t,r,n){var o,i,s,a,c;switch(e=new z(e,n),t=new se(t,n),r){case">":o=J,i=re,s=Q,a=">",c=">=";break;case"<":o=Q,i=te,s=J,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[B]:i[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new z(e,this.options)),ne(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[V]:i[G];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(i[H],"$1$2$3"),r("comparator trim",e,i[H]),e=(e=(e=e.replace(i[N],"$1~")).replace(i[F],"$1^")).split(/\s+/).join(" ");var o=t?i[B]:i[U],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[j]:i[L];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[x]:i[M];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[I]:i[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=ae(o),u=c||ae(i),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[$],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new oe(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(!n||-1===o.compare(e))&&(o=new z(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(!n||1===o.compare(e))&&(o=new z(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new z("0.0.0");if(e.test(r)||(r=new z("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||J(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(i[R]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),E=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=r(1017),n=v(),o=r(8188),i=Object.keys(process.binding("natives")),s=o.prototype.require;e.makePatchingRequire=function(e){var r={};return function(a){var c=s.apply(this,arguments);if(e[a]){var u=o._resolveFilename(a,this);if(r.hasOwnProperty(u))return r[u];var l=void 0;if(i.indexOf(a)<0)try{l=s.call(this,t.join(a,"package.json")).version}catch(e){return c}else l=process.version.substring(1);var d=l.indexOf("-");d>=0&&(l=l.substring(0,d));for(var p=c,h=0,f=e[a];h<f.length;h++){var g=f[h];n.satisfies(l,g.versionSpecifier)&&(p=g.patch(p,u))}return r[u]=p}return c}}})),y=f(((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}})),b=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=E(),n=E();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return n.makePatchingRequire}});var o=function(e){return!0},i=function(){function e(){this.version=y().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var r=this.subscribers[e];if(r){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,r.forEach((function(e){var t=e.listener,r=e.filter;try{r&&r(!0)&&t(n)}catch(e){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,r){void 0===r&&(r=o),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:r})},e.prototype.unsubscribe=function(e,t,r){void 0===r&&(r=o);var n=this.subscribers[e];if(n)for(var i=0;i<n.length;++i)if(n[i].listener===t&&n[i].filter===r)return n.splice(i,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return e(t(r))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new i,r(8188).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),S=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),C=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),A=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(C(),e)})),T=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(A(),e)})),w=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"})),P=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=w(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(e){var t=new Set([e]),n=new Set,o=e.match(r);if(!o)return function(){return!1};var i=+o[1],s=+o[2],a=+o[3];if(null!=o[4])return function(t){return t===e};function c(e){return n.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var o=e.match(r);if(!o)return c(e);var l=+o[1],d=+o[2],p=+o[3];return null!=o[4]||i!==l?c(e):0===i?s===d&&a<=p?u(e):c(e):s<=d?u(e):c(e)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)})),O=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=T(),r=w(),n=P(),o=r.VERSION.split(".")[0],i=Symbol.for("opentelemetry.js.api."+o),s=t._globalThis;e.registerGlobal=function(e,t,n,o){var a;void 0===o&&(o=!1);var c=s[i]=null!==(a=s[i])&&void 0!==a?a:{version:r.VERSION};if(!o&&c[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(u.stack||u.message),!1}if(c.version!==r.VERSION){u=new Error("@opentelemetry/api: All API registration versions must match");return n.error(u.stack||u.message),!1}return c[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+r.VERSION+"."),!0},e.getGlobal=function(e){var t,r,o=null===(t=s[i])||void 0===t?void 0:t.version;if(o&&n.isCompatible(o))return null===(r=s[i])||void 0===r?void 0:r[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+r.VERSION+".");var n=s[i];n&&delete n[e]}})),I=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=O(),r=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("verbose",this._namespace,e)},e}();function n(e,r,n){var o=t.getGlobal("diag");if(o)return n.unshift(r),o[e].apply(o,n)}e.DiagComponentLogger=r})),R=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),D=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=R();e.createLogLevelDiagLogger=function(e,r){function n(t,n){var o=r[t];return"function"==typeof o&&e>=n?o.bind(r):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),r=r||{},{error:n("error",t.DiagLogLevel.ERROR),warn:n("warn",t.DiagLogLevel.WARN),info:n("info",t.DiagLogLevel.INFO),debug:n("debug",t.DiagLogLevel.DEBUG),verbose:n("verbose",t.DiagLogLevel.VERBOSE)}}})),N=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=I(),r=D(),n=R(),o=O(),i=function(){function e(){function e(e){return function(){var t=o.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var i=this;i.setLogger=function(e,t){var s,a;if(void 0===t&&(t=n.DiagLogLevel.INFO),e===i){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return i.error(null!==(s=c.stack)&&void 0!==s?s:c.message),!1}var u=o.getGlobal("diag"),l=r.createLogLevelDiagLogger(t,e);if(u){var d=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+d),l.warn("Current logger will overwrite one already registered from "+d)}return o.registerGlobal("diag",l,i,!0)},i.disable=function(){o.unregisterGlobal("diag",i)},i.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},i.verbose=e("verbose"),i.debug=e("debug"),i.info=e("info"),i.warn=e("warn"),i.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=i})),M=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),o=0,i=t;o<i.length;o++){var s=i[o];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),x=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),k=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=N(),r=M(),n=x(),o=t.DiagAPI.instance();e.createBaggage=function(e){return void 0===e&&(e={}),new r.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(o.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return e}}}})),F=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),L=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),j=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function e(e){return function(){var t=arguments;if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var r=0;r<t.length;r++)this[t[r].n]=e(t[r].c)};e.DiagConsoleLogger=r})),B=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(j(),e),r(R(),e)})),U=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,r){null!=e&&(e[t]=r)}}})),H=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),G=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),V=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};var t=function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}};e.ROOT_CONTEXT=new t})),q=f((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=V(),n=function(){function e(){}return e.prototype.active=function(){return r.ROOT_CONTEXT},e.prototype.with=function(e,r,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return r.call.apply(r,t([n],o))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=n})),$=f((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=q(),n=O(),o=N(),i="context",s=new r.NoopContextManager,a=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return n.registerGlobal(i,e,o.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,r,n){for(var o,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(o=this._getContextManager()).with.apply(o,t([e,r,n],i))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return n.getGlobal(i)||s},e.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(i,o.DiagAPI.instance())},e}();e.ContextAPI=a})),W=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),z=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=W();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})),K=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=z(),r=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=r})),X=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=V(),r=K(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(n)||void 0}function i(e,t){return e.setValue(n,t)}e.getSpan=o,e.setSpan=i,e.deleteSpan=function(e){return e.deleteValue(n)},e.setSpanContext=function(e,t){return i(e,new r.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}})),Y=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=z(),r=K(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function i(e){return n.test(e)&&e!==t.INVALID_TRACEID}function s(e){return o.test(e)&&e!==t.INVALID_SPANID}e.isValidTraceId=i,e.isValidSpanId=s,e.isSpanContextValid=function(e){return i(e.traceId)&&s(e.spanId)},e.wrapSpanContext=function(e){return new r.NonRecordingSpan(e)}})),J=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=$(),r=X(),n=K(),o=Y(),i=t.ContextAPI.getInstance(),s=function(){function e(){}return e.prototype.startSpan=function(e,t,i){if(Boolean(null==t?void 0:t.root))return new n.NonRecordingSpan;var s=i&&r.getSpanContext(i);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(s)&&o.isSpanContextValid(s)?new n.NonRecordingSpan(s):new n.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,n,o){var s,a,c;if(!(arguments.length<2)){2===arguments.length?c=t:3===arguments.length?(s=t,c=n):(s=t,a=n,c=o);var u=null!=a?a:i.active(),l=this.startSpan(e,s,u),d=r.setSpan(u,l);return i.with(d,c,void 0,l)}},e}();e.NoopTracer=s})),Q=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=new(J().NoopTracer),r=function(){function e(e,t,r){this._provider=e,this.name=t,this.version=r}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):t},e}();e.ProxyTracer=r})),Z=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=J(),r=function(){function e(){}return e.prototype.getTracer=function(e,r){return new t.NoopTracer},e}();e.NoopTracerProvider=r})),ee=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=Q(),r=new(Z().NoopTracerProvider),n=function(){function e(){}return e.prototype.getTracer=function(e,r){var n;return null!==(n=this.getDelegateTracer(e,r))&&void 0!==n?n:new t.ProxyTracer(this,e,r)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:r},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t)},e}();e.ProxyTracerProvider=n})),te=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),re=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),ne=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),oe=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),ie=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),se=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ae=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),ce=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ue=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),le=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),de=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),pe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=O(),r=ee(),n=Y(),o=X(),i=N(),s="trace",a=function(){function e(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var r=t.registerGlobal(s,this._proxyTracerProvider,i.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},e.prototype.getTracerProvider=function(){return t.getGlobal(s)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(s,i.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},e}();e.TraceAPI=a})),he=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),fe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=V().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,r){return e.setValue(t,r)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),ge=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=O(),r=he(),n=U(),o=fe(),i=k(),s=N(),a="propagation",c=new r.NoopTextMapPropagator,u=function(){function e(){this.createBaggage=i.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(a,e,s.DiagAPI.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=n.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=n.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(a,s.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(a)||c},e}();e.PropagationAPI=u})),me=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(S(),e);var n=k();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(F(),e),r(L(),e),r(B(),e),r(U(),e),r(H(),e),r(G(),e),r(Q(),e),r(ee(),e),r(te(),e),r(re(),e),r(ne(),e),r(oe(),e),r(ie(),e),r(se(),e),r(ae(),e),r(W(),e),r(ce(),e),r(ue(),e),r(le(),e);var o=Y();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var i=z();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),r(V(),e),r(de(),e);var s=$();e.context=s.ContextAPI.getInstance();var a=pe();e.trace=a.TraceAPI.getInstance();var c=ge();e.propagation=c.PropagationAPI.getInstance();var u=N();e.diag=u.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),_e=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=me().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),ve=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),Ee=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=me(),r=ve();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let n=`${e}${""!==e?r.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>r.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),"");e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`));e.parsePairKeyValue=e=>{let n=e.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;let o=n.shift();if(!o)return;let i=o.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==i.length)return;let s,a=decodeURIComponent(i[0].trim()),c=decodeURIComponent(i[1].trim());return n.length>0&&(s=t.baggageEntryMetadataFromString(n.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:a,value:c,metadata:s}};e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(r.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),ye=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=me(),r=_e(),n=ve(),o=Ee();e.HttpBaggagePropagator=class{inject(e,i,s){let a=t.propagation.getBaggage(e);if(!a||r.isTracingSuppressed(e))return;let c=o.getKeyPairs(a).filter((e=>e.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=o.serializeKeyPairs(c);u.length>0&&s.set(i,n.BAGGAGE_HEADER,u)}extract(e,r,i){let s=i.get(r,n.BAGGAGE_HEADER);if(!s)return e;let a={};return 0===s.length||(s.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=o.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),a[t.key]=e}})),0===Object.entries(a).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(a))}fields(){return[n.BAGGAGE_HEADER]}}})),be=f((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let n of e)if(null!=n){if(!t){if(r(n)){t=typeof n;continue}return!1}if(typeof n!==t)return!1}return!0}(e):r(e))}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let r={};if(null==e||"object"!=typeof e)return r;for(let[n,o]of Object.entries(e))t(o)&&(Array.isArray(o)?r[n]=o.slice():r[n]=o);return r},e.isAttributeValue=t})),Se=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=me();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},r=e;for(;null!==r;)Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;let n=r[e];n&&(t[e]=String(n))})),r=Object.getPrototypeOf(r);return t}(e))}(e))}}})),Ce=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Se().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e};e.globalErrorHandler=e=>{try{t(e)}catch(e){}}})),Ae=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),Te=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=me(),r=Ae(),n=",",o=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function i(e){return o.indexOf(e)>-1}var s=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(e){return s.indexOf(e)>-1}function c(e,t,r,n=-1/0,o=1/0){if(void 0!==r[e]){let i=Number(r[e]);isNaN(i)||(t[e]=i<n?n:i>o?o:i)}}function u(e,t,r,o=n){let i=r[e];"string"==typeof i&&(t[e]=i.split(o).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var l={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function d(e,t,r){let n=r[e];if("string"==typeof n){let r=l[n.toUpperCase()];null!=r&&(t[e]=r)}}e.parseEnvironment=function(t){let r={};for(let n in e.DEFAULT_ENVIRONMENT){let e=n;if("OTEL_LOG_LEVEL"===e)d(e,r,t);else if(i(e))c(e,r,t);else if(a(e))u(e,r,t);else{let n=t[e];null!=n&&(r[e]=String(n))}}return r}})),we=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=r(2037),n=Te();e.getEnv=function(){let e=n.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},n.DEFAULT_ENVIRONMENT,e)}})),Pe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let t=e.substring(n,n+2),o=parseInt(t,16);r+=String.fromCharCode(o)}return Buffer.from(r,"ascii").toString("base64")}})),Oe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;e.RandomIdGenerator=class{constructor(){this.generateTraceId=r(16),this.generateSpanId=r(8)}};var t=Buffer.allocUnsafe(16);function r(e){return function(){for(let r=0;r<e/4;r++)t.writeUInt32BE(Math.random()*2**32>>>0,4*r);for(let r=0;r<e&&!(t[r]>0);r++)r===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),Ie=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=r(4074);e.otperformance=t.performance})),Re=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),De=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),Ne=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(De(),e)})),Me=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),xe=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Me(),e)})),ke=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ne(),e),r(xe(),e)})),Fe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=Re(),r=ke();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),Le=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),je=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(we(),e),r(Pe(),e),r(Oe(),e),r(Ie(),e),r(Fe(),e),r(Le(),e)})),Be=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(je(),e)})),Ue=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=Be(),r=9,n=Math.pow(10,r);function o(e){let t=e/1e3,o=Math.trunc(t);return[o,Number((t-o).toFixed(r))*n]}function i(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let r=t.otperformance;e=r.timing&&r.timing.fetchStart}return e}function s(e){let r=o(i()),s=o("number"==typeof e?e:t.otperformance.now()),a=r[0]+s[0],c=r[1]+s[1];return c>n&&(c-=n,a+=1),[a,c]}function a(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=s,e.timeInputToHrTime=function(e){if(a(e))return e;if("number"==typeof e)return e<i()?s(e):o(e);if(e instanceof Date)return o(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let r=t[0]-e[0],o=t[1]-e[1];return o<0&&(r-=1,o+=n),[r,o]},e.hrTimeToTimeStamp=function(e){let t=r,n=`${"0".repeat(t)}${e[1]}Z`,o=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",o)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=a,e.isTimeInput=function(e){return a(e)||"number"==typeof e||e instanceof Date}})),He=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ge=f((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),Ve=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=me();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,r,n){for(let o of this._propagators)try{o.inject(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}}extract(e,r,n){return this._propagators.reduce(((e,o)=>{try{return o.extract(e,r,n)}catch(e){t.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),qe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=new RegExp(`^(?:${`[a-z]${t}{0,255}`}|${`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`})$`),n=/^[ -~]{0,255}[!-~]$/,o=/,|=/;e.validateKey=function(e){return r.test(e)},e.validateValue=function(e){return n.test(e)&&!o.test(e)}})),$e=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=qe(),r=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,r)=>{let n=r.trim(),o=n.indexOf("=");if(-1!==o){let i=n.slice(0,o),s=n.slice(o+1,r.length);t.validateKey(i)&&t.validateValue(s)&&e.set(i,s)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new r;return e._internalState=new Map(this._internalState),e}};e.TraceState=r})),We=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=me(),r=_e(),n=$e();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var o=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function i(e){let t=o.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=i;e.HttpTraceContextPropagator=class{inject(n,o,i){let s=t.trace.getSpanContext(n);if(!s||r.isTracingSuppressed(n)||!t.isSpanContextValid(s))return;let a=`00-${s.traceId}-${s.spanId}-0${Number(s.traceFlags||t.TraceFlags.NONE).toString(16)}`;i.set(o,e.TRACE_PARENT_HEADER,a),s.traceState&&i.set(o,e.TRACE_STATE_HEADER,s.traceState.serialize())}extract(r,o,s){let a=s.get(o,e.TRACE_PARENT_HEADER);if(!a)return r;let c=Array.isArray(a)?a[0]:a;if("string"!=typeof c)return r;let u=i(c);if(!u)return r;u.isRemote=!0;let l=s.get(o,e.TRACE_STATE_HEADER);if(l){let e=Array.isArray(l)?l.join(","):l;u.traceState=new n.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(r,u)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),ze=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ke=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=me().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,r){return e.setValue(t,r)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),Xe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=me();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),Ye=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=me();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),Je=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=me(),r=Ce(),n=Xe(),o=Ye();e.ParentBasedSampler=class{constructor(e){var t,i,s,a;this._root=e.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new o.AlwaysOnSampler,this._remoteParentNotSampled=null!==(i=e.remoteParentNotSampled)&&void 0!==i?i:new n.AlwaysOffSampler,this._localParentSampled=null!==(s=e.localParentSampled)&&void 0!==s?s:new o.AlwaysOnSampler,this._localParentNotSampled=null!==(a=e.localParentNotSampled)&&void 0!==a?a:new n.AlwaysOffSampler}shouldSample(e,r,n,o,i,s){let a=t.trace.getSpanContext(e);return a&&t.isSpanContextValid(a)?a.isRemote?a.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,i,s):this._remoteParentNotSampled.shouldSample(e,r,n,o,i,s):a.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,i,s):this._localParentNotSampled.shouldSample(e,r,n,o,i,s):this._root.shouldSample(e,r,n,o,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),Qe=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=me();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,r){return{decision:t.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){let n=8*r;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}})),Ze=f((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,r){if(!r)return!1;for(let n of r)if(t(e,n))return!0;return!1}})),et=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),tt=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(ye(),e),r(be(),e),r(Ce(),e),r(Se(),e),r(Ue(),e),r(He(),e),r(Ge(),e),r(Re(),e),e.baggageUtils=Ee(),r(Be(),e),r(Ve(),e),r(We(),e),r(ze(),e),r(Ke(),e),r(Xe(),e),r(Ye(),e),r(Je(),e),r(Qe(),e),r(_e(),e),r($e(),e),r(Te(),e),r(Ae(),e),r(Ze(),e),r(et(),e),r(Re(),e)})),rt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),nt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=me(),r=tt(),n=ke(),o=rt();e.Span=class{constructor(e,n,o,i,s,a,c=[],u=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=o,this._spanContext=i,this.parentSpanId=a,this.kind=s,this.links=c,this.startTime=r.timeInputToHrTime(u),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(e,n){return null==n||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):r.isAttributeValue(n)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=n),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,n,o){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(n)&&(void 0===o&&(o=n),n=void 0),void 0===o&&(o=r.hrTime()),this.events.push({name:e,attributes:n,time:r.timeInputToHrTime(o)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=r.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=r.timeInputToHrTime(e),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,i=r.hrTime()){let s={};"string"==typeof e?s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?s[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(s[n.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(s[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(s[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),s[n.SemanticAttributes.EXCEPTION_TYPE]||s[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,s,i):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),ot=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=me(),r=tt(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;function i(e=r.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(a(e));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(a(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:i(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=i;var s=1;function a(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${s}.`),s;let r=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(r)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${s}.`),s):r<0||r>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${s}.`),s):r}})),it=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=ot();e.mergeConfig=function(e){let r={sampler:t.buildSamplerFromEnv()},n=Object.assign({},t.DEFAULT_CONFIG,r,e);return n.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),n}})),st=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=me(),r=tt(),n=nt(),o=it();e.Tracer=class{constructor(e,t,n){this._tracerProvider=n;let i=o.mergeConfig(t);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=t.idGenerator||new r.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,o={},i=t.context.active()){var s,a;if(r.isTracingSuppressed(i))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let c,u,l,d=function(e,r){if(!e.root)return t.trace.getSpanContext(r)}(o,i),p=this._idGenerator.generateSpanId();d&&t.trace.isSpanContextValid(d)?(c=d.traceId,u=d.traceState,l=d.spanId):c=this._idGenerator.generateTraceId();let h=null!==(s=o.kind)&&void 0!==s?s:t.SpanKind.INTERNAL,f=null!==(a=o.links)&&void 0!==a?a:[],g=r.sanitizeAttributes(o.attributes),m=this._sampler.shouldSample(o.root?t.trace.setSpanContext(i,t.INVALID_SPAN_CONTEXT):i,c,e,h,g,f),_={traceId:c,spanId:p,traceFlags:m.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:u};if(m.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(_);let v=new n.Span(this,i,e,_,h,l,f,o.startTime);return v.setAttributes(Object.assign(g,m.attributes)),v}startActiveSpan(e,r,n,o){let i,s,a;if(arguments.length<2)return;2===arguments.length?a=r:3===arguments.length?(i=r,a=n):(i=r,s=n,a=o);let c=null!=s?s:t.context.active(),u=this.startSpan(e,i,c),l=t.trace.setSpan(c,u);return t.context.with(l,a,void 0,u)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),at=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),ct=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=ft(),n=me(),o=r(3837);e.detectResources=async(e={})=>{let r=Object.assign(e),o=await Promise.all((r.detectors||[]).map((async e=>{try{let t=await e.detect(r);return n.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(r){return n.diag.debug(`${e.constructor.name} failed: ${r.message}`),t.Resource.empty()}})));return i(o),o.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var i=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=o.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});n.diag.verbose(t)}}))}})),ut=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=me(),r=tt(),n=ke(),o=_t();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let i={},s=r.getEnv(),a=s.OTEL_RESOURCE_ATTRIBUTES,c=s.OTEL_SERVICE_NAME;if(a)try{let e=this._parseResourceAttributes(a);Object.assign(i,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return c&&(i[n.ResourceAttributes.SERVICE_NAME]=c),new o.Resource(i)}_parseResourceAttributes(e){if(!e)return{};let t={},r=e.split(this._COMMA_SEPARATOR,-1);for(let e of r){let r=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==r.length)continue;let[n,o]=r;if(n=n.trim(),o=o.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(o))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=o}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let r=e.charAt(t);if(r<=" "||r>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),lt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=me(),r=ke(),n=_t();e.processDetector=new class{async detect(e){let t={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,o){return""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[r.ResourceAttributes.PROCESS_COMMAND]||""===e[r.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},e))}}})),dt=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ut(),e),r(lt(),e)})),pt=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(at(),e),r(ct(),e),r(dt(),e)})),ht=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(pt(),e)})),ft=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=ke(),r=tt(),n=ht(),o=class{constructor(e){this.attributes=e}static empty(){return o.EMPTY}static default(){return new o({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new o(t)}};e.Resource=o,o.EMPTY=new o({})})),gt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),mt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),_t=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(ft(),e),r(ht(),e),r(gt(),e),r(mt(),e)})),vt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=tt();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((r=>{Promise.all(e).then((()=>{r()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),r()}))}))}onStart(e,t){for(let r of this._spanProcessors)r.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,r)=>{Promise.all(e).then((()=>{t()}),r)}))}}})),Et=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),yt=f(((e,t)=>{var r=200,n="__lodash_hash_undefined__",o=800,i=16,s=9007199254740991,a="[object Arguments]",c="[object AsyncFunction]",u="[object Function]",l="[object GeneratorFunction]",d="[object Null]",p="[object Object]",h="[object Proxy]",f="[object Undefined]",g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[a]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_[u]=_["[object Map]"]=_["[object Number]"]=_[p]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1;var v="object"==typeof global&&global&&global.Object===Object&&global,E="object"==typeof self&&self&&self.Object===Object&&self,y=v||E||Function("return this")(),b="object"==typeof e&&e&&!e.nodeType&&e,S=b&&"object"==typeof t&&t&&!t.nodeType&&t,C=S&&S.exports===b,A=C&&v.process,T=function(){try{return S&&S.require&&S.require("util").types||A&&A.binding&&A.binding("util")}catch(e){}}(),w=T&&T.isTypedArray;var P,O=Array.prototype,I=Function.prototype,R=Object.prototype,D=y["__core-js_shared__"],N=I.toString,M=R.hasOwnProperty,x=(P=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",k=R.toString,F=N.call(Object),L=RegExp("^"+N.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=C?y.Buffer:void 0,B=y.Symbol,U=y.Uint8Array,H=j?j.allocUnsafe:void 0,G=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),V=Object.create,q=R.propertyIsEnumerable,$=O.splice,W=B?B.toStringTag:void 0,z=function(){try{var e=ve(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),K=j?j.isBuffer:void 0,X=Math.max,Y=Date.now,J=ve(y,"Map"),Q=ve(Object,"create"),Z=function(){function e(){}return function(t){if(!Re(t))return{};if(V)return V(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function te(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ne(e){var t=this.__data__=new te(e);this.size=t.size}function oe(e,t){var r=Te(e),n=!r&&Ae(e),o=!r&&!n&&Pe(e),i=!r&&!n&&!o&&Ne(e),s=r||n||o||i,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var u in e)(t||M.call(e,u))&&(!s||!("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ee(u,c)))&&a.push(u);return a}function ie(e,t,r){(void 0!==r&&!Ce(e[t],r)||void 0===r&&!(t in e))&&ce(e,t,r)}function se(e,t,r){var n=e[t];(!M.call(e,t)||!Ce(n,r)||void 0===r&&!(t in e))&&ce(e,t,r)}function ae(e,t){for(var r=e.length;r--;)if(Ce(e[r][0],t))return r;return-1}function ce(e,t,r){"__proto__"==t&&z?z(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}ee.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},ee.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ee.prototype.get=function(e){var t=this.__data__;if(Q){var r=t[e];return r===n?void 0:r}return M.call(t,e)?t[e]:void 0},ee.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:M.call(t,e)},ee.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Q&&void 0===t?n:t,this},te.prototype.clear=function(){this.__data__=[],this.size=0},te.prototype.delete=function(e){var t=this.__data__,r=ae(t,e);return!(r<0)&&(r==t.length-1?t.pop():$.call(t,r,1),--this.size,!0)},te.prototype.get=function(e){var t=this.__data__,r=ae(t,e);return r<0?void 0:t[r][1]},te.prototype.has=function(e){return ae(this.__data__,e)>-1},te.prototype.set=function(e,t){var r=this.__data__,n=ae(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},re.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new(J||te),string:new ee}},re.prototype.delete=function(e){var t=_e(this,e).delete(e);return this.size-=t?1:0,t},re.prototype.get=function(e){return _e(this,e).get(e)},re.prototype.has=function(e){return _e(this,e).has(e)},re.prototype.set=function(e,t){var r=_e(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ne.prototype.clear=function(){this.__data__=new te,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof te){var o=n.__data__;if(!J||o.length<r-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new re(o)}return n.set(e,t),this.size=n.size,this};var ue=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var c=s[e?a:++o];if(!1===r(i[c],c,i))break}return t}}();function le(e){return null==e?void 0===e?f:d:W&&W in Object(e)?function(e){var t=M.call(e,W),r=e[W];try{e[W]=void 0;var n=!0}catch(e){}var o=k.call(e);return n&&(t?e[W]=r:delete e[W]),o}(e):function(e){return k.call(e)}(e)}function de(e){return De(e)&&le(e)==a}function pe(e){return!(!Re(e)||function(e){return!!x&&x in e}(e))&&(Oe(e)?L:g).test(function(e){if(null!=e){try{return N.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function he(e){if(!Re(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ye(e),r=[];for(var n in e)"constructor"==n&&(t||!M.call(e,n))||r.push(n);return r}function fe(e,t,r,n,o){e!==t&&ue(t,(function(i,s){if(o||(o=new ne),Re(i))!function(e,t,r,n,o,i,s){var a=be(e,r),c=be(t,r),u=s.get(c);if(u)return void ie(e,r,u);var l=i?i(a,c,r+"",e,t,s):void 0,d=void 0===l;if(d){var h=Te(c),f=!h&&Pe(c),g=!h&&!f&&Ne(c);l=c,h||f||g?Te(a)?l=a:function(e){return De(e)&&we(e)}(a)?l=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(a):f?(d=!1,l=function(e,t){if(t)return e.slice();var r=e.length,n=H?H(r):new e.constructor(r);return e.copy(n),n}(c,!0)):g?(d=!1,l=function(e,t){var r=t?function(e){var t=new e.constructor(e.byteLength);return new U(t).set(new U(e)),t}(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(c,!0)):l=[]:function(e){if(!De(e)||le(e)!=p)return!1;var t=G(e);if(null===t)return!0;var r=M.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&N.call(r)==F}(c)||Ae(c)?(l=a,Ae(a)?l=function(e){return function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],c=n?n(r[a],e[a],a,r,e):void 0;void 0===c&&(c=e[a]),o?ce(r,a,c):se(r,a,c)}return r}(e,Me(e))}(a):(!Re(a)||Oe(a))&&(l=function(e){return"function"!=typeof e.constructor||ye(e)?{}:Z(G(e))}(c))):d=!1}d&&(s.set(c,l),o(l,c,n,i,s),s.delete(c)),ie(e,r,l)}(e,t,s,r,fe,n,o);else{var a=n?n(be(e,s),i,s+"",e,t,o):void 0;void 0===a&&(a=i),ie(e,s,a)}}),Me)}function ge(e,t){return Se(function(e,t,r){return t=X(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=X(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,Fe),e+"")}var me=z?function(e,t){return z(e,"toString",{configurable:!0,enumerable:!1,value:ke(t),writable:!0})}:Fe;function _e(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ve(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return pe(r)?r:void 0}function Ee(e,t){var r=typeof e;return!!(t=null==t?s:t)&&("number"==r||"symbol"!=r&&m.test(e))&&e>-1&&e%1==0&&e<t}function ye(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||R)}function be(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Se=function(e){var t=0,r=0;return function(){var n=Y(),s=i-(n-r);if(r=n,s>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(me);function Ce(e,t){return e===t||e!=e&&t!=t}var Ae=de(function(){return arguments}())?de:function(e){return De(e)&&M.call(e,"callee")&&!q.call(e,"callee")},Te=Array.isArray;function we(e){return null!=e&&Ie(e.length)&&!Oe(e)}var Pe=K||function(){return!1};function Oe(e){if(!Re(e))return!1;var t=le(e);return t==u||t==l||t==c||t==h}function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Re(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function De(e){return null!=e&&"object"==typeof e}var Ne=w?function(e){return function(t){return e(t)}}(w):function(e){return De(e)&&Ie(e.length)&&!!_[le(e)]};function Me(e){return we(e)?oe(e,!0):he(e)}var xe=function(e){return ge((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,t,r){if(!Re(r))return!1;var n=typeof t;return!!("number"==n?we(r)&&Ee(t,r.length):"string"==n&&t in r)&&Ce(r[t],e)}(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t}))}((function(e,t,r){fe(e,t,r)}));function ke(e){return function(){return e}}function Fe(e){return e}t.exports=xe})),bt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=me(),r=tt();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=r.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,n)=>{let o=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var i;clearTimeout(o),t.code===r.ExportResultCode.SUCCESS?e():n(null!==(i=t.error)&&void 0!==i?i:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{r.globalErrorHandler(e)}))}),this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),St=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=bt(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r})),Ct=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(St(),e)})),At=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Ct(),e)})),Tt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,r,n=me(),o=tt(),i=_t(),s=xt(),a=ot(),c=vt(),u=Et(),l=yt(),d=At();(r=t=e.ForceFlushState||(e.ForceFlushState={}))[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved";var p=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let r=l({},a.DEFAULT_CONFIG,e);this.resource=null!==(t=r.resource)&&void 0!==t?t:i.Resource.empty(),this.resource=i.Resource.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});let n=this._buildExporterFromEnv();if(void 0!==n){let e=new d.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(e,t){let r=`${e}@${t||""}`;return this._tracers.has(r)||this._tracers.set(r,new s.Tracer({name:e,version:t},this._config,this)),this._tracers.get(r)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new c.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map((r=>new Promise((n=>{let o,i=setTimeout((()=>{n(new Error(`Span processor did not completed within timeout period of ${e} ms`)),o=t.timeout}),e);r.forceFlush().then((()=>{clearTimeout(i),o!==t.timeout&&(o=t.resolved,n(o))})).catch((e=>{clearTimeout(i),o=t.error,n(e)}))}))));return new Promise(((e,n)=>{Promise.all(r).then((r=>{let o=r.filter((e=>e!==t.resolved));o.length>0?n(o):e()})).catch((e=>n([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=p._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=p._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(o.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new o.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=o.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=p,p._registeredPropagators=new Map([["tracecontext",()=>new o.HttpTraceContextPropagator],["baggage",()=>new o.HttpBaggagePropagator]]),p._registeredExporters=new Map})),wt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=tt();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,r){for(let t of e)console.log(this._exportInfo(t));if(r)return r({code:t.ExportResultCode.SUCCESS})}}})),Pt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=tt();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,r){if(this._stopped)return r({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>r({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),Ot=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),It=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=me(),r=tt();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),Rt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Dt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Mt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),xt=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(st(),e),r(Tt(),e),r(At(),e),r(wt(),e),r(Pt(),e),r(Ot(),e),r(It(),e),r(Rt(),e),r(Et(),e),r(nt(),e),r(Dt(),e),r(Nt(),e),r(Mt(),e)})),kt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=b();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(n){if(r)return n;try{var o=xt(),i=me(),s=(new o.BasicTracerProvider).getTracer("applicationinsights tracer"),a=n.setTracer;n.setTracer=function(r){var n=r.startSpan;r.startSpan=function(e,r,o){var i=n.call(this,e,r,o),s=i.end;return i.end=function(){var e=s.apply(this,arguments);return t.channel.publish("azure-coretracing",i),e},i},r[e.AzureMonitorSymbol]=!0,a.call(this,r)},i.trace.getSpan(i.context.active()),n.setTracer(s),r=!0}catch(e){}return n}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Ft=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=b();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var r=e.prototype._emit;return e.prototype._emit=function(e,n){var o=r.apply(this,arguments);if(!n){var i=o;i||(i=r.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:i})}return o},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),Lt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=b(),n=r(2781);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var r=new n.Writable,o=new n.Writable;r.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r}),!0},o.write=function(e){if(!e)return!0;var r=e.toString();return t.channel.publish("console",{message:r,stderr:!0}),!0};for(var i=new e.Console(r,o),s=function(t){var r=e[t];r&&(e[t]=function(){if(i[t])try{i[t].apply(i,arguments)}catch(e){}return r.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++){s(c[a])}return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),r(6206)}})),jt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=b();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=r.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),o.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),Bt=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=b();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var n=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext((function(e){return e()}))}}}),o={};return n.on("started",(function(e){o[e.requestId]||(o[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),n.on("failed",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var n=e.instrument(),o={},i={};return n.on("started",(function(e){o[e.requestId]||(i[e.requestId]=r.channel.bindToContext((function(e){return e()})),o[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),n.on("failed",(function(e){var t=o[e.requestId];t&&delete o[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),o.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},o={};return t.on("started",(function(e){n[e.requestId]||(o[e.requestId]=r.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.enable=function(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),Ut=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=b(),n=r(1017);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,o){var i=function(e,r){return function(r,n){var o=e[r];o&&(e[r]=function(){for(var e=arguments.length-1,r=arguments.length-1;r>=0;--r){if("function"==typeof arguments[r]){e=r;break}if(void 0!==arguments[r])break}var i=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof i&&(n?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=t.channel.bindToContext(n(s,i))):arguments[e]=t.channel.bindToContext(i));var a=o.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return i(e.prototype)},a=r(3255)(n.dirname(o)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),i(a)("createQuery",(function(e,r){return function(n){var o=process.hrtime(e.startTime),i=1e3*o[0]+o[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:i,time:e.startDate}),r.apply(this,arguments)}}));var c=r(9118)(n.dirname(o)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),Ht=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=b();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var r=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),r.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),Gt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=b(),n=r(2361);e.postgres6={versionSpecifier:"6.*",patch:function(e,r){var o=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime();function l(e){e&&e[i]&&(e=e[i]);var r=t.channel.bindToContext((function(r,o){var i=process.hrtime(u);if(c.result=o&&{rowCount:o.rowCount,command:o.command},c.error=r,c.duration=Math.ceil(1e3*i[0]+i[1]/1e6),t.channel.publish("postgres",c),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,i,{value:e}),r}catch(t){return e}}try{"string"==typeof e?r instanceof Array?(c.query.preparable={text:e,args:r},s=l(s)):(c.query.text=e,s?s=l(s):r=l(r)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):r?r=l(r):e.callback=l(e.callback))}catch(e){return o.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=o.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,r){var o=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,r,s){var a,c=this,u=!!s,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function p(e){e&&e[i]&&(e=e[i]);var r=t.channel.bindToContext((function(r,o){var i=process.hrtime(d);if(l.result=o&&{rowCount:o.rowCount,command:o.command},l.error=r,l.duration=Math.ceil(1e3*i[0]+i[1]/1e6),t.channel.publish("postgres",l),r){if(e)return e.apply(this,arguments);a&&a instanceof n.EventEmitter&&a.emit("error",r)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(r,i,{value:e}),r}catch(t){return e}}try{"string"==typeof e?r instanceof Array?(l.query.preparable={text:e,args:r},s=(u="function"==typeof s)?p(s):s):(l.query.text=e,s?s=(u="function"==typeof s)?p(s):s:r=(u="function"==typeof r)?p(r):r):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,s?(u="function"==typeof s,s=p(s)):r?r=(u="function"==typeof r)?p(r):r:(u="function"==typeof e.callback,e.callback=u?p(e.callback):e.callback))}catch(e){return o.apply(this,arguments)}return arguments[0]=e,arguments[1]=r,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=o.apply(this,arguments),u?a:a.then((function(e){return p()(void 0,e),new c._Promise((function(t,r){t(e)}))})).catch((function(e){return p()(e,void 0),new c._Promise((function(t,r){r(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),Vt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=b();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var r=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var o=this.address,i=process.hrtime(),s=new Date;e.callback=t.channel.bindToContext((function(r,a){var c=process.hrtime(i),u=1e3*c[0]+c[1]/1e6|0;t.channel.publish("redis",{duration:u,address:o,commandObj:e,err:r,result:a,time:s}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return r.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),qt=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=b();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var n=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,o,i,s=arguments[0];arguments[0].callback=(e=s.callback,o=process.hrtime(),i={query:{},database:{host:null,port:null},result:null,error:null,duration:0},r.channel.bindToContext((function(n,s,a){var c=process.hrtime(o);i=t(t({},i),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!n&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:n,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),r.channel.publish("tedious",i),e.call(this,n,s,a)}))),n.apply(this,arguments)},e}},e.enable=function(){r.channel.registerMonkeyPatch("tedious",e.tedious)}})),$t=f((e=>{"use strict";var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var o=b();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,r){var n=e.call(this,r)||this;return n.winston=t,n}return r(t,e),t.prototype.log=function(e,t){var r=e.message,i=e.level,s=e.meta,a=n(e,["message","level","meta"]);i="function"==typeof Symbol.for?e[Symbol.for("level")]:i,r=e instanceof Error?e:r;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,i);for(var u in s=s||{},a)a.hasOwnProperty(u)&&(s[u]=a[u]);o.channel.publish("winston",{message:r,level:i,levelKind:c,meta:s}),t()},t}(e.Transport);function i(){var r,n=arguments[0].levels||e.config.npm.levels;for(var o in n)n.hasOwnProperty(o)&&(r=void 0===r||n[o]>n[r]?o:r);this.add(new t(e,{level:r}))}var s=e.createLogger;e.createLogger=function(){var r,n=arguments[0].levels||e.config.npm.levels;for(var o in n)n.hasOwnProperty(o)&&(r=void 0===r||n[o]>n[r]?o:r);var a=s.apply(this,arguments);a.add(new t(e,{level:r}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),i.apply(this,arguments)},a};var a=e.configure;return e.configure=function(){a.apply(this,arguments),i.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,r=e.Logger.prototype.log,n=function(r,n,i){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",o.channel.publish("winston",{level:r,message:n,meta:i,levelKind:s}),n};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(e){return e!==n})),this.filters.push(n)):this.filters=[n],r.apply(this,arguments)},e}},e.enable=function(){o.channel.registerMonkeyPatch("winston",e.winston2),o.channel.registerMonkeyPatch("winston",e.winston3)}})),Wt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=kt();e.azuresdk=t;var r=Ft();e.bunyan=r;var n=Lt();e.console=n;var o=jt();e.mongodbCore=o;var i=Bt();e.mongodb=i;var s=Ut();e.mysql=s;var a=Ht();e.pgPool=a;var c=Gt();e.pg=c;var u=Vt();e.redis=u;var l=qt();e.tedious=l;var d=$t();e.winston=d,e.enable=function(){r.enable(),n.enable(),o.enable(),i.enable(),s.enable(),c.enable(),a.enable(),u.enable(),d.enable(),t.enable(),l.enable()}})),zt=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=_(),r=m();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n,o,i,s,a="DiagnosticChannel";if(e.IsInitialized){for(s in n=Wt(),o=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),i={bunyan:n.bunyan,console:n.console,mongodb:n.mongodb,mongodbCore:n.mongodbCore,mysql:n.mysql,redis:n.redis,pg:n.pg,pgPool:n.pgPool,winston:n.winston,azuresdk:n.azuresdk})-1===o.indexOf(s)&&(i[s].enable(),r.info(a,"Subscribed to "+s+" events"));o.length>0&&r.info(a,"Some modules will not be patched",o)}else r.info(a,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(r){if(e.IsInitialized){var n=b();n.channel.addContextPreservation(r),n.channel.spanContextPropagator=t.AsyncScopeManager}}})),Kt=f(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),Xt=f(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=r(3685),i=r(5687),s=r(7310),a=r(2057),c=m(),u=Kt(),l=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&"string"==typeof r)for(var o=t+"=",i=r.split(";"),s=0;s<i.length;s++){r=i[s];if((r=e.trim(r))&&0===r.indexOf(o)){n=r.substring(o.length,i[s].length);break}}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},r=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),n=(Buffer.from?Buffer.from(r,"binary"):new Buffer(r,"binary")).toString("base64");return n.substr(0,n.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",o=0;o<4;o++)n+=r[15&(t=e.random32())]+r[t>>4&15]+r[t>>8&15]+r[t>>12&15]+r[t>>16&15]+r[t>>20&15]+r[t>>24&15]+r[t>>28&15];var i=r[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,r=r.length<2?"0"+r:r,(o>0?o+".":"")+(n=n.length<2?"0"+n:n)+":"+r+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var r={};for(var n in t){var o="",i=t[n],s=typeof i;if(e.isPrimitive(i))o=i.toString();else if(null===i||"undefined"===s)o="";else{if("function"===s){c.info("key: "+n+" was function; will not serialize");continue}var a=e.isArray(i)?i:e.extractObject(i);try{o=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){o=i.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+n+", could not be serialized")}}r[n]=o.substring(0,e.MAX_PROPERTY_LENGTH)}return r}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var r=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!r||0==r.length||!t)return!0;for(var n=0;n<r.length;n++){if(new RegExp(r[n].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1}return!0},e.getCorrelationContextTarget=function(e,t){var r=e.headers&&e.headers[u.requestContextHeader];if(r)for(var n=r.split(","),o=0;o<n.length;++o){var i=n[o].split("=");if(2==i.length&&i[0]==t)return i[1]}},e.makeRequest=function(t,r,a,u){r&&0===r.indexOf("//")&&(r="https:"+r);var l=s.parse(r),d=n(n({},a),{host:l.hostname,port:l.port,path:l.pathname}),p=void 0;if("https:"===l.protocol&&(p=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(p=t.proxyHttpUrl||void 0),p){0===p.indexOf("//")&&(p="http:"+p);var h=s.parse(p);"https:"===h.protocol?(c.info("Proxies that use HTTPS are not supported"),p=void 0):d=n(n({},d),{host:h.hostname,port:h.port||"80",path:r,headers:n(n({},d.headers),{Host:l.hostname})})}var f="https:"===l.protocol&&!p;return f&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,f?i.request(d,u):o.request(d,u)},e.safeIncludeCorrelationHeader=function(t,r,n){var o;if("string"==typeof n)o=n;else if(n instanceof Array)o=n.join(",");else if(n&&"function"==typeof n.toString)try{o=n.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}o?e.addCorrelationIdHeaderFromString(t,r,o):r.setHeader(u.requestContextHeader,u.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,r){var n=r.split(","),o=u.requestContextSourceKey+"=";n.some((function(e){return e.substring(0,o.length)===o}))||t.setHeader(u.requestContextHeader,r+","+u.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new i.Agent({keepAlive:!0,maxSockets:25,secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();t.exports=l})),Yt=f(((e,t)=>{"use strict";var r=Xt(),n=m(),o=function(){function e(){}return e.queryCorrelationId=function(t,o){var i=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(i))o(e.completedLookups[i]);else if(e.pendingLookups[i])e.pendingLookups[i].push(o);else{e.pendingLookups[i]=[o];var s=function(){if(e.pendingLookups[i]){var o={method:"GET",disableAppInsightsAutoCollection:!0};n.info(e.TAG,o);var a=r.makeRequest(t,i,o,(function(r){if(200===r.statusCode){var o="";r.setEncoding("utf-8"),r.on("data",(function(e){o+=e})),r.on("end",(function(){n.info(e.TAG,o);var t=e.correlationIdPrefix+o;e.completedLookups[i]=t,e.pendingLookups[i]&&e.pendingLookups[i].forEach((function(e){return e(t)})),delete e.pendingLookups[i]}))}else r.statusCode>=400&&r.statusCode<500?(e.completedLookups[i]=void 0,delete e.pendingLookups[i]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){n.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",o=e.pendingLookups[n];o&&(e.pendingLookups[n]=o.filter((function(e){return e!=r})),0==e.pendingLookups[n].length&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var r="|"===e[0]?1:0;return e.substring(r,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,o){if(t.length+n.length<e.requestIdMaxLength)return t+n+o;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var s=t[i-1];if("."===s||"_"===s)break}if(i<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,i)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();t.exports=o})),Jt=f(((e,t)=>{"use strict";var r=Xt(),n=Yt(),o=function(){function e(t,o){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var i=t.trim().split("-"),s=i.length;s>=4?(this.version=i[0],this.traceId=i[1],this.spanId=i[2],this.traceFlag=i[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(o){this.parentId=o.slice();var a=n.getRootId(o);e.isValidTraceId(a)||(this.legacyRootId=a,a=r.w3cTraceId()),-1!==o.indexOf("|")&&(o=o.substring(1+o.substring(0,o.length-1).lastIndexOf("."),o.length-1)),this.traceId=a,this.spanId=o}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=o})),Qt=f(((e,t)=>{"use strict";var r=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var r=t[0].trim(),n=t[1].trim(),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return o&&i}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var r=[],n={},o=t.split(",");if(o.length>32)return null;for(var i=0,s=o;i<s.length;i++){var a=s[i].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length||!e.validateKeyChars(c[0])||n[c[0]])return null;n[c[0]]=!0,r.push(a)}}return r},e.strict=!0,e}();t.exports=r})),Zt=f(((e,t)=>{"use strict";var r=function(){};t.exports=r})),er=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Zt());t.exports=o})),tr=f(((e,t)=>{"use strict";var r=function(){};t.exports=r})),rr=f(((e,t)=>{"use strict";var r=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"};t.exports=r})),nr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return e.call(this)||this}return n(t,e),t}(tr());t.exports=o})),or=f(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation",t.exports=r})),ir=f(((e,t)=>{"use strict";var r=or(),n=function(){this.kind=r.Measurement};t.exports=n})),sr=f(((e,t)=>{"use strict";var r=function(){this.ver=1,this.sampleRate=100,this.tags={}};t.exports=r})),ar=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Zt());t.exports=o})),cr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return n(t,e),t}(Zt());t.exports=o})),ur=f(((e,t)=>{"use strict";var r=function(){this.hasFullStack=!0,this.parsedStack=[]};t.exports=r})),lr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return n(t,e),t}(Zt());t.exports=o})),dr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return n(t,e),t}(Zt());t.exports=o})),pr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(ar());t.exports=o})),hr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return n(t,e),t}(Zt());t.exports=o})),fr=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Zt());t.exports=o})),gr=f(((e,t)=>{"use strict";var r,n;(n=r||(r={}))[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical",t.exports=r})),mr=f(((e,t)=>{"use strict";var r=function(){};t.exports=r})),_r=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=er(),e.Base=tr(),e.ContextTagKeys=rr(),e.Data=nr(),e.DataPoint=ir(),e.DataPointType=or(),e.Domain=Zt(),e.Envelope=sr(),e.EventData=ar(),e.ExceptionData=cr(),e.ExceptionDetails=ur(),e.MessageData=lr(),e.MetricData=dr(),e.PageViewData=pr(),e.RemoteDependencyData=hr(),e.RequestData=fr(),e.SeverityLevel=gr(),e.StackFrame=mr()})),vr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=_r(),r=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=r,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),Er=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),yr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),br=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Sr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Cr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ar=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Tr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),wr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Or=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ir=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Rr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Dr=f((e=>{"use strict";var t,r;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(r=t=e.TelemetryType||(e.TelemetryType={}))[r.Event=0]="Event",r[r.Exception=1]="Exception",r[r.Trace=2]="Trace",r[r.Metric=3]="Metric",r[r.Request=4]="Request",r[r.Dependency=5]="Dependency",r[r.Availability=6]="Availability",r[r.PageView=7]="PageView"})),Nr=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Er(),e),r(yr(),e),r(br(),e),r(Sr(),e),r(Cr(),e),r(Ar(),e),r(Tr(),e),r(wr(),e),r(Pr(),e),r(Or(),e),r(Ir(),e),r(Rr(),e),r(Dr(),e)})),Mr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),xr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),kr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Lr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),jr=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Br=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ur=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Hr=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Mr(),e),r(xr(),e),r(kr(),e),r(Fr(),e),r(Lr(),e),r(jr(),e),r(Br(),e),r(Ur(),e)})),Gr=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(vr(),e),r(_r(),e),r(Nr(),e),r(Hr(),e)})),Vr=f(((e,t)=>{"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var r=+new Date;this.duration=r-this.startTime,this.statusCode=e;var n=this.properties||{};if(t)if("string"==typeof t)n.error=t;else if(t instanceof Error)n.error=t.message;else if("object"==typeof t)for(var o in t)n[o]=t[o]&&t[o].toString&&t[o].toString();this.properties=n},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=r})),qr=f(((e,t)=>{"use strict";var n,o=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(7310),s=Gr(),a=Xt(),c=Kt(),u=Vr(),l=Yt(),d=Qt(),p=Jt(),h=function(e){function t(t,r){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,r),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return o(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var r in e)t[r]||(t[r]=e[r]);if(e.properties)for(var r in e.properties)t.properties[r]=e.properties[r]}return t},t.prototype.getRequestTags=function(e){var r={};for(var n in e)r[n]=e[n];return r[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),r[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),r[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),r[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),r[t.keys.operationName]=this.getOperationName(e),r[t.keys.operationParentId]=this.getOperationParentId(e),r[t.keys.operationId]=this.getOperationId(e),r},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+i.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,r=i.parse(e.url),n=r.pathname,o=r.search,s=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return i.format({protocol:s,host:e.headers.host,pathname:n,search:o})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},t.prototype._getId=function(e){var r=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,r))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var r=e.headers[c.traceStateHeader]?e.headers[c.traceStateHeader].toString():null,n=e.headers[c.traceparentHeader]?e.headers[c.traceparentHeader].toString():null,o=e.headers[c.requestIdHeader]?e.headers[c.requestIdHeader].toString():null,i=e.headers[c.parentIdHeader]?e.headers[c.parentIdHeader].toString():null,s=e.headers[c.rootIdHeader]?e.headers[c.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[c.correlationContextHeader]?e.headers[c.correlationContextHeader].toString():null,l.w3cEnabled&&(n||r)?(this.traceparent=new p(n?n.toString():null),this.tracestate=n&&r&&new d(r?r.toString():null),this.setBackCompatFromThisTraceContext()):o?l.w3cEnabled?(this.traceparent=new p(null,o),this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=l.generateRequestId(this.parentId),this.operationId=l.getRootId(this.requestId)):l.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=i,this.traceparent.legacyRootId=s||i,this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=l.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=l.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=l.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(u);t.exports=h})),$r=f(((e,t)=>{var r;e=t.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var _=a++;s[_]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[_]+"(?:\\."+s[_]+")*))";var E=a++,y="v?"+s[d]+s[g]+"?"+s[v]+"?";s[E]="^"+y+"$";var b="[v=\\s]*"+s[p]+s[m]+"?"+s[v]+"?",S=a++;s[S]="^"+b+"$";var C=a++;s[C]="((?:<|>)?=?)";var A=a++;s[A]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var w=a++;s[w]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var P=a++;s[P]="[v=\\s]*("+s[A]+")(?:\\.("+s[A]+")(?:\\.("+s[A]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var O=a++;s[O]="^"+s[C]+"\\s*"+s[w]+"$";var I=a++;s[I]="^"+s[C]+"\\s*"+s[P]+"$";var R=a++;s[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=a++;s[D]="(?:~>?)";var N=a++;s[N]="(\\s*)"+s[D]+"\\s+",i[N]=new RegExp(s[N],"g");var M=a++;s[M]="^"+s[D]+s[w]+"$";var x=a++;s[x]="^"+s[D]+s[P]+"$";var k=a++;s[k]="(?:\\^)";var F=a++;s[F]="(\\s*)"+s[k]+"\\s+",i[F]=new RegExp(s[F],"g");var L=a++;s[L]="^"+s[k]+s[w]+"$";var j=a++;s[j]="^"+s[k]+s[P]+"$";var B=a++;s[B]="^"+s[C]+"\\s*("+b+")$|^$";var U=a++;s[U]="^"+s[C]+"\\s*("+y+")$|^$";var H=a++;s[H]="(\\s*)"+s[C]+"\\s*("+b+"|"+s[w]+")",i[H]=new RegExp(s[H],"g");var G=a++;s[G]="^\\s*("+s[w]+")\\s+-\\s+("+s[w]+")\\s*$";var V=a++;s[V]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var q,$=a++;for(s[$]="(<|>)?=?\\s*\\*",q=0;q<35;q++)r(q,s[q]),i[q]||(i[q]=new RegExp(s[q]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?i[S]:i[E]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?i[S]:i[E]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var r=W(e,t);return r?r.version:null},e.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=W(e),n=W(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function Y(e,t,r){return new z(e,r).compare(new z(t,r))}function J(e,t,r){return Y(e,t,r)>0}function Q(e,t,r){return Y(e,t,r)<0}function Z(e,t,r){return 0===Y(e,t,r)}function ee(e,t,r){return 0!==Y(e,t,r)}function te(e,t,r){return Y(e,t,r)>=0}function re(e,t,r){return Y(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return J(e,r,n);case">=":return te(e,r,n);case"<":return Q(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new z(e,t).major},e.minor=function(e,t){return new z(e,t).minor},e.patch=function(e,t){return new z(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,r){return Y(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=J,e.lt=Q,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=oe;var ie={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function de(e,t,r,n){var o,i,s,a,c;switch(e=new z(e,n),t=new se(t,n),r){case">":o=J,i=re,s=Q,a=">",c=">=";break;case"<":o=Q,i=te,s=J,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[B]:i[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new z(e,this.options)),ne(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[V]:i[G];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(i[H],"$1$2$3"),r("comparator trim",e,i[H]),e=(e=(e=e.replace(i[N],"$1~")).replace(i[F],"$1^")).split(/\s+/).join(" ");var o=t?i[B]:i[U],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[j]:i[L];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[x]:i[M];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[I]:i[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=ae(o),u=c||ae(i),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[$],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new oe(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(!n||-1===o.compare(e))&&(o=new z(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(!n||1===o.compare(e))&&(o=new z(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new z("0.0.0");if(e.test(r)||(r=new z("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||J(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(i[R]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),Wr=f(((e,t)=>{"use strict";function r(e){return"function"==typeof e}var n=console.error.bind(console);function o(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function i(e){e&&e.logger&&(r(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function s(e,t,i){if(e&&e[t]){if(!i)return n("no wrapper function"),void n((new Error).stack);if(r(e[t])&&r(i)){var s=e[t],a=i(s,t);return o(a,"__original",s),o(a,"__unwrap",(function(){e[t]===a&&o(e,t,s)})),o(a,"__wrapped",!0),o(e,t,a),a}n("original object and wrapper must be functions")}else n("no original function "+t+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}i.wrap=s,i.massWrap=function(e,t,r){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t,r)}))})):n("must provide one or more functions to wrap on modules")},i.unwrap=a,i.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):n("must provide one or more functions to unwrap on modules")},t.exports=i})),zr=f(((e,t)=>{"use strict";var r=Wr(),n=r.wrap,o=r.unwrap,i="wrap@before";function s(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function a(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r=r?[r]:[]),r}function c(e,t,r){var n=a(e,t).filter((function(e){return-1===r.indexOf(e)}));n.length>0&&function(e,t){for(var r=t.length,n=0;n<r;n++){var o=t[n],s=e[i];if("function"==typeof s)s(o);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](o)}}(e,n)}function u(e,t){if(e){var r=e;if("function"==typeof e)r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}t.exports=function(e,t,r){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!r)throw new Error("must have function to wrap listeners when emitting");function l(e){return function(t,r){var o=a(this,t).slice();try{var i=e.call(this,t,r);return c(this,t,o),i}finally{this.on.__wrapped||n(this,"on",l),this.addListener.__wrapped||n(this,"addListener",l)}}}e[i]?"function"==typeof e[i]?s(e,i,[e[i],t]):Array.isArray(e[i])&&e[i].push(t):s(e,i,t),e.__wrapped||(n(e,"addListener",l),n(e,"on",l),n(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var i=this._events[t];n(this,"removeListener",(function(e){return function(){this._events[t]=i;try{return e.apply(this,arguments)}finally{i=this._events[t],this._events[t]=u(i,r)}}}));try{return this._events[t]=u(i,r),e.apply(this,arguments)}finally{o(this,"removeListener"),this._events[t]=i}}})),s(e,"__unwrap",(function(){o(e,"addListener"),o(e,"on"),o(e,"emit"),delete e[i],delete e.__wrapped})),s(e,"__wrapped",!0))}})),Kr=f(((e,t)=>{"use strict";var n=r(3837),o=r(9491),i=zr(),s=r(852),a="cls@contexts",c="error@context",u=process.env.DEBUG_CLS_HOOKED,l=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function h(e){let t=p(e);o.ok(t,"can't delete nonexistent namespace! \""+e+'"'),o.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function f(...e){u&&process._rawDebug(`${n.format(...e)}`)}t.exports={getNamespace:p,createNamespace:function(e){o.ok(e,"namespace must be given a name."),u&&f(`NS-CREATING NAMESPACE (${e})`);let t=new d(e);return t.id=l,s.createHook({init(r,o,i,a){if(l=s.executionAsyncId(),t.active){if(t._contexts.set(r,t.active),u){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(0===l){let i=s.triggerAsyncId(),c=t._contexts.get(i);if(c){if(t._contexts.set(r,c),u){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(u){f(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}if(u&&"PROMISE"===o){f(n.inspect(a,{showHidden:!0}));let s=a.parentId;f(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${o}] (${e}) parentId:${s} asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(r){let o;if(l=s.executionAsyncId(),o=t._contexts.get(r)||t._contexts.get(l),o){if(u){let i=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`),t._indent+=2}t.enter(o)}else if(u){let o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${n.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(r){let o;if(l=s.executionAsyncId(),o=t._contexts.get(r)||t._contexts.get(l),o){if(u){let i=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`)}t.exit(o)}else if(u){let i=s.triggerAsyncId();t._indent-=2,f(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`)}},destroy(r){if(l=s.executionAsyncId(),u){let o=s.triggerAsyncId();f(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${l} asyncId:${r} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(t._contexts.get(l))}`)}t._contexts.delete(r)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=t,u){f(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return t},d.prototype.get=function(e){if(this.active){if(u){let t=s.executionAsyncId(),r=s.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);f(o+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),f(`${o}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} active:${n.inspect(this.active)}`)}return this.active[e]}if(u){let t=s.currentId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length}`)}},d.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=l,u){let t=s.executionAsyncId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} context:${n.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(u){let e=s.triggerAsyncId(),r=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} context:${n.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[c]=t),e}finally{if(u){let e=s.triggerAsyncId(),r=s.executionAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} ${n.inspect(t)}`)}this.exit(t)}},d.prototype.runAndReturn=function(e){let t;return this.run((function(r){t=e(r)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return u&&f("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(u&&f("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,u&&f("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},d.prototype.enter=function(e){if(o.ok(e,"context must be provided for entering"),u){let t=s.executionAsyncId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(o.ok(e,"context must be provided for exiting"),u){let t=s.executionAsyncId(),r=s.triggerAsyncId();f(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}if(this.active===e)return o.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(u&&f("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),o.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(o.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){o.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;i(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},d.prototype.fromException=function(e){return e[c]},process.namespaces={}})),Xr=f(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);let o=new Array(arguments.length);for(let e=0;e<arguments.length;e++)o[e]=arguments[e];let i=o[0];if("function"!=typeof i)throw new TypeError("callback is not a function");let s=new r,a=--t.counter;return e.init.call(s,a,0,null,null),o[0]=function(){e.pre.call(s,a);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,o)}}})),Yr=f(((e,t)=>{"use strict";function r(){}t.exports=function(){let e=this._hooks,t=this._state,n=global.Promise,o=n.prototype.then;function i(t,r,n,o){return"function"!=typeof t?o?function(t){return function(r){return e.destroy.call(null,t),r}}(n):function(t){return function(r){throw e.destroy.call(null,t),r}}(n):function(){e.pre.call(r,n);try{return t.apply(this,arguments)}finally{e.post.call(r,n,!1),e.destroy.call(null,n)}}}n.prototype.then=function(n,s){if(!t.enabled)return o.call(this,n,s);let a=new r,c=--t.counter;return e.init.call(a,c,0,null,null),o.call(this,i(n,a,c,!0),i(s,a,c,!1))}}})),Jr=f(((e,t)=>{"use strict";var n=r(9512);function o(){}function i(){}function s(){}var a=new Map,c=new Map,u=new Map,l=null,d=!1;function p(e,t,r,o,i,s,a){let c=n[r],u=n[o];n[r]=function(){if(!t.enabled)return c.apply(n,arguments);let r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let o=r[0];if("function"!=typeof o)throw new TypeError('"callback" argument must be a function');let u,p=new i,h=--t.counter;return e.init.call(p,h,0,null,null),r[0]=function(){l=u,e.pre.call(p,h);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(p,h,!0),s.delete(u),e.destroy.call(null,h)}))}e.post.call(p,h,!1),l=null,(a||d)&&(d=!1,s.delete(u),e.destroy.call(null,h))},u=c.apply(n,r),s.set(u,h),u},n[o]=function(t){if(l===t&&null!==t)d=!0;else if(s.has(t)){let r=s.get(t);s.delete(t),e.destroy.call(null,r)}u.apply(n,arguments)}}t.exports=function(){p(this._hooks,this._state,"setTimeout","clearTimeout",o,a,!0),p(this._hooks,this._state,"setInterval","clearInterval",i,c,!1),p(this._hooks,this._state,"setImmediate","clearImmediate",s,u,!0),global.setTimeout=n.setTimeout,global.setInterval=n.setInterval,global.setImmediate=n.setImmediate,global.clearTimeout=n.clearTimeout,global.clearInterval=n.clearInterval,global.clearImmediate=n.clearImmediate}})),Qr=f(((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}})),Zr=f(((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:Xr(),promise:Yr(),timers:Jr()},i=new Set;function s(){this.enabled=!1,this.counter=0}function a(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],o=this.destroyFns=[];this.init=function(t,r,o,s){if(r!==n)for(let n of e)n(t,this,r,o,s);else i.add(t)},this.pre=function(e){if(!i.has(e))for(let r of t)r(e,this)},this.post=function(e,t){if(!i.has(e))for(let n of r)n(e,this,t)},this.destroy=function(e){if(i.has(e))i.delete(e);else for(let t of o)t(e)}}function c(e,t){let r=e.indexOf(t);-1!==r&&e.splice(r,1)}function u(){this._state=new s,this._hooks=new a,this.version=Qr().version,this.providers=r.Providers;for(let e of Object.keys(o))o[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}a.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},a.prototype.remove=function(e){e.init&&c(this.initFns,e.init),e.pre&&c(this.preFns,e.pre),e.post&&c(this.postFns,e.post),e.destroy&&c(this.destroyFns,e.destroy)},t.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}})),en=f(((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}})),tn=f(((e,t)=>{t.exports=function(e,t){var r=[];r.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}(e));for(var n=0;n<t.length;n++){var o,i=t[n];try{o=i.toString()}catch(e){try{o="<error: "+e+">"}catch(e){o="<error>"}}r.push("    at "+o)}return r.join("\n")}})),rn=f(((e,t)=>{var r=tn();function n(){this.extend=new s,this.filter=new s,this.format=new a,this.version=en().version}var o=!1;n.prototype.callSite=function e(t){t||(t={}),o=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return o=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var i=new n;function s(){this._modifiers=[]}function a(){this._formater=r,this._previous=void 0}s.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},a.prototype.replace=function(e){e?this._formater=e:this.restore()},a.prototype.restore=function(){this._formater=r,this._previous=void 0},a.prototype._backup=function(){this._previous=this._formater},a.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&i.format.replace(Error.prepareStackTrace);var c=!1;function u(e,t){if(o)return t;if(c)return r(e,t);var n=t.concat();n=i.extend._modify(e,n),n=(n=i.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),c=!0;var s=i.format._formater(e,n);return c=!1,s}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?i.format._roolback():(i.format._backup(),i.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=i})),nn=f(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==en().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=rn()})),on=f(((e,t)=>{"use strict";var r=Zr();if(global._asyncHook){if(global._asyncHook.version!==Qr().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else nn().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new r})),sn=f(((e,t)=>{"use strict";var n=r(3837),o=r(9491),i=zr(),s=on(),a="cls@contexts",c="error@context",u=[];for(let e in s.providers)u[s.providers[e]]=e;var l,d,p=process.env.DEBUG_CLS_HOOKED,h=-1;function f(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function g(e){return process.namespaces[e]}function m(e){let t=g(e);o.ok(t,"can't delete nonexistent namespace! \""+e+'"'),o.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function _(e){process.env.DEBUG&&process._rawDebug(e)}function v(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:g,createNamespace:function(e){o.ok(e,"namespace must be given a name."),p&&_("CREATING NAMESPACE "+e);let t=new f(e);return t.id=h,s.addHooks({init(r,o,i,s,a){h=r,s?(t._contexts.set(r,t._contexts.get(s)),p&&_("PARENTID: "+e+" uid:"+r+" parent:"+s+" provider:"+i)):t._contexts.set(h,t.active),p&&_("INIT "+e+" uid:"+r+" parent:"+s+" provider:"+u[i]+" active:"+n.inspect(t.active,!0))},pre(r,o){h=r;let i=t._contexts.get(r);i?(p&&_(" PRE "+e+" uid:"+r+" handle:"+v(o)+" context:"+n.inspect(i)),t.enter(i)):p&&_(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+v(o))},post(r,o){h=r;let i=t._contexts.get(r);i?(p&&_(" POST "+e+" uid:"+r+" handle:"+v(o)+" context:"+n.inspect(i)),t.exit(i)):p&&_(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+v(o))},destroy(r){h=r,p&&_("DESTROY "+e+" uid:"+r+" context:"+n.inspect(t._contexts.get(h))+" active:"+n.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t},destroyNamespace:m,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){m(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:c},f.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return p&&_("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+h+" active:"+n.inspect(this.active,!0)),this.active[e]=t,t},f.prototype.get=function(e){if(this.active)return p&&_("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+h+" active:"+n.inspect(this.active,!0)),this.active[e];p&&_("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+h+" active:"+n.inspect(this.active,!0))},f.prototype.createContext=function(){p&&_("   CREATING Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  active:"+n.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=h,p&&_("   CREATED Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  context:"+n.inspect(e,!0,2,!0)),e},f.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return p&&_(" BEFORE RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),e(t),t}catch(e){throw e&&(e[c]=t),e}finally{p&&_(" AFTER RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t)}},f.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},f.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return p&&_(" BEFORE runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(p&&_(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[c]=t,p&&_(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},f.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[c]=t),e}finally{r.exit(t)}}},f.prototype.enter=function(e){o.ok(e,"context must be provided for entering"),p&&_("  ENTER "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+n.inspect(e)),this._set.push(this.active),this.active=e},f.prototype.exit=function(e){if(o.ok(e,"context must be provided for exiting"),p&&_("  EXIT "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+n.inspect(e)),this.active===e)return o.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(p&&_("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),o.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(o.ok(t,"can't remove top context"),this._set.splice(t,1))},f.prototype.bindEmitter=function(e){o.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;i(e,(function(e){!e||(e[a]||(e[a]=Object.create(null)),e[a][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[a])return e;let t=e,r=e[a];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},f.prototype.fromException=function(e){return e[c]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),p)for(d in(l=nn()).filter._modifiers)l.filter.deattach(d)})),an=f(((e,t)=>{"use strict";var r=$r();process&&r.gte(process.versions.node,"8.0.0")?t.exports=Kr():t.exports=sn()})),cn=f(((e,t)=>{var r;e=t.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=e.re=[],s=e.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=a++;s[p]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var h=a++;s[h]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[h]+"(?:\\."+s[h]+")*))";var m=a++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var _=a++;s[_]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[_]+"(?:\\."+s[_]+")*))";var E=a++,y="v?"+s[d]+s[g]+"?"+s[v]+"?";s[E]="^"+y+"$";var b="[v=\\s]*"+s[p]+s[m]+"?"+s[v]+"?",S=a++;s[S]="^"+b+"$";var C=a++;s[C]="((?:<|>)?=?)";var A=a++;s[A]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var w=a++;s[w]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var P=a++;s[P]="[v=\\s]*("+s[A]+")(?:\\.("+s[A]+")(?:\\.("+s[A]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var O=a++;s[O]="^"+s[C]+"\\s*"+s[w]+"$";var I=a++;s[I]="^"+s[C]+"\\s*"+s[P]+"$";var R=a++;s[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=a++;s[D]="(?:~>?)";var N=a++;s[N]="(\\s*)"+s[D]+"\\s+",i[N]=new RegExp(s[N],"g");var M=a++;s[M]="^"+s[D]+s[w]+"$";var x=a++;s[x]="^"+s[D]+s[P]+"$";var k=a++;s[k]="(?:\\^)";var F=a++;s[F]="(\\s*)"+s[k]+"\\s+",i[F]=new RegExp(s[F],"g");var L=a++;s[L]="^"+s[k]+s[w]+"$";var j=a++;s[j]="^"+s[k]+s[P]+"$";var B=a++;s[B]="^"+s[C]+"\\s*("+b+")$|^$";var U=a++;s[U]="^"+s[C]+"\\s*("+y+")$|^$";var H=a++;s[H]="(\\s*)"+s[C]+"\\s*("+b+"|"+s[w]+")",i[H]=new RegExp(s[H],"g");var G=a++;s[G]="^\\s*("+s[w]+")\\s+-\\s+("+s[w]+")\\s*$";var V=a++;s[V]="^\\s*("+s[P]+")\\s+-\\s+("+s[P]+")\\s*$";var q,$=a++;for(s[$]="(<|>)?=?\\s*\\*",q=0;q<35;q++)r(q,s[q]),i[q]||(i[q]=new RegExp(s[q]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?i[S]:i[E]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var s=e.trim().match(t.loose?i[S]:i[E]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var r=W(e,t);return r?r.version:null},e.clean=function(e,t){var r=W(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},e.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},e.diff=function(e,t){if(Z(e,t))return null;var r=W(e),n=W(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},e.compareIdentifiers=X;var K=/^[0-9]+$/;function X(e,t){var r=K.test(e),n=K.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function Y(e,t,r){return new z(e,r).compare(new z(t,r))}function J(e,t,r){return Y(e,t,r)>0}function Q(e,t,r){return Y(e,t,r)<0}function Z(e,t,r){return 0===Y(e,t,r)}function ee(e,t,r){return 0!==Y(e,t,r)}function te(e,t,r){return Y(e,t,r)>=0}function re(e,t,r){return Y(e,t,r)<=0}function ne(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,n);case"!=":return ee(e,r,n);case">":return J(e,r,n);case">=":return te(e,r,n);case"<":return Q(e,r,n);case"<=":return re(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function oe(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof oe){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(e,t){return X(t,e)},e.major=function(e,t){return new z(e,t).major},e.minor=function(e,t){return new z(e,t).minor},e.patch=function(e,t){return new z(e,t).patch},e.compare=Y,e.compareLoose=function(e,t){return Y(e,t,!0)},e.rcompare=function(e,t,r){return Y(t,e,r)},e.sort=function(t,r){return t.sort((function(t,n){return e.compare(t,n,r)}))},e.rsort=function(t,r){return t.sort((function(t,n){return e.rcompare(t,n,r)}))},e.gt=J,e.lt=Q,e.eq=Z,e.neq=ee,e.gte=te,e.lte=re,e.cmp=ne,e.Comparator=oe;var ie={};function se(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof se)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,r,n,o,i,s,a,c,u,l,d,p){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==ie&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new se(t,r)}catch(e){return!1}return t.test(e)}function de(e,t,r,n){var o,i,s,a,c;switch(e=new z(e,n),t=new se(t,n),r){case">":o=J,i=re,s=Q,a=">",c=">=";break;case"<":o=Q,i=te,s=J,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],d=null,p=null;if(l.forEach((function(e){e.semver===ie&&(e=new oe(">=0.0.0")),d=d||e,p=p||e,o(e.semver,d.semver,n)?d=e:s(e.semver,p.semver,n)&&(p=e)})),d.operator===a||d.operator===c||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.options.loose?i[B]:i[U],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new z(e,this.options)),ne(e,this.operator,this.semver,this.options))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var r;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new se(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new se(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},e.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?i[V]:i[G];e=e.replace(n,ce),r("hyphen replace",e),e=e.replace(i[H],"$1$2$3"),r("comparator trim",e,i[H]),e=(e=(e=e.replace(i[N],"$1~")).replace(i[F],"$1^")).split(/\s+/).join(" ");var o=t?i[B]:i[U],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?i[j]:i[L];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?i[x]:i[M];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),ae(n)?a="":ae(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?i[I]:i[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=ae(o),u=c||ae(i),l=u||ae(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(i[$],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new oe(e,this.options)}),this)},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e,this.options))return!0;return!1},e.satisfies=le,e.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(!n||-1===o.compare(e))&&(o=new z(n=e,r))})),n},e.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new se(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(!n||1===o.compare(e))&&(o=new z(n=e,r))})),n},e.minVersion=function(e,t){e=new se(e,t);var r=new z("0.0.0");if(e.test(r)||(r=new z("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!r||J(r,t))&&(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}return r&&e.test(r)?r:null},e.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},e.ltr=function(e,t,r){return de(e,t,"<",r)},e.gtr=function(e,t,r){return de(e,t,">",r)},e.outside=de,e.prerelease=function(e,t){var r=W(e,t);return r&&r.prerelease.length?r.prerelease:null},e.intersects=function(e,t,r){return e=new se(e,r),t=new se(t,r),e.intersects(t)},e.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(i[R]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),un=f(((e,t)=>{var r,n,o,i,s,a=Wr().wrap,c=1,u=2,l=4,d=8,p=[],h=0,f=!1,g=[];function m(e,t){var r=e.length,n=t.length,o=[];if(0===r&&0===n)return o;for(var i=0;i<r;i++)o[i]=e[i];if(0===n)return o;for(var s=0;s<n;s++){var a=!0;for(i=0;i<r;i++)if(e[i].uid===t[s].uid){a=!1;break}a&&o.push(t[s])}return o}function _(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=c),"function"==typeof e.before&&(this.before=e.before,this.flags|=u),"function"==typeof e.after&&(this.after=e.after,this.flags|=l),"function"==typeof e.error&&(this.error=e.error,this.flags|=d),this.uid=++h,this.data=void 0===t?null:t}function v(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof _?e:new _(e,t)}process._fatalException?(o=!1,r=function(e){var t=p.length;if(o||0===t)return!1;var r=!1;o=!0;for(var n=0;n<t;++n){var s=p[n];if(0!=(s.flags&d)){var a=i&&i[s.uid];r=s.error(a,e)||r}}return o=!1,g.length>0&&(p=g.pop()),i=void 0,r&&!f},n=function(e,t,r){var n=[];f=!0;for(var o=0;o<r;++o){var s=t[o];if(n[s.uid]=s.data,0!=(s.flags&c)){var a=s.create(s.data);void 0!==a&&(n[s.uid]=a)}}return f=!1,function(){i=n,g.push(p),p=m(t,p),f=!0;for(var o=0;o<r;++o)(t[o].flags&u)>0&&t[o].before(this,n[t[o].uid]);f=!1;var s=e.apply(this,arguments);for(f=!0,o=0;o<r;++o)(t[o].flags&l)>0&&t[o].after(this,n[t[o].uid]);return f=!1,p=g.pop(),i=void 0,s}},a(process,"_fatalException",(function(e){return function(t){return r(t)||e(t)}}))):(s=!1,r=function(e){if(s)throw e;for(var t=!1,r=p.length,n=0;n<r;++n){var o=p[n];0!=(o.flags&d)&&(t=o.error(null,e)||t)}if(!t&&f)throw e},n=function(e,t,n){var o=[];f=!0;for(var i=0;i<n;++i){var a=t[i];if(o[a.uid]=a.data,0!=(a.flags&c)){var h=a.create(a.data);void 0!==h&&(o[a.uid]=h)}}return f=!1,function(){var i,a=!1,c=!1;g.push(p),p=m(t,p),f=!0;for(var h=0;h<n;++h)(t[h].flags&u)>0&&t[h].before(this,o[t[h].uid]);f=!1;try{i=e.apply(this,arguments)}catch(e){a=!0;for(h=0;h<n;++h)if(0!=(p[h].flags&d))try{c=p[h].error(o[t[h].uid],e)||c}catch(e){throw s=!0,e}if(!c)throw process.removeListener("uncaughtException",r),process._originalNextTick((function(){process.addListener("uncaughtException",r)})),e}finally{if(!a||c){for(f=!0,h=0;h<n;++h)(t[h].flags&l)>0&&t[h].after(this,o[t[h].uid]);f=!1}p=g.pop()}return i}},process.addListener("uncaughtException",r)),_.prototype.create=void 0,_.prototype.before=void 0,_.prototype.after=void 0,_.prototype.error=void 0,_.prototype.data=void 0,_.prototype.uid=0,_.prototype.flags=0,process.createAsyncListener=v,process.addAsyncListener=function(e,t){var r;r=e instanceof _?e:v(e,t);for(var n=!1,o=0;o<p.length;o++)if(r===p[o]){n=!0;break}return n||p.push(r),r},process.removeAsyncListener=function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}},t.exports=function(e){var t=p.length;if(0===t)return e;for(var r=p.slice(),o=0;o<t;++o)if(r[o].flags>0)return n(e,r,t);return function(e,t,r){f=!0;for(var n=0;n<r;++n){var o=t[n];o.create&&o.create(o.data)}return f=!1,function(){g.push(p),p=m(t,p);var r=e.apply(this,arguments);return p=g.pop(),r}}(e,r,t)}})),ln=f(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var r,n;super((function(e,i){r=this,n=[function(r){return t(o,!1),e(r)},function(e){return t(o,!1),i(e)}]}));var o=this;try{e.apply(r,n)}catch(e){n[1](e)}return o}}})),dn=f((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=Wr(),t=cn(),n=e.wrap,o=e.massWrap,i=un(),s=r(3837),a=t.gte(process.version,"6.0.0"),c=t.gte(process.version,"7.0.0"),u=t.gte(process.version,"8.0.0"),l=t.gte(process.version,"11.0.0"),d=r(1808);function p(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=i(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=i(this._handle.onconnection))}}}function h(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=i(t._originalOnread)}}c&&!d._normalizeArgs?d._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],r={};"object"==typeof t&&null!==t?r=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?r.path=t:(r.port=t,e.length>1&&"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"!=typeof n?[r,null]:[r,n]}:!c&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(e){var t,r={};"object"==typeof e[0]&&null!==e[0]?r=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?r.path=e[0]:(r.port=e[0],"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[r,n]:[r]}),"_setUpListenHandle"in d.Server.prototype?n(d.Server.prototype,"_setUpListenHandle",p):n(d.Server.prototype,"_listen2",p),n(d.Socket.prototype,"connect",(function(e){return function(){var t;(t=u&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:c?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments))[1]&&(t[1]=i(t[1]));var r=e.apply(this,t);return h(this),r}}));var f=r(3685);n(f.Agent.prototype,"addRequest",(function(e){return function(t){var r=t.onSocket;return t.onSocket=i((function(e){return h(e),r.apply(this,arguments)})),e.apply(this,arguments)}}));var g=r(2081);function m(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=i(e._handle.onread),n(e._handle,"close",R))})),e._handle&&(e._handle.onexit=i(e._handle.onexit))}g.ChildProcess?n(g.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return m(this),t}})):o(g,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return m(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var _=[];process._nextDomainTick&&_.push("_nextDomainTick"),process._tickDomainCallback&&_.push("_tickDomainCallback"),o(process,_,I),n(process,"nextTick",R);var v=["setTimeout","setInterval"];global.setImmediate&&v.push("setImmediate");var E=r(9512),y=global.setTimeout===E.setTimeout;o(E,v,R),y&&o(global,v,R);var b=r(9523);o(b,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],I),b.resolveNaptr&&n(b,"resolveNaptr",I);var S,C,A,T=r(7147);o(T,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],I),T.lchown&&n(T,"lchown",I),T.lchmod&&n(T,"lchmod",I),T.ftruncate&&n(T,"ftruncate",I);try{S=r(9796)}catch(e){}S&&S.Deflate&&S.Deflate.prototype&&((C=Object.getPrototypeOf(S.Deflate.prototype))._transform?n(C,"_transform",I):C.write&&C.flush&&C.end&&o(C,["write","flush","end"],I));try{A=r(6113)}catch(e){}A&&(w=["pbkdf2","randomBytes"],l||w.push("pseudoRandomBytes"),o(A,w,I));var w,P,O=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function I(e){var t=function(){var t,r=arguments.length-1;if("function"==typeof arguments[r]){t=Array(arguments.length);for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n];t[r]=i(arguments[r])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=i(n)),e.call(this,r,n))};case 3:return function(r,n,o){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=i(o)),e.call(this,r,n,o))};case 4:return function(r,n,o,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=i(s)),e.call(this,r,n,o,s))};case 5:return function(r,n,o,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=i(a)),e.call(this,r,n,o,s,a))};case 6:return function(r,n,o,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=i(c)),e.call(this,r,n,o,s,a,c))};default:return t}}function R(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=i(arguments[0]);for(var r=1;r<arguments.length;r++)t[r]=arguments[r]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n))};case 3:return function(r,n,o){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o))};case 4:return function(r,n,o,s){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o,s))};case 5:return function(r,n,o,s,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o,s,a))};case 6:return function(r,n,o,s,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=i(r)),e.call(this,r,n,o,s,a,c))};default:return t}}O&&(P=process.addAsyncListener({create:function(){O=!1}}),global.Promise.resolve(!0).then((function(){O=!1})),process.removeAsyncListener(P)),O&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var o,i,s=new e((function(e,t){o=this,i=[function(t){return r(s,!1),e(t)},function(e){return r(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(o,i)}catch(e){i[1](e)}return s}if(s.inherits(t,e),n(e.prototype,"then",c),e.prototype.chain&&n(e.prototype,"chain",c),a)global.Promise=ln()(e,r);else{["all","race","reject","resolve","accept","defer"].forEach((function(r){"function"==typeof e[r]&&(t[r]=e[r])})),global.Promise=t}function r(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=i(o))}function o(t,n,i,s){var a;try{return{returnVal:a=n.call(t,i),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){return(a.__asl_wrapper||o).apply(this,arguments)}:r(s,!0)}}function c(e){return function(){var t=this,r=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:i((function(n){var i=(t.__asl_wrapper||o)(this,e,n,r);if(i.error)throw i.errorVal;return i.returnVal}))})));return r.__asl_wrapper=function(e,n,i,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,r),r.__asl_wrapper(e,n,i,s)):o(e,n,i,s)},r}}}()})),pn=f(((e,t)=>{"use strict";var n=r(9491),o=zr(),i="cls@contexts",s="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function c(e){return process.namespaces[e]}function u(e){var t=c(e);n.ok(t,"can't delete nonexistent namespace!"),n.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){u(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||dn(),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{r.exit(t)}}},a.prototype.enter=function(e){n.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(n.ok(e,"context must be provided for exiting"),this.active===e)return n.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);n.ok(t>=0,"context not currently entered; can't exit"),n.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){n.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;o(e,(function(e){!e||(e[i]||(e[i]=Object.create(null)),e[i][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e[i])return e;var t=e,r=e[i];return Object.keys(r).forEach((function(e){var n=r[e];t=n.namespace.bind(t,n.context)})),t}))},a.prototype.fromException=function(e){return e[s]},process.namespaces||l(),t.exports={getNamespace:c,createNamespace:function(e){n.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,r){r&&t.enter(r)},after:function(e,r){r&&t.exit(r)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:u,reset:l}})),hn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=m(),r=zt(),n=Jt(),o=Qt(),i=qr(),s=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,r,n,o,i){return t=t||e,this.enabled?{operation:{name:r,id:e,parentId:t,traceparent:o,tracestate:i},customProperties:new a(n)}:null},e.spanToContextObject=function(t,r,o){var i=new n;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=n.formatOpenTelemetryTraceFlags(t.traceFlags)||n.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,o,null,i)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,((n={})[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?((n={})[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=an():this.cls=pn()),e.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(r,s){var a=r&&r.traceContext||null,c=r&&r.traceId?r:null,u=r&&r.headers;if(c){var l=new n("00-"+c.traceId+"-"+c.spanId+"-01"),d=new o(c.traceState?c.traceState.serialize():null);return e.generateContextObject(c.traceId,"|"+c.traceId+"."+c.spanId+".","string"==typeof s?s:"",void 0,l,d)}if(a){l=new n(a.traceparent),d=new o(a.tracestate);var p="object"==typeof s?new i(s):null;return e.generateContextObject(l.traceId,l.parentId,"string"==typeof s?s:p.getOperationName({}),p&&p.getCorrelationContextHeader()||void 0,l,d)}if(u){l=new n(u.traceparent?u.traceparent.toString():null),d=new o(u.tracestate?u.tracestate.toString():null),p=new i(r);return e.generateContextObject(l.traceId,l.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),l,d)}return t.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,r=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,n=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&r)&&n},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=s;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var r=this.props[t];if(r.key===e)return r.value}},e.prototype.setProperty=function(r,n){if(e.bannedCharacters.test(r)||e.bannedCharacters.test(n))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+r+" and value: "+n);else{for(var o=0;o<this.props.length;++o){var i=this.props[o];if(i.key===r)return void(i.value=n)}this.props.push({key:r,value:n})}},e.bannedCharacters=/[,=]/,e}()})),fn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Gr(),r=b(),n=[],o=function(e){var r=e.data.message;n.forEach((function(n){r instanceof Error?n.trackException({exception:r}):(r.lastIndexOf("\n")==r.length-1&&(r=r.substring(0,r.length-1)),n.trackTrace({message:r,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("console",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("console",o)},e.dispose=function(){r.channel.unsubscribe("console",o),n=[]}})),gn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Gr(),r=b(),n=[],o={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},i=function(e){var t=e.data.result;n.forEach((function(r){var n=o[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("bunyan",i),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("bunyan",i)},e.dispose=function(){r.channel.unsubscribe("bunyan",i),n=[]}})),mn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=Gr(),r=b(),n=[],o={syslog:function(e){var r={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},npm:function(e){var r={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===r[e]?t.SeverityLevel.Information:r[e]},unknown:function(e){return t.SeverityLevel.Information}},i=function(e){var t=e.data.message;n.forEach((function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=o[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===n.length&&r.channel.subscribe("winston",i),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&r.channel.unsubscribe("winston",i)},e.dispose=function(){r.channel.unsubscribe("winston",i),n=[]}})),_n=f(((e,t)=>{"use strict";var r=zt(),n=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(fn().enable(e&&t,this._client),gn().enable(e,this._client),mn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=n})),vn=f(((e,t)=>{"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||13===parseInt(r[0])&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=!0;if(!this._exceptionListenerHandle){var n=function(t,n,o){void 0===o&&(o=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:o}),r._client.flush({isAppCrashing:!0}),t&&n&&1===process.listeners(n).length&&(console.error(o),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=r})),En=f((e=>{"use strict";var t,r,n,o;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(n=r=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",n.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",n.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",n.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",n.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",n.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",n.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",n.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",n.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(o=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[o.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[o.REQUEST_RATE]=r.REQUEST_RATE,t[o.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),yn=f(((e,t)=>{"use strict";var n=r(2037),o=En(),i=function(){function e(t,r,n){void 0===r&&(r=6e4),void 0===n&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var o=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval((function(){return o.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalRequestExecutionTime+=n,!1===r&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalDependencyExecutionTime+=n,!1===r&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,i=0,s=0,a=0,c=0;e&&c<e.length;c++){var u=e[c],l=this._lastCpus[c],d=(u.model,u.speed,u.times),p=l.times;t+=d.user-p.user||0,r+=d.sys-p.sys||0,i+=d.nice-p.nice||0,s+=d.idle-p.idle||0,a+=d.irq-p.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),g=process.hrtime(),m=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;if(void 0!==this._lastHrtime&&2===this._lastHrtime.length)h=100*m/((1e6*(g[0]-this._lastHrtime[0])+(g[1]-this._lastHrtime[1])/1e3||0)*e.length);this._lastAppCpuUsage=f,this._lastHrtime=g}var _=t+r+i+s+a||1;this._client.trackMetric({name:o.PerformanceCounter.PROCESSOR_TIME,value:(_-s)/_*100}),this._client.trackMetric({name:o.PerformanceCounter.PROCESS_TIME,value:h||t/_*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=n.freemem(),t=process.memoryUsage().rss,r=n.totalmem()-e;this._client.trackMetric({name:o.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:o.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.COMMITTED_BYTES,value:r})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var u=n/a,l=i/a;this._client.trackMetric({name:o.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:o.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.REQUEST_FAILURE_RATE,value:l})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=r.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var u=n/a,l=i/a;this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time;if(i>0){var s=n/(i/1e3);this._client.trackMetric({name:o.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=i})),bn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0};e.AggregatedMetricCounter=t})),Sn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),Cn=f(((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},n=En(),o=bn(),i=Sn(),s=function(){function e(t,r){void 0===r&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return r.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,r){if(e.isEnabled()){var n,o=e._getAggregatedCounter(r,this._requestCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}o.intervalExecutionTime+=n,o.totalCount++}},e.countDependency=function(t,r){if(e.isEnabled()){var n,o=e._getAggregatedCounter(r,this._dependencyCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}o.intervalExecutionTime+=n,o.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var r=!1,n=0;n<t.length;n++){if(e===t[n].dimensions)return t[n];if(Object.keys(e).length===Object.keys(t[n].dimensions).length){for(var i in e)if(e[i]!=t[n].dimensions[i]){r=!0;break}if(!r)return t[n];r=!1}}var s=new o.AggregatedMetricCounter(e);return t.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/o||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&o>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:s,count:o,aggregationInterval:i,metricType:n.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/o||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&o>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:s,count:o,aggregationInterval:i,metricType:n.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:o,count:o,aggregationInterval:i,metricType:n.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],o=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:o,count:o,aggregationInterval:i,metricType:n.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[i.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=r(r({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var o={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=s})),An=f(((e,t)=>{"use strict";var n=r(2037),o=r(7147),i=r(1017),s=Gr(),a=m(),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||i.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(o.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.appVersion[t]=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var t=i.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(o.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.sdkVersion=r.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=c})),Tn=f(((e,t)=>{"use strict";var n,o=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(7310),s=Gr(),a=Xt(),c=Kt(),u=Vr(),l=Yt(),d=function(e){function t(r,n){var o=e.call(this)||this;return n&&n.method&&r&&(o.method=n.method,o.url=t._getUrlFromRequestOptions(r,n),o.startTime=+new Date),o}return o(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var r=i.parse(this.url);r.search=void 0,r.hash=void 0;var n=this.method.toUpperCase()+" "+r.pathname,o=s.RemoteDependencyDataConstants.TYPE_HTTP,a=r.hostname;r.port&&(a+=":"+r.port),this.correlationId?(o=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==l.correlationIdPrefix&&(a+=" | "+this.correlationId)):o=s.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:a};if(e&&e.time?c.time=e.time:this.startTime&&(c.time=new Date(this.startTime)),e){for(var u in e)c[u]||(c[u]=e[u]);if(e.properties)for(var u in e.properties)c.properties[u]=e.properties[u]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=i.parse(e);else{var r=i.parse(e);e="443"===r.host?i.parse("https://"+e):i.parse("http://"+e)}else{if(e&&"function"==typeof i.URL&&e instanceof i.URL)return i.format(e);var n=e;e={},n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.path){var o=i.parse(e.path);e.pathname=o.pathname,e.search=o.search}e.host&&e.port&&(!i.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host));return e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",i.format(e)},t}(u);t.exports=d})),wn=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=me(),n=En();function o(e){var r=t({},e);return Object.keys(n.SpanAttribute).forEach((function(e){delete r[e]})),r}e.spanToTelemetryContract=function(e){var i="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",s=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),a=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",c=e.attributes.component?e.attributes.component.toString():"",u=c.toUpperCase()===n.DependencyTypeName.Http||!!e.attributes[n.SpanAttribute.HttpUrl],l=c.toLowerCase()===n.DependencyTypeName.Grpc;if(u){var d=e.attributes[n.SpanAttribute.HttpMethod]||"GET",p=new URL(e.attributes[n.SpanAttribute.HttpUrl].toString()),h=e.attributes[n.SpanAttribute.HttpHost]||p.host,f=e.attributes[n.SpanAttribute.HttpPort]||p.port||null,g=d+" "+(p.pathname||"/"),m=n.DependencyTypeName.Http,_=f?(h+":"+f).toString():h.toString(),v=p.toString(),E=e.attributes[n.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:i,name:g,dependencyTypeName:m,target:_,data:v,success:E<400,duration:s,url:v,resultCode:String(E),properties:o(e.attributes)}}if(l){d=e.attributes[n.SpanAttribute.GrpcMethod]||"rpc";var y=e.attributes[n.SpanAttribute.GrpcService],b=y?d+" "+y:e.name;return{id:i,duration:s,name:b,target:y.toString(),data:y.toString()||b,url:y.toString()||b,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:o(e.attributes)}}var S=e.name,C=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:i,duration:s,name:S,target:a,data:a||S,url:a||S,dependencyTypeName:e.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:c||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},o(e.attributes)),{"_MS.links":C||void 0})}}})),Pn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=me(),r=b(),n=Jt(),o=wn(),i=_(),s=[];e.subscriber=function(e){var r=e.data,a=o.spanToTelemetryContract(r),c=r.spanContext(),u=new n;u.traceId=c.traceId,u.spanId=c.spanId,u.traceFlag=n.formatOpenTelemetryTraceFlags(c.traceFlags),u.parentId=r.parentSpanId?"|"+c.traceId+"."+r.parentSpanId+".":null,i.AsyncScopeManager.with(r,(function(){s.forEach((function(e){r.kind===t.SpanKind.SERVER?e.trackRequest(a):(r.kind===t.SpanKind.CLIENT||r.kind===t.SpanKind.INTERNAL)&&e.trackDependency(a)}))}))},e.enable=function(t,n){t?(0===s.length&&r.channel.subscribe("azure-coretracing",e.subscriber),s.push(n)):0===(s=s.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("azure-coretracing",e.subscriber)}})),On=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=b(),r=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&r.forEach((function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("mongodb",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),In=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=b(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query||{},n=r.sql||"Unknown query",o=!e.data.err,i=(r._connection||{}).config||{},s=i.socketPath?i.socketPath:(i.host||"localhost")+":"+i.port;t.trackDependency({target:s,data:n,name:n,duration:e.data.duration,success:o,resultCode:o?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("mysql",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),Rn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=b(),r=[];e.subscriber=function(e){r.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("redis",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),Dn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=b(),r=[];e.subscriber=function(e){r.forEach((function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",o=!e.data.error,i=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:i,data:n,name:n,duration:e.data.duration,success:o,resultCode:o?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(n,o){n?(0===r.length&&t.channel.subscribe("postgres",e.subscriber),r.push(o)):0===(r=r.filter((function(e){return e!=o}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),Nn=f(((e,t)=>{"use strict";var n=e&&e.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n},o=r(3685),i=r(5687),s=m(),a=Xt(),c=Kt(),u=Tn(),l=hn(),d=Yt(),p=Jt(),h=zt(),f=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),h.IsInitialized&&(Pn().enable(!0,this._client),On().enable(e,this._client),In().enable(e,this._client),Rn().enable(e,this._client),Dn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=o.request,s=i.request,a=function(r,n){var o=!n[e.disableCollectionRequestOption]&&!r[e.alreadyAutoCollectedFlag];n.headers&&n.headers["user-agent"]&&-1!==n.headers["user-agent"].toString().indexOf("azsdk-js")&&(o=!1),r[e.alreadyAutoCollectedFlag]=!0,r&&n&&o&&(l.CorrelationContextManager.wrapEmitter(r),e.trackRequest(t._client,{options:n,request:r}))};o.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var s=r.call.apply(r,n([o,e],t));return a(s,e),s},i.request=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=s.call.apply(s,n([i,e],t));return a(o,e),o},o.get=function(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(t=o.request).call.apply(t,n([o,e],r));return s.end(),s},i.get=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=(t=i.request).call.apply(t,n([i,e],r));return s.end(),s}},e.trackRequest=function(t,r){if(r.options&&r.request&&t){var n,o,i=new u(r.options,r.request),h=l.CorrelationContextManager.getCurrentContext();if(h&&h.operation&&h.operation.traceparent&&p.isValidTraceId(h.operation.traceparent.traceId))h.operation.traceparent.updateSpanId(),n=h.operation.traceparent.getBackCompatRequestId();else if(d.w3cEnabled){o=(g=new p).toString(),n=g.getBackCompatRequestId()}else n=h&&h.operation&&h.operation.parentId+e.requestNumber+++".";if(a.canIncludeCorrelationHeader(t,i.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var f=r.request.getHeader(c.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,r.request,f)}catch(e){s.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(h&&h.operation)try{if(r.request.setHeader(c.requestIdHeader,n),t.config.ignoreLegacyHeaders||(r.request.setHeader(c.parentIdHeader,h.operation.id),r.request.setHeader(c.rootIdHeader,n)),o||h.operation.traceparent)r.request.setHeader(c.traceparentHeader,o||h.operation.traceparent.toString());else if(d.w3cEnabled){var g=(new p).toString();r.request.setHeader(c.traceparentHeader,g)}if(h.operation.tracestate){var m=h.operation.tracestate.toString();m&&r.request.setHeader(c.traceStateHeader,m)}var _=h.customProperties.serializeToHeader();_&&r.request.setHeader(c.correlationContextHeader,_)}catch(e){s.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}r.request.on&&(r.request.on("response",(function(e){i.onResponse(e);var o=i.getDependencyTelemetry(r,n);o.contextObjects=o.contextObjects||{},o.contextObjects["http.RequestOptions"]=r.options,o.contextObjects["http.ClientRequest"]=r.request,o.contextObjects["http.ClientResponse"]=e,t.trackDependency(o)})),r.request.on("error",(function(e){i.onError(e);var o=i.getDependencyTelemetry(r,n);o.contextObjects=o.contextObjects||{},o.contextObjects["http.RequestOptions"]=r.options,o.contextObjects["http.ClientRequest"]=r.request,o.contextObjects.Error=e,t.trackDependency(o)})),r.request.on("abort",(function(){i.onError(new Error);var e=i.getDependencyTelemetry(r,n);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=r.options,e.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(e)})))}else s.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=f})),Mn=f(((e,t)=>{"use strict";var n=r(2037),o=En(),i=Xt(),s=An(),a=Nn(),c=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return r.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var r=this,i=!1,a={},c=s.sdkVersion;a.sdk=c,a.osType=n.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(i=!0,this._getAzureComputeMetadata(e,(function(){r._isVM&&Object.keys(r._vmData).length>0&&(a.azInst_vmId=r._vmData.vmId||"",a.azInst_subscriptionId=r._vmData.subscriptionId||"",a.azInst_osType=r._vmData.osType||"",r._azInst_vmId=r._vmData.vmId||"",r._azInst_subscriptionId=r._vmData.subscriptionId||"",r._azInst_osType=r._vmData.osType||""),r._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:a}),t()}))):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:o.HeartBeatMetricName,value:0,properties:a}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var r,n=this,o=((r={method:"GET"})[a.disableCollectionRequestOption]=!0,r.headers={Metadata:"True"},r),s=i.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",o,(function(e){if(200===e.statusCode){n._isVM=!0;var r="";e.on("data",(function(e){r+=e})),e.on("end",(function(){n._vmData=n._isJSON(r)?JSON.parse(r):{},t()}))}else t()}));s&&(s.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(n._isVM=!1),t()})),s.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch(e){return!1}},e}();t.exports=c})),xn=f(((e,t)=>{"use strict";var n=r(3685),o=r(5687),i=m(),s=Xt(),a=Kt(),c=qr(),u=hn(),l=yn(),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(r){if(r){if("function"!=typeof r)throw new Error("onRequest handler must be a function");return function(n,o){u.CorrelationContextManager.wrapEmitter(n),u.CorrelationContextManager.wrapEmitter(o);var i=n&&!n[e.alreadyAutoCollectedFlag];if(n&&i){var s=new c(n),a=t._generateCorrelationContext(s);u.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(n[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:n,response:o},s)),"function"==typeof r&&r(n,o)}))}else"function"==typeof r&&r(n,o)}}},i=function(e){var t=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return t(e,r(n));default:return t(e,n)}},e.on=e.addListener},s=n.createServer;n.createServer=function(e,t){if(t&&"function"==typeof t){var n=s(e,r(t));return i(n),n}n=s(r(e));return i(n),n};var a=o.createServer;o.createServer=function(e,t){var n=a(e,r(t));return i(n),n}},e.trackRequestSync=function(t,r){if(r.request&&r.response&&t){e.addResponseCorrelationIdHeader(t,r.response);var n=u.CorrelationContextManager.getCurrentContext(),o=new c(r.request,n&&n.operation.parentId);n&&(n.operation.id=o.getOperationId(t.context.tags)||n.operation.id,n.operation.name=o.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=o.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(o.getCorrelationContextHeader())),e.endRequest(t,o,r,r.duration,r.error)}else i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t)},e.trackRequest=function(t,r,n){if(r.request&&r.response&&t){var o=u.CorrelationContextManager.getCurrentContext(),a=n||new c(r.request,o&&o.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),o&&!n&&(o.operation.id=a.getOperationId(t.context.tags)||o.operation.id,o.operation.name=a.getOperationName(t.context.tags)||o.operation.name,o.operation.parentId=a.getOperationParentId(t.context.tags)||o.operation.parentId,o.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",(function(){e.endRequest(t,a,r,null,null)})),r.request.on&&r.request.on("error",(function(n){e.endRequest(t,a,r,null,n)})),r.request.on&&r.request.on("aborted",(function(){e.endRequest(t,a,r,null,"The request has been aborted and the network socket has closed.")}))}else i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var r=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,r)}},e.endRequest=function(e,t,r,n,o){o?t.onError(o,n):t.onResponse(r.response,n);var i=t.getRequestTelemetry(r);if(i.tagOverrides=t.getRequestTags(e.context.tags),r.tagOverrides)for(var s in r.tagOverrides)i.tagOverrides[s]=r.tagOverrides[s];var a=t.getLegacyRootId();a&&(i.properties.ai_legacyRootId=a),i.contextObjects=i.contextObjects||{},i.contextObjects["http.ServerRequest"]=r.request,i.contextObjects["http.ServerResponse"]=r.response,e.trackRequest(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,u.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=d})),kn=f(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=r(2037),i=Gr(),s=En(),a=Xt(),c=m(),u=a.w3cTraceId(),l=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,r,n){var i=o&&"function"==typeof o.hostname&&o.hostname()||"Unknown",s=n.tags&&n.keys&&n.keys.cloudRoleInstance&&n.tags[n.keys.cloudRoleInstance]||i,a=n.tags&&n.keys&&n.keys.cloudRole&&n.tags[n.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:r.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:n.tags[n.keys.internalSdkVersion],StreamId:u,MachineName:i,Instance:s,RoleName:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case i.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case i.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case i.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case i.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case i.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.name;return n(n({},r),{Name:o})},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.severityLevel||0;return n(n({},r),{Message:t.data.baseData.message,SeverityLevel:i.SeverityLevel[o]})},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.exceptions,i="",s="",a="";return o&&o.length>0&&(o[0].parsedStack&&o[0].parsedStack.length>0?o[0].parsedStack.forEach((function(e){i+=e.assembly+"\n"})):o[0].stack&&o[0].stack.length>0&&(i=o[0].stack),s=o[0].message,a=o[0].typeName),n(n({},r),{Exception:i,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData;return n(n({},r),{Name:o.name,Success:o.success,Duration:o.duration,ResponseCode:o.responseCode,OperationName:o.name})},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData;return n(n({},r),{Name:o.name,Target:o.target,Success:o.success,Duration:o.duration,ResultCode:o.resultCode,CommandName:o.data,OperationName:r.OperationId,DependencyTypeName:o.type})},e.createQuickPulseDocument=function(t){var r,n;return t.data.baseType?(n=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:r,__type:n,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],r=e.data.baseData.measurements||{};for(var n in r)if(r.hasOwnProperty(n)){var o={key:n,value:r[n]};t.push(o)}var i=e.data.baseData.properties||{};for(var n in i)if(i.hasOwnProperty(n)){o={key:n,value:i[n]};t.push(o)}return t},e.keys=new i.ContextTagKeys,e}();t.exports=l})),Fn=f(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),Ln=f(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=r(5687),s=Nn(),a=m(),c=Fn(),u=Xt(),l="POST",d="x-ms-qps-transmission-time",p="x-ms-qps-service-polling-interval-hint",h="x-ms-qps-service-endpoint-redirect",f="x-ms-qps-instance-name",g="x-ms-qps-stream-id",_="x-ms-qps-machine-name",v="x-ms-qps-role-name",E="x-ms-qps-invariant-version",y="x-ms-qps-subscribed",b=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,r){var n=[{name:g,value:e.StreamId},{name:_,value:e.MachineName},{name:v,value:e.RoleName},{name:f,value:e.Instance},{name:E,value:e.InvariantVersion.toString()}];this._submitData(e,t,r,"ping",n)},e.prototype.post=function(e,t,r){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this._submitData([e],t,r,"post")];case 1:return n.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,r,a,f){return n(this,void 0,void 0,(function(){var n,g,m,_,v,E=this;return o(this,(function(o){return n=JSON.stringify(e),(_={})[s.disableCollectionRequestOption]=!0,_.host=t&&t.length>0?t:this._config.quickPulseHost,_.method=l,_.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,_.headers=((v={Expect:"100-continue"})[d]=c.getTransmissionTime(),v["Content-Type"]="application/json",v["Content-Length"]=Buffer.byteLength(n),v),g=_,f&&f.length>0&&f.forEach((function(e){return g.headers[e.name]=e.value})),this._config.httpsAgent?g.agent=this._config.httpsAgent:g.agent=u.tlsRestrictedAgent,(m=i.request(g,(function(e){if(200==e.statusCode){var t="true"===e.headers[y],n=e.headers[h]?e.headers[h].toString():null,o=e.headers[p]?parseInt(e.headers[p].toString()):null;E._consecutiveErrors=0,r(t,e,n,o)}else E._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),r()}))).on("error",(function(e){E._onError(e),r()})),m.write(n),m.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",a.warn(e.TAG,r,t)):a.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=b})),jn=f(((e,t)=>{"use strict";var r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},o=m(),i=kn(),s=Ln(),a=En(),c=An(),u=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=i.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,r=e.count||1,n=a.PerformanceToQuickPulseCounter[e.name];n&&(this._metrics[n]?(this._metrics[n].Value=(this._metrics[n].Value*this._metrics[n].Weight+t*r)/(this._metrics[n].Weight+r),this._metrics[n].Weight+=r):(this._metrics[n]=i.createQuickPulseMetric(e),this._metrics[n].Name=n,this._metrics[n].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return t=Object.keys(this._metrics).map((function(e){return a._metrics[e]})),r=i.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return n.sent(),[3,3];case 2:this._ping(r),n.label=3;case 3:return o=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,s=this._isCollectingData?e.POST_INTERVAL:o,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,s=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(s=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),s),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,r,n){null!=e?(this._isCollectingData!==e&&(o.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.length>0&&(this._redirectedHost=r,o.info("Redirecting endpoint to: ",r)),n&&n>0&&(this._pollingIntervalHint=n),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=u})),Bn=f(((e,t)=>{"use strict";var r=En(),n=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,r){var n=r.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===n.length){var o=n[0].toLowerCase(),i=n[1];t[o]=i}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var o=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+o+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+o+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=n})),Un=f(((e,t)=>{"use strict";var n=Yt(),o=Bn(),i=(m(),En()),s=r(7310),a=function(){function e(t){var r=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],a=o.parse(t),c=o.parse(n),u=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||u||c.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return r.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=a})),Hn=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var n=Un(),o=An(),i=m(),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=r(Object(function(){var e=new Error("Cannot find module 'applicationinsights-native-metrics'");throw e.code="MODULE_NOT_FOUND",e}()));e._emitter=new a,e._metricsAvailable=!0,i.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,o),this._handle||(this._handle=setInterval((function(){return s._trackNativeMetrics()}),o),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var r=process.env[n.ENV_nativeMetricsDisableAll],o=process.env[n.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(o){var i=o.split(","),s={};if(i.length>0)for(var a=0,c=i;a<c.length;a++){s[c[a]]=!0}return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,s=n+" Garbage Collection Duration",a=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:s,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData().loopUsage;if(0!=r.count){var n=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:r.total,count:r.count,min:r.min,max:r.max,stdDev:n,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,r;if(!this._disabledMetrics.heap){var n=process.memoryUsage(),i=n.heapUsed,s=n.heapTotal,a=n.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:i,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,r)})}},e}();e.AutoCollectNativePerformance=s})),Gn=f(((e,t)=>{"use strict";var r=m(),n=function(){function e(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return e.prototype.setUseDiskRetryCaching=function(e,t,r){this._sender.setDiskRetryMode(e,t,r)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void r.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var r=this._buffer.length<1;r||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&"function"==typeof t&&t("no data to send")},e}();t.exports=n})),Vn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),qn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=Gr();function r(e){var t=2147483647,r=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)r=((r<<5)+r|0)+e.charCodeAt(n)|0;return(r=r<=-2147483648?t:Math.abs(r))/t*100}e.samplingTelemetryProcessor=function(e,n){var o=e.sampleRate;return!!(null==o||o>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(n.correlationContext&&n.correlationContext.operation?r(n.correlationContext.operation.id)<o:100*Math.random()<o)},e.getSamplingHashCode=r})),$n=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=yn(),r=Gr();e.performanceMetricsTelemetryProcessor=function(e,n){switch(n&&n.addDocument(e),e.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var o=e.data.baseData;t.countRequest(o.duration,o.success);break;case r.TelemetryTypeString.Dependency:var i=e.data.baseData;t.countDependency(i.duration,i.success)}return!0}})),Wn=f((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=Gr(),n=Cn(),o=Gr();e.preAggregatedMetricsTelemetryProcessor=function(e,i){if(n.isEnabled())switch(e.data.baseType){case o.TelemetryTypeString.Exception:var s=e.data.baseData;s.properties=t(t({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole]};n.countException(a);break;case o.TelemetryTypeString.Trace:var c=e.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[c.severity]};n.countTrace(u);break;case o.TelemetryTypeString.Request:var l=e.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],operationSynthetic:e.tags[i.keys.operationSyntheticSource],requestSuccess:l.success,requestResultCode:l.responseCode};n.countRequest(l.duration,d);break;case o.TelemetryTypeString.Dependency:var p=e.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:e.tags[i.keys.cloudRoleInstance],cloudRoleName:e.tags[i.keys.cloudRole],operationSynthetic:e.tags[i.keys.operationSyntheticSource],dependencySuccess:p.success,dependencyType:p.type,dependencyTarget:p.target,dependencyResultCode:p.resultCode};n.countDependency(p.duration,h)}return!0}})),zn=f((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(Vn(),e),r(qn(),e),r($n(),e),r(Wn(),e)})),Kn=f(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=e&&e.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=r(7147),s=r(2037),a=r(1017),c=r(9796),u=r(2081),l=m(),d=Nn(),p=Xt(),h=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=a.join(s.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=i.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||l.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var o=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof r&&r>=0&&(this._resendInterval=Math.floor(r)),"number"==typeof n&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){o._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return n(this,void 0,void 0,(function(){var n,i,s,a,u=this;return o(this,(function(o){return t&&(n=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s="",t.forEach((function(e){var t=u._stringify(e);"string"==typeof t&&(s+=t+"\n")})),s.length>0&&(s=s.substring(0,s.length-1)),a=Buffer.from?Buffer.from(s):new Buffer(s),c.gzip(a,(function(o,s){var c=s;o?(l.warn(o),c=a,i.headers["Content-Length"]=a.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=s.length.toString()),l.info(e.TAG,i),i[d.disableCollectionRequestOption]=!0;var h=p.makeRequest(u._config,n,i,(function(n){n.setEncoding("utf-8");var o="";n.on("data",(function(e){o+=e})),n.on("end",(function(){if(u._numConsecutiveFailures=0,u._enableDiskRetryMode)if(200===n.statusCode)u._resendTimer||(u._resendTimer=setTimeout((function(){u._resendTimer=null,u._sendFirstFileOnDisk()}),u._resendInterval),u._resendTimer.unref());else if(u._isRetriable(n.statusCode))try{var i=JSON.parse(o),s=[];i.errors.forEach((function(e){u._isRetriable(e.statusCode)&&s.push(t[e.index])})),s.length>0&&u._storeToDisk(s)}catch(e){u._storeToDisk(t)}if(307===n.statusCode||308===n.statusCode)if(u._numConsecutiveRedirects++,u._numConsecutiveRedirects<10){var a=n.headers.location?n.headers.location.toString():null;a&&(u._redirectedHost=a,u.send(t,r))}else"function"==typeof r&&r("Error sending telemetry because of circular redirects.");else u._numConsecutiveRedirects=0,"function"==typeof r&&r(o),l.info(e.TAG,o),"function"==typeof u._onSuccess&&u._onSuccess(o)}))}));h.on("error",(function(n){if(u._numConsecutiveFailures++,!u._enableDiskRetryMode||u._numConsecutiveFailures>0&&u._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var o="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";u._enableDiskRetryMode&&(o="Ingestion endpoint could not be reached "+u._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(e.TAG,o,p.dumpObj(n))}else{o="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(e.TAG,o,p.dumpObj(n))}u._onErrorHelper(n),"function"==typeof r&&(n&&r(p.dumpObj(n)),r("Error sending telemetry")),u._enableDiskRetryMode&&u._storeToDisk(t)})),h.write(c),h.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,r){var n=u.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",(function(e){return r(e)})),n.on("close",(function(e,t){return r(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!u.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var r=u.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(0!==r.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=u.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",(function(e){return n+=e})),r.on("error",(function(e){return t(e,null)})),r.on("close",(function(r,o){return e.ACL_IDENTITY=n&&n.trim(),t(0===r?null:new Error("Getting ACL identity did not succeed (PS returned code "+r+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(u.spawnSync){var t=u.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(o,i){if(o)return e.ACLED_DIRECTORIES[t]=!1,r(o);n._runICACLS(n._getACLArguments(t,i),(function(n){return e.ACLED_DIRECTORIES[t]=!n,r(n)}))}))):r(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var r=this;i.lstat(e,(function(n,o){n&&"ENOENT"===n.code?i.mkdir(e,(function(n){n&&"EEXIST"!==n.code?t(n):r._applyACLRules(e,t)})):!n&&o.isDirectory()?r._applyACLRules(e,t):t(n||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){i.readdir(e,(function(r,n){if(r)return t(r,-1);var o=null,s=0,c=0;if(0!==n.length)for(var u=0;u<n.length;u++)i.stat(a.join(e,n[u]),(function(e,r){c++,e?o=e:r.isFile()&&(s+=r.size),c===n.length&&t(o,o?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=i.readdirSync(e),r=0,n=0;n<t.length;n++)r+=i.statSync(a.join(e,t[n])).size;return r},e.prototype._storeToDisk=function(t){var r=this;l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(n){if(n)return l.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),void r._onErrorHelper(n);r._getShallowDirectorySize(r._tempDir,(function(n,o){if(n||o<0)return l.warn(e.TAG,"Error while checking directory size: "+(n&&n.message)),void r._onErrorHelper(n);if(o>r._maxBytesOnDisk)l.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+o);else{var s=(new Date).getTime()+".ai.json",c=a.join(r._tempDir,s);l.info(e.TAG,"saving data to disk at: "+c),i.writeFile(c,r._stringify(t),{mode:384},(function(e){return r._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{l.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),i.existsSync(this._tempDir)||i.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk)return void l.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);var n=(new Date).getTime()+".ai.json",o=a.join(this._tempDir,n);l.info(e.TAG,"saving data before crash to disk at: "+o),i.writeFileSync(o,t,{mode:384})}catch(t){l.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;i.exists(this._tempDir,(function(t){t&&i.readdir(e._tempDir,(function(t,r){if(t)e._onErrorHelper(t);else if((r=r.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0){var n=r[0],o=a.join(e._tempDir,n);i.readFile(o,(function(t,r){t?e._onErrorHelper(t):i.unlink(o,(function(t){if(t)e._onErrorHelper(t);else try{var n=JSON.parse(r.toString());e.send(n)}catch(e){l.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){l.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;i.exists(this._tempDir,(function(r){r&&i.readdir(t._tempDir,(function(r,n){r?t._onErrorHelper(r):(n=n.filter((function(e){return a.basename(e).indexOf(".ai.json")>-1}))).length>0&&n.forEach((function(r){var n=new Date(parseInt(r.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>n){var o=a.join(t._tempDir,r);i.unlink(o,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===s.type(),e}();t.exports=h})),Xn=f(((e,t)=>{"use strict";var r=Gr(),n=Xt(),o=hn(),i=function(){function e(){}return e.createEnvelope=function(t,o,i,s,a){var c=null;switch(o){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t);break;case r.TelemetryType.Availability:c=e.createAvailabilityData(t);break;case r.TelemetryType.PageView:c=e.createPageViewData(t)}if(i&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in i)c.baseData.properties[u]||(c.baseData.properties[u]=i[u]);else c.baseData.properties=i;c.baseData.properties=n.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=l,d.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,o===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=n.w3cTraceId();var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),o.baseData=t,o},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var o=e.exception.stack,i=new r.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(o),i.hasFullStack=n.isArray(i.parsedStack)&&i.parsedStack.length>0,t.exceptions.push(i);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=n.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),o.baseData=t,o},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),o.baseData=t,o},e.createAvailabilityData=function(e){var t=new r.AvailabilityData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),o.baseData=t,o},e.createPageViewData=function(e){var t=new r.PageViewData;t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var o=new r.Data;return o.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),o.baseData=t,o},e.getTags=function(e,t){var r=o.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var i in e.tags)n[i]=e.tags[i];if(t)for(var i in t)n[i]=t[i];return r&&(n[e.keys.operationId]=n[e.keys.operationId]||r.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||r.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||r.operation.parentId),n},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,o=0,i=0;i<=r.length;i++){var a=r[i];if(s.regex.test(a)){var c=new s(r[i],n++);o+=c.sizeInBytes,t.push(c)}}if(o>32768)for(var u=0,l=t.length-1,d=0,p=u,h=l;u<l;){if((d+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var f=h-p+1;t.splice(p,f);break}p=u,h=l,u++,l--}}return t},e}(),s=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=n.trim(t);var o=t.match(e.regex);o&&o.length>=5&&(this.method=n.trim(o[2])||this.method,this.fileName=n.trim(o[4])||"<no_filename>",this.line=parseInt(o[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=i})),Yn=f(((e,t)=>{"use strict";var n=r(7310),o=Un(),i=An(),s=Gr(),a=Gn(),c=zn(),u=hn(),l=Kn(),d=Xt(),p=m(),h=Xn(),f=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new o(e);this.config=t,this.context=new i,this.commonProperties={};var r=new l(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),r)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,s.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var r=h.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(r.time=e.time.toISOString()),this._enableAzureProperties&&c.azureRoleEnvironmentTelemetryProcessor(r,this.context);var n=this.runTelemetryProcessors(r,e.contextObjects);n=n&&c.samplingTelemetryProcessor(r,{correlationContext:u.CorrelationContextManager.getCurrentContext()}),c.preAggregatedMetricsTelemetryProcessor(r,this.context),n&&(c.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),this.channel.send(r))}else p.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var r=!0,n=this._telemetryProcessors.length;if(0===n)return r;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var o=0;o<n;++o)try{var i=this._telemetryProcessors[o];if(i&&!1===i.apply(null,[e,t])){r=!1;break}}catch(t){r=!0,p.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return r&&(e&&e.tags&&(e.tags=d.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=d.validateStringMap(e.data.baseData.properties))),r},e}();t.exports=f})),Jn=f(((e,t)=>{"use strict";var r,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=Yn(),i=xn(),s=Nn(),a=m(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?i.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?i.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(o);t.exports=c})),Qn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Zn=f((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,r,n=hn(),o=_n(),i=vn(),s=yn(),a=Cn(),c=Mn(),u=Nn(),l=xn(),d=Yt(),p=m(),h=jn(),f=Hn();e.TelemetryClient=Jn(),e.Contracts=Gr(),e.azureFunctionsTypes=Qn(),(r=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[r.AI=0]="AI",r[r.AI_AND_W3C=1]="AI_AND_W3C";var g,_,v,E,y,b,S,C,A,T,w,P=!0,O=!1,I=!0,R=!0,D=!0,N=!1,M=!0,x=!0,k=!0,F=!0,L=!1,j=!0,B=void 0,U=void 0,H=!1;function G(){return e.defaultClient?(H=!0,v.enable(P,O),E.enable(I),y.enable(R),b.enable(D),S.enable(N,e.defaultClient.config),C.enable(j,_),A.useAutoCorrelation(F,g),A.enable(M),T.enable(x),e.liveMetricsClient&&L&&e.liveMetricsClient.enable(L)):p.warn("Start cannot be called before setup"),V}e.setup=function(t){return e.defaultClient?p.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),v=new o(e.defaultClient),E=new i(e.defaultClient),y=new s(e.defaultClient),b=new a(e.defaultClient),S=new c(e.defaultClient),A=new l(e.defaultClient),T=new u(e.defaultClient),C||(C=new f.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(k,B,U),V},e.start=G,e.getCorrelationContext=function(){return F?n.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return n.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return n.CorrelationContextManager.wrapCallback(e,t)};var V=function(){function r(){}return r.setDistributedTracingMode=function(e){return d.w3cEnabled=e===t.AI_AND_W3C,r},r.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),P=e,O=t,H&&v.enable(e,t),r},r.setAutoCollectExceptions=function(e){return I=e,H&&E.enable(e),r},r.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),R=e;var n=f.AutoCollectNativePerformance.parseEnabled(t);return j=n.isEnabled,_=n.disabledMetrics,H&&(y.enable(e),C.enable(n.isEnabled,n.disabledMetrics)),r},r.setAutoCollectPreAggregatedMetrics=function(e){return D=e,H&&b.enable(e),r},r.setAutoCollectHeartbeat=function(t){return N=t,H&&S.enable(t,e.defaultClient.config),r},r.setAutoCollectRequests=function(e){return M=e,H&&A.enable(e),r},r.setAutoCollectDependencies=function(e){return x=e,H&&T.enable(e),r},r.setAutoDependencyCorrelation=function(e,t){return F=e,g=t,H&&A.useAutoCorrelation(e,t),r},r.setUseDiskRetryCaching=function(t,n,o){return k=t,B=n,U=o,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,n,o),r},r.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),p.enableDebug=e,p.disableWarnings=!t,r},r.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new h(e.defaultClient.config,null),w=new s(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(w),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),L=t,r):(p.warn("Live metrics client cannot be setup without the default client"),r)},r.start=G,r}();e.Configuration=V,e.dispose=function(){d.w3cEnabled=!0,e.defaultClient=null,H=!1,v&&v.dispose(),E&&E.dispose(),y&&y.dispose(),b&&b.dispose(),S&&S.dispose(),C&&C.dispose(),A&&A.dispose(),T&&T.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),L=!1,e.liveMetricsClient=void 0)}}));((e,t)=>{for(var r in h(e),t)o(e,r,{get:t[r],enumerable:!0})})(t,{default:()=>uo});var eo,to,ro=g(r(2037)),no=g(r(9496)),oo=g(r(9496)),io=g(r(9496));function so(){return void 0!==io.env.isTelemetryEnabled?io.env.isTelemetryEnabled?eo.ON:eo.OFF:io.workspace.getConfiguration("telemetry").get("enableTelemetry")?eo.ON:eo.OFF}(to=eo||(eo={})).ON="on",to.OFF="off";var ao=class{constructor(e,t,r,n,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),void 0!==oo.env.onDidChangeTelemetryEnabled?(this.disposables.push(oo.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(oo.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(oo.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=so();this.userOptIn=e===eo.ON,this.errorOptIn=e===eo.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((r=>{0===e.indexOf(`${r}+`)&&(t=r)})),t}get extension(){return void 0===this._extension&&(this._extension=oo.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return!1!==this.errorOptIn&&(!this.firstParty||("other"!==this.cleanRemoteName(oo.env.remoteName)||!(void 0===this.extension||this.extension.extensionKind===oo.ExtensionKind.Workspace||oo.env.uiKind===oo.UIKind.Web)))}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,oo&&oo.env){switch(e["common.vscodemachineid"]=oo.env.machineId,e["common.vscodesessionid"]=oo.env.sessionId,e["common.vscodeversion"]=oo.version,e["common.isnewappinstall"]=oo.env.isNewAppInstall?oo.env.isNewAppInstall.toString():"false",e["common.product"]=oo.env.appHost,oo.env.uiKind){case oo.UIKind.Web:e["common.uikind"]="web";break;case oo.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(oo.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(null==e)return"";let n=[];""!==oo.env.appRoot&&n.push(new RegExp(oo.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let t=[];for(let o of n)for(;(r=o.exec(e))&&r;)t.push([r.index,o.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(o="";(r=s.exec(e))&&r;)r[0]&&!i.test(r[0])&&t.every((([e,t])=>r.index<e||r.index>=t))&&(o+=e.substring(a,r.index)+"<REDACTED: user-file-path>",a=s.lastIndex);a<e.length&&(o+=e.substr(a))}for(let e of n)o=o.replace(e,"");return o}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t=Object.create(null);for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/;/(key|token|sig|signature|password|passwd|pwd)[="':\s]/.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":t[r]=n}return t}sendTelemetryEvent(e,t,r){if(this.userOptIn&&""!==e){t=p(p({},t),this.getCommonProperties());let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(e,t,r){this.userOptIn&&""!==e&&(t=p(p({},t),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:t,measurements:r}))}sendTelemetryErrorEvent(e,t,r,n){if(this.errorOptIn&&""!==e){t=p(p({},t),this.getCommonProperties());let o=this.cloneAndChange(t,((e,t)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(t,this.firstParty):void 0===n||-1!==n.indexOf(e)?"REDACTED":this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(o),measurements:r})}}sendTelemetryException(e,t,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=p(p({},t),this.getCommonProperties());let n=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}},co=async e=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then((()=>g(Zn())));r.defaultClient?(t=new r.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(r.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=r.defaultClient),no&&no.env&&(t.context.tags[t.context.keys.userId]=no.env.machineId,t.context.tags[t.context.keys.sessionId]=no.env.sessionId,t.context.tags[t.context.keys.cloudRole]=no.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=no.env.appName),e&&0===e.indexOf("AIF-")&&(t.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(e){return Promise.reject(e)}return{logEvent:(e,r)=>{null==t||t.trackEvent({name:e,properties:null==r?void 0:r.properties,measurements:null==r?void 0:r.measurements})},logException:(e,r)=>{null==t||t.trackException({exception:e,properties:null==r?void 0:r.properties,measurements:null==r?void 0:r.measurements})},flush:async()=>{null==t||t.flush()}}},uo=class extends ao{constructor(e,t,r,n){let o=new class{constructor(e,t){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e,so()!==eo.OFF&&this.instantiateAppender()}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):!this._isInstantiated&&so()===eo.ON&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):!this._isInstantiated&&so()!==eo.OFF&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()})).catch((e=>{console.error(e)}))}}(r,co);r&&0===r.indexOf("AIF-")&&(n=!0),super(e,t,o,{release:ro.release(),platform:ro.platform(),architecture:ro.arch()},n)}}},3255:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3255,e.exports=t},9118:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=9118,e.exports=t},9135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DarwinChromeBrowserFinder=void 0;const n=r(690),o=r(1668);class i extends o.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",quality:"stable"},{path:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",quality:"canary"},{path:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",quality:"beta"},{path:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",quality:"dev"}]}async findAll(){const e=await this.findLaunchRegisteredApps("google chrome\\( canary\\)\\?.app",["/Applications/Google Chrome.app","/Applications/Google Chrome Canary.app"],["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome"]);return(0,n.sort)(e,this.createPriorities([{name:"Chrome.app",weight:0,quality:"stable"},{name:"Chrome Canary.app",weight:1,quality:"canary"}]))}getPreferredPath(){return this.env.CHROME_PATH}}t.DarwinChromeBrowserFinder=i},9143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DarwinEdgeBrowserFinder=void 0;const n=r(690),o=r(1668);class i extends o.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",quality:"stable"},{path:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",quality:"canary"},{path:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",quality:"beta"},{path:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",quality:"dev"}]}async findAll(){const e=await this.findLaunchRegisteredApps("Microsoft Edge[A-Za-z ]*.app",["/Applications/Microsoft Edge.app"],["/Contents/MacOS/Microsoft Edge Canary","/Contents/MacOS/Microsoft Edge Beta","/Contents/MacOS/Microsoft Edge Dev","/Contents/MacOS/Microsoft Edge"]);return(0,n.sort)(e,this.createPriorities([{name:"Microsoft Edge.app",weight:0,quality:"stable"},{name:"Microsoft Edge Canary.app",weight:1,quality:"canary"},{name:"Microsoft Edge Beta.app",weight:2,quality:"beta"},{name:"Microsoft Edge Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.EDGE_PATH}}t.DarwinEdgeBrowserFinder=i},1668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DarwinFinderBase=void 0;const n=r(1017),o=r(690),i=/( \(0x[a-f0-9]+\))/;t.DarwinFinderBase=class{constructor(e,t,r){this.env=e,this.fs=t,this.execa=r,this.lsRegisterCommand="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump",this.wellKnownPaths=[]}async findWhere(e){for(const t of this.wellKnownPaths)if(e(t)&&await(0,o.canAccess)(this.fs,t.path))return t;return(await this.findAll()).find(e)}async findLaunchRegisteredApps(e,t,r){const{stdout:o}=await this.execa.command(`${this.lsRegisterCommand} | awk '$0 ~ /${e}${i.source}?$/ { $1=""; print $0 }'`,{shell:!0,stdio:"pipe"}),s=[...t,...o.split("\n").map((e=>e.trim().replace(i,"")))].filter((e=>!!e)),a=this.getPreferredPath();a&&s.push(a);const c=new Set;for(const e of s)for(const t of r){const r=n.posix.join(e.trim(),t);try{await this.fs.access(r),c.add(r)}catch(e){}}return c}createPriorities(e){const t=this.env.HOME&&(0,o.escapeRegexSpecialChars)(this.env.HOME),r=this.getPreferredPath(),n=e.reduce(((e,r)=>[...e,{regex:new RegExp(`^/Applications/.*${r.name}`),weight:r.weight+100,quality:r.quality},{regex:new RegExp(`^${t}/Applications/.*${r.name}`),weight:r.weight,quality:r.quality},{regex:new RegExp(`^/Volumes/.*${r.name}`),weight:r.weight-100,quality:r.quality}]),[]);return r&&n.unshift({regex:new RegExp((0,o.escapeRegexSpecialChars)(r)),weight:151,quality:"custom"}),n}}},2331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeBrowserFinder=t.ChromeBrowserFinder=t.isQuality=t.allQualities=void 0;const n=r(9135),o=r(9143),i=r(8651),s=r(6718),a=r(9498),c=r(3061),u={canary:null,stable:null,beta:null,dev:null,custom:null};t.allQualities=new Set(Object.keys(u));t.isQuality=e=>t.allQualities.has(e),t.ChromeBrowserFinder="win32"===process.platform?a.WindowsChromeBrowserFinder:"darwin"===process.platform?n.DarwinChromeBrowserFinder:i.LinuxChromeBrowserFinder,t.EdgeBrowserFinder="win32"===process.platform?c.WindowsEdgeBrowserFinder:"darwin"===process.platform?o.DarwinEdgeBrowserFinder:s.LinuxEdgeBrowserFinder},8651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinuxChromeBrowserFinder=void 0;const n=r(1017),o=r(690),i=r(2081),s=r(2037),a=/\r?\n/;t.LinuxChromeBrowserFinder=class{constructor(e,t){this.env=e,this.fs=t,this.pathEnvironmentVar="CHROME_PATH",this.priorities=[{regex:/chrome-wrapper$/,weight:54,quality:"custom"},{regex:/google-chrome-dev$/,weight:53,quality:"dev"},{regex:/google-chrome-canary$/,weight:52,quality:"canary"},{regex:/google-chrome-unstable$/,weight:51,quality:"canary"},{regex:/google-chrome-canary$/,weight:51,quality:"canary"},{regex:/google-chrome-stable$/,weight:50,quality:"stable"},{regex:/google-chrome$/,weight:49,quality:"stable"},{regex:/chromium-browser$/,weight:48,quality:"custom"},{regex:/chromium$/,weight:47,quality:"custom"}],this.executablesOnPath=["google-chrome-unstable","google-chrome-dev","google-chrome-beta","google-chrome-canary","google-chrome-stable","google-chrome","chromium-browser","chromium"]}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){const e=new Set,t=this.env[this.pathEnvironmentVar];t&&await(0,o.canAccess)(this.fs,t)&&e.add(t);if([n.posix.join((0,s.homedir)(),".local/share/applications/"),"/usr/share/applications/","/usr/bin"].forEach((t=>{for(const r in this.findChromeExecutables(t))e.add(r)})),await Promise.all(this.executablesOnPath.map((async t=>{try{const r=(0,i.execFileSync)("which",[t],{stdio:"pipe"}).toString().split(a)[0];await(0,o.canAccess)(this.fs,r)&&e.add(r)}catch(e){}}))),!e.size)throw new Error(`The environment variable ${t} must be set to executable of a build of the browser.`);const r=t?[{regex:new RegExp((0,o.escapeRegexSpecialChars)(t)),weight:101,quality:"custom"}].concat(this.priorities):this.priorities;return(0,o.sort)(e,r)}async findChromeExecutables(e){const t=/(^[^ ]+).*/,r=`^Exec=/.*/(${this.executablesOnPath.join("|")})-.*`,n=[];if(await(0,o.canAccess)(this.fs,e)){let s;try{s=(0,i.execSync)(`grep -ER "${r}" ${e} | awk -F '=' '{print $2}'`)}catch(t){s=(0,i.execSync)(`grep -Er "${r}" ${e} | awk -F '=' '{print $2}'`)}const c=s.toString().split(a).map((e=>e.replace(t,"$1")));await Promise.all(c.map((async e=>{await(0,o.canAccess)(this.fs,e)&&n.push(e)})))}return n}}},6718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinuxEdgeBrowserFinder=void 0;const n=r(8651);class o extends n.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="EDGE_PATH",this.executablesOnPath=["microsoft-edge-dev","microsoft-edge-beta","microsoft-edge-stable","microsoft-edge"],this.priorities=[{regex:/microsoft-edge\-wrapper$/,weight:52,quality:"custom"},{regex:/microsoft-edge\-dev$/,weight:51,quality:"dev"},{regex:/microsoft-edge\-beta$/,weight:51,quality:"beta"},{regex:/microsoft-edge\-stable$/,weight:50,quality:"stable"},{regex:/microsoft-edge$/,weight:49,quality:"stable"}]}}t.LinuxEdgeBrowserFinder=o},690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findWindowsCandidates=t.sort=t.preferredEdgePath=t.preferredChromePath=t.escapeRegexSpecialChars=t.canAccess=void 0;const n=r(1017);async function o({access:e},t){if(!t)return!1;try{return await e(t),!0}catch(e){return!1}}t.canAccess=o;const i="/\\.?*()^${}|[]+";t.escapeRegexSpecialChars=function(e,t){const r=i.split("").filter((e=>!t||t.indexOf(e)<0)).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return e.replace(n,"\\$&")},t.preferredChromePath=async function(e,t){if(await o(e,t.CHROME_PATH))return t.CHROME_PATH},t.preferredEdgePath=async function(e,t){if(await o(e,t.EDGE_PATH))return t.EDGE_PATH},t.sort=function(e,t){return[...e].filter((e=>!!e)).map((e=>{const r=t.find((t=>t.regex.test(e)));return r?{path:e,weight:r.weight,quality:r.quality}:{path:e,weight:10,quality:"dev"}})).sort(((e,t)=>t.weight-e.weight)).map((e=>({path:e.path,quality:e.quality})))},t.findWindowsCandidates=async function(e,t,r){const i=[e.LOCALAPPDATA,e.PROGRAMFILES,e["PROGRAMFILES(X86)"]].filter((e=>!!e)),s=[];for(const e of i)for(const i of r){const r=n.win32.join(e,i.name);s.push(o(t,r).then((e=>e?{path:r,quality:i.type}:void 0)))}return(await Promise.all(s)).filter((e=>!!e))}},9498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsChromeBrowserFinder=void 0;const n=r(1017),o=r(690);t.WindowsChromeBrowserFinder=class{constructor(e,t){this.env=e,this.fs=t}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){const e=n.win32.sep,t=[{name:`${e}Google${e}Chrome Dev${e}Application${e}chrome.exe`,type:"dev"},{name:`${e}Google${e}Chrome SxS${e}Application${e}chrome.exe`,type:"canary"},{name:`${e}Google${e}Chrome Beta${e}Application${e}chrome.exe`,type:"beta"},{name:`${e}Google${e}Chrome${e}Application${e}chrome.exe`,type:"stable"}],r=await(0,o.findWindowsCandidates)(this.env,this.fs,t),i=await(0,o.preferredChromePath)(this.fs,this.env);return i&&r.unshift({path:i,quality:"custom"}),r}}},3061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsEdgeBrowserFinder=void 0;const n=r(1017),o=r(690);t.WindowsEdgeBrowserFinder=class{constructor(e,t){this.env=e,this.fs=t}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){const e=[{name:`${n.sep}Microsoft${n.sep}Edge SxS${n.sep}Application${n.sep}msedge.exe`,type:"canary"},{name:`${n.sep}Microsoft${n.sep}Edge Dev${n.sep}Application${n.sep}msedge.exe`,type:"dev"},{name:`${n.sep}Microsoft${n.sep}Edge Beta${n.sep}Application${n.sep}msedge.exe`,type:"beta"},{name:`${n.sep}Microsoft${n.sep}Edge${n.sep}Application${n.sep}msedge.exe`,type:"stable"}],t=await(0,o.findWindowsCandidates)(this.env,this.fs,e),r=await(0,o.preferredEdgePath)(this.fs,this.env);return r&&t.unshift({path:r,quality:"custom"}),t}}},4245:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDP_API_NAMES=void 0,t.CDP_API_NAMES={DEBUGGER_SET_BREAKPOINT:"Debugger.setBreakpoint",RUNTIME_CALL_FUNCTION_ON:"Runtime.callFunctionOn",DEBUGGER_PAUSED:"Debugger.paused",RUNTIME_ENABLE:"Runtime.enable",CONSOLE_MESSAGE_ADDED:"Console.messageAdded",RUNTIME_CONSOLE_API_CALLED:"Runtime.consoleAPICalled",EXECUTION_CONTEXT_CREATED:"Runtime.executionContextCreated",CLOSE:"close"}},1756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCDPMessageHandler=void 0;t.BaseCDPMessageHandler=class{processDebuggerCDPMessage(e){return{event:e,sendBack:!1}}processApplicationCDPMessage(e){return{event:e,sendBack:!1}}setDebuggerTarget(e){this.debuggerTarget=e}setApplicationTarget(e){this.applicationTarget=e}}},4290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HermesCDPMessageHandler=void 0;const n=r(4245),o=r(1756);class i extends o.BaseCDPMessageHandler{constructor(){super(...arguments),this.HERMES_NATIVE_FUNCTION_NAME="(native)",this.HERMES_NATIVE_FUNCTION_SCRIPT_ID="4294967295"}processDebuggerCDPMessage(e){let t=!1;return e.method===n.CDP_API_NAMES.DEBUGGER_SET_BREAKPOINT?e=this.handleBreakpointSetting(e):e.method===n.CDP_API_NAMES.RUNTIME_CALL_FUNCTION_ON&&(e=this.handleCallFunctionOnEvent(e),t=!0),{event:e,sendBack:t}}processApplicationCDPMessage(e){return e.method===n.CDP_API_NAMES.DEBUGGER_PAUSED?e=this.handlePausedEvent(e):e.result&&e.result.result&&(e=this.handleFunctionTypeResult(e)),{event:e,sendBack:!1}}handleCallFunctionOnEvent(e){return{result:{result:{objectId:e.params.objectId}},id:e.id}}handleFunctionTypeResult(e){if(Array.isArray(e.result.result)){const t=e.result.result;t.forEach((e=>{e.value&&"function"===e.value.type&&!e.value.description&&(e.value.description="function() { … }")})),e.result.result=t}return e}handlePausedEvent(e){let t=e.params.callFrames;return t=t.filter((e=>e.functionName!==this.HERMES_NATIVE_FUNCTION_NAME&&e.location.scriptId!==this.HERMES_NATIVE_FUNCTION_SCRIPT_ID)),e.params.callFrames=t,e}handleBreakpointSetting(e){return e.params&&delete e.params.location.columnNumber,e}}t.HermesCDPMessageHandler=i},725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDirectCDPMessageHandler=void 0;const n=r(1756),o=r(4245);class i extends n.BaseCDPMessageHandler{constructor(){super(),this.isBackcompatConfigured=!1,this.customMessageLastId=0}processDebuggerCDPMessage(e){return this.isBackcompatConfigured||e.method!==o.CDP_API_NAMES.RUNTIME_ENABLE||(this.configureTargetForIWDPCommunication(),this.configureDebuggerForIWDPCommunication(),this.isBackcompatConfigured=!0),{event:e,sendBack:!1}}processApplicationCDPMessage(e){return e.method===o.CDP_API_NAMES.CONSOLE_MESSAGE_ADDED&&(e=this.processDeprecatedConsoleMessage(e)),e.result&&e.result.properties&&(e.result={result:e.result.properties}),{event:e,sendBack:!1}}processDeprecatedConsoleMessage(e){return{method:o.CDP_API_NAMES.RUNTIME_CONSOLE_API_CALLED,params:{type:e.params.message.type,timestamp:e.params.message.timestamp,args:e.params.message.parameters||[{type:"string",value:e.params.message.text}],stackTrace:{callFrames:e.params.message.stack||e.params.message.stackTrace},executionContextId:1}}}configureTargetForIWDPCommunication(){var e,t;try{null===(e=this.applicationTarget)||void 0===e||e.api.Console.enable({}),null===(t=this.applicationTarget)||void 0===t||t.api.Debugger.setBreakpointsActive({active:!0})}catch(e){}}configureDebuggerForIWDPCommunication(){const e={id:this.customMessageLastId++,origin:"",name:"IOS Execution Context",auxData:{isDefault:!0}};try{this.sendCustomRequestToDebuggerTarget(o.CDP_API_NAMES.EXECUTION_CONTEXT_CREATED,{context:e},!1)}catch(e){throw Error("Could not create Execution context")}}sendCustomRequestToDebuggerTarget(e,t={},r=!0){var n;const o={method:e,params:t};r&&(o.id=this.customMessageLastId++),null===(n=this.debuggerTarget)||void 0===n||n.send(o)}}t.IOSDirectCDPMessageHandler=i},5585:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RnCDPMessageHandler=void 0;const n=r(4245),o=r(1756);class i extends o.BaseCDPMessageHandler{constructor(){super(),this.firstStop=!0}processDebuggerCDPMessage(e){return e.method===n.CDP_API_NAMES.CLOSE&&this.handleDebuggerDisconnect(),{event:e,sendBack:!1}}processApplicationCDPMessage(e){return e.method===n.CDP_API_NAMES.DEBUGGER_PAUSED&&this.firstStop&&(e.params=this.handleAppBundleFirstPauseEvent(e)),{event:e,sendBack:!1}}handleAppBundleFirstPauseEvent(e){const t=e.params;return t.reason&&"other"===t.reason&&(this.firstStop=!1,t.reason="Break on start"),t}handleDebuggerDisconnect(){this.firstStop=!0}}t.RnCDPMessageHandler=i},691:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerEndpointHelper=void 0;const o=r(7310),i=r(3685),s=r(5687),a=r(9523),c=r(413),u=r(312),l=r(9897),d=r(8102);t.DebuggerEndpointHelper=class{constructor(){this.localv4=c.toBuffer("127.0.0.1"),this.localv6=c.toBuffer("::1")}retryGetWSEndpoint(e,t,r,o=!1,i){return n(this,void 0,void 0,(function*(){for(;;)try{let t="";if(!i)return yield this.getWSEndpoint(e,o);t=`http://localhost:${i}`;try{return yield this.getWSEndpoint(e,o)}catch(e){return yield this.getWSEndpoint(t,o)}}catch(n){if(t<1||r.isCancellationRequested){const t=l.ErrorHelper.getInternalError(u.InternalErrorCode.CouldNotConnectToDebugTarget,e,n.message);if(r.isCancellationRequested)throw l.ErrorHelper.getNestedError(t,u.InternalErrorCode.CancellationTokenTriggered);throw t}yield d.PromiseUtil.delay(700)}}))}getWSEndpoint(e,t=!1){return n(this,void 0,void 0,(function*(){const r=yield this.fetchJson(o.resolve(e,"/json/version"));if(r.webSocketDebuggerUrl)return r.webSocketDebuggerUrl;const n=yield this.fetchJson(o.resolve(e,"/json/list"));if(n.length)return t?this.tryToGetHermesImprovedChromeReloadsWebSocketDebuggerUrl(n):n[0].webSocketDebuggerUrl;const i=yield this.fetchJson("http://localhost:8081/json/list");if(i.length)return t?this.tryToGetHermesImprovedChromeReloadsWebSocketDebuggerUrl(i):i[0].webSocketDebuggerUrl;throw new Error("Could not find any debuggable target")}))}tryToGetHermesImprovedChromeReloadsWebSocketDebuggerUrl(e){const t=e.find((e=>"React Native Experimental (Improved Chrome Reloads)"===e.title));return t?t.webSocketDebuggerUrl:e[0].webSocketDebuggerUrl}fetchJson(e){return n(this,void 0,void 0,(function*(){const t=yield this.fetch(e);try{return JSON.parse(t)}catch(e){return{}}}))}fetch(e){return n(this,void 0,void 0,(function*(){const t=!e.startsWith("http://"),r=t?s:i,n=yield this.isLoopback(e);return new Promise(((o,i)=>{const s={};t&&n&&(s.rejectUnauthorized=!1);const a=r.get(e,s,(e=>{let t="";e.setEncoding("utf8"),e.on("data",(e=>{t+=e})),e.on("end",(()=>o(t))),e.on("error",i)}));a.on("error",i),a.end()}))}))}isLoopback(e){return n(this,void 0,void 0,(function*(){let t;try{t=new o.URL(e).hostname.replace(/^\[|]$/g,"")}catch(r){t=e}if(this.isLoopbackIp(t))return!0;try{const e=yield a.promises.lookup(t);return this.isLoopbackIp(e.address)}catch(e){return!1}}))}isLoopbackIp(e){if("localhost"===e.toLowerCase())return!0;let t;try{t=c.toBuffer(e)}catch(e){return!1}return t.equals(this.localv4)||t.equals(this.localv6)}}},2424:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeCDPProxy=void 0;const o=r(8973),i=r(9496),s=r(9144),a=r(8694),c=r(691);t.ReactNativeCDPProxy=class{constructor(e,t,r=a.LogLevel.None){this.PROXY_LOG_TAGS={DEBUGGER_COMMAND:"Command Debugger To Target",APPLICATION_COMMAND:"Command Target To Debugger",DEBUGGER_REPLY:"Reply From Debugger To Target",APPLICATION_REPLY:"Reply From Target To Debugger"},this.applicationTargetEventEmitter=new i.EventEmitter,this.errorEventEmitter=new i.EventEmitter,this.onError=this.errorEventEmitter.event,this.onApplicationTargetConnectionClosed=this.applicationTargetEventEmitter.event,this.port=t,this.hostAddress=e,this.logger=s.OutputChannelLogger.getChannel("React Native Chrome Proxy","false"!==process.env.REACT_NATIVE_TOOLS_LAZY_LOGS,!1,!0),this.logLevel=r,this.browserInspectUri="",this.debuggerEndpointHelper=new c.DebuggerEndpointHelper}initializeServer(e,t,r){return n(this,void 0,void 0,(function*(){this.logLevel=t,this.CDPMessageHandler=e,this.cancellationToken=r,this.server=yield o.Server.create({port:this.port,host:this.hostAddress}),this.server.onConnection(this.onConnectionHandler.bind(this))}))}stopServer(){return n(this,void 0,void 0,(function*(){this.server&&(this.server.dispose(),this.server=null),this.applicationTarget&&(yield this.applicationTarget.close(),this.applicationTarget=null),this.browserInspectUri="",this.cancellationToken=void 0}))}setBrowserInspectUri(e){this.browserInspectUri=e}setApplicationTargetPort(e){this.applicationTargetPort=e}onConnectionHandler([e,t]){var r,i;return n(this,void 0,void 0,(function*(){this.debuggerTarget=e,this.debuggerTarget.pause(),this.browserInspectUri||(this.cancellationToken?this.browserInspectUri=yield this.debuggerEndpointHelper.retryGetWSEndpoint(`http://localhost:${this.applicationTargetPort}`,90,this.cancellationToken):this.browserInspectUri=yield this.debuggerEndpointHelper.getWSEndpoint(`http://localhost:${this.applicationTargetPort}`)),this.applicationTarget=new o.Connection(yield o.WebSocketTransport.create(this.browserInspectUri)),this.applicationTarget.onError(this.onApplicationTargetError.bind(this)),this.debuggerTarget.onError(this.onDebuggerTargetError.bind(this)),this.applicationTarget.onCommand(this.handleApplicationTargetCommand.bind(this)),this.debuggerTarget.onCommand(this.handleDebuggerTargetCommand.bind(this)),this.applicationTarget.onReply(this.handleApplicationTargetReply.bind(this)),this.debuggerTarget.onReply(this.handleDebuggerTargetReply.bind(this)),this.applicationTarget.onEnd(this.onApplicationTargetClosed.bind(this)),this.debuggerTarget.onEnd(this.onDebuggerTargetClosed.bind(this)),null===(r=this.CDPMessageHandler)||void 0===r||r.setApplicationTarget(this.applicationTarget),null===(i=this.CDPMessageHandler)||void 0===i||i.setDebuggerTarget(this.debuggerTarget),this.debuggerTarget.unpause()}))}handleDebuggerTargetCommand(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.DEBUGGER_COMMAND,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processDebuggerCDPMessage(e);n.sendBack?null===(t=this.debuggerTarget)||void 0===t||t.send(n.event):null===(r=this.applicationTarget)||void 0===r||r.send(n.event)}handleApplicationTargetCommand(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.APPLICATION_COMMAND,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processApplicationCDPMessage(e);n.sendBack?null===(t=this.applicationTarget)||void 0===t||t.send(n.event):null===(r=this.debuggerTarget)||void 0===r||r.send(n.event)}handleDebuggerTargetReply(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.DEBUGGER_REPLY,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processDebuggerCDPMessage(e);n.sendBack?null===(t=this.debuggerTarget)||void 0===t||t.send(n.event):null===(r=this.applicationTarget)||void 0===r||r.send(n.event)}handleApplicationTargetReply(e){var t,r;this.logger.logWithCustomTag(this.PROXY_LOG_TAGS.APPLICATION_REPLY,JSON.stringify(e,null,2),this.logLevel);const n=this.CDPMessageHandler.processApplicationCDPMessage(e);n.sendBack?null===(t=this.applicationTarget)||void 0===t||t.send(n.event):null===(r=this.debuggerTarget)||void 0===r||r.send(n.event)}onDebuggerTargetError(e){this.logger.error("Error on debugger transport",e)}onApplicationTargetError(e){this.logger.error("Error on application transport",e)}onApplicationTargetClosed(){return n(this,void 0,void 0,(function*(){this.applicationTarget=null,this.applicationTargetEventEmitter.fire({})}))}onDebuggerTargetClosed(){return n(this,void 0,void 0,(function*(){this.browserInspectUri="",this.CDPMessageHandler.processDebuggerCDPMessage({method:"close"}),this.debuggerTarget=null}))}}},5458:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandExecutor=t.CommandStatus=t.CommandVerbosity=void 0;const o=r(1017),i=r(3403),s=r(4270),a=r(9327),c=r(1376),u=r(9897),l=r(312),d=r(3116);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/common/commandExecutor.ts"));const p=i.loadMessageBundle(r(1017).join(__dirname,"src/common/commandExecutor.ts"));var h,f;!function(e){e[e.OUTPUT=0]="OUTPUT",e[e.SILENT=1]="SILENT",e[e.PROGRESS=2]="PROGRESS"}(h=t.CommandVerbosity||(t.CommandVerbosity={})),function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(f=t.CommandStatus||(t.CommandStatus={}));class g{constructor(e,t=process.cwd(),r=new s.NullLogger){this.nodeModulesRoot=e,this.currentWorkingDirectory=t,this.logger=r,this.childProcess=new d.Node.ChildProcess}execute(e,t={}){return n(this,void 0,void 0,(function*(){this.logger.debug(g.getCommandStatusString(e,f.Start));try{const r=yield this.childProcess.execToString(e,{cwd:this.currentWorkingDirectory,env:t.env});this.logger.info(r),this.logger.debug(g.getCommandStatusString(e,f.End))}catch(t){return this.generateRejectionForCommand(e,t)}}))}executeToString(e,t={}){return n(this,void 0,void 0,(function*(){try{return yield this.childProcess.execToString(e,{cwd:this.currentWorkingDirectory,env:t.env})}catch(e){return e}}))}spawn(e,t,r={}){return this.spawnChildProcess(e,t,r).outcome}spawnReactPackager(e,t={}){return this.spawnReactCommand("start",e,t)}spawnExpoPackager(e,t={}){return this.spawnExpoCommand("start",e,t)}getReactNativeVersion(){return n(this,void 0,void 0,(function*(){return(yield a.ProjectVersionHelper.getReactNativeVersions(this.currentWorkingDirectory)).reactNativeVersion}))}killReactPackager(e){return n(this,void 0,void 0,(function*(){if(e){if(c.HostPlatform.getPlatformId()===c.HostPlatformId.WINDOWS){const t=yield this.childProcess.exec(`taskkill /pid ${e.pid} /T /F`);yield t.outcome}else e.kill();this.logger.info(p(0,null))}else this.logger.warning(p(1,null))}))}spawnReactCommand(e,t=[],r={}){const n=c.HostPlatform.getNpmCliCommand(this.selectReactNativeCLI());return this.spawnChildProcess(n,[e,...t],r)}spawnExpoCommand(e,t=[],r={}){const n=c.HostPlatform.getNpmCliCommand(this.selectExpoCLI());return this.spawnChildProcess(n,[e,...t],r)}spawnWithProgress(e,t,r={verbosity:h.OUTPUT}){return n(this,void 0,void 0,(function*(){const n=Object.assign({},{cwd:this.currentWorkingDirectory},r),o=`${e} ${t.join(" ")}`;let i=0;const s=()=>{const e=Date.now();e-i>1500&&(i=e,this.logger.logStream(".",process.stdout))};r.verbosity===h.OUTPUT&&this.logger.debug(g.getCommandStatusString(o,f.Start));const a=this.childProcess.spawn(e,t,n);a.stdout.on("data",(e=>{r.verbosity===h.OUTPUT?this.logger.logStream(e,process.stdout):r.verbosity===h.PROGRESS&&s()})),a.stderr.on("data",(e=>{r.verbosity===h.OUTPUT?this.logger.logStream(e,process.stderr):r.verbosity===h.PROGRESS&&s()}));try{yield a.outcome,r.verbosity===h.OUTPUT&&this.logger.debug(g.getCommandStatusString(o,f.End)),this.logger.logStream("\n",process.stdout)}catch(e){return this.generateRejectionForCommand(o,e)}}))}selectReactNativeCLI(){return g.ReactNativeCommand||o.resolve(this.nodeModulesRoot,"node_modules",".bin","react-native")}selectExpoCLI(){return g.ReactNativeCommand||o.resolve(this.nodeModulesRoot,"node_modules",".bin","expo")}spawnChildProcess(e,t,r={}){const n=Object.assign({},{cwd:this.currentWorkingDirectory},r),o=`${e} ${t.join(" ")}`;this.logger.debug(g.getCommandStatusString(o,f.Start));const i=this.childProcess.spawn(e,t,n);return i.stderr.on("data",(e=>{this.logger.logStream(e,process.stderr)})),i.stdout.on("data",(e=>{this.logger.logStream(e,process.stdout)})),i.outcome=i.outcome.then((()=>this.logger.debug(g.getCommandStatusString(o,f.End))),(e=>this.generateRejectionForCommand(o,e))),i}generateRejectionForCommand(e,t){return Promise.reject(t.errorCode===l.InternalErrorCode.CommandFailed?t:u.ErrorHelper.getNestedError(t,l.InternalErrorCode.CommandFailed,e))}static getCommandStatusString(e,t){switch(t){case f.Start:return`Executing command: ${e}`;case f.End:return`Finished executing: ${e}`;default:throw u.ErrorHelper.getInternalError(l.InternalErrorCode.UnsupportedCommandStatus)}}}t.CommandExecutor=g},3292:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationProviderHelper=void 0;const o=r(3403),i=r(7599),s=r(3350),a=r(4062),c=r(9208);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/common/configurationProviderHelper.ts"));const u=o.loadMessageBundle(r(1017).join(__dirname,"src/common/configurationProviderHelper.ts"));t.ConfigurationProviderHelper=class{selectPlatform(e,t,r,o,i){return n(this,void 0,void 0,(function*(){const n=yield e.showQuickPick({title:u(0,null),placeholder:u(1,null),step:o,totalSteps:i,items:r,activeItem:r[0]});if(!n)throw new Error("Platform is not selected");return t.platform=n.type,t}))}selectApplicationType(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield e.showQuickPick({title:u(2,null),placeholder:u(3,null),step:r,totalSteps:o,items:s.appTypePickConfig,activeItem:s.appTypePickConfig[0]});if(!n)throw new Error("Application type is not selected");return t.type=n.type,t}))}shouldUseHermesEngine(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield e.showQuickPick({title:u(4,null),placeholder:u(5,null),step:r,totalSteps:o,items:s.shouldUseHermesEngine,activeItem:s.shouldUseHermesEngine[0]});if(!n)throw new Error(u(6,null));return t.useHermesEngine="yes"===n.type,t}))}selectExpoHostType(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield e.showQuickPick({title:u(7,null),placeholder:u(8,null),step:r,totalSteps:o,items:s.expoHostTypePickConfig,activeItem:s.expoHostTypePickConfig[0]});if(!n)throw new Error("Expo host type is not selected");return t.expoHostType=n.type,t}))}selectBrowserTarget(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=yield e.showQuickPick({title:u(9,null),placeholder:u(10,null),step:r,totalSteps:o,items:s.browserTypePickConfig,activeItem:s.browserTypePickConfig[0]});if(!n)throw new Error(u(11,null));return t.browserTarget=n.type,t}))}configureAddress(e,t,r,o,i){return n(this,void 0,void 0,(function*(){delete t.address;const n=yield e.showInputBox({title:u(12,null),step:r,totalSteps:o,value:i,prompt:u(13,null),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:u(14,null))});return n&&n.trim()!==i&&(t.address=n.trim()),t}))}configurePort(e,t,r,o){return n(this,void 0,void 0,(function*(){delete t.port;const n=String(t.type!==s.DEBUG_TYPES.REACT_NATIVE_DIRECT||t.platform!==i.PlatformType.iOS||t.useHermesEngine?c.Packager.DEFAULT_PORT:a.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT),l=/^\d+$/,d=yield e.showInputBox({title:u(15,null),step:r,totalSteps:o,value:n,prompt:u(16,null),validate:e=>Promise.resolve(e&&l.test(e.trim())?void 0:u(17,null))});let p;return d&&l.test(d.trim())&&(p=parseInt(d,10)),p&&p!==c.Packager.DEFAULT_PORT&&(t.port=p),t}))}}},2756:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationReader=void 0;const o=r(312),i=r(9897);class s{static readString(e){if(this.isString(e))return e;throw i.ErrorHelper.getInternalError(o.InternalErrorCode.ExpectedStringValue,e)}static readBoolean(e){if(this.isBoolean(e))return e;if("true"===e||"false"===e)return"true"===e;throw i.ErrorHelper.getInternalError(o.InternalErrorCode.ExpectedBooleanValue,e)}static readArray(e){if(this.isArray(e))return e;throw i.ErrorHelper.getInternalError(o.InternalErrorCode.ExpectedArrayValue,e)}static readObject(e){if(this.isObject(e))return e;throw i.ErrorHelper.getInternalError(o.InternalErrorCode.ExpectedObjectValue,e)}static readInt(e){if(this.isInt(e))return e;if(this.isString(e))return parseInt(e,10);throw i.ErrorHelper.getInternalError(o.InternalErrorCode.ExpectedIntegerValue,e)}static readIntWithDefaultSync(e,t){return e?this.readInt(e):t}static readIntWithDefaultAsync(e,t){return n(this,void 0,void 0,(function*(){const r=yield t;return this.readIntWithDefaultSync(e,r)}))}static isArray(e){return Array.isArray(e)}static isObject(e){return"object"==typeof e||!s.isArray(e)}static isString(e){return"string"==typeof e}static isBoolean(e){return"boolean"==typeof e}static isInt(e){return this.isNumber(e)&&e%1==0}static isNumber(e){return"number"==typeof e}}t.ConfigurationReader=s},4800:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_VARIABLES_NAMES=void 0,t.CONTEXT_VARIABLES_NAMES={IS_RN_PACKAGER_RUNNING:"isRNPackagerRunning",IS_RNT_NETWORK_INSPECTOR_RUNNING:"isRNTNetworkInspectorRunning",IS_RN_WINDOWS_PROJECT:"isRNWindowsProject",IS_RN_MACOS_PROJECT:"isRNMacOSProject",IS_RN_MACOS_HERMES_PROJECT:"isRNMacosHermesProject",IS_RN_WINDOWS_HERMES_PROJECT:"isRNWindowsHermesProject",IS_RN_ANDROID_HERMES_PROJECT:"isRNAndroidHermesProject",IS_RN_IOS_HERMES_PROJECT:"isRNIosHermesProject",IS_RN_HERMES_PROJECT:"isRNHermesProject",IS_RN_PROJECT:"isRNProject"}},6727:(__unused_webpack_module,exports)=>{"use strict";let customRequire;Object.defineProperty(exports,"__esModule",{value:!0});try{customRequire="function"===global.__non_webpack_require__?global.__non_webpack_require__:eval("require")}catch(e){customRequire=()=>{customRequire.cache={}}}exports.default=customRequire},2705:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.downloadExpoGo=t.downloadFile=void 0;const o=r(7147),i=r(5687),s=r(9496),a=r(9144);function c(e,t){return n(this,void 0,void 0,(function*(){const r=a.OutputChannelLogger.getMainChannel();let c=0,u=0;return yield new Promise(((a,l)=>{i.get(e,(e=>{var i;if((null!==(i=e.statusCode)&&void 0!==i?i:0)>=400)return l(new Error(e.statusMessage));const d=o.createWriteStream(t),p=parseInt(e.headers["content-length"],10);e.pipe(d),e.on("data",(function(e){return n(this,void 0,void 0,(function*(){u+=e.length;const t=100*parseFloat(function(e,t){return(e/t).toFixed(2)}(u,p));t-c>=5&&(c=t,r.logStream(`Current progress: ${t}%, please wait... \n`))}))})),d.on("finish",(()=>n(this,void 0,void 0,(function*(){d.close(),r.logStream(`Download Expo Go Completed: ${t} \n`),s.window.showInformationMessage("Download Expo Go Completed.")})))),e.on("end",(function(){a((()=>{console.log("Progress end.")}))}))})).on("error",(e=>{l(e)})).end()}))}))}t.downloadFile=c,t.downloadExpoGo=function(e,t){return n(this,void 0,void 0,(function*(){yield c(e,t)}))}},9658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorColorThemesHelper=t.SystemColorTheme=void 0;const n=r(9496);var o;!function(e){e.Light="Light",e.Dark="Dark"}(o=t.SystemColorTheme||(t.SystemColorTheme={}));class i{static isAutoDetectColorSchemeEnabled(){return!!n.workspace.getConfiguration("window").get("autoDetectColorScheme")}static getCurrentSystemColorTheme(){if(i.isAutoDetectColorSchemeEnabled()){const e=n.workspace.getConfiguration("workbench");return e.get("colorTheme")===e.get("preferredDarkColorTheme")?o.Dark:o.Light}throw new Error("Couldn't detect the current system color theme: 'window.autoDetectColorScheme' parameter is disabled")}}t.EditorColorThemesHelper=i},8079:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryPointHandler=t.ProcessType=void 0;const n=r(2663),o=r(9897),i=r(3821),s=r(4301);var a;!function(e){e[e.Extension=0]="Extension",e[e.Debugee=1]="Debugee",e[e.Debugger=2]="Debugger"}(a=t.ProcessType||(t.ProcessType={}));t.EntryPointHandler=class{constructor(e,t=new n.ConsoleLogger){this.logger=t,this.processType=e}runFunction(e,t,r,n=!1,o){return this.runFunctionWExtProps(e,o||{},t,r,n)}runFunctionWExtProps(e,t,r,n,o=!1){return this.handleErrors(r,i.TelemetryHelper.generate(e,t,n),o)}runApp(e,t,r,n,o,i){try{return s.Telemetry.init(e,t,n),this.runFunction(e,r,o,!0,i)}catch(r){throw this.logger.error(r),r}}handleErrors(e,t,r){return t.catch((t=>{const n=this.processType===a.Debugee,i=!r||n;if(this.logger.error(e.message,o.ErrorHelper.wrapError(e,t),i),r){if(!n)throw t;process.exit(1)}})),t}}},9897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHelper=void 0;const n=r(6932),o=r(6592);class i{static getInternalError(e,...t){const r=i.getErrorMessage(e,...t);return new n.InternalError(e,r)}static getNestedError(e,t,...r){const o=i.getErrorMessage(t,...r);return new n.NestedError(t,o,e)}static wrapError(e,t){return n.NestedError.getWrappedError(e,t)}static getWarning(e){return new n.InternalError(-1,e,n.InternalErrorLevel.Warning)}static getNestedWarning(e,t){return new n.NestedError(-1,t,e,null,n.InternalErrorLevel.Warning)}static getErrorMessage(e,...t){return i.formatErrorMessage(i.ERROR_STRINGS[e],...t)}static formatErrorMessage(e,...t){if(!e)return e;let r=e;for(const[e,n]of t.entries())r=r.replace(new RegExp(`\\{${e}\\}`,"g"),n);return r}}i.ERROR_STRINGS=o.ERROR_STRINGS,t.ErrorHelper=i},6592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_STRINGS=void 0;const n=r(3403),o=r(312);n.config({messageFormat:n.MessageFormat.bundle,bundleFormat:n.BundleFormat.standalone})(r(1017).join(__dirname,"src/common/error/errorStrings.ts"));const i=n.loadMessageBundle(r(1017).join(__dirname,"src/common/error/errorStrings.ts"));t.ERROR_STRINGS={[o.InternalErrorCode.CommandCanceled]:i(0,null),[o.InternalErrorCode.CommandFailed]:i(1,null),[o.InternalErrorCode.CommandFailedWithDetails]:i(2,null),[o.InternalErrorCode.DebuggingCommandFailed]:i(3,null),[o.InternalErrorCode.CommandFailedWithErrorCode]:i(4,null),[o.InternalErrorCode.ExpectedIntegerValue]:i(5,null),[o.InternalErrorCode.PackagerStartFailed]:i(6,null),[o.InternalErrorCode.IOSDeployNotFound]:i(7,null),[o.InternalErrorCode.DeviceNotPluggedIn]:i(8,null),[o.InternalErrorCode.DeveloperDiskImgNotMountable]:i(9,null),[o.InternalErrorCode.ApplicationLaunchFailed]:i(10,null),[o.InternalErrorCode.CouldNotAttachToDebugger]:i(11,null),[o.InternalErrorCode.ApplicationLaunchTimedOut]:i(12,null),[o.InternalErrorCode.IOSSimulatorNotLaunchable]:i(13,null),[o.InternalErrorCode.OpnPackagerLocationNotFound]:i(14,null),[o.InternalErrorCode.OpnPackagerNotFound]:i(15,null),[o.InternalErrorCode.PackageNotFound]:i(16,null),[o.InternalErrorCode.PlatformNotSupported]:i(17,null),[o.InternalErrorCode.ProjectVersionNotParsable]:i(18,null),[o.InternalErrorCode.ProjectVersionUnsupported]:i(19,null),[o.InternalErrorCode.CouldNotFindProjectVersion]:i(20,null),[o.InternalErrorCode.ProjectVersionNotReadable]:i(21,null),[o.InternalErrorCode.TelemetryInitializationFailed]:i(22,null),[o.InternalErrorCode.ExtensionActivationFailed]:i(23,null),[o.InternalErrorCode.DebuggerStubLauncherFailed]:i(24,null),[o.InternalErrorCode.IntellisenseSetupFailed]:i(25,null),[o.InternalErrorCode.NodeDebuggerConfigurationFailed]:i(26,null),[o.InternalErrorCode.FailedToStopPackagerOnExit]:i(27,null),[o.InternalErrorCode.FailedToRunOnAndroid]:i(28,null),[o.InternalErrorCode.FailedToRunOnIos]:i(29,null),[o.InternalErrorCode.FailedToRunExponent]:i(30,null),[o.InternalErrorCode.FailedToPublishToExpHost]:i(31,null),[o.InternalErrorCode.FailedToConfigEASBuild]:i(32,null),[o.InternalErrorCode.FailedToOpenProjectPage]:i(33,null),[o.InternalErrorCode.FailedToRevertOpenModule]:i(34,null),[o.InternalErrorCode.FailedToOpenRNUpgradeHelper]:i(35,null),[o.InternalErrorCode.FailedToInstallExpoGo]:i(36,null),[o.InternalErrorCode.FailedToStartPackager]:i(37,null),[o.InternalErrorCode.FailedToStopPackager]:i(38,null),[o.InternalErrorCode.FailedToRestartPackager]:i(39,null),[o.InternalErrorCode.DebuggingFailed]:i(40,null),[o.InternalErrorCode.DebuggingFailedInNodeWrapper]:i(41,null),[o.InternalErrorCode.RNTempFolderDeletionFailed]:i(42,null),[o.InternalErrorCode.CouldNotFindLocationOfNodeDebugger]:i(43,null),[o.InternalErrorCode.CouldNotFindWorkspace]:i(44,null),[o.InternalErrorCode.ReactNativePackageIsNotInstalled]:i(45,null),[o.InternalErrorCode.ReactNativeWindowsIsNotInstalled]:i(46,null),[o.InternalErrorCode.PackagerRunningInDifferentPort]:i(47,null),[o.InternalErrorCode.ErrorWhileProcessingMessageInIPMSServer]:i(48,null),[o.InternalErrorCode.ErrorNoPipeFound]:i(49,null),[o.InternalErrorCode.NotAllSuccessPatternsMatched]:i(50,null),[o.InternalErrorCode.CouldNotParsePackageVersion]:i(51,null),[o.InternalErrorCode.UnsupportedCommandStatus]:i(52,null),[o.InternalErrorCode.ExpectedExponentTunnelPath]:i(53,null),[o.InternalErrorCode.WorkspaceNotFound]:i(54,null),[o.InternalErrorCode.RNVersionNotSupportedByExponent]:i(55,null),[o.InternalErrorCode.UserCancelledExpoLogin]:i(56,null),[o.InternalErrorCode.NgrokIsNotInstalledGlobally]:i(57,null),[o.InternalErrorCode.CannotAttachToPackagerCheckPackagerRunningOnPort]:i(58,null),[o.InternalErrorCode.AnotherDebuggerConnectedToPackager]:i(59,null),[o.InternalErrorCode.NotInReactNativeFolderError]:i(60,null),[o.InternalErrorCode.SourcesStoragePathIsNullOrEmpty]:i(61,null),[o.InternalErrorCode.AndroidCouldNotInstallTheAppOnAnyAvailibleDevice]:i(62,null),[o.InternalErrorCode.AndroidShellCommandTimedOut]:i(63,null),[o.InternalErrorCode.AndroidProjectNotFound]:i(64,null),[o.InternalErrorCode.AndroidMoreThanOneDeviceOrEmulator]:i(65,null),[o.InternalErrorCode.AndroidFailedToLaunchTheSpecifiedActivity]:i(66,null),[o.InternalErrorCode.IOSFoundMoreThanOneExecutablesCleanupBuildFolder]:i(67,null),[o.InternalErrorCode.IOSCouldNotFoundExecutableInFolder]:i(68,null),[o.InternalErrorCode.WinRNMPPluginIsNotInstalled]:i(69,null),[o.InternalErrorCode.WinRunCommandFailed]:i(70,null),[o.InternalErrorCode.ReactDevtoolsIsNotInstalled]:i(71,null),[o.InternalErrorCode.CancellationTokenTriggered]:i(72,null),[o.InternalErrorCode.WorkspaceIsNotTrusted]:i(73,null),[o.InternalErrorCode.DebuggingWontWorkReloadJSAndReconnect]:i(74,null),[o.InternalErrorCode.ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative]:i(75,null),[o.InternalErrorCode.FailedToProcessMessageFromReactNativeApp]:i(76,null),[o.InternalErrorCode.FailedToPrepareJSRuntimeEnvironment]:i(77,null),[o.InternalErrorCode.FailedToSendMessageToTheReactNativeApp]:i(78,null),[o.InternalErrorCode.ReactNativeWorkerProcessThrownAnError]:i(79,null),[o.InternalErrorCode.CouldntImportScriptAt]:i(80,null),[o.InternalErrorCode.RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty]:i(81,null),[o.InternalErrorCode.CouldNotConnectToDebugTarget]:i(82,null),[o.InternalErrorCode.IOSCouldNotFoundDeviceForDirectDebugging]:i(83,null),[o.InternalErrorCode.FailedToStartAndroidEmulator]:i(84,null),[o.InternalErrorCode.FailedToStartIOSSimulator]:i(85,null),[o.InternalErrorCode.AndroidThereIsNoAnyOnlineDebuggableTarget]:i(86,null),[o.InternalErrorCode.IOSThereIsNoAnyDebuggableTarget]:i(87,null),[o.InternalErrorCode.TargetSelectionError]:i(88,null),[o.InternalErrorCode.CouldNotRecognizeTargetType]:i(89,null),[o.InternalErrorCode.ReactNativemacOSIsNotInstalled]:i(90,null),[o.InternalErrorCode.AndroidCouldNotStartLogCatMonitor]:i(91,null),[o.InternalErrorCode.AndroidCouldNotStopLogCatMonitor]:i(92,null),[o.InternalErrorCode.AndroidCouldNotFindActiveLogCatMonitor]:i(93,null),[o.InternalErrorCode.CouldNotDirectDebugWithoutHermesEngine]:i(94,null),[o.InternalErrorCode.CouldNotStartNetworkInspector]:i(95,null),[o.InternalErrorCode.CouldNotStopNetworkInspector]:i(96,null),[o.InternalErrorCode.FailedToTestDevEnvironment]:i(97,null),[o.InternalErrorCode.UserInputCanceled]:i(98,null)}},6932:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NestedError=t.InternalError=t.InternalErrorLevel=void 0,function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning"}(r=t.InternalErrorLevel||(t.InternalErrorLevel={}));class n extends Error{get isInternalError(){return!0}constructor(e,t,n=r.Error){super(t),this.errorCode=e,this.errorLevel=n,this.message=e>0?`${t} (error code ${this.errorCode})`:t}}t.InternalError=n;class o extends n{constructor(e,t,n=null,o,i=r.Error){super(e,t,i),this.innerError=n,this.name=n?n.name:null;const s=n?n.message:null;this.message=s?`${t}: ${String(s)}`:t,this._extras=o}get extras(){return this._extras}static getWrappedError(e,t){return new o(t.errorCode||e.errorCode,e.message,t)}}t.NestedError=o},312:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalErrorCode=void 0,function(e){e[e.CommandFailed=101]="CommandFailed",e[e.CommandFailedWithErrorCode=102]="CommandFailedWithErrorCode",e[e.PackagerStartFailed=103]="PackagerStartFailed",e[e.FailedToRunOnAndroid=104]="FailedToRunOnAndroid",e[e.FailedToRunOnIos=105]="FailedToRunOnIos",e[e.FailedToStartPackager=106]="FailedToStartPackager",e[e.FailedToStopPackager=107]="FailedToStopPackager",e[e.PackagerRunningInDifferentPort=108]="PackagerRunningInDifferentPort",e[e.FailedToRestartPackager=109]="FailedToRestartPackager",e[e.FailedToRunExponent=110]="FailedToRunExponent",e[e.FailedToPublishToExpHost=111]="FailedToPublishToExpHost",e[e.UnsupportedCommandStatus=112]="UnsupportedCommandStatus",e[e.CommandFailedWithDetails=113]="CommandFailedWithDetails",e[e.FailedToRunOnWindows=114]="FailedToRunOnWindows",e[e.FailedToRunOnMacOS=115]="FailedToRunOnMacOS",e[e.DebuggingCommandFailed=116]="DebuggingCommandFailed",e[e.FailedToTestDevEnvironment=117]="FailedToTestDevEnvironment",e[e.CommandCanceled=118]="CommandCanceled",e[e.FailedToConfigEASBuild=119]="FailedToConfigEASBuild",e[e.FailedToOpenProjectPage=120]="FailedToOpenProjectPage",e[e.FailedToRevertOpenModule=121]="FailedToRevertOpenModule",e[e.FailedToOpenRNUpgradeHelper=122]="FailedToOpenRNUpgradeHelper",e[e.FailedToInstallExpoGo=123]="FailedToInstallExpoGo",e[e.IOSDeployNotFound=201]="IOSDeployNotFound",e[e.DeviceNotPluggedIn=301]="DeviceNotPluggedIn",e[e.DeveloperDiskImgNotMountable=302]="DeveloperDiskImgNotMountable",e[e.ApplicationLaunchFailed=303]="ApplicationLaunchFailed",e[e.ApplicationLaunchTimedOut=304]="ApplicationLaunchTimedOut",e[e.FailedToStartAndroidEmulator=305]="FailedToStartAndroidEmulator",e[e.TargetSelectionError=306]="TargetSelectionError",e[e.FailedToStartIOSSimulator=307]="FailedToStartIOSSimulator",e[e.CouldNotRecognizeTargetType=308]="CouldNotRecognizeTargetType",e[e.IOSSimulatorNotLaunchable=401]="IOSSimulatorNotLaunchable",e[e.IOSFoundMoreThanOneExecutablesCleanupBuildFolder=402]="IOSFoundMoreThanOneExecutablesCleanupBuildFolder",e[e.IOSCouldNotFoundExecutableInFolder=403]="IOSCouldNotFoundExecutableInFolder",e[e.IOSCouldNotFoundDeviceForDirectDebugging=404]="IOSCouldNotFoundDeviceForDirectDebugging",e[e.IOSThereIsNoAnyDebuggableTarget=405]="IOSThereIsNoAnyDebuggableTarget",e[e.OpnPackagerLocationNotFound=501]="OpnPackagerLocationNotFound",e[e.OpnPackagerNotFound=502]="OpnPackagerNotFound",e[e.FailedToStopPackagerOnExit=503]="FailedToStopPackagerOnExit",e[e.CannotAttachToPackagerCheckPackagerRunningOnPort=504]="CannotAttachToPackagerCheckPackagerRunningOnPort",e[e.AnotherDebuggerConnectedToPackager=505]="AnotherDebuggerConnectedToPackager",e[e.ProjectVersionNotParsable=601]="ProjectVersionNotParsable",e[e.ProjectVersionUnsupported=602]="ProjectVersionUnsupported",e[e.ProjectVersionNotReadable=603]="ProjectVersionNotReadable",e[e.NotInReactNativeFolderError=604]="NotInReactNativeFolderError",e[e.CouldNotFindProjectVersion=605]="CouldNotFindProjectVersion",e[e.ReactNativePackageIsNotInstalled=606]="ReactNativePackageIsNotInstalled",e[e.ReactNativeWindowsIsNotInstalled=607]="ReactNativeWindowsIsNotInstalled",e[e.ReactNativemacOSIsNotInstalled=608]="ReactNativemacOSIsNotInstalled",e[e.TelemetryInitializationFailed=701]="TelemetryInitializationFailed",e[e.ExtensionActivationFailed=702]="ExtensionActivationFailed",e[e.DebuggerStubLauncherFailed=703]="DebuggerStubLauncherFailed",e[e.IntellisenseSetupFailed=704]="IntellisenseSetupFailed",e[e.NodeDebuggerConfigurationFailed=705]="NodeDebuggerConfigurationFailed",e[e.DebuggingFailed=706]="DebuggingFailed",e[e.RNTempFolderDeletionFailed=707]="RNTempFolderDeletionFailed",e[e.DebuggingFailedInNodeWrapper=708]="DebuggingFailedInNodeWrapper",e[e.PlatformNotSupported=709]="PlatformNotSupported",e[e.WorkspaceNotFound=710]="WorkspaceNotFound",e[e.ExpectedExponentTunnelPath=711]="ExpectedExponentTunnelPath",e[e.NotAllSuccessPatternsMatched=712]="NotAllSuccessPatternsMatched",e[e.CouldNotParsePackageVersion=713]="CouldNotParsePackageVersion",e[e.PackageNotFound=714]="PackageNotFound",e[e.ReactDevtoolsIsNotInstalled=715]="ReactDevtoolsIsNotInstalled",e[e.CancellationTokenTriggered=716]="CancellationTokenTriggered",e[e.UnknownError=717]="UnknownError",e[e.WorkspaceIsNotTrusted=718]="WorkspaceIsNotTrusted",e[e.UserInputCanceled=719]="UserInputCanceled",e[e.CouldNotFindLocationOfNodeDebugger=801]="CouldNotFindLocationOfNodeDebugger",e[e.CouldNotFindWorkspace=802]="CouldNotFindWorkspace",e[e.ErrorWhileProcessingMessageInIPMSServer=901]="ErrorWhileProcessingMessageInIPMSServer",e[e.ErrorNoPipeFound=902]="ErrorNoPipeFound",e[e.ExpectedIntegerValue=1001]="ExpectedIntegerValue",e[e.ExpectedStringValue=1002]="ExpectedStringValue",e[e.ExpectedBooleanValue=1003]="ExpectedBooleanValue",e[e.ExpectedArrayValue=1004]="ExpectedArrayValue",e[e.ExpectedObjectValue=1005]="ExpectedObjectValue",e[e.RNVersionNotSupportedByExponent=1101]="RNVersionNotSupportedByExponent",e[e.UserCancelledExpoLogin=1102]="UserCancelledExpoLogin",e[e.NgrokIsNotInstalledGlobally=1103]="NgrokIsNotInstalledGlobally",e[e.AndroidCouldNotInstallTheAppOnAnyAvailibleDevice=1201]="AndroidCouldNotInstallTheAppOnAnyAvailibleDevice",e[e.AndroidShellCommandTimedOut=1202]="AndroidShellCommandTimedOut",e[e.AndroidProjectNotFound=1203]="AndroidProjectNotFound",e[e.AndroidMoreThanOneDeviceOrEmulator=1204]="AndroidMoreThanOneDeviceOrEmulator",e[e.AndroidFailedToLaunchTheSpecifiedActivity=1205]="AndroidFailedToLaunchTheSpecifiedActivity",e[e.AndroidCouldNotStartLogCatMonitor=1206]="AndroidCouldNotStartLogCatMonitor",e[e.AndroidCouldNotStopLogCatMonitor=1207]="AndroidCouldNotStopLogCatMonitor",e[e.AndroidCouldNotFindActiveLogCatMonitor=1208]="AndroidCouldNotFindActiveLogCatMonitor",e[e.AndroidThereIsNoAnyOnlineDebuggableTarget=1209]="AndroidThereIsNoAnyOnlineDebuggableTarget",e[e.WinRNMPPluginIsNotInstalled=1301]="WinRNMPPluginIsNotInstalled",e[e.WinRunCommandFailed=1302]="WinRunCommandFailed",e[e.SourcesStoragePathIsNullOrEmpty=1401]="SourcesStoragePathIsNullOrEmpty",e[e.DebuggingWontWorkReloadJSAndReconnect=1402]="DebuggingWontWorkReloadJSAndReconnect",e[e.ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative=1403]="ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative",e[e.FailedToProcessMessageFromReactNativeApp=1404]="FailedToProcessMessageFromReactNativeApp",e[e.FailedToPrepareJSRuntimeEnvironment=1405]="FailedToPrepareJSRuntimeEnvironment",e[e.FailedToSendMessageToTheReactNativeApp=1406]="FailedToSendMessageToTheReactNativeApp",e[e.ReactNativeWorkerProcessThrownAnError=1407]="ReactNativeWorkerProcessThrownAnError",e[e.CouldntImportScriptAt=1408]="CouldntImportScriptAt",e[e.RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty=1409]="RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty",e[e.CouldNotAttachToDebugger=1410]="CouldNotAttachToDebugger",e[e.CouldNotDirectDebugWithoutHermesEngine=1411]="CouldNotDirectDebugWithoutHermesEngine",e[e.CouldNotConnectToDebugTarget=1501]="CouldNotConnectToDebugTarget",e[e.CouldNotStartNetworkInspector=1601]="CouldNotStartNetworkInspector",e[e.CouldNotStopNetworkInspector=1602]="CouldNotStopNetworkInspector"}(t.InternalErrorCode||(t.InternalErrorCode={}))},2966:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RN_VERSION_ERRORS=void 0,t.RN_VERSION_ERRORS={MISSING_PACKAGE_IN_NODE_MODULES:"errorMissingPackageInNodeModules",MISSING_DEPENDENCY_IN_PROJECT_PACKAGE_FILE:"errorMissingDependencyInProjectPackageFile",MISSING_DEPENDENCIES_FIELDS_IN_PROJECT_PACKAGE_FILE:"errorMissingDependenciesFieldsInProjectPackageFile",UNKNOWN_ERROR:"errorUnknown"}},334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecutionsFilterBeforeTimestamp=t.ExecutionsLimiter=void 0;t.ExecutionsLimiter=class{constructor(){this.executionToLastTimestamp={}}execute(e,t,r){const n=(new Date).getTime();n-(this.executionToLastTimestamp[e]||0)>=1e3*t&&(this.executionToLastTimestamp[e]=n,r())}};class r{constructor(e){this.sinceWhenToStopFiltering=this.now()+e*r.MILLISECONDS_IN_ONE_SECOND}execute(e){this.now()>=this.sinceWhenToStopFiltering&&e()}now(){return(new Date).getTime()}}r.MILLISECONDS_IN_ONE_SECOND=1e3,t.ExecutionsFilterBeforeTimestamp=r},9185:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionFromExtensionNodeModules=t.isWorkspaceTrusted=t.getNodeModulesInFolderHierarchy=t.generateRandomPortNumber=t.findFileInFolderHierarchy=t.getExtensionName=t.getExtensionVersion=void 0;const o=r(1017),i=r(7147),s=r(9496),a=r(1506);function c(e,t){let r,n=e;for(;!i.existsSync(o.join(n,t));){if(r=o.resolve(n,".."),r===n)return null;n=r}return o.join(n,t)}t.getExtensionVersion=function(){const e=c(__dirname,"package.json");return e?JSON.parse(i.readFileSync(e,"utf-8")).version:null},t.getExtensionName=function(){const e=c(__dirname,"package.json");return e?JSON.parse(i.readFileSync(e,"utf-8")).name:null},t.findFileInFolderHierarchy=c,t.generateRandomPortNumber=function(){return Math.round(4e4*Math.random()+3e3)},t.getNodeModulesInFolderHierarchy=function(e){const t=c(e,o.join("node_modules","react-native"));return t?o.resolve(t,"..",".."):null},t.isWorkspaceTrusted=function(){return"boolean"!=typeof s.workspace.isTrusted||s.workspace.isTrusted},t.getVersionFromExtensionNodeModules=function(e){return n(this,void 0,void 0,(function*(){const t=c(__dirname,"package.json");if(t){const r=o.resolve(t,"..");try{return yield new a.Package(r).getPackageVersionFromNodeModules(e)}catch(e){return null}}return null}))}},1376:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HostPlatform=t.HostPlatformId=void 0;const o=r(1017),i=r(5640),s=r(4724);var a;!function(e){e[e.WINDOWS=0]="WINDOWS",e[e.OSX=1]="OSX",e[e.LINUX=2]="LINUX"}(a=t.HostPlatformId||(t.HostPlatformId={}));class c{getUserHomePath(){return process.env.USERPROFILE||""}setEnvironmentVariable(e,t){return n(this,void 0,void 0,(function*(){return(yield(new i.ChildProcess).exec(`setx ${e} ${t}`)).outcome}))}getSettingsHome(){return o.join(process.env.APPDATA||"","vscode-react-native")}getNpmCliCommand(e){return`${e}.cmd`}getPlatformId(){return a.WINDOWS}getUserID(){return process.env.USERNAME||""}isCompatibleWithTarget(e){switch(e){case s.TargetPlatformId.ANDROID:case s.TargetPlatformId.EXPONENT:case s.TargetPlatformId.WINDOWS:case s.TargetPlatformId.EXPOWEB:return!0;default:return!1}}}class u{getUserHomePath(){return process.env.HOME||""}getSettingsHome(){return o.join(process.env.HOME||"",".vscode-react-native")}getNpmCliCommand(e){return e}}class l extends u{setEnvironmentVariable(e,t){return n(this,void 0,void 0,(function*(){return(yield(new i.ChildProcess).exec(`launchctl setenv ${e} ${t}`)).outcome}))}getPlatformId(){return a.OSX}getUserID(){return process.env.LOGNAME||""}isCompatibleWithTarget(e){switch(e){case s.TargetPlatformId.ANDROID:case s.TargetPlatformId.EXPONENT:case s.TargetPlatformId.IOS:case s.TargetPlatformId.MACOS:case s.TargetPlatformId.EXPOWEB:return!0;default:return!1}}}class d extends u{setEnvironmentVariable(e,t){return n(this,void 0,void 0,(function*(){return(yield(new i.ChildProcess).exec(`export ${e}=${t}`)).outcome}))}getPlatformId(){return a.LINUX}getUserID(){return process.env.USER||""}isCompatibleWithTarget(e){switch(e){case s.TargetPlatformId.ANDROID:case s.TargetPlatformId.EXPONENT:return!0;default:return!1}}}class p{static get platform(){if(!p.platformInstance)switch(process.platform){case"win32":p.platformInstance=new c;break;case"darwin":p.platformInstance=new l;break;default:p.platformInstance=new d}return p.platformInstance}static getUserHomePath(){return p.platform.getUserHomePath()}static getSettingsHome(){return p.platform.getSettingsHome()}static getNpmCliCommand(e){return p.platform.getNpmCliCommand(e)}static getPlatformId(){return p.platform.getPlatformId()}static setEnvironmentVariable(e,t){return p.platform.setEnvironmentVariable(e,t)}static getUserID(){return p.platform.getUserID()}static isCompatibleWithTarget(e){return p.platform.isCompatibleWithTarget(e)}}t.HostPlatform=p},8016:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.installiOSApplication=t.installAndroidApplication=void 0;const o=r(166),i=r(1880),s=r(9144),a=r(5640);t.installAndroidApplication=function(e,t){return n(this,void 0,void 0,(function*(){const r=s.OutputChannelLogger.getMainChannel(),n=new o.AdbHelper(e.getPackager().getProjectPath(),e.getOrUpdateNodeModulesRoot()),i=yield n.getOnlineTargets();if(0==i.length)throw new Error("No online target found, please check your emulator status.");if(i.length>1){r.logStream(`Found ${i.length} online emulators, installing application on ${i[0].id}. \n`);try{yield n.installApplicationToEmulator(t)}catch(e){throw new Error(`Failed to install application: ${t}.`)}}else{r.logStream(`Installing application on ${i[0].id}. \n`);try{yield n.installApplicationToEmulator(t)}catch(e){throw new Error(`Failed to install application: ${t}.`)}r.logStream("Install Android application is completed. \n")}}))},t.installiOSApplication=function(e,t){return n(this,void 0,void 0,(function*(){const r=s.OutputChannelLogger.getMainChannel(),n=new a.ChildProcess,o=yield i.SimctrlHelper.getBootediOSSimulatorList();try{yield n.execToString(`mkdir ${e.getPackager().getProjectPath()}/expoApp.app`),yield n.execToString(`tar -xf ${t} -C ${e.getPackager().getProjectPath()}/expoApp.app`)}catch(e){throw e}if(1==o.length)throw new Error("No booted iOS simulator found, please check your simulator status.");if(o.length>2){r.logStream(`Found ${o.length-1} booted simulators, installing application on ${o[0]}. \n`);try{yield i.SimctrlHelper.installApplicationToSimulator(o[0],`${e.getPackager().getProjectPath()}/expoApp.app`)}catch(e){throw new Error(`Failed to install application: ${t}.`)}}else{r.logStream(`Installing application on ${o[0]}. \n`);try{yield i.SimctrlHelper.installApplicationToSimulator(o[0],`${e.getPackager().getProjectPath()}/expoApp.app`)}catch(e){throw new Error(`Failed to install application: ${t}.`)}r.logStream("Install iOS application is completed. \n")}}))}},643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCompletionHelper=void 0;const n=r(9496),o=r(516);t.LaunchJsonCompletionHelper=class{static getTextForInsertion(e,t,r){const n=JSON.stringify(e);return"AfterItem"===t?"BeforeCursor"===r?n:`,${n}`:"BeforeItem"===t?`${n},`:n}static getCursorPositionInConfigurationsArray(e,t){if(this.isConfigurationArrayEmpty(e))return"InsideEmptyArray";const r=(0,o.createScanner)(e.getText(),!0);r.setPosition(e.offsetAt(t));const n=r.scan();return 5===n||4===n?"AfterItem":1===n?"BeforeItem":void 0}static isCommaImmediatelyBeforeCursor(e,t){const r=e.lineAt(t.line),o=e.getText(new n.Range(r.range.start,t));if(o.trim().endsWith(","))return!0;if(0!==o.trim().length)return!1;let i=t.line-1;for(;i>0;){const t=e.lineAt(i).text;if(t.trim().endsWith(","))return!0;if(0!==t.trim().length)return!1;i-=1}return!1}static isConfigurationArrayEmpty(e){const t=(0,o.parse)(e.getText(),[],{allowTrailingComma:!0,disallowComments:!1});return!t||!Array.isArray(t.configurations)||0===t.configurations.length}}},5640:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProcess=void 0;const o=r(2081),i=r(7282),s=r(9897),a=r(312),c=r(9901);class u{constructor({childProcess:e=o}={}){this.childProcess=e}exec(e,t={}){let r,n;return new Promise((o=>{r=new Promise(((r,o)=>{n=this.childProcess.exec(e,t,((t,n,i)=>{t?o(s.ErrorHelper.getNestedError(t,a.InternalErrorCode.CommandFailed,e)):r(n)}))})),o({process:n,outcome:r})}))}execToString(e,t={}){return n(this,void 0,void 0,(function*(){const r=yield this.exec(e,t);return(yield r.outcome).toString()}))}execFileSync(e,t=[],r={}){return this.childProcess.execFileSync(e,t,r)}spawn(e,t=[],r={},n=!1){const o=this.childProcess.spawn(e,t,r),i=new Promise(((r,i)=>{o.once("error",(e=>{i(e)}));const c=[],u=[];o.stderr.on("data",(e=>{c.push(e.toString())})),o.stdout.on("data",(e=>{u.push(e.toString())})),o.once("exit",(o=>{if(0===o)r();else{const r=`${e} ${t.join(" ")}`;if(n){let e="";u.length>0&&(e=e.concat(`\n\tSTDOUT: ${u[u.length-1]}`)),c.length>0&&(e=e.concat(`\n\tSTDERR: ${c.join("\n\t")}`)),""===e&&(e="STDOUT and STDERR are empty!"),i(s.ErrorHelper.getInternalError(a.InternalErrorCode.CommandFailedWithDetails,r,e))}else i(s.ErrorHelper.getInternalError(a.InternalErrorCode.CommandFailed,r,o))}}))}));return{spawnedProcess:o,stdin:o.stdin,stdout:o.stdout,stderr:o.stderr,outcome:i}}killOrphanedInstrumentsProcesses(){return n(this,void 0,void 0,(function*(){const e=yield this.execToString("ps -e -o user,ppid,pid,comm");e&&e.split("\n").filter(c.notNullOrUndefined).map((e=>/^(\S+)\s+1\s+(\d+)\s+(.+)$/.exec(e))).filter(c.notNullOrUndefined).filter((e=>e[1]===process.env.USER)).filter((e=>e[3]&&["/instruments","/DTServiceHub"].some((t=>e[3].endsWith(t))))).forEach((e=>{const t=e[2];console.debug(`Killing orphaned Instruments process: ${t}`),(0,i.kill)(parseInt(t,10),"SIGKILL")}))}))}}u.ERROR_TIMEOUT_MILLISECONDS=300,t.ChildProcess=u},9452:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=void 0;const o=r(7147),i=r(1017),s=r(1890);t.FileSystem=class{constructor({fs:e=o}={}){this.fs=e}ensureDirectory(e){return n(this,void 0,void 0,(function*(){try{if(!(yield this.stat(e)).isDirectory())throw new Error(`Expected ${e} to be a directory`)}catch(t){if(t&&"ENOENT"===t.code)return this.mkDir(e);throw t}}))}ensureFileWithContents(e,t){return n(this,void 0,void 0,(function*(){try{if(!(yield this.stat(e)).isFile())throw new Error(`Expected ${e} to be a file`);{const r=yield this.readFile(e);if(t!==r)return this.writeFile(e,t)}}catch(r){if(r&&"ENOENT"===r.code)return this.writeFile(e,t);throw r}}))}existsSync(e){return this.fs.existsSync(e)}exists(e){return n(this,void 0,void 0,(function*(){try{return yield this.stat(e),!0}catch(e){return!1}}))}readDir(e){return this.fs.promises.readdir(e)}makeDirectoryRecursiveSync(e){const t=i.dirname(e);this.existsSync(t)||this.makeDirectoryRecursiveSync(t),this.fs.mkdirSync(e)}copyFile(e,t){return this.fs.promises.copyFile(e,t)}deleteFileIfExistsSync(e){this.existsSync(e)&&this.fs.unlinkSync(e)}readFile(e,t="utf8"){return this.fs.promises.readFile(e,{encoding:t})}writeFile(e,t){return this.fs.promises.writeFile(e,t)}static writeFileToFolder(e,t,r){return o.existsSync(e)||s.sync(e),o.promises.writeFile(i.join(e,t),r)}unlink(e){return this.fs.promises.unlink(e)}mkDir(e){return this.fs.promises.mkdir(e)}stat(e){return this.fs.promises.stat(e)}directoryExists(e){return n(this,void 0,void 0,(function*(){try{return(yield this.stat(e)).isDirectory()}catch(e){if("ENOENT"===e.code)return!1;throw e}}))}rmdir(e){return this.fs.promises.rmdir(e)}removePathRecursivelyAsync(e){return n(this,void 0,void 0,(function*(){if(yield this.exists(e)){if(!(yield this.stat(e)).isDirectory())return this.unlink(e);{const t=yield this.readDir(e);yield Promise.all(t.map((t=>this.removePathRecursivelyAsync(i.join(e,t))))),yield this.rmdir(e)}}}))}removePathRecursivelySync(e){if(this.fs.existsSync(e)){if(this.fs.statSync(e).isDirectory()){this.fs.readdirSync(e).forEach((t=>this.removePathRecursivelySync(i.join(e,t)))),this.fs.rmdirSync(e)}else this.fs.unlinkSync(e)}}}},3116:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const n=r(5640),o=r(9452);!function(e){e.ChildProcess=n.ChildProcess,e.FileSystem=o.FileSystem}(t.Node||(t.Node={}))},1506:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Package=void 0;const o=r(1017),i=r(9897),s=r(312),a=r(9452);class c{constructor(e,{fileSystem:t=new a.FileSystem}={}){this.INFORMATION_PACKAGE_FILENAME="package.json",this.DEPENDENCIES_SUBFOLDER="node_modules",this._path=e,this.fileSystem=t}getPackageVersionFromNodeModules(e){return this.dependencyPackage(e).version()}parsePackageInformation(){return n(this,void 0,void 0,(function*(){const e=yield this.fileSystem.readFile(this.informationJsonFilePath(),"utf8");return JSON.parse(e.toString())}))}name(){return this.parseProperty("name")}dependencies(){return this.parseProperty("dependencies")}devDependencies(){return this.parseProperty("devDependencies")}version(){return n(this,void 0,void 0,(function*(){const e=yield this.parseProperty("version");if("string"==typeof e)return e;throw i.ErrorHelper.getInternalError(s.InternalErrorCode.CouldNotParsePackageVersion,this.informationJsonFilePath(),e)}))}setMainFile(e){return n(this,void 0,void 0,(function*(){const t=yield this.parsePackageInformation();return t.main=e,this.fileSystem.writeFile(this.informationJsonFilePath(),JSON.stringify(t))}))}dependencyPath(e){return o.resolve(this._path,this.DEPENDENCIES_SUBFOLDER,e)}dependencyPackage(e){return new c(this.dependencyPath(e),{fileSystem:this.fileSystem})}informationJsonFilePath(){return o.resolve(this._path,this.INFORMATION_PACKAGE_FILENAME)}parseProperty(e){return n(this,void 0,void 0,(function*(){return(yield this.parsePackageInformation())[e]}))}}t.Package=c},8102:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Delayer=t.PromiseUtil=void 0;class n{static forEach(e,t){return r(this,void 0,void 0,(function*(){yield Promise.all(e.map((e=>t(e))))}))}static retryAsync(e,t,r,n,o,i){return this.retryAsyncIteration(e,t,r,0,n,o,i)}static reduce(e,t){return r(this,void 0,void 0,(function*(){return(e instanceof Promise?yield e:e).reduce(((e,n)=>r(this,void 0,void 0,(function*(){return yield e,t(n)}))),Promise.resolve())}))}static delay(e){return r(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout(t,e)}))}))}static waitUntil(e,t=1e3,n){return new Promise(((o,i)=>r(this,void 0,void 0,(function*(){let s,a;n&&(s=setTimeout((()=>{c(),o(null)}),n));const c=()=>{s&&clearTimeout(s),a&&clearInterval(a)},u=()=>r(this,void 0,void 0,(function*(){try{const t=yield e();return t&&(c(),o(t)),!!t}catch(e){return c(),i(e),!1}}));(yield u())||(a=setInterval((()=>r(this,void 0,void 0,(function*(){yield u()}))),t))}))))}static promiseCacheDecorator(e,t=null){let r;return(...n)=>(r||(r=e.apply(t,n)),r)}static retryAsyncIteration(e,t,o,i,s,a,c){return r(this,void 0,void 0,(function*(){const r=yield e();if(yield t(r))return r;if(i<o&&(!c||!c.token.isCancellationRequested))return yield n.delay(s),this.retryAsyncIteration(e,t,o,i+1,s,a,c);throw new Error(a)}))}}t.PromiseUtil=n;t.Delayer=class{constructor(){this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}runWihtDelay(e,t){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}}))),this.timeout=setTimeout((()=>{this.timeout=null,this.doResolve&&this.doResolve(null)}),t),this.completionPromise}isRunning(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new Error("Canceled")),this.completionPromise=null)}dispose(){this.cancel()}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}}},5773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;const n=r(3685),o=r(5687);t.Request=class{static request(e,t=!1,r=!1){return new Promise(((i,s)=>{(r?o:n).get(e,(e=>{let r="";e.on("data",(e=>{r+=e.toString()})),e.on("end",(()=>{t&&200!==e.statusCode?s(new Error(r)):i(r)}))})).on("error",(e=>{s(e)}))}))}}},5643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstalled=t.openssl=void 0;const n=r(2081),o=r(289);t.openssl=function(e,t){return new Promise(((r,n)=>{(0,o.exec)(e,t,((e,t)=>{e?n(e):t&&r(t.toString())}))}))},t.isInstalled=function(){return!n.spawnSync("openssl",["version"]).error}},4191:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputVerifier=void 0;const o=r(9897),i=r(312);t.OutputVerifier=class{constructor(e,t,r){this.output="",this.errors="",this.generatePatternsForSuccess=e,this.generatePatternToFailure=t,this.platformName=r}process(e){return n(this,void 0,void 0,(function*(){let t;this.store(e.stdout,(e=>(this.output+=e,this.output))),this.store(e.stderr,(e=>(this.errors+=e,this.errors)));try{yield e.outcome}catch(e){t=e}const r=yield this.generatePatternToFailure(),n=this.findAnyFailurePattern(r);if(n){if(t)throw t.message+=`\n${n.message}`,t;throw n}if(t)throw t;{const e=yield this.generatePatternsForSuccess();if(!this.areAllSuccessPatternsPresent(e))throw o.ErrorHelper.getInternalError(i.InternalErrorCode.NotAllSuccessPatternsMatched,this.platformName,this.platformName)}}))}store(e,t){e.on("data",(e=>{t(e.toString())}))}findAnyFailurePattern(e){const t=this.errors+this.output;let r;const n=e.find((e=>e.pattern instanceof RegExp?(r=t.match(e.pattern),r&&r.length):t.includes(e.pattern))),i=n?n.errorCode:null;return i?r&&r.length?(r=r.map((e=>e.trim())),o.ErrorHelper.getInternalError(i,r.join("\n"))):o.ErrorHelper.getInternalError(i):null}areAllSuccessPatternsPresent(e){return e.every((e=>new RegExp(e,"i").test(this.output)))}}},7670:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PackageLoader=t.PackageConfig=void 0;const o=r(1017),i=r(9144),s=r(8280),a=r(5458),c=r(6727),u=r(9185),l=r(1376),d=r(8102);t.PackageConfig=class{constructor(e,t,r){this.packageName=e,this.version=t,this.requirePath=r}getPackageName(){return this.packageName}getRequirePath(){return this.requirePath}getVersion(e=!1){return e?this.version?`@${this.version}`:"":this.version}getStringForInstall(){return`${this.packageName}${String(this.getVersion(!0))}`}getStringForRequire(){return this.packageName+(this.requirePath?`/${this.requirePath}`:"")}};class p{constructor(){this.logger=i.OutputChannelLogger.getMainChannel(),this.packagesQueue=[],this.requireQueue=[],this.isCommandsExecuting=!1}static getInstance(){return this.instance||(this.instance=new p),this.instance}installGlobalPackage(e,t){const r=s.AppLauncher.getNodeModulesRootByProjectPath(t);return new a.CommandExecutor(r,t,this.logger).spawnWithProgress(l.HostPlatform.getNpmCliCommand("npm"),["install","-g",e.getStringForInstall(),"--verbose"],{verbosity:a.CommandVerbosity.PROGRESS})}generateGetPackageFunction(e,...t){return d.PromiseUtil.promiseCacheDecorator((()=>this.loadPackage(e,...t)))}getUniquePackages(e){return[...new Set(e).values()]}getTryToRequireFunction(e,t,r){return n=>{let o=!1;return n&&n.includes(e.getStringForInstall())&&(o=!0),this.tryToRequire(e,t,r,o)}}tryToRequire(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=e.getStringForRequire();try{if(this.logger.debug(`Getting ${n} dependency.`),e.getVersion()){const t=yield(0,u.getVersionFromExtensionNodeModules)(e.getPackageName());if(e.getVersion()!==t){if(o)throw"The installed version of the package is different from the required one";return this.logger.debug(`Dependency ${n} is present with another version. Retry after install this package with specific version...`),!1}}const r=(0,c.default)(n);return t(r),!0}catch(e){return o||"MODULE_NOT_FOUND"!==e.code?(r(e),!0):(this.logger.debug(`Dependency ${n} is not present. Retry after install...`),!1)}}))}tryToRequireAfterInstall(e,t,...r){return n(this,void 0,void 0,(function*(){if(this.packagesQueue.push(t.getStringForInstall()),r.forEach((e=>{this.packagesQueue.push(e.getStringForInstall())})),this.requireQueue.push(e),!this.isCommandsExecuting){this.isCommandsExecuting=!0;const t=o.dirname((0,u.findFileInFolderHierarchy)(__dirname,"package.json")||__dirname),r=new a.CommandExecutor(o.join(t,"node_modules"),t,this.logger);for(;this.packagesQueue.length;){this.packagesQueue=this.getUniquePackages(this.packagesQueue);const t=this.packagesQueue.length,n=this.packagesQueue.slice(0,t);yield r.spawnWithProgress(l.HostPlatform.getNpmCliCommand("npm"),["install",...n,"--verbose","--no-save","--global-style"],{verbosity:a.CommandVerbosity.PROGRESS});const o=[];for(e of this.requireQueue)(yield e(n))&&o.push(e);o.forEach((e=>{const t=this.requireQueue.indexOf(e);t>-1&&this.requireQueue.splice(t,1)})),this.requireQueue.length?(this.packagesQueue=this.getUniquePackages(this.packagesQueue),n.forEach((e=>{const t=this.packagesQueue.indexOf(e);-1!==t&&this.packagesQueue.splice(t,1)}))):this.packagesQueue=[]}this.isCommandsExecuting=!1}}))}loadPackage(e,...t){return n(this,void 0,void 0,(function*(){return new Promise(((r,o)=>n(this,void 0,void 0,(function*(){const n=this.getTryToRequireFunction(e,r,o);(yield n())||this.tryToRequireAfterInstall(n,e,...t).catch((e=>o(e)))}))))}))}}t.PackageLoader=p},9208:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Packager=void 0;const o=r(1017),i=r(9491),s=r(6625),a=r(9496),c=r(3403),u=r(8777),l=r(7005),d=r(973),p=r(9144),h=r(5034),f=r(2463),g=r(8280),m=r(7361),_=r(7599),v=r(5458),E=r(9897),y=r(312),b=r(1506),S=r(5773),C=r(9327),A=r(9185),T=r(9452),w=r(8102),P=r(4800);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/common/packager.ts"));const O=c.loadMessageBundle(r(1017).join(__dirname,"src/common/packager.ts"));class I{constructor(e,t,r,n){this.workspacePath=e,this.projectPath=t,this.packagerPort=r,this.logger=p.OutputChannelLogger.getChannel(p.OutputChannelLogger.MAIN_CHANNEL_NAME,!0),this.packagerStatus=h.PackagerStatus.PACKAGER_STOPPED,this.packagerStatusIndicator=n||new h.PackagerStatusIndicator(t)}closeWsConnection(){var e;null===(e=this.packagerSocket)||void 0===e||e.close()}setExponentHelper(e){this.expoHelper=e}getExponentHelper(){return this.expoHelper||(this.expoHelper=new d.ExponentHelper(this.workspacePath,this.projectPath)),this.expoHelper}getPort(){return this.packagerPort||f.SettingsHelper.getPackagerPort(this.workspacePath)}resetToSettingsPort(){this.packagerPort=f.SettingsHelper.getPackagerPort(this.workspacePath)}setRunOptions(e){this.runOptions=e}static getHostForPort(e){return`localhost:${e}`}getStatusIndicator(){return this.packagerStatusIndicator}getHost(){return I.getHostForPort(this.getPort())}getPackagerStatus(){return this.packagerStatus}getProjectPath(){return this.projectPath}getPackagerArgs(e,t,r=!1){return n(this,void 0,void 0,(function*(){let n=["--port",this.getPort().toString()];r&&(n=n.concat("--resetCache"));if(yield this.getExponentHelper().isExpoManagedApp(!1)){s.gte(t,"0.57.0")||n.push("--root",o.relative(this.projectPath,o.resolve(this.workspacePath,".vscode")));try{const t=yield this.getExponentHelper().getExpPackagerOptions(e);Object.keys(t).forEach((e=>{n=n.concat([`--${e}`,t[e]])}))}catch(e){this.logger.warning(O(0,null))}}return n}))}start(e=!1){var t,r,i;return n(this,void 0,void 0,(function*(){this.packagerStatusIndicator.updatePackagerStatus(h.PackagerStatus.PACKAGER_STARTING);let n,s=!1;if(!(yield this.isRunning())){if(this.packagerProcess)return void this.logger.warning(E.ErrorHelper.getWarning(O(1,null)));s=!0;n=(yield C.ProjectVersionHelper.getReactNativeVersions(this.projectPath)).reactNativeVersion,yield this.monkeyPatchOpnForRNPackager(n);const a=yield this.getPackagerArgs(this.projectPath,n,e),c=["0.38.0","0.39.0","0.40.0"];let u=Object.assign({},process.env);if(delete u.CI,this.runOptions&&(this.runOptions.env||this.runOptions.envFile))u=l.GeneralPlatform.getEnvArgument(u,this.runOptions.env,this.runOptions.envFile);else{const e=o.join(this.getProjectPath(),".env");u=l.GeneralPlatform.getEnvArgument(u,null,e)}const d=Object.assign({},u,{REACT_DEBUGGER:"echo A debugger is not needed: ",REACT_EDITOR:c.includes(n)?this.openFileAtLocationCommand():"code"});this.logger.info(O(2,null));const p={env:d},h=g.AppLauncher.getNodeModulesRootByProjectPath(this.projectPath);let f;f="exponent"!=(null===(t=this.runOptions)||void 0===t?void 0:t.platform)&&"expoweb"!=(null===(r=this.runOptions)||void 0===r?void 0:r.platform)?new v.CommandExecutor(h,this.projectPath,this.logger).spawnReactPackager(a,p):"exponent"==(null===(i=this.runOptions)||void 0===i?void 0:i.platform)?new v.CommandExecutor(h,this.projectPath,this.logger).spawnExpoPackager(a,p):new v.CommandExecutor(h,this.projectPath,this.logger).spawnExpoPackager(["--web"]),this.packagerProcess=f.spawnedProcess,f.outcome.catch((()=>{}))}if(yield this.awaitStart(),s)this.logger.info(O(3,null)),this.packagerStatus=h.PackagerStatus.PACKAGER_STARTED,a.commands.executeCommand("setContext",P.CONTEXT_VARIABLES_NAMES.IS_RN_PACKAGER_RUNNING,!0);else if(this.logger.info(O(4,null)),!this.packagerProcess)return this.logger.warning(E.ErrorHelper.getWarning(O(5,null))),void this.setPackagerStopStateUI();this.packagerStatusIndicator.updatePackagerStatus(h.PackagerStatus.PACKAGER_STARTED)}))}stop(e=!1){return n(this,void 0,void 0,(function*(){this.packagerStatusIndicator.updatePackagerStatus(h.PackagerStatus.PACKAGER_STOPPING);let t=!1;return(yield this.isRunning())?this.packagerProcess?(yield this.killPackagerProcess(),t=!0):e||this.logger.warning(E.ErrorHelper.getWarning(O(6,null))):(e||this.logger.warning(E.ErrorHelper.getWarning(O(7,null))),t=!0),this.setPackagerStopStateUI(),a.commands.executeCommand("setContext",P.CONTEXT_VARIABLES_NAMES.IS_RN_PACKAGER_RUNNING,!1),t}))}restart(e){return n(this,void 0,void 0,(function*(){if(this.getPort()&&this.getPort()!==e)throw E.ErrorHelper.getInternalError(y.InternalErrorCode.PackagerRunningInDifferentPort,e,this.getPort());(yield this.stop())&&(yield this.start(!0))}))}prewarmBundleCache(e){return n(this,void 0,void 0,(function*(){if(e!==_.PlatformType.Exponent&&(yield this.isRunning())){const t=o.resolve(this.projectPath,"index.js"),r=o.resolve(this.projectPath,`index.${e}.js`);try{const[n,o]=yield Promise.all([I.fs.exists(t),I.fs.exists(r)]);let i="";if(n)i="index.bundle";else{if(!o)return void this.logger.info(O(8,null,e));i=`index.${e}.bundle`}const s=`http://${this.getHost()}/${i}?platform=${e}`;this.logger.info(O(9,null,s)),yield S.Request.request(s,!0),this.logger.warning(O(10,null))}catch(e){}}}))}isRunning(){return n(this,void 0,void 0,(function*(){const e=`http://${this.getHost()}/status`;try{return"packager-status:running"===(yield S.Request.request(e))}catch(e){return!1}}))}forMessage(e,t){return n(this,void 0,void 0,(function*(){if(yield this.awaitStart(),!this.packagerSocket||this.packagerSocket.CLOSED||this.packagerSocket.CLOSING){const e=`ws://${this.getHost()}/events`;this.packagerSocket=new u(e,{origin:`http://${this.getHost()}/debugger-ui`})}return new Promise(((r,o)=>{const s=a=>n(this,void 0,void 0,(function*(){var n;const c=JSON.parse(a),u=null===(n=c.data)||void 0===n?void 0:n[0];t.level===c.level&&t.type===c.type&&t.mode===c.mode&&u&&"string"==typeof u&&u.includes(e)&&(i(this.packagerSocket),r(),this.packagerSocket.removeListener("message",s),this.packagerSocket.removeListener("error",o),this.packagerSocket.removeListener("close",o))}));i(this.packagerSocket),this.packagerSocket.addListener("error",o),this.packagerSocket.addListener("close",o),this.packagerSocket.addListener("message",s)}))}))}awaitStart(e=60,t=3e3){return n(this,void 0,void 0,(function*(){try{yield w.PromiseUtil.retryAsync((()=>this.isRunning()),(e=>e),e,t,O(11,null))}catch(e){throw this.setPackagerStopStateUI(),e}}))}findOpnPackage(e){return n(this,void 0,void 0,(function*(){try{const t=s.gte(e,I.RN_VERSION_WITH_OPEN_PKG)||C.ProjectVersionHelper.isCanaryVersion(e)?I.OPN_PACKAGE_NAME.new:I.OPN_PACKAGE_NAME.old,r=g.AppLauncher.getNodeModulesRootByProjectPath(this.projectPath),i=o.resolve(r,I.NODE_MODULES_FODLER_NAME,t);this.logger.info(O(12,null,i));const a=o.resolve(r,I.NODE_MODULES_FODLER_NAME,t,I.OPN_PACKAGE_MAIN_FILENAME),c=o.resolve(r,I.NODE_MODULES_FODLER_NAME,I.REACT_NATIVE_PACKAGE_NAME,I.NODE_MODULES_FODLER_NAME,t,I.OPN_PACKAGE_MAIN_FILENAME),u=new T.FileSystem,l=[a,c],d=(yield Promise.all(l.map((e=>n(this,void 0,void 0,(function*(){return(yield u.exists(e))?e:""})))))).find((e=>!!e));if(d)return d;throw E.ErrorHelper.getInternalError(y.InternalErrorCode.OpnPackagerLocationNotFound)}catch(e){throw E.ErrorHelper.getInternalError(y.InternalErrorCode.OpnPackagerNotFound,e)}}))}monkeyPatchOpnForRNPackager(e){return n(this,void 0,void 0,(function*(){const t=yield this.findOpnPackage(e),r=new b.Package(o.resolve(o.dirname(t))),n=yield r.parsePackageInformation(),i=s.gte(e,I.RN_VERSION_WITH_OPEN_PKG)||C.ProjectVersionHelper.isCanaryVersion(e)?I.JS_INJECTOR_FILENAME.new:I.JS_INJECTOR_FILENAME.old,a=o.resolve(I.JS_INJECTOR_DIRPATH,i);if(n.main!==i)return this.logger.info(O(13,null)),this.logger.info(O(14,null)),yield(new T.FileSystem).copyFile(a,o.resolve(o.dirname(t),i)),this.logger.info(O(15,null)),r.setMainFile(i);this.logger.info(O(16,null))}))}setPackagerStopStateUI(){this.packagerStatus=h.PackagerStatus.PACKAGER_STOPPED,this.packagerStatusIndicator.updatePackagerStatus(h.PackagerStatus.PACKAGER_STOPPED)}killPackagerProcess(){return n(this,void 0,void 0,(function*(){this.logger.info(O(17,null));const e=g.AppLauncher.getNodeModulesRootByProjectPath(this.projectPath);if(yield new v.CommandExecutor(e,this.projectPath,this.logger).killReactPackager(this.packagerProcess),this.packagerProcess=void 0,yield new d.ExponentHelper(this.workspacePath,this.projectPath).isExpoManagedApp(!1)){this.logger.debug("Stopping Exponent");try{yield m.stopAll(this.projectPath),this.logger.debug("Exponent Stopped")}catch(e){if("NOT_LOGGED_IN"!==e.code)throw e}}}))}openFileAtLocationCommand(){const e=`node ${o.join(__dirname,"..","..","scripts","atom")}`;return"win32"===process.platform?e.replace(/\\/g,"/"):e}}I.DEFAULT_PORT=8081,I.JS_INJECTOR_FILENAME={new:"open-main.js",old:"opn-main.js"},I.RN_VERSION_WITH_OPEN_PKG="0.60.0",I.JS_INJECTOR_DIRPATH=(0,A.findFileInFolderHierarchy)(__dirname,"js-patched")||__dirname,I.NODE_MODULES_FODLER_NAME="node_modules",I.OPN_PACKAGE_NAME={new:"open",old:"opn"},I.REACT_NATIVE_PACKAGE_NAME="react-native",I.OPN_PACKAGE_MAIN_FILENAME="index.js",I.fs=new T.FileSystem,t.Packager=I},3188:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ensurePackagerRunning=void 0;const o=r(5773);t.ensurePackagerRunning=function(e,t,r){return n(this,void 0,void 0,(function*(){const n=`http://${e}:${t}/status`;try{if("packager-status:running"!==(yield o.Request.request(n,!0)))return Promise.reject()}catch(e){throw r}}))}},9327:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectVersionHelper=t.RNPackageVersionsToPackageVersion=t.REACT_NATIVE_PACKAGES=void 0;const o=r(7310),i=r(6625),s=r(7599),a=r(8280),c=r(9897),u=r(312),l=r(2966),d=r(1506);t.REACT_NATIVE_PACKAGES={REACT_NATIVE:{packageName:"react-native",useSemverCoerce:!0},REACT_NATIVE_WINDOWS:{packageName:"react-native-windows",useSemverCoerce:!1},REACT_NATIVE_MACOS:{packageName:"react-native-macos",useSemverCoerce:!1}},t.RNPackageVersionsToPackageVersion=function(e){const t=[];return Object.keys(e).forEach((r=>{const n={};n[r]=e[r],t.push(n)})),t};class p{static getRNVersionsWithBrokenMetroBundler(){return["0.54.0","0.54.1","0.54.2","0.54.3","0.54.4"]}static getReactNativeVersions(e,t,r){return n(this,void 0,void 0,(function*(){r||(r=a.AppLauncher.getNodeModulesRootByProjectPath(e));try{return yield p.getReactNativePackageVersionsFromNodeModules(r,t)}catch(r){return p.getReactNativeVersionsFromProjectPackage(e,t)}}))}static tryToGetRNSemverValidVersionsFromProjectPackage(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield p.getReactNativeVersionsFromProjectPackage(e,t);if(-1===Object.values(n).findIndex((e=>e.includes(this.SEMVER_INVALID))))return n;r||(r=a.AppLauncher.getNodeModulesRootByProjectPath(e));try{return yield p.getReactNativePackageVersionsFromNodeModules(r,t)}catch(e){return n}}))}static generateAdditionalPackagesToCheckByPlatform(e){const r=[];return e.platform===s.PlatformType.Windows&&r.push(t.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS),e.platform===s.PlatformType.macOS&&r.push(t.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS),r}static generateAllAdditionalPackages(){return[t.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS,t.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS]}static getReactNativePackageVersionsFromNodeModules(e,r){return n(this,void 0,void 0,(function*(){const n=[t.REACT_NATIVE_PACKAGES.REACT_NATIVE];r&&n.push(...r);const o=[];n.forEach((t=>{o.push(p.getProcessedVersionFromNodeModules(e,t))}));const i=(yield Promise.all(o)).reduce(((e,t)=>Object.assign(e,t)),{});if(p.isVersionError(i["react-native"]))throw c.ErrorHelper.getInternalError(u.InternalErrorCode.ReactNativePackageIsNotInstalled);return{reactNativeVersion:i["react-native"],reactNativeWindowsVersion:i["react-native-windows"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES,reactNativeMacOSVersion:i["react-native-macos"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES}}))}static getReactNativeVersionsFromProjectPackage(e,r){return n(this,void 0,void 0,(function*(){const n=[t.REACT_NATIVE_PACKAGES.REACT_NATIVE];r&&n.push(...r);const o=new d.Package(e);try{const e=yield o.dependencies(),t=yield o.devDependencies(),r={};return n.forEach((n=>{try{e[n.packageName]?r[n.packageName]=p.processVersion(e[n.packageName],n.useSemverCoerce):t[n.packageName]?r[n.packageName]=p.processVersion(t[n.packageName],n.useSemverCoerce):r[n.packageName]=l.RN_VERSION_ERRORS.MISSING_DEPENDENCY_IN_PROJECT_PACKAGE_FILE}catch(e){r[n.packageName]=l.RN_VERSION_ERRORS.MISSING_DEPENDENCIES_FIELDS_IN_PROJECT_PACKAGE_FILE}})),{reactNativeVersion:r["react-native"],reactNativeWindowsVersion:r["react-native-windows"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES,reactNativeMacOSVersion:r["react-native-macos"]||l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES}}catch(e){return{reactNativeVersion:l.RN_VERSION_ERRORS.UNKNOWN_ERROR,reactNativeWindowsVersion:l.RN_VERSION_ERRORS.UNKNOWN_ERROR,reactNativeMacOSVersion:l.RN_VERSION_ERRORS.UNKNOWN_ERROR}}}))}static isVersionError(e){return e.toLowerCase().includes("error")}static isCanaryVersion(e){return 0===i.major(e)&&0===i.minor(e)}static processVersion(e,t=!0){try{return new o.URL(e)&&`${this.SEMVER_INVALID}: URL`}catch(r){const n=t?i.coerce(e):i.clean(e.replace(/[<>^~]/g,""),{loose:!0});return n&&n.toString()||this.SEMVER_INVALID}}static getProcessedVersionFromNodeModules(e,t){return n(this,void 0,void 0,(function*(){try{const r=yield new d.Package(e).getPackageVersionFromNodeModules(t.packageName);return{[t.packageName]:p.processVersion(r,t.useSemverCoerce)}}catch(e){return{[t.packageName]:l.RN_VERSION_ERRORS.MISSING_PACKAGE_IN_NODE_MODULES}}}))}}p.SEMVER_INVALID="SemverInvalid",t.ProjectVersionHelper=p},7551:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeProjectHelper=void 0;const o=r(7147),i=r(1017),s=r(9144),a=r(9327),c=r(9452),u=r(9901);t.ReactNativeProjectHelper=class{static isReactNativeProject(e){return n(this,void 0,void 0,(function*(){if(!e||!o.existsSync(i.join(e,"package.json")))return!1;const t=yield a.ProjectVersionHelper.getReactNativeVersions(e,void 0,e);return!a.ProjectVersionHelper.isVersionError(t.reactNativeVersion)}))}static isHaulProject(e){const t=i.join(e,"package.json");if(!e||!o.existsSync(t))return!1;const r=JSON.parse(o.readFileSync(t,"utf-8"));return!!(r.devDependencies&&(r.devDependencies.haul||r.devDependencies["@haul-bundler/cli"]))}static isAndroidHermesEnabled(e){const t=i.join(e,"android","app","build.gradle");if(!e||!o.existsSync(t))return!1;const r=o.readFileSync(t,"utf-8");return/enableHermes\s*:\s*true/.test(r)}static isIOSHermesEnabled(e){const t=i.join(e,"ios","Podfile");if(!e||!o.existsSync(t))return!1;const r=o.readFileSync(t,"utf-8").match(/#?\s*:hermes_enabled\s*=>\s*true/);return!(!r||r[0].startsWith("#"))}static isMacOSHermesEnabled(e){const t=i.join(e,"macos","Podfile");if(!e||!o.existsSync(t))return!1;const r=o.readFileSync(t,"utf-8");let n=r.match(/#?\s*:hermes_enabled\s*=>\s*(true|false)/);return n&&n.length>1?!n[0].startsWith("#")&&"true"===n[1]:(n=r.match(/#?\s*pod\s*'hermes'/),!(!n||n[0].startsWith("#")))}static isWindowsHermesEnabled(e){const t=i.join(e,"windows","ExperimentalFeatures.props");if(!e||!o.existsSync(t))return!1;const r=o.readFileSync(t,"utf-8");return/<UseHermes>\s*true\s*<\/UseHermes>/.test(r)}static UpdateMertoBundlerForExpoWeb(e){return n(this,void 0,void 0,(function*(){const t=i.join(e.cwd,"app.json"),r=new c.FileSystem,n=yield r.readFile(t).then((e=>(0,u.stripJsonTrailingComma)(e.toString())));n.expo.web.bundler||(n.expo.web.bundler="metro",yield r.writeFile(t,JSON.stringify(n,null,2)))}))}static verifyMetroConfigFile(e){return n(this,void 0,void 0,(function*(){const t=s.OutputChannelLogger.getChannel(s.OutputChannelLogger.MAIN_CHANNEL_NAME,!0);let r;try{r=yield a.ProjectVersionHelper.getReactNativeVersions(e)}catch(t){r=yield a.ProjectVersionHelper.getReactNativeVersions(e,void 0,e)}const n=i.join(e,"metro.config.js"),c=o.readFileSync(n,"utf-8").includes("getDefaultConfig");parseInt(r.reactNativeVersion.substring(2,4))<=72&&!c?t.warning('The version of "metro.config.js" in current project will be deprecated from rn 0.73, please update your "metro.config.js" file according to template: https://github.com/facebook/react-native/blob/main/packages/react-native/template/metro.config.js'):parseInt(r.reactNativeVersion.substring(2,4))}))}}},4724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPlatformHelper=t.TargetPlatformId=void 0;const n=r(2037),o=r(7599),i=r(9897),s=r(1376),a=r(312);var c;!function(e){e[e.ANDROID=0]="ANDROID",e[e.IOS=1]="IOS",e[e.EXPONENT=2]="EXPONENT",e[e.WINDOWS=3]="WINDOWS",e[e.MACOS=4]="MACOS",e[e.EXPOWEB=5]="EXPOWEB"}(c=t.TargetPlatformId||(t.TargetPlatformId={}));class u{static getTargetPlatformId(e){switch(e.toLowerCase()){case o.PlatformType.Android:return c.ANDROID;case o.PlatformType.iOS:return c.IOS;case o.PlatformType.Exponent:return c.EXPONENT;case o.PlatformType.Windows:return c.WINDOWS;case o.PlatformType.macOS:return c.MACOS;case o.PlatformType.ExpoWeb:return c.EXPOWEB;default:throw i.ErrorHelper.getInternalError(a.InternalErrorCode.PlatformNotSupported,e,n.platform())}}static checkTargetPlatformSupport(e){const t=u.getTargetPlatformId(e);if(!s.HostPlatform.isCompatibleWithTarget(t))throw i.ErrorHelper.getInternalError(a.InternalErrorCode.PlatformNotSupported,e,n.platform())}}t.TargetPlatformHelper=u},4301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=void 0;const n=r(6113),o=r(7147),i=r(1017),s=r(1376);!function(e){e.isOptedIn=!1,e.reporterDictionary={};class t{static get telemetrySettingsFile(){let e=s.HostPlatform.getSettingsHome();return i.join(e,t.TELEMETRY_SETTINGS_FILENAME)}static init(r,n){t.loadSettings(),e.reporter=n,e.isOptedIn=t.getTelemetryOptInSetting(),t.saveSettings()}static getTelemetryOptInSetting(){return void 0===t.telemetrySettings.optIn&&(t.telemetrySettings.optIn=!0),t.telemetrySettings.optIn}static loadSettings(){try{t.telemetrySettings=JSON.parse(o.readFileSync(t.telemetrySettingsFile))}catch(e){t.telemetrySettings={}}return t.telemetrySettings}static saveSettings(){let e=s.HostPlatform.getSettingsHome();o.existsSync(e)||o.mkdirSync(e),o.writeFileSync(t.telemetrySettingsFile,JSON.stringify(t.telemetrySettings))}}t.TELEMETRY_SETTINGS_FILENAME="VSCodeTelemetrySettings.json";class a{constructor(e,t){this.name=e,this.properties=t||{}}setPiiProperty(e,t){let r=n.createHmac("sha256",Buffer.from(a.PII_HASH_KEY,"utf8")).update(t).digest("hex");this.properties[e]=r}}a.PII_HASH_KEY="959069c9-9e93-4fa1-bf16-3f8120d7db0c",e.TelemetryEvent=a;class c extends a{constructor(e,t){super(e,t),this.start()}start(){this.startTime=process.hrtime()}end(){this.endTime||(this.endTime=process.hrtime(this.startTime),this.properties["reserved.activity.duration"]=1e3*this.endTime[0]+this.endTime[1]/1e6)}}e.TelemetryActivity=c,e.init=function(r,n,o){try{e.appName=r,t.init(n,o)}catch(e){console.error(e)}},e.send=function(t,r=!1){if(e.isOptedIn||r)try{if(t instanceof c&&t.end(),e.reporter){let r={},n={};Object.keys(t.properties||{}).forEach((function(e){switch(typeof t.properties[e]){case"string":r[e]=t.properties[e];break;case"number":n[e]=t.properties[e];break;default:r[e]=JSON.stringify(t.properties[e])}})),e.reporter.sendTelemetryEvent(t.name,r,n)}}catch(e){console.error(e)}},e.APPINSIGHTS_INSTRUMENTATIONKEY="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",e.sendExtensionTelemetry=function(t,n,o,i,s,a){let c=e.reporterDictionary[t];if(!c){let i=r(8361).default;e.reporterDictionary[t]=new i(t,n,o),c=e.reporterDictionary[t]}c.sendTelemetryEvent(i,s,a)}}(t.Telemetry||(t.Telemetry={}))},287:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryGenerator=t.TelemetryGeneratorBase=void 0;const o=r(312),i=r(4301),s=r(3821);class a{constructor(e,t={}){this.telemetryProperties={},this.currentStep="initialStep",this.errorIndex=-1,this.extendedTelemetryProperties={},this.componentName=e,this.extendedTelemetryProperties=t,this.currentStepStartTime=process.hrtime()}add(e,t,r){return this.addWithPiiEvaluator(e,t,(()=>r))}addWithPiiEvaluator(e,t,r){try{Array.isArray(t)?this.addArray(e,t,r):!t||"object"!=typeof t&&"function"!=typeof t?this.addString(e,String(t),r):this.addHash(e,t,r)}catch(t){this.addString(`telemetryGenerationError.${e}`,String(t),(()=>!1))}return this}addError(e){const t=e.errorCode||o.InternalErrorCode.UnknownError;return this.add("error.code"+ ++this.errorIndex,t,!1),this}time(e,t){return n(this,void 0,void 0,(function*(){const r=process.hrtime();try{const e=t();return yield e}catch(e){return this.addError(e),Promise.reject(e)}finally{this.finishTime(e,r)}}))}step(e){return this.finishTime(this.currentStep,this.currentStepStartTime),this.sendCurrentStep(),this.currentStep=e,this.telemetryProperties={},this.currentStepStartTime=process.hrtime(),this}send(){this.currentStep&&this.add("lastStepExecuted",this.currentStep,!1),this.step("")}sendCurrentStep(){this.add("step",this.currentStep,!1);const e=new i.Telemetry.TelemetryEvent(this.componentName);s.TelemetryHelper.addTelemetryEventProperties(e,Object.assign(this.telemetryProperties,this.extendedTelemetryProperties)),this.sendTelemetryEvent(e)}addArray(e,t,r){t.forEach(((t,n)=>this.addWithPiiEvaluator(e+String(n+1),t,r)))}addHash(e,t,r){Object.keys(t).forEach((n=>this.addWithPiiEvaluator(`${e}.${n}`,t[n],r)))}addString(e,t,r){this.telemetryProperties[e]=s.TelemetryHelper.telemetryProperty(t,r(t,e))}combine(...e){return e.filter((e=>!!e)).join(".")}finishTime(e,t){if(e){const r=process.hrtime(t);this.add(this.combine(e,"time"),String(1e3*r[0]+r[1]/1e6),!1)}}}t.TelemetryGeneratorBase=a;t.TelemetryGenerator=class extends a{sendTelemetryEvent(e){i.Telemetry.send(e)}}},3821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryHelper=void 0;const n=r(7599),o=r(4301),i=r(287),s=r(9327),a=r(9897),c=r(312);class u{static sendSimpleEvent(e,t){const r=u.createTelemetryEvent(e,t);o.Telemetry.send(r)}static createTelemetryEvent(e,t){return new o.Telemetry.TelemetryEvent(e,t)}static telemetryProperty(e,t){return{value:String(e),isPii:t||!1}}static addPropertyToTelemetryProperties(e,t,r={}){return r[t]={value:e,isPii:!1},r}static addPlatformPropertiesToTelemetryProperties(e,t,r){if(r=u.addPropertyToTelemetryProperties(t.reactNativeVersion,"reactNativeVersion",r),e.platform===n.PlatformType.Windows){if(s.ProjectVersionHelper.isVersionError(t.reactNativeWindowsVersion))throw a.ErrorHelper.getInternalError(c.InternalErrorCode.ReactNativeWindowsIsNotInstalled);r=u.addPropertyToTelemetryProperties(t.reactNativeWindowsVersion,"reactNativeWindowsVersion",r)}if(e.platform===n.PlatformType.macOS){if(s.ProjectVersionHelper.isVersionError(t.reactNativeMacOSVersion))throw a.ErrorHelper.getInternalError(c.InternalErrorCode.ReactNativemacOSIsNotInstalled);r=u.addPropertyToTelemetryProperties(t.reactNativeMacOSVersion,"reactNativeMacOSVersion",r)}return e.platform===n.PlatformType.Exponent&&(r=u.addPropertyToTelemetryProperties(e.expoHostType,"expoHostType",r)),r}static addTelemetryEventProperties(e,t){t&&Object.keys(t).forEach((r=>{u.addTelemetryEventProperty(e,r,t[r].value,t[r].isPii)}))}static sendErrorEvent(e,t,r){const n=u.createTelemetryEvent(e);u.addTelemetryEventErrorProperty(n,t,r,""),o.Telemetry.send(n)}static sendDirect(e,t){const r=u.createTelemetryEvent(e,{isDirect:!0});t&&u.addTelemetryEventProperties(r,t),o.Telemetry.send(r)}static sendCommandSuccessTelemetry(e,t,r=[]){const n=u.createBasicCommandTelemetry(e,r);u.addTelemetryEventProperties(n,t),o.Telemetry.send(n)}static addTelemetryEventProperty(e,t,r,n){Array.isArray(r)?u.addMultiValuedTelemetryEventProperty(e,t,r,n):u.setTelemetryEventProperty(e,t,r,n)}static addTelemetryEventErrorProperty(e,t,r,n=""){const o=t;o.errorCode?(this.addTelemetryEventProperty(e,`${n}error.code`,o.errorCode,!1),r&&this.addTelemetryEventProperty(e,`${n}error.message`,r,!1)):this.addTelemetryEventProperty(e,`${n}error.code`,c.InternalErrorCode.UnknownError,!1)}static addPropertiesFromOptions(e,t,r,n=[]){let o=1;return Object.keys(r).forEach((i=>{const s=r[i];Object.keys(t).includes(i)?void 0!==s&&(e[`options.${i}`]=this.telemetryProperty(s,!n.includes(i))):(e[`unknownOption${o}.name`]=this.telemetryProperty(i,!0),e[`unknownOption${o}.value`]=this.telemetryProperty(s,!0),o++)})),e}static generate(e,t={},r){const n=new i.TelemetryGenerator(e,t);return n.time("",(()=>r(n))).finally((()=>n.send()))}static createBasicCommandTelemetry(e,t=[]){const r=new o.Telemetry.TelemetryEvent(e||"command");return!e&&t&&t.length>0&&r.setPiiProperty("command",t[0]),t&&u.addTelemetryEventProperty(r,"argument",t,!0),r}static setTelemetryEventProperty(e,t,r,n){n?e.setPiiProperty(t,String(r)):e.properties[t]=String(r)}static addMultiValuedTelemetryEventProperty(e,t,r,n){for(let o=0;o<r.length;o++)u.setTelemetryEventProperty(e,t+String(o),r[o],n)}}t.TelemetryHelper=u},9901:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getTimestamp=t.wait=t.stripJsonTrailingComma=t.getFormattedDatetimeString=t.getFormattedDateString=t.getFormattedTimeString=t.getRandomIntInclusive=t.areSameDates=t.notNullOrUndefined=t.isNullOrUndefined=t.getFileNameWithoutExtension=t.getNodeModulesGlobalPath=t.removeModuleFromRequireCacheByName=void 0;const o=r(1017),i=r(1409),s=r(9955),a=r(5640),c=r(1376),u=r(6727),l=r(3169);function d(e){return null==e}function p(e){return`${f(2,String(e.getUTCHours()))}:${f(2,String(e.getUTCMinutes()))}:${f(2,String(e.getUTCSeconds()))}`}function h(e){const t=e.getUTCMonth()+1;return`${e.getUTCFullYear()}-${t}-${e.getUTCDate()}`}function f(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.removeModuleFromRequireCacheByName=function(e){const t=Object.keys(u.default.cache).find((t=>t.includes(e)));t&&delete u.default.cache[t]},t.getNodeModulesGlobalPath=function(){return(new a.ChildProcess).execToString(`${c.HostPlatform.getNpmCliCommand("npm")} root -g`)},t.getFileNameWithoutExtension=function(e){return o.basename(e,o.extname(e))},t.isNullOrUndefined=d,t.notNullOrUndefined=function(e){return!d(e)},t.areSameDates=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},t.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.getFormattedTimeString=p,t.getFormattedDateString=h,t.getFormattedDatetimeString=function(e){return`${h(e)} ${p(e)}`},t.stripJsonTrailingComma=function(e){const t=e.replace(/,\s*$/g,"");let r;try{s.logger.log("Start parsing .json file..."),r=l.parse(t)}catch(t){s.logger.log("Failed to parse .json file. Try it again..."),r=JSON.parse(i(e))}return r},t.wait=function(e){return n(this,void 0,void 0,(function*(){const t=e||2e3;yield new Promise((e=>{const r=setTimeout((()=>{clearTimeout(r),e()}),t)}))}))},t.getTimestamp=function(){const e=new Date(Date.now());return`${e.getFullYear()}${e.getMonth()+1}${`${e.getDate()}${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}`}`}},8126:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultipleLifetimesAppWorker=void 0;const o=r(1017),i=r(2361),s=r(8777),a=r(9955),c=r(3403),u=r(3188),l=r(9897),d=r(334),p=r(7551),h=r(312),f=r(9452),g=r(8102),m=r(5734),_=r(5884);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/debugger/appWorker.ts"));const v=c.loadMessageBundle(r(1017).join(__dirname,"src/debugger/appWorker.ts"));function E(e,t){const r=l.ErrorHelper.getNestedError(e,h.InternalErrorCode.DebuggingWontWorkReloadJSAndReconnect,t);a.logger.error(r.message)}class y extends i.EventEmitter{constructor(e,t,r,n,{webSocketConstructor:o=(e=>new s(e))}={}){if(super(),this.executionLimiter=new d.ExecutionsLimiter,this.nodeFileSystem=new f.FileSystem,this.packagerAddress=e.address||"localhost",this.packagerPort=e.port,this.packagerRemoteRoot=e.remoteRoot,this.packagerLocalRoot=e.localRoot,this.debuggerWorkerUrlPath=e.debuggerWorkerUrlPath,this.sourcesStoragePath=t,this.projectRootPath=r,this.cancellationToken=n,!this.sourcesStoragePath)throw l.ErrorHelper.getInternalError(h.InternalErrorCode.SourcesStoragePathIsNullOrEmpty);this.webSocketConstructor=o,this.scriptImporter=new _.ScriptImporter(this.packagerAddress,this.packagerPort,t,this.packagerRemoteRoot,this.packagerLocalRoot)}start(e=!1){return n(this,void 0,void 0,(function*(){const t=l.ErrorHelper.getInternalError(h.InternalErrorCode.CannotAttachToPackagerCheckPackagerRunningOnPort,this.packagerPort);return yield(0,u.ensurePackagerRunning)(this.packagerAddress,this.packagerPort,t),e||(yield this.downloadAndPatchDebuggerWorker()),this.createSocketToApp(e)}))}stop(){this.socketToApp&&(this.socketToApp.removeAllListeners(),this.socketToApp.close()),this.singleLifetimeWorker&&this.singleLifetimeWorker.stop()}downloadAndPatchDebuggerWorker(){return n(this,void 0,void 0,(function*(){const e=o.resolve(this.sourcesStoragePath,_.ScriptImporter.DEBUGGER_WORKER_FILENAME);yield this.scriptImporter.downloadDebuggerWorker(this.sourcesStoragePath,this.projectRootPath,this.debuggerWorkerUrlPath);const t=yield this.nodeFileSystem.readFile(e,"utf8"),r=p.ReactNativeProjectHelper.isHaulProject(this.projectRootPath),n=[y.WORKER_BOOTSTRAP,y.CONSOLE_TRACE_PATCH,y.PROCESS_TO_STRING_PATCH,r?y.FETCH_STUB:null,t,y.WORKER_DONE].join("\n");return this.nodeFileSystem.writeFile(e,n)}))}showDevMenuCommand(){this.singleLifetimeWorker&&this.singleLifetimeWorker.postMessage({method:"vscode_showDevMenu"})}reloadAppCommand(){this.singleLifetimeWorker&&this.singleLifetimeWorker.postMessage({method:"vscode_reloadApp"})}startNewWorkerLifetime(){return n(this,void 0,void 0,(function*(){this.singleLifetimeWorker=new m.ForkedAppWorker(this.packagerAddress,this.packagerPort,this.sourcesStoragePath,this.projectRootPath,(e=>{this.sendMessageToApp(e)}),this.packagerRemoteRoot,this.packagerLocalRoot),a.logger.verbose("A new app worker lifetime was created.");const e=yield this.singleLifetimeWorker.start();this.emit("connected",e)}))}createSocketToApp(e=!1){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{this.socketToApp=this.webSocketConstructor(this.debuggerProxyUrl()),this.socketToApp.on("open",(()=>{this.onSocketOpened()})),this.socketToApp.on("close",(()=>{this.executionLimiter.execute("onSocketClose.msg",10,(()=>{"Another debugger is already connected"===this.socketToApp._closeMessage&&r(l.ErrorHelper.getInternalError(h.InternalErrorCode.AnotherDebuggerConnectedToPackager)),a.logger.log(v(0,null))})),this.cancellationToken.isCancellationRequested||setTimeout((()=>{this.start(!0)}),100)})),this.socketToApp.on("message",(e=>this.onMessage(e))),this.socketToApp.on("error",(t=>{e&&E(l.ErrorHelper.getInternalError(h.InternalErrorCode.ReconnectionToPackagerFailedCheckForErrorsOrRestartReactNative),t),r(t)})),g.PromiseUtil.delay(300).then((()=>t()))}))}))}debuggerProxyUrl(){return`ws://${this.packagerAddress}:${this.packagerPort}/debugger-proxy?role=debugger&name=vscode`}onSocketOpened(){this.executionLimiter.execute("onSocketOpened.msg",10,(()=>a.logger.log(v(1,null))))}killWorker(){this.singleLifetimeWorker&&(this.singleLifetimeWorker.stop(),this.singleLifetimeWorker=null)}onMessage(e){try{a.logger.verbose(`From RN APP: ${e}`);const t=JSON.parse(e);"prepareJSRuntime"===t.method?(this.killWorker(),this.gotPrepareJSRuntime(t)):"$disconnected"===t.method?this.killWorker():t.method?this.singleLifetimeWorker&&this.singleLifetimeWorker.postMessage(t):a.logger.verbose(`The react-native app sent a message without specifying a method: ${e}`)}catch(t){E(l.ErrorHelper.getInternalError(h.InternalErrorCode.FailedToProcessMessageFromReactNativeApp,e),t)}}gotPrepareJSRuntime(e){this.startNewWorkerLifetime().then((()=>{this.sendMessageToApp({replyID:parseInt(e.id,10)})}),(t=>E(l.ErrorHelper.getInternalError(h.InternalErrorCode.FailedToPrepareJSRuntimeEnvironment,e),t)))}sendMessageToApp(e){let t="";try{t=JSON.stringify(e),a.logger.verbose(`To RN APP: ${t}`),this.socketToApp.send(t)}catch(r){const n=t||String(e);E(l.ErrorHelper.getInternalError(h.InternalErrorCode.FailedToSendMessageToTheReactNativeApp,n),r)}}}y.WORKER_BOOTSTRAP="\n// Initialize some variables before react-native code would access them\nvar onmessage=null, self=global;\n// Cache Node's original require as __debug__.require\nglobal.__debug__={require: require};\n// Prevent leaking process.versions from debugger process to\n// worker because pure React Native doesn't do that and some packages as js-md5 rely on this behavior\nObject.defineProperty(process, \"versions\", {\n    value: undefined\n});\n// TODO: Replace by url.fileURLToPath method when Node 10 LTS become deprecated\nfunction fileUrlToPath(url) {\n  if (process.platform === 'win32') {\n      return url.toString().replace('file:///', '');\n  } else {\n    return url.toString().replace('file://', '');\n  }\n}\nfunction getNativeModules() {\n    var NativeModules;\n    try {\n        // This approach is for old RN versions\n        NativeModules = global.require('NativeModules');\n    } catch (err) {\n        // ignore error and try another way for more recent RN versions\n        try {\n            var nativeModuleId;\n            var modules = global.__r.getModules();\n            var ids = Object.keys(modules);\n            for (var i = 0; i < ids.length; i++) {\n              if (modules[ids[i]].verboseName) {\n                 var packagePath = new String(modules[ids[i]].verboseName);\n                 if (packagePath.indexOf('Libraries/BatchedBridge/NativeModules.js') > 0 || packagePath.indexOf('Libraries\\\\BatchedBridge\\\\NativeModules.js') > 0) {\n                   nativeModuleId = parseInt(ids[i], 10);\n                   break;\n                 }\n              }\n            }\n          if (nativeModuleId) {\n            NativeModules = global.__r(nativeModuleId);\n          }\n        }\n        catch (err) {\n            // suppress errors\n        }\n    }\n    return NativeModules;\n}\n// Originally, this was made for iOS only\nvar vscodeHandlers = {\n    'vscode_reloadApp': function () {\n        var NativeModules = getNativeModules();\n        if (NativeModules && NativeModules.DevSettings) {\n            NativeModules.DevSettings.reload();\n        }\n    },\n    'vscode_showDevMenu': function () {\n        var NativeModules = getNativeModules();\n        if (NativeModules && NativeModules.DevMenu) {\n            NativeModules.DevMenu.show();\n        }\n    }\n};\nprocess.on(\"message\", function (message) {\n    if (message.data && vscodeHandlers[message.data.method]) {\n        vscodeHandlers[message.data.method]();\n    } else if(onmessage) {\n        onmessage(message);\n    }\n});\nvar postMessage = function(message){\n    process.send(message);\n};\nif (!self.postMessage) {\n    self.postMessage = postMessage;\n}\nvar importScripts = (function(){\n    var fs=require('fs'), vm=require('vm');\n    return function(scriptUrl){\n        scriptUrl = fileUrlToPath(scriptUrl);\n        var scriptCode = fs.readFileSync(scriptUrl, 'utf8');\n        // Add a 'debugger;' statement to stop code execution\n        // to wait for the sourcemaps to be processed by the debug adapter\n        vm.runInThisContext('debugger;' + scriptCode, {filename: scriptUrl});\n    };\n})();\n",y.CONSOLE_TRACE_PATCH="// Worker is ran as nodejs process, so console.trace() writes to stderr and it leads to error in native app\n// To avoid this console.trace() is overridden to print stacktrace via console.log()\n// Please, see Node JS implementation: https://github.com/nodejs/node/blob/master/lib/internal/console/constructor.js\nconsole.trace = (function() {\n    return function() {\n        try {\n            var err = {\n                name: 'Trace',\n                message: require('util').format.apply(null, arguments)\n                };\n            // Node uses 10, but usually it's not enough for RN app trace\n            Error.stackTraceLimit = 30;\n            Error.captureStackTrace(err, console.trace);\n            console.log(err.stack);\n        } catch (e) {\n            console.error(e);\n        }\n    };\n})();\n",y.PROCESS_TO_STRING_PATCH="// As worker is ran in node, it breaks broadcast-channels package approach of identifying if it’s ran in node:\n// https://github.com/pubkey/broadcast-channel/blob/master/src/util.js#L64\n// To avoid it if process.toString() is called if will return empty string instead of [object process].\nvar nativeObjectToString = Object.prototype.toString;\nObject.prototype.toString = function() {\n    if (this === process) {\n        return '';\n    } else {\n        return nativeObjectToString.call(this);\n    }\n};\n",y.WORKER_DONE="// Notify debugger that we're done with loading\n// and started listening for IPC messages\npostMessage({workerLoaded:true});",y.FETCH_STUB="(function(self) {\n'use strict';\nif (self.fetch) {\n    return;\n}\nself.fetch = fetch;\nfunction fetch(url) {\n    return new Promise((resolve, reject) => {\n        var data = require('fs').readFileSync(fileUrlToPath(url), 'utf8');\n        resolve(\n            {\n                text: function () {\n                    return data;\n                }\n            });\n    });\n}\n})(global);\n",t.MultipleLifetimesAppWorker=y},5013:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getProjectRoot=t.DebugSessionBase=t.DebugSessionStatus=void 0;const o=r(1017),i=r(7147),s=r(9496),a=r(9955),c=r(3403),u=r(9901),l=r(8694),d=r(7551),p=r(9897),h=r(312),f=r(6932),g=r(7599),m=r(8280),_=r(2463),v=r(9144);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/debugger/debugSessionBase.ts"));const E=c.loadMessageBundle(r(1017).join(__dirname,"src/debugger/debugSessionBase.ts"));var y;!function(e){e[e.FirstConnection=0]="FirstConnection",e[e.FirstConnectionPending=1]="FirstConnectionPending",e[e.ConnectionAllowed=2]="ConnectionAllowed",e[e.ConnectionPending=3]="ConnectionPending",e[e.ConnectionDone=4]="ConnectionDone",e[e.ConnectionFailed=5]="ConnectionFailed",e[e.Stopping=6]="Stopping",e[e.Stopped=7]="Stopped"}(y=t.DebugSessionStatus||(t.DebugSessionStatus={}));class b extends a.LoggingDebugSession{constructor(e){super(),this.pwaNodeSessionName="pwa-node",this.stopCommand="workbench.action.debug.stop",this.terminateCommand="terminate",this.rnSession=e,this.vsCodeDebugSession=e.vsCodeDebugSession,this.isSettingsInitialized=!1,this.debugSessionStatus=y.FirstConnection,this.cancellationTokenSource=new s.CancellationTokenSource,this.nodeSession=null}initializeRequest(e,t){e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportTerminateDebuggee=!0,e.body.supportsCancelRequest=!0,this.sendResponse(e)}initializeSettings(e){return n(this,void 0,void 0,(function*(){if(!this.isSettingsInitialized){let t=(0,l.getLoggingDirectory)();t&&(t=o.join(t,"DebugSessionLogs.txt"));let r=e.trace;r?(r=r.replace(r[0],r[0].toUpperCase()),a.logger.setup(a.Logger.LogLevel[r],t||!1),this.cdpProxyLogLevel=l.LogLevel[r]===l.LogLevel.Verbose?l.LogLevel.Custom:l.LogLevel.None):(a.logger.setup(a.Logger.LogLevel.Log,t||!1),this.cdpProxyLogLevel=l.LogHelper.LOG_LEVEL===l.LogLevel.Trace?l.LogLevel.Custom:l.LogLevel.None),"boolean"!=typeof e.sourceMaps&&(e.sourceMaps=!0),"boolean"!=typeof e.enableDebug&&(e.enableDebug=!0),"boolean"!=typeof e.sourceMapRenames&&(e.sourceMapRenames=!1);const n=_.SettingsHelper.getReactNativeProjectRoot(e.cwd);if(!(yield d.ReactNativeProjectHelper.isReactNativeProject(n)))throw p.ErrorHelper.getInternalError(h.InternalErrorCode.NotInReactNativeFolderError);const i=yield m.AppLauncher.getOrCreateAppLauncherByProjectRootPath(n);this.appLauncher=i,this.projectRootPath=n,this.isSettingsInitialized=!0,this.appLauncher.getOrUpdateNodeModulesRoot(!0),this.vsCodeDebugSession.workspaceFolder&&this.appLauncher.updateDebugConfigurationRoot(this.vsCodeDebugSession.workspaceFolder.uri.fsPath);const s=this.appLauncher.getPackagerPort(n);this.appLauncher.getPackager().getPort()!=s&&this.appLauncher.getPackager().resetToSettingsPort()}}))}disconnectRequest(e,t,r){return n(this,void 0,void 0,(function*(){if(this.appLauncher&&(yield this.appLauncher.getRnCdpProxy().stopServer()),this.cancellationTokenSource.cancel(),this.cancellationTokenSource.dispose(),this.previousAttachArgs&&this.previousAttachArgs.platform===g.PlatformType.Android)try{this.appLauncher.getMobilePlatform().dispose()}catch(e){a.logger.warn(E(0,null,e.message||e))}this.debugSessionStatus=y.Stopped,yield a.logger.dispose(),b.rootSessionTerminatedEventEmitter.fire({debugSession:this.vsCodeDebugSession,args:{forcedStop:!!t.forcedStop}}),this.sendResponse(e)}))}terminateWithErrorResponse(e,t){(e instanceof f.InternalError||e instanceof f.NestedError)&&e.errorCode===h.InternalErrorCode.CancellationTokenTriggered||(a.logger.error(e.message),this.sendErrorResponse(t,{format:e.message,id:1},void 0,void 0,a.ErrorDestination.User))}preparePackagerBeforeAttach(e,t){return n(this,void 0,void 0,(function*(){if(!(yield this.appLauncher.getPackager().isRunning())){const r=Object.assign({reactNativeVersions:t},this.appLauncher.prepareBaseRunOptions(e));this.appLauncher.getPackager().setRunOptions(r),yield this.appLauncher.getPackager().start()}}))}showError(e){s.window.showErrorMessage(e.message,{modal:!0}),this.debugSessionStatus!==y.Stopped?a.logger.error(e.message):v.OutputChannelLogger.getMainChannel().error(e.message)}terminate(){return n(this,void 0,void 0,(function*(){yield s.commands.executeCommand(this.stopCommand,void 0,{sessionId:this.vsCodeDebugSession.id})}))}}b.rootSessionTerminatedEventEmitter=new s.EventEmitter,b.onDidTerminateRootDebugSession=b.rootSessionTerminatedEventEmitter.event,t.DebugSessionBase=b,t.getProjectRoot=function(e){const t=e.cwd?o.resolve(e.cwd):o.resolve(e.program,"../.."),r=o.resolve(t,".vscode/settings.json");try{const e=i.readFileSync(r,"utf8"),n=(0,u.stripJsonTrailingComma)(e),s=n["react-native-tools.projectRoot"]||n["react-native-tools"].projectRoot;return o.resolve(t,s)}catch(t){return a.logger.verbose(`${r} file doesn't exist or its content is incorrect. This file will be ignored.`),e.cwd?o.resolve(e.cwd):o.resolve(e.program,"../..")}}},4304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RNSession=void 0;const n=r(2600);t.RNSession=class{constructor(e){this._vsCodeDebugSession=e,this._sessionId=(0,n.v4)()}get sessionId(){return this._sessionId}get vsCodeDebugSession(){return this._vsCodeDebugSession}}},4062:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IWDPHelper=void 0;const o=r(2081),i=r(8102),s=r(5773),a=r(9897),c=r(312);class u{constructor(){this.iOSWebkitDebugProxyProcess=null}startiOSWebkitDebugProxy(e,t,r){return n(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{this.cleanUp();const a=`null:${e},:${t}-${r}`;this.iOSWebkitDebugProxyProcess=o.spawn("ios_webkit_debug_proxy",["-c",a]),this.iOSWebkitDebugProxyProcess.on("error",(e=>{s(new Error(`Unable to start ios_webkit_debug_proxy: ${String(e)}`))})),i.PromiseUtil.delay(250).then((()=>n()))}))}))}getSimulatorProxyPort(e){return n(this,void 0,void 0,(function*(){const t=yield s.Request.request(`http://localhost:${e.port}/json`,!0);try{const r=JSON.parse(t);let n=r;e.target&&(n=r.filter((t=>{var r;return"device"===(null===(r=e.target)||void 0===r?void 0:r.toLowerCase())?"SIMULATOR"!==t.deviceId:"SIMULATOR"===t.deviceId})));const o=n[0];return{targetPort:parseInt(o.url.split(":")[1],10),iOSVersion:o.deviceOSVersion}}catch(e){throw a.ErrorHelper.getInternalError(c.InternalErrorCode.IOSCouldNotFoundDeviceForDirectDebugging)}}))}cleanUp(){this.iOSWebkitDebugProxyProcess&&(this.iOSWebkitDebugProxyProcess.kill(),this.iOSWebkitDebugProxyProcess=null)}}u.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT=9221,t.IWDPHelper=u},5319:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectDebugSession=void 0;const o=r(9496),i=r(9955),s=r(3403),a=r(9327),c=r(3821),u=r(4290),l=r(5013),d=r(6438),p=r(691),h=r(9897),f=r(312),g=r(725),m=r(7599),_=r(6377),v=r(2463),E=r(7551),y=r(973),b=r(4062);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(1017).join(__dirname,"src/debugger/direct/directDebugSession.ts"));const S=s.loadMessageBundle(r(1017).join(__dirname,"src/debugger/direct/directDebugSession.ts"));class C extends l.DebugSessionBase{constructor(e){super(e),this.debuggerEndpointHelper=new p.DebuggerEndpointHelper,this.iOSWKDebugProxyHelper=new b.IWDPHelper,this.attachSession=null,this.onDidTerminateDebugSessionHandler=o.debug.onDidTerminateDebugSession(this.handleTerminateDebugSession.bind(this)),this.onDidStartDebugSessionHandler=o.debug.onDidStartDebugSession(this.handleStartDebugSession.bind(this))}launchRequest(e,t,r){return n(this,void 0,void 0,(function*(){let r={platform:{value:t.platform,isPii:!1},isDirect:{value:!0,isPii:!1}};_.TipNotificationService.getInstance().setKnownDateForFeatureById("directDebuggingWithHermes");try{try{"exponent"!=t.platform&&(yield E.ReactNativeProjectHelper.verifyMetroConfigFile(t.cwd)),yield this.initializeSettings(t),i.logger.log("Launching the application"),i.logger.verbose(`Launching the application: ${JSON.stringify(t,null,2)}`);const n=yield a.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath,a.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(t));if(r=c.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(t,n,r),yield c.TelemetryHelper.generate("launch",r,(e=>this.appLauncher.launch(t))),!t.enableDebug)return void this.sendResponse(e)}catch(e){throw h.ErrorHelper.getInternalError(f.InternalErrorCode.ApplicationLaunchFailed,e.message||e)}yield this.vsCodeDebugSession.customRequest("attach",t),this.sendResponse(e)}catch(t){this.terminateWithErrorResponse(t,e)}}))}attachRequest(e,t,r){return n(this,void 0,void 0,(function*(){let r={platform:{value:t.platform,isPii:!1},isDirect:{value:!0,isPii:!1}};t.webkitRangeMin=t.webkitRangeMin||9223,t.webkitRangeMax=t.webkitRangeMax||9322,this.previousAttachArgs=t;try{if("attach"===t.request){const e=new y.ExponentHelper(t.cwd,t.cwd);(yield e.isExpoManagedApp(!0))||(yield E.ReactNativeProjectHelper.verifyMetroConfigFile(t.cwd))}yield this.initializeSettings(t);const o=this.appLauncher.getPackager(),s=["Already connected:",{type:"client_log",level:"warn",mode:"BRIDGE"}];o.forMessage(...s).then((()=>{this.showError(h.ErrorHelper.getInternalError(f.InternalErrorCode.AnotherDebuggerConnectedToPackager)),this.terminate()}),(()=>{})),i.logger.log("Attaching to the application"),i.logger.verbose(`Attaching to the application: ${JSON.stringify(t,null,2)}`);const d=yield a.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath,a.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(t));r=c.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(t,d,r),yield c.TelemetryHelper.generate("attach",r,(e=>n(this,void 0,void 0,(function*(){const e=t.useHermesEngine?t.port||this.appLauncher.getPackagerPort(t.cwd):t.platform===m.PlatformType.iOS?t.port||b.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT:null;if(null===e)throw h.ErrorHelper.getInternalError(f.InternalErrorCode.CouldNotDirectDebugWithoutHermesEngine,t.platform);t.port=e,i.logger.log(`Connecting to ${t.port} port`),yield this.appLauncher.getRnCdpProxy().stopServer();const r=t.useHermesEngine?new u.HermesCDPMessageHandler:t.platform===m.PlatformType.iOS?new g.IOSDirectCDPMessageHandler:null;if(!r)throw h.ErrorHelper.getInternalError(f.InternalErrorCode.CouldNotDirectDebugWithoutHermesEngine,t.platform);if(yield this.appLauncher.getRnCdpProxy().initializeServer(r,this.cdpProxyLogLevel,this.cancellationTokenSource.token),!t.useHermesEngine&&t.platform===m.PlatformType.iOS){yield this.iOSWKDebugProxyHelper.startiOSWebkitDebugProxy(t.port,t.webkitRangeMin,t.webkitRangeMax);const e=yield this.iOSWKDebugProxyHelper.getSimulatorProxyPort(t);t.port=e.targetPort}"attach"===t.request&&(yield this.preparePackagerBeforeAttach(t,d)),this.appTargetConnectionClosedHandlerDescriptor=this.appLauncher.getRnCdpProxy().onApplicationTargetConnectionClosed((()=>{var e;this.attachSession&&(this.debugSessionStatus!==l.DebugSessionStatus.Stopping&&this.debugSessionStatus!==l.DebugSessionStatus.Stopped&&this.terminate(),null===(e=this.appTargetConnectionClosedHandlerDescriptor)||void 0===e||e.dispose())}));const n=v.SettingsHelper.getPackagerPort(t.cwd),o=yield this.debuggerEndpointHelper.retryGetWSEndpoint(`http://localhost:${t.port}`,90,this.cancellationTokenSource.token,t.useHermesEngine,n);this.appLauncher.getRnCdpProxy().setBrowserInspectUri(o),yield this.establishDebugSession(t)})))),this.sendResponse(e)}catch(t){this.terminateWithErrorResponse(h.ErrorHelper.getInternalError(f.InternalErrorCode.CouldNotAttachToDebugger,t.message||t),e)}}))}disconnectRequest(e,t,r){const o=Object.create(null,{disconnectRequest:{get:()=>super.disconnectRequest}});var i;return n(this,void 0,void 0,(function*(){return this.debugSessionStatus=l.DebugSessionStatus.Stopping,this.iOSWKDebugProxyHelper.cleanUp(),this.onDidTerminateDebugSessionHandler.dispose(),this.onDidStartDebugSessionHandler.dispose(),this.appLauncher.getPackager().closeWsConnection(),null===(i=this.appTargetConnectionClosedHandlerDescriptor)||void 0===i||i.dispose(),o.disconnectRequest.call(this,e,t,r)}))}establishDebugSession(e){return n(this,void 0,void 0,(function*(){const t=d.JsDebugConfigAdapter.createDebuggingConfigForRNHermes(e,this.appLauncher.getCdpProxyPort(),this.rnSession.sessionId);if(!(yield o.debug.startDebugging(this.appLauncher.getWorkspaceFolder(),t,{parentSession:this.vsCodeDebugSession,consoleMode:o.DebugConsoleMode.MergeWithParent})))throw new Error(S(0,null))}))}handleTerminateDebugSession(e){e.configuration.rnDebugSessionId===this.rnSession.sessionId&&e.type===this.pwaNodeSessionName&&this.terminate()}handleStartDebugSession(e){this.nodeSession&&e.parentSession&&this.nodeSession.id===e.parentSession.id&&(this.attachSession=e),e.configuration.rnDebugSessionId===this.rnSession.sessionId&&e.type===this.pwaNodeSessionName&&(this.nodeSession=e)}initializeSettings(e){const t=Object.create(null,{initializeSettings:{get:()=>super.initializeSettings}});return n(this,void 0,void 0,(function*(){yield t.initializeSettings.call(this,e),void 0===e.useHermesEngine&&(e.useHermesEngine=!0)}))}}t.DirectDebugSession=C},5734:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ForkedAppWorker=void 0;const o=r(1017),i=r(7310),s=r(2081),a=r(7147),c=r(9955),u=r(9897),l=r(312),d=r(8694),p=r(9185),h=r(5884);function f(e,t){const r=u.ErrorHelper.getNestedError(e,l.InternalErrorCode.DebuggingWontWorkReloadJSAndReconnect,t);c.logger.error(r.message)}t.ForkedAppWorker=class{constructor(e,t,r,n,o,i,s){this.packagerAddress=e,this.packagerPort=t,this.sourcesStoragePath=r,this.projectRootPath=n,this.postReplyToApp=o,this.packagerRemoteRoot=i,this.packagerLocalRoot=s,this.debuggeeProcess=null,this.scriptImporter=new h.ScriptImporter(this.packagerAddress,this.packagerPort,this.sourcesStoragePath,this.packagerRemoteRoot,this.packagerLocalRoot)}stop(){this.debuggeeProcess&&(c.logger.verbose(`About to kill debuggee with pid ${this.debuggeeProcess.pid}`),this.debuggeeProcess.kill(),this.debuggeeProcess=null)}start(){return n(this,void 0,void 0,(function*(){const e=o.resolve(this.sourcesStoragePath,h.ScriptImporter.DEBUGGER_WORKER_FILENAME),t=(0,p.generateRandomPortNumber)(),r=[`--inspect-brk=${t}`,"--no-deprecation",e];return this.debuggeeProcess=s.spawn("node",r,{stdio:["pipe","pipe","pipe","ipc"]}).on("message",(e=>{e&&e.workerLoaded?this.workerLoaded=Promise.resolve():this.postReplyToApp(e)})).on("error",(e=>{f(u.ErrorHelper.getInternalError(l.InternalErrorCode.ReactNativeWorkerProcessThrownAnError),e)})),this.logDirectory=(0,d.getLoggingDirectory)(),this.logDirectory&&(this.logWriteStream=a.createWriteStream(o.join(this.logDirectory,"nodeProcessLog.txt")),this.logWriteStream.on("error",(e=>{c.logger.error(`Error creating log file at path: ${String(this.logDirectory)}. Error: ${String(e.toString())}\n`)})),this.debuggeeProcess.stdout.pipe(this.logWriteStream),this.debuggeeProcess.stderr.pipe(this.logWriteStream),this.debuggeeProcess.on("close",(()=>{this.logWriteStream.end()}))),c.logger.verbose(`Spawned debuggee process with pid ${this.debuggeeProcess.pid} listening to ${t}`),t}))}postMessage(e){return n(this,void 0,void 0,(function*(){yield new Promise((e=>{if(this.workerLoaded)e();else{const t=setInterval((()=>{this.workerLoaded&&(clearInterval(t),e())}),1e3)}}));const t=(()=>n(this,void 0,void 0,(function*(){if(yield this.workerLoaded,"executeApplicationScript"!==e.method)return yield this.bundleLoaded,e;if(e.url){const t=i.parse(e.url);t.host=`${this.packagerAddress}:${this.packagerPort}`,e=Object.assign(Object.assign({},e),{url:i.format(t)}),c.logger.verbose(`Packager requested runtime to load script from ${String(e.url)}`);const r=yield this.scriptImporter.downloadAppScript(e.url,this.projectRootPath);return this.bundleLoaded=Promise.resolve(),Object.assign({},e,{url:`${this.pathToFileUrl(r.filepath)}`})}throw u.ErrorHelper.getInternalError(l.InternalErrorCode.RNMessageWithMethodExecuteApplicationScriptDoesntHaveURLProperty)})))();return t.then((e=>{this.debuggeeProcess&&this.debuggeeProcess.send({data:e})}),(t=>f(u.ErrorHelper.getInternalError(l.InternalErrorCode.CouldntImportScriptAt,e.url),t))),t}))}pathToFileUrl(e){return("win32"===process.platform?"file:///":"file://")+e}}},6438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsDebugConfigAdapter=void 0;class r{static createDebuggingConfigForPureRN(e,t,n){return Object.assign({},r.getExistingExtraArgs(e),{type:"pwa-node",request:"attach",name:"Attach",continueOnAttach:!0,port:t,rnDebugSessionId:n,resolveSourceMapLocations:["!**/debuggerWorker.js"]})}static createDebuggingConfigForRNHermes(e,t,n){return Object.assign({},r.getExistingExtraArgs(e),{type:"pwa-node",request:"attach",name:"Attach",continueOnAttach:!0,port:t,rnDebugSessionId:n,resolveSourceMapLocations:["**","!**/node_modules/!(expo)/**"]})}static createChromeDebuggingConfig(e,t,r,n){return Object.assign({},this.getExistingExtraArgs(e),{},{type:r,request:"attach",name:"Attach",port:t,webRoot:e.cwd,rnDebugSessionId:n})}static getExistingExtraArgs(e){const t={};return e.env&&(t.env=e.env),e.envFile&&(t.envFile=e.envFile),t.sourceMaps=e.sourceMaps,t.sourceMapRenames=e.sourceMapRenames,e.sourceMapPathOverrides&&(t.sourceMapPathOverrides=e.sourceMapPathOverrides),e.skipFiles&&(t.skipFiles=e.skipFiles),e.jsDebugTrace&&(t.trace=e.jsDebugTrace),t}}t.JsDebugConfigAdapter=r},4518:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RNDebugSession=void 0;const o=r(1017),i=r(9496),s=r(1890),a=r(9955),c=r(3403),u=r(9327),l=r(3821),d=r(5585),p=r(9897),h=r(312),f=r(7551),g=r(973),m=r(8126),_=r(5013),v=r(6438);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/debugger/rnDebugSession.ts"));const E=c.loadMessageBundle(r(1017).join(__dirname,"src/debugger/rnDebugSession.ts"));class y extends _.DebugSessionBase{constructor(e){super(e),this.appWorker=null,this.onDidStartDebugSessionHandler=i.debug.onDidStartDebugSession(this.handleStartDebugSession.bind(this)),this.onDidTerminateDebugSessionHandler=i.debug.onDidTerminateDebugSession(this.handleTerminateDebugSession.bind(this))}launchRequest(e,t,r){return n(this,void 0,void 0,(function*(){try{try{if("exponent"!=t.platform&&(yield f.ReactNativeProjectHelper.verifyMetroConfigFile(t.cwd)),yield this.initializeSettings(t),a.logger.log("Launching the application"),a.logger.verbose(`Launching the application: ${JSON.stringify(t,null,2)}`),yield this.appLauncher.launch(t),!t.enableDebug)return void this.sendResponse(e)}catch(e){throw p.ErrorHelper.getInternalError(h.InternalErrorCode.ApplicationLaunchFailed,e.message||e)}yield this.vsCodeDebugSession.customRequest("attach",t),this.sendResponse(e)}catch(t){this.terminateWithErrorResponse(t,e)}}))}attachRequest(e,t,r){return n(this,void 0,void 0,(function*(){let r={platform:{value:t.platform,isPii:!1}};return this.previousAttachArgs=t,new Promise(((e,i)=>n(this,void 0,void 0,(function*(){try{if("attach"===t.request){const e=new g.ExponentHelper(t.cwd,t.cwd);(yield e.isExpoManagedApp(!0))||(yield f.ReactNativeProjectHelper.verifyMetroConfigFile(t.cwd))}yield this.initializeSettings(t),a.logger.log("Attaching to the application"),a.logger.verbose(`Attaching to the application: ${JSON.stringify(t,null,2)}`);const i=yield u.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath,u.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(t));r=l.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(t,i,r),yield l.TelemetryHelper.generate("attach",r,(r=>n(this,void 0,void 0,(function*(){t.port=t.port||this.appLauncher.getPackagerPort(t.cwd);const r=this.appLauncher.getRnCdpProxy();yield r.stopServer(),yield r.initializeServer(new d.RnCDPMessageHandler,this.cdpProxyLogLevel,this.cancellationTokenSource.token),"attach"===t.request&&(yield this.preparePackagerBeforeAttach(t,i)),a.logger.log(E(0,null));const n=o.join(this.projectRootPath,".vscode",".react");return s.sync(n),this.appWorker=new m.MultipleLifetimesAppWorker(t,n,this.projectRootPath,this.cancellationTokenSource.token,void 0),this.appLauncher.setAppWorker(this.appWorker),this.appWorker.on("connected",(n=>{var o;if(this.cancellationTokenSource.token.isCancellationRequested)return null===(o=this.appWorker)||void 0===o?void 0:o.stop();a.logger.log(E(1,null,n)),r.setApplicationTargetPort(n),this.debugSessionStatus!==_.DebugSessionStatus.ConnectionPending&&(this.debugSessionStatus===_.DebugSessionStatus.FirstConnection?(this.debugSessionStatus=_.DebugSessionStatus.FirstConnectionPending,this.establishDebugSession(t,e)):this.debugSessionStatus===_.DebugSessionStatus.ConnectionAllowed&&this.nodeSession&&(this.debugSessionStatus=_.DebugSessionStatus.ConnectionPending,this.nodeSession.customRequest(this.terminateCommand)))})),this.cancellationTokenSource.token.isCancellationRequested?this.appWorker.stop():yield this.appWorker.start()}))))}catch(e){i(e)}})))).then((()=>{this.sendResponse(e)})).catch((t=>this.terminateWithErrorResponse(p.ErrorHelper.getInternalError(h.InternalErrorCode.CouldNotAttachToDebugger,t.message||t),e)))}))}disconnectRequest(e,t,r){const o=Object.create(null,{disconnectRequest:{get:()=>super.disconnectRequest}});return n(this,void 0,void 0,(function*(){return this.appWorker&&this.appWorker.stop(),this.onDidStartDebugSessionHandler.dispose(),this.onDidTerminateDebugSessionHandler.dispose(),o.disconnectRequest.call(this,e,t,r)}))}establishDebugSession(e,t){const r=v.JsDebugConfigAdapter.createDebuggingConfigForPureRN(e,this.appLauncher.getCdpProxyPort(),this.rnSession.sessionId);i.debug.startDebugging(this.appLauncher.getWorkspaceFolder(),r,{parentSession:this.vsCodeDebugSession,consoleMode:i.DebugConsoleMode.MergeWithParent}).then((e=>{if(!e)throw this.debugSessionStatus=_.DebugSessionStatus.ConnectionFailed,this.setConnectionAllowedIfPossible(),this.resetFirstConnectionStatus(),new Error("Cannot start child debug session");this.debugSessionStatus=_.DebugSessionStatus.ConnectionDone,this.setConnectionAllowedIfPossible(),t&&(this.debugSessionStatus=_.DebugSessionStatus.ConnectionAllowed,t())}),(e=>{throw this.debugSessionStatus=_.DebugSessionStatus.ConnectionFailed,this.setConnectionAllowedIfPossible(),this.resetFirstConnectionStatus(),e}))}handleStartDebugSession(e){e.configuration.rnDebugSessionId===this.rnSession.sessionId&&e.type===this.pwaNodeSessionName&&(this.nodeSession=e)}handleTerminateDebugSession(e){e.configuration.rnDebugSessionId===this.rnSession.sessionId&&e.type===this.pwaNodeSessionName&&(this.debugSessionStatus===_.DebugSessionStatus.ConnectionPending?this.establishDebugSession(this.previousAttachArgs):this.terminate())}setConnectionAllowedIfPossible(){this.debugSessionStatus!==_.DebugSessionStatus.ConnectionDone&&this.debugSessionStatus!==_.DebugSessionStatus.ConnectionFailed||(this.debugSessionStatus=_.DebugSessionStatus.ConnectionAllowed)}resetFirstConnectionStatus(){this.debugSessionStatus===_.DebugSessionStatus.FirstConnectionPending&&(this.debugSessionStatus=_.DebugSessionStatus.FirstConnection)}}t.RNDebugSession=y},5884:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptImporter=void 0;const o=r(1017),i=r(7310),s=r(9955),a=r(6625),c=r(5773),u=r(3188),l=r(9327),d=r(9897),p=r(312),h=r(9452),f=r(5040);class g{constructor(e,t,r,n,o){this.packagerAddress=e,this.packagerPort=t,this.sourcesStoragePath=r,this.packagerRemoteRoot=n,this.packagerLocalRoot=o,this.sourceMapUtil=new f.SourceMapUtil}downloadAppScript(e,t){return n(this,void 0,void 0,(function*(){const r="localhost"===i.parse(e).hostname?this.overridePackagerPort(e):e;let n=yield c.Request.request(r,!0);const o=yield l.ProjectVersionHelper.getReactNativeVersions(t);if(l.ProjectVersionHelper.getRNVersionsWithBrokenMetroBundler().includes(o.reactNativeVersion)){if(null===n.match(/sourceMappingURL=/g)){const e=r.replace("bundle","map");n=this.sourceMapUtil.appendSourceMapPaths(n,e)}}const u=i.parse(r),d=this.sourceMapUtil.getSourceMapURL(u,n);let p=Promise.resolve();d&&(p=this.writeAppSourceMap(d,u).then((()=>{n=this.sourceMapUtil.updateScriptPaths(n,d),(a.gte(o.reactNativeVersion,g.REMOVE_SOURCE_URL_VERSION)||l.ProjectVersionHelper.isCanaryVersion(o.reactNativeVersion))&&(n=this.sourceMapUtil.removeSourceURL(n))}))),yield p;const h=yield this.writeAppScript(n,u);return s.logger.verbose(`Script ${r} downloaded to ${h}`),{contents:n,filepath:h}}))}downloadDebuggerWorker(e,t,r){return n(this,void 0,void 0,(function*(){const n=d.ErrorHelper.getInternalError(p.InternalErrorCode.CannotAttachToPackagerCheckPackagerRunningOnPort,this.packagerPort);yield(0,u.ensurePackagerRunning)(this.packagerAddress,this.packagerPort,n);const i=yield l.ProjectVersionHelper.getReactNativeVersions(t),a=this.prepareDebuggerWorkerURL(i.reactNativeVersion,r),f=o.join(e,g.DEBUGGER_WORKER_FILENAME);s.logger.verbose(`About to download: ${a} to: ${f}`);const m=yield c.Request.request(a,!0);return(new h.FileSystem).writeFile(f,m)}))}prepareDebuggerWorkerURL(e,t){let r;if(void 0!==t)r=`http://${this.packagerAddress}:${this.packagerPort}/${t}${g.DEBUGGER_WORKER_FILENAME}`;else{let t="";(!a.valid(e)||a.gte(e,g.DEBUGGER_UI_SUPPORTED_VERSION)||l.ProjectVersionHelper.isCanaryVersion(e))&&(t="debugger-ui/"),r=`http://${this.packagerAddress}:${this.packagerPort}/${t}${g.DEBUGGER_WORKER_FILENAME}`}return r}writeAppScript(e,t){return n(this,void 0,void 0,(function*(){const r=o.join(this.sourcesStoragePath,o.basename(t.pathname));return yield(new h.FileSystem).writeFile(r,e),r}))}writeAppSourceMap(e,t){return n(this,void 0,void 0,(function*(){const r=yield c.Request.request(e.href,!0),n=o.join(this.sourcesStoragePath,o.basename(e.pathname)),i=o.basename(t.pathname),s=this.sourceMapUtil.updateSourceMapFile(r,i,this.sourcesStoragePath,this.packagerRemoteRoot,this.packagerLocalRoot);return(new h.FileSystem).writeFile(n,s)}))}overridePackagerPort(e){const t=i.parse(e);return t.port=this.packagerPort.toString(),delete t.host,i.format(t)}}g.DEBUGGER_WORKER_FILE_BASENAME="debuggerWorker",g.DEBUGGER_WORKER_FILENAME=`${g.DEBUGGER_WORKER_FILE_BASENAME}.js`,g.REMOVE_SOURCE_URL_VERSION="0.61.0",g.DEBUGGER_UI_SUPPORTED_VERSION="0.50.0",t.ScriptImporter=g},5040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMapUtil=void 0;const n=r(7310),o=r(1017),i=r(8523),s=/^[A-z]{2,}:\/\//;class a{getSourceMapURL(e,t){let r=null;const o=this.getSourceMapRelativeUrl(t);if(o){const t=n.parse(o);t.protocol=e.protocol,t.host=e.host,r=n.parse(n.format(t))}return r}updateSourceMapFile(e,t,n,o,a){try{let c=JSON.parse(e);c.sections&&(c.sections=c.sections.filter((e=>null!=e.map)),c=r(9828)(c));return c=(new i.SourceMapsCombinator).convert(c),c.sources&&(c.sources=c.sources.map((e=>s.test(e)?e:this.updateSourceMapPath(e,n,o,a)))),delete c.sourcesContent,c.sourceRoot="",c.file=t,JSON.stringify(c)}catch(t){return e}}appendSourceMapPaths(e,t){return e+=`//# sourceMappingURL=${t}`}updateScriptPaths(e,t){const r=this.searchSourceMapURL(e);return r?e.replace(r[0],`//# sourceMappingURL=${o.basename(t.pathname)}`):e}removeSourceURL(e){return e.replace(a.SourceURLRegex,"")}getSourceMapRelativeUrl(e){const t=this.searchSourceMapURL(e);if(t){const e=t[2];return(e.includes("platform=macos")||e.includes("platform=window"))&&e.startsWith("//")&&!e.includes("http:")?`http:${e}`:e}return null}searchSourceMapURL(e){var t;const r=null===(t=e.match(a.SourceMapURLGlobalRegex))||void 0===t?void 0:t.filter((e=>!e.includes("\\n")));return r&&r.length?r[r.length-1].match(a.SourceMapURLRegex):null}updateSourceMapPath(e,t,r,n){r&&n&&(r=this.makeUnixStylePath(r),n=this.makeUnixStylePath(n),e=e.replace(r,n));const i=o.relative(t,e);return this.makeUnixStylePath(i)}makeUnixStylePath(e){const t=e.split(o.sep);return o.posix.join.apply(null,t)}}a.SourceMapURLGlobalRegex=/\/\/(#|@) sourceMappingURL=((?!data:)[^ ]+?)\s*$/gm,a.SourceMapURLRegex=/\/\/(#|@) sourceMappingURL=((?!data:)[^ ]+?)\s*$/m,a.SourceURLRegex=/^\/\/[#@] ?sourceURL=(.+)$/m,t.SourceMapUtil=a},8523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMapsCombinator=void 0;const n=r(7147),o=r(1017),i=r(9125),s=r(9564),a=/^(?:[a-z]{2,}:\/{3})?[a-z]:/i;function c(e,t){return t.match(a)?n.readFileSync(t):n.readFileSync(`${e}${t}`)}t.SourceMapsCombinator=class{convert(e){const t=e.sources.reduce(((e,t)=>{if(t.includes("node_modules"))return e;try{const r=this.getSourceMapConsumerFrom(t);r&&(e[t]=r)}finally{return e}}),{});if(0===Object.keys(t).length)return e;const r=new i.SourceMapGenerator;return new i.SourceMapConsumer(e).eachMapping((n=>{if(null===n.source)return;const i={generated:{line:n.generatedLine,column:n.generatedColumn},original:{line:n.originalLine,column:n.originalColumn},source:n.source,name:n.name};if(t[n.source]){const r={line:n.originalLine,column:n.originalColumn},s=t[n.source].originalPositionFor(r);if(null===s.source)return;s.source.match(a)||(s.source=o.resolve(e.sourceRoot,o.dirname(n.source),s.source)),i.source=s.source,i.name=s.name||i.name,null!==s.line&&null!==s.column&&(i.original={line:s.line,column:s.column})}try{r.addMapping(i)}catch(e){}})),r.toJSON()}getSourceMapConsumerFrom(e){const t=n.readFileSync(e);return this.readSourcemap(e,t.toString())}readSourcemap(e,t){const r=s.resolveSync(t,e,c.bind(null,function(e){const t=e.match(a);return t?t[0]:""}(e)));return null===r?null:new i.SourceMapConsumer(r.map)}}},7538:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebDebugSession=void 0;const o=r(1017),i=r(7147),s=r(9496),a=r(9955),c=r(3403),u=r(3821),l=r(5585),d=r(9897),p=r(312),h=r(5773),f=r(8102),g=r(7551),m=r(5013),_=r(6438);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/debugger/webDebugSession.ts"));const v=c.loadMessageBundle(r(1017).join(__dirname,"src/debugger/webDebugSession.ts"));class E extends m.DebugSessionBase{constructor(e){super(e),this.pwaSessionName="pwa-chrome",this.attachRetryCount=2,this.appWorker=null,this.onDidStartDebugSessionHandler=s.debug.onDidStartDebugSession(this.handleStartDebugSession.bind(this)),this.onDidTerminateDebugSessionHandler=s.debug.onDidTerminateDebugSession(this.handleTerminateDebugSession.bind(this))}launchRequest(e,t,r){return n(this,void 0,void 0,(function*(){try{try{yield this.initializeSettings(t),a.logger.log("Launching the application"),a.logger.verbose(`Launching the application: ${JSON.stringify(t,null,2)}`),yield this.updateWebpackMetroConfig(t),yield this.verifyExpoWebRequiredDependencies(t),yield this.appLauncher.launchExpoWeb(t),yield this.waitExpoWebIsRunning(t),yield this.appLauncher.launchBrowser(t)}catch(e){throw d.ErrorHelper.getInternalError(p.InternalErrorCode.ApplicationLaunchFailed,e.message||e)}yield this.vsCodeDebugSession.customRequest("attach",t),this.sendResponse(e)}catch(t){this.terminateWithErrorResponse(t,e)}}))}attachRequest(e,t,r){return n(this,void 0,void 0,(function*(){const r=e=>n(this,void 0,void 0,(function*(){try{yield this.initializeSettings(e),e.port=e.port||9222,yield u.TelemetryHelper.generate("attach",e,(t=>n(this,void 0,void 0,(function*(){t.add("platform",e.platform,!1),t.add("browser",e.browserTarget,!1),this.cdpProxy=this.appLauncher.getRnCdpProxy(),this.cdpProxy.setApplicationTargetPort(e.port),yield this.cdpProxy.initializeServer(new l.RnCDPMessageHandler,this.cdpProxyLogLevel,this.cancellationTokenSource.token),a.logger.log(v(0,null));const o=Object.assign({},e,{});o.webSocketDebuggerUrl&&this.cdpProxy.setBrowserInspectUri(o.webSocketDebuggerUrl),this.cdpProxyErrorHandlerDescriptor=this.cdpProxy.onError((t=>n(this,void 0,void 0,(function*(){var n;this.attachRetryCount>0?(this.debugSessionStatus=m.DebugSessionStatus.ConnectionPending,this.attachRetryCount--,r(e)):(this.showError(t),this.terminate(),null===(n=this.cdpProxyErrorHandlerDescriptor)||void 0===n||n.dispose())})))),yield this.establishDebugSession(o),this.debugSessionStatus=m.DebugSessionStatus.ConnectionDone}))))}catch(e){throw this.debugSessionStatus=m.DebugSessionStatus.ConnectionFailed,e}}));try{yield r(t),this.sendResponse(e)}catch(t){this.terminateWithErrorResponse(t,e)}}))}disconnectRequest(e,t,r){const o=Object.create(null,{disconnectRequest:{get:()=>super.disconnectRequest}});return n(this,void 0,void 0,(function*(){return this.appWorker&&this.appWorker.stop(),this.onDidStartDebugSessionHandler.dispose(),this.onDidTerminateDebugSessionHandler.dispose(),o.disconnectRequest.call(this,e,t,r)}))}establishDebugSession(e,t){if(!this.cdpProxy){const e=v(2,null);throw new Error(e)}{const t=_.JsDebugConfigAdapter.createChromeDebuggingConfig(e,this.appLauncher.getCdpProxyPort(),this.pwaSessionName,this.rnSession.sessionId);if(!s.debug.startDebugging(this.appLauncher.getWorkspaceFolder(),t,{parentSession:this.vsCodeDebugSession,consoleMode:s.DebugConsoleMode.MergeWithParent})){const e=v(1,null);throw new Error(e)}}}handleStartDebugSession(e){e.configuration.rnDebugSessionId===this.rnSession.sessionId&&e.type===this.pwaNodeSessionName&&(this.nodeSession=e)}handleTerminateDebugSession(e){e.configuration.rnDebugSessionId===this.rnSession.sessionId&&e.type===this.pwaNodeSessionName&&(this.debugSessionStatus===m.DebugSessionStatus.ConnectionPending?this.establishDebugSession(this.previousAttachArgs):this.terminate())}updateWebpackMetroConfig(e){return n(this,void 0,void 0,(function*(){a.logger.log("Checking expo webpack-config for project.");const t=this.appLauncher.getPackager().getExponentHelper(),r=yield t.exponentSdk(!0);if(parseInt(r.substring(0,2))>=49)a.logger.log("Check and add metro bundler field to app.json."),yield g.ReactNativeProjectHelper.UpdateMertoBundlerForExpoWeb(e);else{const t=o.join(e.cwd,"node_modules"),r=o.join(t,"@expo","webpack-config");if(!i.existsSync(r))throw a.logger.log("@expo/webpack-config is not found in current project."),new Error("Required dependencies not found: Please check and install @expo/webpack-config by running: npx expo install @expo/webpack-config.")}}))}verifyExpoWebRequiredDependencies(e){a.logger.log("Checking expo web required dependencies");const t=o.join(e.cwd,"node_modules"),r=o.join(t,"react-dom"),n=o.join(t,"react-native-web");if(!i.existsSync(r)||!i.existsSync(n))throw a.logger.log("react-native-web, react-dom is not found in current project."),new Error("Required dependencies not found: Please check and install react-native-web, react-dom by running: npx expo install react-native-web react-dom");a.logger.log("All required dependencies installed")}isRunning(e){return n(this,void 0,void 0,(function*(){try{return yield h.Request.request(e.url),!0}catch(e){return!1}}))}waitExpoWebIsRunning(e,t=60,r=3e3){return n(this,void 0,void 0,(function*(){try{yield f.PromiseUtil.retryAsync((()=>this.isRunning(e)),(e=>e),t,r,v(3,null))}catch(e){throw e}}))}}t.WebDebugSession=E},6729:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractDeviceTracker=void 0;const o=r(9144);t.AbstractDeviceTracker=class{constructor(){this.logger=o.OutputChannelLogger.getMainChannel(),this.isStop=!1}queryDevicesLoop(){return n(this,void 0,void 0,(function*(){try{yield this.queryDevices(),this.isStop||setTimeout((()=>this.queryDevicesLoop()),3e3)}catch(e){this.logger.error(e.toString())}}))}}},166:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AdbHelper=t.AndroidAPILevel=void 0;const o=r(1017),i=r(7147),s=r(2037),a=r(3403),c=r(5458),u=r(5640),l=r(8102);a.config({messageFormat:a.MessageFormat.bundle,bundleFormat:a.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/android/adb.ts"));const d=a.loadMessageBundle(r(1017).join(__dirname,"src/extension/android/adb.ts"));var p;!function(e){e[e.Marshmallow=23]="Marshmallow",e[e.LOLLIPOP_MR1=22]="LOLLIPOP_MR1",e[e.LOLLIPOP=21]="LOLLIPOP",e[e.KITKAT=19]="KITKAT",e[e.JELLY_BEAN_MR2=18]="JELLY_BEAN_MR2",e[e.JELLY_BEAN_MR1=17]="JELLY_BEAN_MR1",e[e.JELLY_BEAN=16]="JELLY_BEAN",e[e.ICE_CREAM_SANDWICH_MR1=15]="ICE_CREAM_SANDWICH_MR1",e[e.GINGERBREAD_MR1=10]="GINGERBREAD_MR1"}(t.AndroidAPILevel||(t.AndroidAPILevel={})),function(e){e[e.KEYCODE_BACK=4]="KEYCODE_BACK",e[e.KEYCODE_DPAD_UP=19]="KEYCODE_DPAD_UP",e[e.KEYCODE_DPAD_DOWN=20]="KEYCODE_DPAD_DOWN",e[e.KEYCODE_DPAD_CENTER=23]="KEYCODE_DPAD_CENTER",e[e.KEYCODE_MENU=82]="KEYCODE_MENU"}(p||(p={}));class h{constructor(e,t,r,n="MainActivity"){this.childProcess=new u.ChildProcess,this.adbExecutable="",this.nodeModulesRoot=t,this.adbExecutable=this.getAdbPath(e,r),this.commandExecutor=new c.CommandExecutor(this.nodeModulesRoot),this.launchActivity=n}getConnectedTargets(){return n(this,void 0,void 0,(function*(){const e=yield this.childProcess.execToString(`${this.adbExecutable} devices`);return this.parseConnectedTargets(e)}))}findOnlineTargetById(e){return n(this,void 0,void 0,(function*(){return(yield this.getOnlineTargets()).find((t=>t.id===e))}))}getAvdsNames(){return n(this,void 0,void 0,(function*(){const e=yield this.childProcess.execToString("emulator -list-avds");let t=[];if(e){t=e.split(/\r?\n|\r/g);const r=t.indexOf("");r>=0&&t.splice(r,1)}return t}))}isRemoteTarget(e){return!!e.match(h.AndroidRemoteTargetPattern)}getAvdNameById(e){return n(this,void 0,void 0,(function*(){try{const t=yield this.childProcess.execToString(`${this.adbExecutable} -s ${e} emu avd name`);return t?t.split(/\r?\n|\r/g)[0]:null}catch(e){return null}}))}setLaunchActivity(e){this.launchActivity=e}switchDebugMode(e,t,r,o,i){return n(this,void 0,void 0,(function*(){const n=`${this.adbExecutable} ${o?`-s ${o}`:""} shell am broadcast -a "${t}.RELOAD_APP_ACTION" --ez jsproxy ${String(r)}`;return yield new c.CommandExecutor(this.nodeModulesRoot,e).execute(n),yield l.PromiseUtil.delay(200),yield this.stopApp(e,t,o,i),this.launchApp(e,t,o,i)}))}launchApp(e,t,r,n){const o=`${this.adbExecutable} ${r?`-s ${r}`:""} shell am start -n ${t}${n?`.${n}`:""}/${t}.${this.launchActivity}`;return new c.CommandExecutor(e).execute(o)}stopApp(e,t,r,n){const o=`${this.adbExecutable} ${r?`-s ${r}`:""} shell am force-stop ${t}${n?`.${n}`:""}`;return new c.CommandExecutor(e).execute(o)}apiVersion(e){return n(this,void 0,void 0,(function*(){const t=yield this.executeQuery(e,"shell getprop ro.build.version.sdk");return parseInt(t,10)}))}reverseAdb(e,t){return this.execute(e,`reverse tcp:${t} tcp:${t}`)}showDevMenu(e){const t=`${this.adbExecutable} ${e?`-s ${e}`:""} shell input keyevent ${p.KEYCODE_MENU}`;return this.commandExecutor.execute(t)}reloadApp(e){const t=`${this.adbExecutable} ${e?`-s ${e}`:""} shell input text "RR"`;return this.commandExecutor.execute(t)}getOnlineTargets(){return n(this,void 0,void 0,(function*(){return(yield this.getConnectedTargets()).filter((e=>e.isOnline))}))}startLogCat(e){return this.childProcess.spawn(this.adbExecutable.replace(/"/g,""),e)}parseSdkLocation(e,t){const r=e.match(/^sdk\.dir\s*=(.+)$/m);if(!r||!r[1])return t&&t.info(d(0,null)),null;let n=r[1].trim();return"win32"===s.platform()&&(n=n.replace(/\\\\/g,"\\").replace("\\:",":")),t&&t.info(d(1,null,n)),n}getAdbPath(e,t){const r=this.getSdkLocationFromLocalPropertiesFile(e,t);if(r){const e=o.join(r,"platform-tools","win32"===s.platform()?"adb.exe":"adb");return i.existsSync(e)?`"${e}"`:(t&&t.warning(d(2,null)),"adb")}return"adb"}executeShellCommand(e,t){return this.executeQuery(e,`shell "${t}"`)}installApplicationToEmulator(e){return this.childProcess.execToString(`adb install ${e}`)}executeQuery(e,t){return this.childProcess.execToString(this.generateCommandForTarget(e,t))}parseConnectedTargets(e){const t=[],r=new RegExp("^(\\S+)\\t(\\S+)$","mg");let n=r.exec(e);for(;null!=n;)t.push({id:n[1],isOnline:"device"===n[2],isVirtualTarget:this.isVirtualTarget(n[1])}),n=r.exec(e);return t}isVirtualTarget(e){return!!e.match(h.AndroidSDKEmulatorPattern)}execute(e,t){return this.commandExecutor.execute(this.generateCommandForTarget(e,t))}generateCommandForTarget(e,t){return`${this.adbExecutable} -s "${e}" ${t}`}getSdkLocationFromLocalPropertiesFile(e,t){const r=o.join(e,"android","local.properties");if(!i.existsSync(r))return t&&t.info(d(3,null)),null;let n;try{n=i.readFileSync(r).toString()}catch(e){return t&&(t.error(d(4,null,r),e,e.stack),t.info(d(5,null))),null}return this.parseSdkLocation(n,t)}}h.AndroidRemoteTargetPattern=/^((?:\d{1,3}\.){3}\d{1,3}:\d{1,5}|.*_adb-tls-con{2}ect\._tcp.*)$/gm,h.AndroidSDKEmulatorPattern=/^emulator-\d{1,5}$/,t.AdbHelper=h},3781:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.pushFile=t.pull=t.push=void 0;const o=r(1017),i=/^[\w.-]+$/,s=/not an application/,a=/debuggable/,c=/not permitted/,u="/data/local/tmp/";var l;!function(e){e[e.NotAnApp=1]="NotAnApp",e[e.NotDebuggable=2]="NotDebuggable"}(l||(l={}));class d extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}}
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtility.tsx#L19-L46
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtilityInternal.tsx
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function p(e){return e.match(i)?Promise.resolve(e):Promise.reject(new Error(`Disallowed run-as user: ${e}`))}function h(e){return e.match(/'/)?Promise.reject(new Error(`Disallowed escaping filepath: ${e}`)):Promise.resolve(e)}function f(e,t,r,n){return m(e,t,r,n,`run-as '${r}'`)}function g(e,t,r,n){return m(e,t,r,n,"su")}function m(e,t,r,n,o){return e.executeShellCommand(t,`echo '${n}' | ${o}`).then((e=>{if(e.match(s))throw new d(l.NotAnApp,`Android package ${r} is not an application. To use it with Flipper, either run adb as root or add an <application> tag to AndroidManifest.xml`);if(e.match(a))throw new d(l.NotDebuggable,`Android app ${r} is not debuggable. To use it with Flipper, add android:debuggable="true" to the application section of AndroidManifest.xml`);if(e.toLowerCase().match(c))throw new Error(`Your android device (${t}) does not support the adb shell run-as command. We're tracking this at https://github.com/facebook/flipper/issues/92`);return e}))}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtilityInternal.tsx
 */t.push=function(e,t,r,n,o,i){return p(r).then((r=>h(n).then((n=>function(e){if(!e.match(/"/))return Promise.resolve(e);return Promise.reject(new Error(`Disallowed escaping file content: ${e}`))}(o).then((o=>function(e,t,r,n,o,i){const s=`echo \\"${o}\\" > "${n}" && chmod 644 "${n}"`;return f(e,t,r,s).then((e=>{null==i||i.debug(e)})).catch((n=>{if(n instanceof d)return g(e,t,r,s).then((()=>{})).catch((e=>{throw null==i||i.debug(e.toString()),n}));throw n}))}(e,t,r,n,o,i)))))))},t.pull=function(e,t,r,n,o){return p(r).then((r=>h(n).then((n=>function(e,t,r,n,o){const i=`cat "${n}"`;return f(e,t,r,i).catch((n=>{if(n instanceof d)return g(e,t,r,i).catch((e=>{throw null==o||o.debug(e.toString()),n}));throw n}))}(e,t,r,n,o)))))},t.pushFile=
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/androidContainerUtility.tsx#L19-L46
 */
function(e,t,r,i,s,a){return n(this,void 0,void 0,(function*(){const c=yield p(r),l=yield h(i);return function(e,t,r,i,s,a){return n(this,void 0,void 0,(function*(){const n=o.basename(i),c=u+n;try{const n=yield e.executeQuery(t,`push ${s} ${c}`);null==a||a.debug(n);const o=`cp "${c}" "${i}" && chmod 644 "${i}"`,u=yield f(e,t,r,o);null==a||a.debug(u)}finally{yield e.executeShellCommand(t,`rm ${c}`)}}))}(e,t,c,l,s,a)}))}},8631:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidDeviceTracker=void 0;const o=r(7693),i=r(5637),s=r(2501),a=r(8226),c=r(1205),u=r(6729);class l extends u.AbstractDeviceTracker{constructor(e){super(),this.adbHelper=e}start(){return n(this,void 0,void 0,(function*(){this.logger.debug("Start Android device tracker"),yield this.queryDevicesLoop()}))}stop(){this.logger.debug("Stop Android device tracker"),this.isStop=!0}queryDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.adbHelper.getOnlineTargets(),t=new Set([...o.DeviceStorage.devices.keys()].filter((e=>o.DeviceStorage.devices.get(e)instanceof i.AndroidClientDevice)));for(const r of e)if(t.has(r.id))t.delete(r.id);else{const e=new i.AndroidClientDevice(r.id,r.isVirtualTarget,c.ClientOS.Android);yield this.initAndroidDevice(e),o.DeviceStorage.devices.set(e.id,e)}t.forEach((e=>{o.DeviceStorage.devices.delete(e)}))}))}initAndroidDevice(e){return n(this,void 0,void 0,(function*(){yield this.adbHelper.reverseAdb(e.id,s.NetworkInspectorServer.InsecureServerPort),yield this.adbHelper.reverseAdb(e.id,s.NetworkInspectorServer.SecureServerPort),e.deviceStatus=a.DeviceStatus.Prepared}))}}t.AndroidDeviceTracker=l},7833:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidPlatform=void 0;const o=r(6625),i=r(3403),s=r(7005),a=r(7599),c=r(1506),u=r(4191),l=r(3821),d=r(5458),p=r(312),h=r(9897),f=r(9901),g=r(8102),m=r(1638),_=r(9327),v=r(3773),E=r(8943),y=r(166),b=r(5618),S=r(1008);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/android/androidPlatform.ts"));const C=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/android/androidPlatform.ts"));class A extends m.GeneralMobilePlatform{constructor(e,t={}){super(e,t),this.runOptions=e,this.logCatMonitor=null,this.needsToLaunchApps=!1,this.adbHelper=new y.AdbHelper(this.runOptions.projectRoot,e.nodeModulesRoot,this.logger),this.targetManager=new E.AndroidTargetManager(this.adbHelper)}showDevMenu(e){return this.adbHelper.showDevMenu(e)}reloadApp(e){return this.adbHelper.reloadApp(e)}getTarget(){return n(this,void 0,void 0,(function*(){if(!this.target){const e=yield this.adbHelper.getOnlineTargets(),t=yield this.getTargetFromRunArgs();if(t)this.target=t;else{const t=e.filter((e=>{switch(this.runOptions.target){case s.TargetType.Simulator:return e.isVirtualTarget;case s.TargetType.Device:return!e.isVirtualTarget;case void 0:case"":return!0;default:return e.id===this.runOptions.target}}));if(t.length)this.target=E.AndroidTarget.fromInterface(t[0]);else{if(!e.length)throw h.ErrorHelper.getInternalError(p.InternalErrorCode.AndroidThereIsNoAnyOnlineDebuggableTarget);this.logger.warning(C(0,null,this.runOptions.target)),this.target=E.AndroidTarget.fromInterface(e[0])}}}return this.target}))}runApp(e=!1){var t;return n(this,void 0,void 0,(function*(){let r={platform:{value:a.PlatformType.Android,isPii:!1}};this.runOptions.isDirect&&(r.isDirect={value:!0,isPii:!1},null===(t=this.projectObserver)||void 0===t||t.updateRNAndroidHermesProjectState(!0)),r=l.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,r),yield l.TelemetryHelper.generate("AndroidPlatform.runApp",r,(()=>n(this,void 0,void 0,(function*(){const t=m.GeneralMobilePlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);(!o.valid(this.runOptions.reactNativeVersions.reactNativeVersion)||o.gte(this.runOptions.reactNativeVersions.reactNativeVersion,A.NO_PACKAGER_VERSION)||_.ProjectVersionHelper.isCanaryVersion(this.runOptions.reactNativeVersions.reactNativeVersion))&&this.runArguments.push("--no-packager");const r=m.GeneralMobilePlatform.getOptFromRunArgs(this.runArguments,"--main-activity");r?this.adbHelper.setLaunchActivity(r):(0,f.notNullOrUndefined)(this.runOptions.debugLaunchActivity)&&(this.runArguments.push("--main-activity",this.runOptions.debugLaunchActivity),this.adbHelper.setLaunchActivity(this.runOptions.debugLaunchActivity));const n=new d.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand("run-android",this.runArguments,{env:t}),i=new u.OutputVerifier((()=>Promise.resolve(A.RUN_ANDROID_SUCCESS_PATTERNS)),(()=>Promise.resolve(A.RUN_ANDROID_FAILURE_PATTERNS)),a.PlatformType.Android).process(n);let s=[];const c=(yield this.adbHelper.getOnlineTargets()).map((e=>e.id));let l;try{try{yield i}finally{l=yield this.getTargetIdForRunApp(c),this.packageName=yield this.getPackageName(),s=[l]}}catch(t){if(l||(l=yield this.getTargetIdForRunApp(c)),!(t.message===h.ErrorHelper.getInternalError(p.InternalErrorCode.AndroidMoreThanOneDeviceOrEmulator).message&&c.length>=1&&l))throw t;this.needsToLaunchApps=!0,s=e?c:[l]}yield g.PromiseUtil.forEach(s,(e=>this.launchAppWithADBReverseAndLogCat(e)))}))))}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){return this.adbHelper.switchDebugMode(this.runOptions.projectRoot,this.packageName,!0,(yield this.getTarget()).id,this.getAppIdSuffixFromRunArgumentsIfExists())}))}disableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){return this.adbHelper.switchDebugMode(this.runOptions.projectRoot,this.packageName,!1,(yield this.getTarget()).id,this.getAppIdSuffixFromRunArgumentsIfExists())}))}prewarmBundleCache(){return this.packager.prewarmBundleCache(a.PlatformType.Android)}getRunArguments(){let e=[];return this.runOptions.runArguments&&this.runOptions.runArguments.length>0?e=this.runOptions.runArguments:(this.runOptions.variant&&e.push("--variant",this.runOptions.variant),this.runOptions.target&&this.runOptions.target!==s.TargetType.Device&&this.runOptions.target!==s.TargetType.Simulator&&e.push("--deviceId",this.runOptions.target)),e}dispose(){this.logCatMonitor&&(v.LogCatMonitorManager.delMonitor(this.logCatMonitor.deviceId),this.logCatMonitor=null)}getTargetFromRunArgs(){return n(this,void 0,void 0,(function*(){if(this.runOptions.runArguments&&this.runOptions.runArguments.length){const e=m.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--deviceId");if(e)return new E.AndroidTarget(!0,this.adbHelper.isVirtualTarget(e),e)}}))}getTargetIdForRunApp(e){return n(this,void 0,void 0,(function*(){let t;return this.runOptions.runArguments&&this.runOptions.runArguments.length&&(t=m.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--deviceId")),t||(this.runOptions.target&&this.runOptions.target!==s.TargetType.Simulator&&this.runOptions.target!==s.TargetType.Device&&e.find((e=>e===this.runOptions.target))?this.runOptions.target:(yield this.getTarget()).id)}))}getAppIdSuffixFromRunArgumentsIfExists(){const e=this.runArguments.indexOf("--appIdSuffix");if(e>-1)return this.runArguments[e+1]}launchAppWithADBReverseAndLogCat(e){return n(this,void 0,void 0,(function*(){return yield this.configureADBReverseWhenApplicable(e),this.needsToLaunchApps&&(yield this.adbHelper.launchApp(this.runOptions.projectRoot,this.packageName,e)),this.startMonitoringLogCat(e,this.runOptions.logCatArguments)}))}configureADBReverseWhenApplicable(e){return n(this,void 0,void 0,(function*(){const t=yield this.adbHelper.apiVersion(e);if(t>=y.AndroidAPILevel.LOLLIPOP)try{this.adbHelper.reverseAdb(e,Number(this.runOptions.packagerPort))}catch(t){if(!this.adbHelper.isRemoteTarget(e)||!t.message.includes(A.RUN_ANDROID_FAILURE_PATTERNS[3].pattern))throw t;this.logger.warning(t.message)}else this.logger.warning(C(1,null,e,t,y.AndroidAPILevel.LOLLIPOP))}))}getPackageName(){return n(this,void 0,void 0,(function*(){const e=yield new c.Package(this.runOptions.projectRoot).name();return new S.PackageNameResolver(e).resolvePackageName(this.runOptions.projectRoot)}))}startMonitoringLogCat(e,t){v.LogCatMonitorManager.delMonitor(e),this.logCatMonitor=new b.LogCatMonitor(e,this.adbHelper,t),v.LogCatMonitorManager.addMonitor(this.logCatMonitor),this.logCatMonitor.start().catch((e=>{this.logger.warning(e),this.logger.warning(C(2,null))}))}}A.RUN_ANDROID_FAILURE_PATTERNS=[{pattern:"Failed to install on any devices",errorCode:p.InternalErrorCode.AndroidCouldNotInstallTheAppOnAnyAvailibleDevice},{pattern:"com.android.ddmlib.ShellCommandUnresponsiveException",errorCode:p.InternalErrorCode.AndroidShellCommandTimedOut},{pattern:"Android project not found",errorCode:p.InternalErrorCode.AndroidProjectNotFound},{pattern:"error: more than one device/emulator",errorCode:p.InternalErrorCode.AndroidMoreThanOneDeviceOrEmulator},{pattern:/^Error: Activity class {.*} does not exist\.$/m,errorCode:p.InternalErrorCode.AndroidFailedToLaunchTheSpecifiedActivity}],A.RUN_ANDROID_SUCCESS_PATTERNS=["BUILD SUCCESSFUL","Starting the app","Starting: Intent"],t.AndroidPlatform=A},8943:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidTargetManager=t.AndroidTarget=void 0;const o=r(3403),i=r(9023),s=r(5640),a=r(9144),c=r(1529),u=r(7005),l=r(8102),d=r(312),p=r(9897),h=r(166);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/android/androidTargetManager.ts"));const f=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/android/androidTargetManager.ts"));class g extends c.MobileTarget{static fromInterface(e){return new g(e.isOnline,e.isVirtualTarget,e.id,e.name)}constructor(e,t,r,n){super(e,t,r,n||r)}}t.AndroidTarget=g;class m extends i.MobileTargetManager{constructor(e){super(),this.adbHelper=e,this.logger=a.OutputChannelLogger.getChannel(a.OutputChannelLogger.MAIN_CHANNEL_NAME,!0),this.childProcess=new s.ChildProcess}isVirtualTarget(e){return n(this,void 0,void 0,(function*(){try{if(e===u.TargetType.Device)return!1;if(e===u.TargetType.Simulator||e.match(h.AdbHelper.AndroidSDKEmulatorPattern))return!0;const t=yield this.adbHelper.findOnlineTargetById(e);if(t)return t.isVirtualTarget;if((yield this.adbHelper.getAvdsNames()).includes(e))return!0;throw new Error("There is no such target")}catch(t){throw p.ErrorHelper.getNestedError(t,d.InternalErrorCode.CouldNotRecognizeTargetType,e)}}))}selectAndPrepareTarget(e){return n(this,void 0,void 0,(function*(){const t=yield this.startSelection(e);if(t){if(!t.isOnline&&t.isVirtualTarget)return this.launchSimulator(t);if(t.id)return g.fromInterface(t)}}))}collectTargets(e){return n(this,void 0,void 0,(function*(){const t=[],r=!e||e===u.TargetType.Simulator,n=!e||e===u.TargetType.Device;try{if(r){const e=yield this.adbHelper.getAvdsNames();t.push(...e.map((e=>({name:e,isOnline:!1,isVirtualTarget:!0}))))}}catch(t){if(e===u.TargetType.Simulator)throw t;this.logger.warning(f(0,null,t instanceof Error?t.message:t.toString()))}const o=yield this.adbHelper.getOnlineTargets();for(const e of o)if(e.isVirtualTarget&&r){const r=yield this.adbHelper.getAvdNameById(e.id),n=t.find((e=>e.name===r));n&&(n.isOnline=!0,n.id=e.id)}else!e.isVirtualTarget&&n&&t.push({id:e.id,isOnline:!0,isVirtualTarget:!1});this.targets=t}))}startSelection(e){return n(this,void 0,void 0,(function*(){return this.selectTarget(e)}))}launchSimulator(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{let o=!1;const i=this.childProcess.spawn(m.EMULATOR_COMMAND,[m.EMULATOR_AVD_START_COMMAND,e.name],{detached:!0},!0);i.outcome.catch((e=>{o=!0,"win32"==process.platform&&process.env.SESSIONNAME&&process.env.SESSIONNAME.toLowerCase().includes("rdp-tcp")&&this.logger.warning(f(1,null)),r(new Error(`Virtual device launch finished with an exception: ${String(e)}`))})),i.spawnedProcess.unref();l.PromiseUtil.waitUntil((()=>n(this,void 0,void 0,(function*(){if(o)throw new Error("Android emulator launch failed unexpectedly");const t=yield this.adbHelper.getOnlineTargets();for(const r of t){if((yield this.adbHelper.getAvdNameById(r.id))===e.name)return r.id}return null}))),1e3,1e3*m.EMULATOR_START_TIMEOUT).then((n=>{n?(e.id=n,e.isOnline=!0,this.logger.info(f(2,null,e.name)),t(g.fromInterface(e))):r(new Error(`Virtual device launch finished with an exception: ${f(3,null,e.name,m.EMULATOR_START_TIMEOUT)}`))}),(()=>{}))}))}))}}m.EMULATOR_COMMAND="emulator",m.EMULATOR_AVD_START_COMMAND="-avd",m.EMULATOR_START_TIMEOUT=120,t.AndroidTargetManager=m},5618:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LogCatMonitor=void 0;const o=r(3403),i=r(9144),s=r(334);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/android/logCatMonitor.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/android/logCatMonitor.ts"));class c{constructor(e,t,r){this.deviceId=e,this._userProvidedLogCatArguments=r,this._logger=i.OutputChannelLogger.getChannel(`LogCat - ${e}`),this.adbHelper=t}start(){return n(this,void 0,void 0,(function*(){const e=this.getLogCatArguments(),t=["-s",this.deviceId,"logcat"].concat(e);this._logger.debug(`Monitoring LogCat for device ${this.deviceId} with arguments: ${String(e)}`),this._logCatSpawn=this.adbHelper.startLogCat(t);const r=new s.ExecutionsFilterBeforeTimestamp(.5);this._logCatSpawn.stderr.on("data",(e=>{r.execute((()=>this._logger.info(e.toString())))})),this._logCatSpawn.stdout.on("data",(e=>{r.execute((()=>this._logger.info(e.toString())))}));try{yield this._logCatSpawn.outcome,this._logger.info(a(0,null))}catch(e){if(this._logCatSpawn)throw e;this._logger.info(a(1,null))}finally{this._logCatSpawn=null}}))}dispose(){if(this._logCatSpawn){const e=this._logCatSpawn;this._logCatSpawn=null,e.spawnedProcess.kill()}i.OutputChannelLogger.disposeChannel(this._logger.channelName)}getLogCatArguments(){return this.isNullOrUndefined(this._userProvidedLogCatArguments)?c.DEFAULT_PARAMETERS:String(this._userProvidedLogCatArguments).split(" ")}isNullOrUndefined(e){return null==e}}c.DEFAULT_PARAMETERS=["*:S","ReactNative:V","ReactNativeJS:V"],t.LogCatMonitor=c},3773:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogCatMonitorManager=void 0;class r{static addMonitor(e){this.logCatMonitorsCache[e.deviceId.toLowerCase()]=e}static getMonitor(e){return this.logCatMonitorsCache[e.toLowerCase()]}static delMonitor(e){this.logCatMonitorsCache[e.toLowerCase()]&&(this.logCatMonitorsCache[e.toLowerCase()].dispose(),delete this.logCatMonitorsCache[e.toLowerCase()])}static cleanUp(){Object.keys(r.logCatMonitorsCache).forEach((e=>{r.delMonitor(e)}))}}r.logCatMonitorsCache={},t.LogCatMonitorManager=r},1008:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PackageNameResolver=void 0;const o=r(1017),i=r(9452);class s{constructor(e){this.applicationName=e}resolvePackageName(e){const t=o.join.apply(this,[e].concat(s.DefaultManifestLocation));return this.readPackageName(t)}readPackageName(e){return n(this,void 0,void 0,(function*(){if(e){const t=new i.FileSystem;if(yield t.exists(e)){const r=yield t.readFile(e);let n=this.parsePackageName(r.toString());return n||(n=this.getDefaultPackageName(this.applicationName)),n}return this.getDefaultPackageName(this.applicationName)}return this.getDefaultPackageName(this.applicationName)}))}getDefaultPackageName(e){return(s.DefaultPackagePrefix+e).toLowerCase()}parsePackageName(e){const t=e.match(s.PackageNameRegexp);return t?t[1]:null}}s.PackageNameRegexp=/package="(.+?)"/,s.ManifestName="AndroidManifest.xml",s.DefaultPackagePrefix="com.",s.SourceRootRelPath=["android","app","src","main"],s.DefaultManifestLocation=s.SourceRootRelPath.concat(s.ManifestName),t.PackageNameResolver=s},8280:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AppLauncher=void 0;const o=r(7147),i=r(1017),s=r(2081),a=r(9496),c=r(3403),u=r(8468),l=r(2331),d=r(9208),p=r(9327),h=r(5458),f=r(9901),g=r(3821),m=r(9897),_=r(312),v=r(4724),E=r(9185),y=r(2424),b=r(1376),S=r(8730),C=r(3833),A=r(7005),T=r(9144),w=r(5034),P=r(2463),O=r(973),I=r(3350),R=r(7599),D=r(3377),N=r(6465),M=r(1638);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/appLauncher.ts"));const x=c.loadMessageBundle(r(1017).join(__dirname,"src/extension/appLauncher.ts"));class k{static getAppLauncherByProjectRootPath(e){const t=S.ProjectsStorage.projectsCache[e.toLowerCase()];if(!t)throw new Error(`Could not find AppLauncher by the project root path ${e}`);return t}static getOrCreateAppLauncherByProjectRootPath(e){return n(this,void 0,void 0,(function*(){let t=S.ProjectsStorage.projectsCache[e.toLowerCase()];if(!t){const r=(0,N.createAdditionalWorkspaceFolder)(e);if(r&&(yield(0,N.onFolderAdded)(r),t=S.ProjectsStorage.projectsCache[r.uri.fsPath.toLocaleLowerCase()]),!t)throw new Error(`Could not find AppLauncher by the project root path ${e}`)}return t}))}static getNodeModulesRootByProjectPath(e){return k.getAppLauncherByProjectRootPath(e).getOrUpdateNodeModulesRoot()}constructor(e,t,r){this.reactDirManager=e,this.projectObserver=t,this.workspaceFolder=r,this.cdpProxyPort=(0,E.generateRandomPortNumber)(),this.cdpProxyHostAddress="127.0.0.1",this.logger=T.OutputChannelLogger.getMainChannel(),this.browserStopEventEmitter=new a.EventEmitter,this.debugConfigurationRoot=r.uri.fsPath;const n=P.SettingsHelper.getReactNativeProjectRoot(this.debugConfigurationRoot);this.launchScenariosManager=new D.LaunchScenariosManager(this.debugConfigurationRoot),this.exponentHelper=new O.ExponentHelper(this.debugConfigurationRoot,n),this.packager=new d.Packager(this.debugConfigurationRoot,n,P.SettingsHelper.getPackagerPort(r.uri.fsPath),new w.PackagerStatusIndicator(this.debugConfigurationRoot)),this.packager.setExponentHelper(this.exponentHelper),this.rnCdpProxy=new y.ReactNativeCDPProxy(this.cdpProxyHostAddress,this.cdpProxyPort)}updateDebugConfigurationRoot(e){this.debugConfigurationRoot!==e&&(this.debugConfigurationRoot=e,this.launchScenariosManager=new D.LaunchScenariosManager(this.debugConfigurationRoot))}getCdpProxyPort(){return this.cdpProxyPort}getRnCdpProxy(){return this.rnCdpProxy}getPackager(){return this.packager}getWorkspaceFolderUri(){return this.workspaceFolder.uri}getWorkspaceFolder(){return this.workspaceFolder}getReactNativeVersions(){return this.reactNativeVersions}getExponentHelper(){return this.exponentHelper}getReactDirManager(){return this.reactDirManager}setReactNativeVersions(e){this.reactNativeVersions=e}setAppWorker(e){this.appWorker=e}getAppWorker(){return this.appWorker}getMobilePlatform(){return this.mobilePlatform}getOrUpdateNodeModulesRoot(e=!1){if(!this.nodeModulesRoot||e){const e=(0,E.getNodeModulesInFolderHierarchy)(this.packager.getProjectPath());if(!e)throw m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativePackageIsNotInstalled);this.nodeModulesRoot=e}return this.nodeModulesRoot}dispose(){this.packager.getStatusIndicator().dispose(),this.packager.stop(!0),this.mobilePlatform.dispose()}openFileAtLocation(e,t){return n(this,void 0,void 0,(function*(){const r=yield a.workspace.openTextDocument(a.Uri.file(e)),n=yield a.window.showTextDocument(r),o=n.document.lineAt(t-1).range;n.selection=new a.Selection(o.start,o.end),n.revealRange(o,a.TextEditorRevealType.InCenter)}))}getPackagerPort(e){return P.SettingsHelper.getPackagerPort(e)}prepareBaseRunOptions(e){const t=a.workspace.getWorkspaceFolder(a.Uri.file(e.cwd||e.program));return{platform:e.platform,workspaceRoot:t.uri.fsPath,projectRoot:this.getProjectRoot(e),env:e.env,envFile:e.envFile,nodeModulesRoot:this.getOrUpdateNodeModulesRoot(),isDirect:e.type===I.DEBUG_TYPES.REACT_NATIVE_DIRECT,packagerPort:P.SettingsHelper.getPackagerPort(e.cwd||e.program)}}launch(e){return n(this,void 0,void 0,(function*(){const t=this.requestSetup(e);(0,f.isNullOrUndefined)(e.logCatArguments)||(t.logCatArguments=[this.parseLogCatArguments(e.logCatArguments)]),(0,f.isNullOrUndefined)(e.variant)||(t.variant=e.variant),(0,f.isNullOrUndefined)(e.scheme)||(t.scheme=e.scheme),(0,f.isNullOrUndefined)(e.productName)||(t.productName=e.productName),(0,f.isNullOrUndefined)(e.launchActivity)||(t.debugLaunchActivity=e.launchActivity);const r={packager:this.packager,projectObserver:this.projectObserver};this.mobilePlatform=(new C.PlatformResolver).resolveMobilePlatform(e.platform,t,r);let o={platform:{value:e.platform,isPii:!1}};t.isDirect&&(o.isDirect={value:!0,isPii:!1});try{const r=yield p.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t.nodeModulesRoot,p.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(e));t.reactNativeVersions=r,o=g.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(e,r,o),yield g.TelemetryHelper.generate("launch",o,(r=>n(this,void 0,void 0,(function*(){try{this.mobilePlatform instanceof M.GeneralMobilePlatform&&(r.step("resolveMobileTarget"),yield this.resolveAndSaveMobileTarget(e,this.mobilePlatform)),yield this.mobilePlatform.beforeStartPackager(),r.step("checkPlatformCompatibility"),v.TargetPlatformHelper.checkTargetPlatformSupport(t.platform),r.step("startPackager"),yield this.mobilePlatform.startPackager(),r.step("prewarmBundleCache"),this.logger.info(x(0,null)),yield this.mobilePlatform.prewarmBundleCache(),r.step("mobilePlatform.runApp").add("target",t.target,!1),this.logger.info(x(1,null)),yield this.mobilePlatform.runApp(),t.isDirect?(e.useHermesEngine?(r.step("mobilePlatform.enableHermesDebuggingMode"),t.enableDebug?this.logger.info(x(2,null)):this.logger.info(x(3,null))):e.platform===R.PlatformType.iOS&&(r.step("mobilePlatform.enableIosDirectDebuggingMode"),t.enableDebug?this.logger.info(x(4,null)):this.logger.info(x(5,null))),r.step("mobilePlatform.disableJSDebuggingMode"),this.logger.info(x(6,null)),yield this.mobilePlatform.disableJSDebuggingMode()):(r.step("mobilePlatform.enableJSDebuggingMode"),this.logger.info(x(7,null)),yield this.mobilePlatform.enableJSDebuggingMode())}catch(n){if(!t.enableDebug&&e.platform===R.PlatformType.iOS&&e.type===I.DEBUG_TYPES.REACT_NATIVE)return;throw r.addError(n),this.logger.error(n),n}}))))}catch(e){throw e&&e.errorCode&&(e.errorCode===_.InternalErrorCode.ReactNativePackageIsNotInstalled?g.TelemetryHelper.sendErrorEvent("ReactNativePackageIsNotInstalled",m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativePackageIsNotInstalled)):e.errorCode===_.InternalErrorCode.ReactNativeWindowsIsNotInstalled&&g.TelemetryHelper.sendErrorEvent("ReactNativeWindowsPackageIsNotInstalled",m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativeWindowsIsNotInstalled))),this.logger.error(e),e}}))}launchExpoWeb(e){return n(this,void 0,void 0,(function*(){const t=this.requestSetup(e),r={packager:this.packager,projectObserver:this.projectObserver};this.mobilePlatform=(new C.PlatformResolver).resolveMobilePlatform(e.platform,t,r);let o={platform:{value:e.platform,isPii:!1}};t.isDirect&&(o.isDirect={value:!0,isPii:!1});try{const r=yield p.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t.nodeModulesRoot,p.ProjectVersionHelper.generateAdditionalPackagesToCheckByPlatform(e));t.reactNativeVersions=r,o=g.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(e,r,o),yield g.TelemetryHelper.generate("launch",o,(e=>n(this,void 0,void 0,(function*(){try{yield this.mobilePlatform.beforeStartPackager(),e.step("checkPlatformCompatibility"),v.TargetPlatformHelper.checkTargetPlatformSupport(t.platform),e.step("startPackager"),yield this.mobilePlatform.startPackager()}catch(t){throw e.addError(t),this.logger.error(t),t}}))))}catch(e){throw e&&e.errorCode&&(e.errorCode===_.InternalErrorCode.ReactNativePackageIsNotInstalled?g.TelemetryHelper.sendErrorEvent("ReactNativePackageIsNotInstalled",m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativePackageIsNotInstalled)):e.errorCode===_.InternalErrorCode.ReactNativeWindowsIsNotInstalled&&g.TelemetryHelper.sendErrorEvent("ReactNativeWindowsPackageIsNotInstalled",m.ErrorHelper.getInternalError(_.InternalErrorCode.ReactNativeWindowsIsNotInstalled))),this.logger.error(e),e}}))}launchBrowser(e){return n(this,void 0,void 0,(function*(){const t=this.getRunArguments(e);let r;if(e.platform==R.PlatformType.ExpoWeb){switch(e.browserTarget){case I.BROWSER_TYPES.Edge:r=new l.EdgeBrowserFinder(process.env,o.promises,u);break;case I.BROWSER_TYPES.Chrome:default:r=new l.ChromeBrowserFinder(process.env,o.promises,u)}const n=(yield r.findAll())[0];n&&(this.browserProc=s.spawn(n.path,t,{detached:!0,stdio:["ignore"]}),this.browserProc.unref(),this.browserProc.on("error",(e=>{const t=x(8,null,e.message);this.logger.error(t),this.browserStopEventEmitter.fire(e)})),this.browserProc.once("exit",(e=>{const t=x(9,null,e);this.logger.info(t),this.browserStopEventEmitter.fire(void 0)})))}}))}getRunArguments(e){let t;t=e.browserTarget==I.BROWSER_TYPES.Chrome?i.join(b.HostPlatform.getSettingsHome(),k.CHROME_DATA_DIR):e.browserTarget==I.BROWSER_TYPES.Edge?i.join(b.HostPlatform.getSettingsHome(),k.EDGE_DATA_DIR):"";const r=[`--remote-debugging-port=${e.port||9222}`,"--no-first-run","--no-default-browser-check",`--user-data-dir=${t}`];return e.url&&r.push(e.url),r}resolveAndSaveMobileTarget(e,t){return n(this,void 0,void 0,(function*(){if(e.target&&!(yield t.getTargetFromRunArgs())){const r=e.target.toLowerCase()===A.TargetType.Simulator||e.target.toLowerCase()===A.TargetType.Device,n=yield t.resolveMobileTarget(e.target);if(n&&r){(yield t.getTargetsCountByFilter((e=>e.isVirtualTarget===n.isVirtualTarget)))>1&&this.launchScenariosManager.updateLaunchScenario(e,{target:e.platform===R.PlatformType.Android?n.name:n.id})}}}))}requestSetup(e){const t=a.workspace.getWorkspaceFolder(a.Uri.file(e.cwd||e.program)),r=Object.assign({target:e.target,enableDebug:e.enableDebug},this.prepareBaseRunOptions(e));if(e.platform===R.PlatformType.Exponent&&(r.expoHostType=e.expoHostType||"lan",r.openExpoQR="boolean"!=typeof e.openExpoQR||e.openExpoQR),h.CommandExecutor.ReactNativeCommand=P.SettingsHelper.getReactNativeGlobalCommandName(t.uri),e.runArguments)r.runArguments=e.runArguments;else{const n=P.SettingsHelper.getRunArgs(e.platform,e.target||"simulator",t.uri);r.runArguments=n}return r}getProjectRoot(e){return P.SettingsHelper.getReactNativeProjectRoot(e.cwd||e.program)}parseLogCatArguments(e){return Array.isArray(e)?e.join(" "):e}}k.CHROME_DATA_DIR="chrome_sandbox_dir",k.EDGE_DATA_DIR="edge_sandbox_dir",t.AppLauncher=k},9845:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplePlatformDebugModeManager=void 0;const o=r(3403),i=r(8102),s=r(9144);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/applePlatformDebugModeManager.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/applePlatformDebugModeManager.ts"));class c{constructor(e,t){this.logger=s.OutputChannelLogger.getMainChannel(),this.projectRoot=t,this.platformProjectRoot=e}findPListFileWithRetry(e,t){return n(this,void 0,void 0,(function*(){const r=a(0,null);return i.PromiseUtil.retryAsync((()=>this.tryOneAttemptToFindPListFile(e,t)),(e=>""!==e),c.MAX_RETRIES,c.DELAY_UNTIL_RETRY,r)}))}}c.REMOTE_DEBUGGING_SETTING_NAME=":RCTDevMenu:isDebuggingRemotely",c.MAX_RETRIES=5,c.DELAY_UNTIL_RETRY=2e3,t.ApplePlatformDebugModeManager=c},3641:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigEASBuild=void 0;const o=r(9491),i=r(3403),s=r(9144),a=r(9897),c=r(312),u=r(5458),l=r(9452),d=r(2626);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/configEASBuild.ts"));const p=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/configEASBuild.ts")),h=s.OutputChannelLogger.getMainChannel();class f extends d.ReactNativeCommand{constructor(){super(...arguments),this.codeName="createExpoEASBuildConfigFile",this.label="Config Expo app with EAS build",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.FailedToConfigEASBuild)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=this.project.getPackager().getProjectPath(),t=this.project.getExponentHelper();h.info(p(0,null));if(!(yield t.isExpoManagedApp(!0)))throw new Error(p(5,null));{const t=new l.FileSystem;if(yield t.exists(`${e}/eas.json`))h.info(p(1,null));else{h.info(p(2,null));try{yield new u.CommandExecutor(this.nodeModulesRoot,e).execute("eas build:configure --platform all"),h.info(p(3,null))}catch(e){h.error(p(4,null))}}}}))}}t.ConfigEASBuild=f},4381:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunDirectIosExperimental=t.RunIosHermesExperimental=t.RunAndroidHermesExperimental=t.RunIos=t.RunAndroid=t.DebugWindowsHermesExperimental=t.DebugMacosHermesExperimental=t.DebugIosHermesExperimental=t.DebugDirectIosExperimental=t.DebugAndroidHermesExperimental=t.DebugInExponentWeb=t.DebugInHermesExponent=t.DebugInExponent=t.DebugMacos=t.DebugWindows=t.DebugIos=t.DebugAndroid=t.AttachToPackager=t.AttachDirectIosExperimental=t.AttachHermesApplicationExperimental=void 0;const o=r(9491),i=r(3403),s=r(9496),a=r(9897),c=r(312),u=r(3350),l=r(711);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/debugScenario.ts"));const d=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/debugScenario.ts")),p=(e,t)=>{o(e,new Error(d(0,null,e.name))),e.isDynamic=!0,s.debug.startDebugging(t.getWorkspaceFolder(),e)};class h extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.attachHermesApplicationExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION],this.project)}))}}t.AttachHermesApplicationExperimental=h;class f extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.attachDirectIosExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL],this.project)}))}}t.AttachDirectIosExperimental=f;class g extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.attachToPackager",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER],this.project)}))}}t.AttachToPackager=g;class m extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugAndroid",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID],this.project)}))}}t.DebugAndroid=m;class _ extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugIos",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS],this.project)}))}}t.DebugIos=_;class v extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugWindows",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS],this.project)}))}}t.DebugWindows=v;class E extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugMacos",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS],this.project)}))}}t.DebugMacos=E;class y extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugInExponent",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT],this.project)}))}}t.DebugInExponent=y;class b extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugInHermesExponentExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_HERMES_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_HERMES_EXPERIMENTAL],this.project)}))}}t.DebugInHermesExponent=b;class S extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugInExponentWebExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_WEB_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_WEB_EXPERIMENTAL],this.project)}))}}t.DebugInExponentWeb=S;class C extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugAndroidHermesExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES],this.project)}))}}t.DebugAndroidHermesExperimental=C;class A extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugDirectIosExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL],this.project)}))}}t.DebugDirectIosExperimental=A;class T extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugIosHermesExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES],this.project)}))}}t.DebugIosHermesExperimental=T;class w extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugMacosHermesExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL],this.project)}))}}t.DebugMacosHermesExperimental=w;class P extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.debugWindowsHermesExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL],this.project)}))}}t.DebugWindowsHermesExperimental=P;class O extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.runAndroid",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID],this.project)}))}}t.RunAndroid=O;class I extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.runIos",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.RUN_IOS)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.RUN_IOS],this.project)}))}}t.RunIos=I;class R extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.runAndroidHermesExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES],this.project)}))}}t.RunAndroidHermesExperimental=R;class D extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.runIosHermesExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES],this.project)}))}}t.RunIosHermesExperimental=D;class N extends l.Command{constructor(){super(...arguments),this.codeName="debugScenario.runDirectIosExperimental",this.label="",this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.DebuggingCommandFailed,u.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),p(u.debugConfigurations[u.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL],this.project)}))}}t.RunDirectIosExperimental=N},8018:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.StopElementInspector=t.RunElementInspector=void 0;const i=r(2081),s=r(3403),a=r(9897),c=r(312),u=r(6377),l=r(1376),d=r(9144),p=r(711);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/elementInspector.ts"));const h=s.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/elementInspector.ts"));let f;class g extends p.Command{constructor(){super(...arguments),this.codeName="runInspector",this.label="Run Element Inspector",this.requiresTrust=!1,this.requiresProject=!1,this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.CommandFailed,h(0,null))}baseFn(){return n(this,void 0,void 0,(function*(){const e=d.OutputChannelLogger.getMainChannel();if(u.TipNotificationService.getInstance().setKnownDateForFeatureById("elementInspector"),f)return void e.info(h(1,null));const t=process.env,{ATOM_SHELL_INTERNAL_RUN_AS_NODE:r,ELECTRON_RUN_AS_NODE:n}=t,s=o(t,["ATOM_SHELL_INTERNAL_RUN_AS_NODE","ELECTRON_RUN_AS_NODE"]),p=l.HostPlatform.getNpmCliCommand("react-devtools");if(f=i.spawn(p,[],{env:s}),!f.pid)throw f=void 0,a.ErrorHelper.getInternalError(c.InternalErrorCode.ReactDevtoolsIsNotInstalled);f.stdout.on("data",(t=>{e.info(t)})),f.stderr.on("data",(t=>{e.error(t)})),f.once("exit",(()=>{f=void 0}))}))}}t.RunElementInspector=g;class m extends p.Command{constructor(){super(...arguments),this.codeName="stopInspector",this.label="Stop Element Inspector",this.requiresTrust=!1,this.requiresProject=!1,this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.CommandFailed,h(2,null))}baseFn(){return n(this,void 0,void 0,(function*(){null==f||f.kill()}))}}t.StopElementInspector=m},4602:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(4381),t),o(r(8018),t),o(r(6712),t),o(r(7567),t),o(r(1796),t),o(r(6606),t),o(r(3887),t),o(r(2486),t),o(r(143),t),o(r(7380),t),o(r(1736),t),o(r(3141),t),o(r(6927),t),o(r(6903),t),o(r(1577),t),o(r(3208),t),o(r(4317),t),o(r(5878),t),o(r(1722),t),o(r(3662),t),o(r(3641),t),o(r(1654),t),o(r(1428),t),o(r(5141),t),o(r(6647),t)},6647:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallExpoGoApplication=void 0;const o=r(9491),i=r(7147),s=r(5687),a=r(2037),c=r(9496),u=r(3403),l=r(9144),d=r(9897),p=r(312),h=r(2705),f=r(8016),g=r(711);u.config({messageFormat:u.MessageFormat.bundle,bundleFormat:u.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/installExpoGoApplication.ts"));const m=u.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/installExpoGoApplication.ts")),_=l.OutputChannelLogger.getMainChannel();class v extends g.Command{constructor(){super(...arguments),this.codeName="installExpoGoApplication",this.label="Download and install Expo Go on simulator or device",this.error=d.ErrorHelper.getInternalError(p.InternalErrorCode.FailedToInstallExpoGo)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=yield c.window.showQuickPick(["Android","iOS"],{placeHolder:"Select type for mobile OS"}),t=yield c.window.showQuickPick(["Manual","Auto"],{placeHolder:"How to install application"}),r=this.project.getExponentHelper();_.info(m(0,null));const u=yield r.isExpoManagedApp(!0),l=yield function(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const n={rejectUnauthorized:!1},o=s.get(e,n,(e=>{let n="";e.setEncoding("utf8"),e.on("data",(e=>{n+=e})),e.on("end",(()=>t(n))),e.on("error",r)}));o.on("error",r),o.end()}))}))}("https://api.expo.dev/v2/versions"),d=JSON.parse(l);if(!u)throw new Error(m(10,null));{const n=yield r.exponentSdk(!0),o=d.sdkVersions[n];if("Android"==e){c.window.showInformationMessage("Downloading Expo Go for Android."),_.logStream(m(1,null));const e=o.androidClientUrl,r=o.androidClientVersion,n=`${this.project.getPackager().getProjectPath()}/expogo_${r}.apk`;if(!i.existsSync(n))try{yield(0,h.downloadExpoGo)(e,n)}catch(e){throw new Error(m(2,null))}if("Auto"==t)try{yield(0,f.installAndroidApplication)(this.project,n)}catch(e){throw new Error(m(3,null))}else _.logStream(m(4,null))}else{if("iOS"!=e)return;{"darwin"!=a.platform()&&_.warning(m(5,null)),c.window.showInformationMessage("Downloading Expo Go for iOS."),_.logStream(m(6,null));const e=o.iosClientUrl,r=o.iosClientVersion,n=`${this.project.getPackager().getProjectPath()}/expogo_${r}.tar.gz`;if(!i.existsSync(n))try{yield(0,h.downloadExpoGo)(e,`${this.project.getPackager().getProjectPath()}/expogo_${r}.tar.gz`)}catch(e){throw new Error(m(7,null))}if("Auto"==t&&"darwin"==a.platform())try{yield(0,f.installiOSApplication)(this.project,n)}catch(e){throw new Error(m(8,null))}else _.logStream(m(9,null))}}}}))}}t.InstallExpoGoApplication=v},6712:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchAndroidEmulator=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(166),c=r(8943),u=r(7005),l=r(711);class d extends l.Command{constructor(){super(...arguments),this.codeName="launchAndroidSimulator",this.label="Launch Android Emulator",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToStartAndroidEmulator)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=this.project.getPackager().getProjectPath(),t=this.project.getOrUpdateNodeModulesRoot(),r=new a.AdbHelper(e,t),n=new c.AndroidTargetManager(r);yield n.collectTargets(u.TargetType.Simulator),yield n.selectAndPrepareTarget((e=>e.isVirtualTarget))}))}}t.LaunchAndroidEmulator=d},7567:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchIOSSimulator=void 0;const o=r(9897),i=r(312),s=r(7005),a=r(8287),c=r(711);class u extends c.Command{constructor(){super(...arguments),this.codeName="launchIOSSimulator",this.label="Launch iOS Simulator",this.requiresProject=!1,this.error=o.ErrorHelper.getInternalError(i.InternalErrorCode.FailedToStartIOSSimulator)}baseFn(){return n(this,void 0,void 0,(function*(){const e=new a.IOSTargetManager;yield e.collectTargets(s.TargetType.Simulator),yield e.selectAndPrepareTarget((e=>e.isVirtualTarget))}))}}t.LaunchIOSSimulator=u},1796:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StopNetworkInspector=t.StartNetworkInspector=void 0;const o=r(9491),i=r(3403),s=r(9496),a=r(9897),c=r(312),u=r(166),l=r(8631),d=r(233),p=r(9144),h=r(2501),f=r(4800),g=r(2162),m=r(711);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/networkInspector.ts"));const _=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/networkInspector.ts"));let v;class E extends m.Command{constructor(){super(...arguments),this.codeName="startNetworkInspector",this.label="Run Network Inspector",this.requiresTrust=!1,this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.CouldNotStartNetworkInspector)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=p.OutputChannelLogger.getMainChannel();if(v)return void e.info(_(0,null));const t=new u.AdbHelper(this.project.getPackager().getProjectPath(),this.project.getOrUpdateNodeModulesRoot()),r=new h.NetworkInspectorServer,n=new l.AndroidDeviceTracker(t),i="darwin"===process.platform&&new d.IOSDeviceTracker||void 0;v={networkInspector:r,androidDeviceTracker:n,iOSDeviceTracker:i};try{i&&(yield i.start()),yield n.start(),yield r.start(t),s.commands.executeCommand("setContext",f.CONTEXT_VARIABLES_NAMES.IS_RNT_NETWORK_INSPECTOR_RUNNING,!0)}catch(e){throw yield b(),e}}))}}t.StartNetworkInspector=E;class y extends m.Command{constructor(){super(...arguments),this.codeName="stopNetworkInspector",this.label="Stop Network Inspector",this.requiresTrust=!1,this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.CouldNotStopNetworkInspector)}baseFn(){return n(this,void 0,void 0,(function*(){yield b()}))}}function b(){var e,t,r;return n(this,void 0,void 0,(function*(){null===(e=null==v?void 0:v.androidDeviceTracker)||void 0===e||e.stop(),null===(t=null==v?void 0:v.iOSDeviceTracker)||void 0===t||t.stop(),yield null===(r=null==v?void 0:v.networkInspector)||void 0===r?void 0:r.stop(),v=void 0,g.InspectorViewFactory.clearCache(),s.commands.executeCommand("setContext",f.CONTEXT_VARIABLES_NAMES.IS_RNT_NETWORK_INSPECTOR_RUNNING,!1)}))}t.StopNetworkInspector=y},1654:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenEASProject=void 0;const o=r(9491),i=r(3403),s=r(9496),a=r(9144),c=r(9897),u=r(312),l=r(2626);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/openEASProject.ts"));const d=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/openEASProject.ts")),p=a.OutputChannelLogger.getMainChannel();class h extends l.ReactNativeCommand{constructor(){super(...arguments),this.codeName="openEASProjectInWebPage",this.label="Open the eas project in a web page",this.error=c.ErrorHelper.getInternalError(u.InternalErrorCode.FailedToOpenProjectPage)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=this.project.getExponentHelper();p.info(d(0,null));if(yield e.isExpoManagedApp(!0))try{let t=null;yield e.getExpoEasProjectId().then((e=>{t=e}));let r=null;yield e.getExpoEasProjectOwner().then((e=>{r=e}));let n=null;if(yield e.getExpoEasProjectName().then((e=>{n=e})),null==t||null==r){const e=d(1,null);s.window.showErrorMessage(e),p.error(e)}else if(null!=n){const e=`https://expo.dev/accounts/${r}/projects/${n}`;yield s.env.openExternal(s.Uri.parse(e))}}catch(e){p.error(d(2,null))}}))}}t.OpenEASProject=h},5141:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenRNUpgradeHelper=void 0;const o=r(9491),i=r(3403),s=r(9496),a=r(9144),c=r(9897),u=r(312),l=r(9901),d=r(711);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/openRNUpgradeHelper.ts"));const p=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/openRNUpgradeHelper.ts")),h=a.OutputChannelLogger.getMainChannel();class f extends d.Command{constructor(){super(...arguments),this.codeName="openRNUpgradeHelper",this.label="Open react native upgrade helper in web page",this.error=c.ErrorHelper.getInternalError(u.InternalErrorCode.FailedToOpenRNUpgradeHelper)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);yield(0,l.wait)();const e=yield s.window.showQuickPick(["React Native","React Native Windows","React Native MacOS"],{placeHolder:"Select type for your react native project"});switch(h.info(p(0,null)),e){case"React Native":yield s.env.openExternal(s.Uri.parse("https://react-native-community.github.io/upgrade-helper/?package=react-native"));break;case"React Native Windows":yield s.env.openExternal(s.Uri.parse("https://react-native-community.github.io/upgrade-helper/?package=react-native-windows&language=cpp"));break;case"React Native MacOS":yield s.env.openExternal(s.Uri.parse("https://react-native-community.github.io/upgrade-helper/?package=react-native-macos"))}}))}}t.OpenRNUpgradeHelper=f},6606:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishToExpHost=void 0;const o=r(9491),i=r(3403),s=r(9496),a=r(9144),c=r(9897),u=r(312),l=r(7361),d=r(7380),p=r(4639),h=r(2626);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/publishToExpHost.ts"));const f=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/publishToExpHost.ts")),g=a.OutputChannelLogger.getMainChannel();class m extends h.ReactNativeCommand{constructor(){super(...arguments),this.codeName="publishToExpHost",this.label="Publish To Expo Host",this.error=c.ErrorHelper.getInternalError(u.InternalErrorCode.FailedToPublishToExpHost)}baseFn(){return n(this,void 0,void 0,(function*(){(yield this.executePublishToExpHost())||g.warning(f(0,null))}))}executePublishToExpHost(){return n(this,void 0,void 0,(function*(){o(this.project),g.info(f(1,null));const e=yield(0,p.loginToExponent)(this.project);g.debug(`Publishing as ${e.username}...`),yield d.RunExponent.prototype.baseFn.bind(this)();const t=yield l.publish(this.project.getWorkspaceFolderUri().fsPath);if(t.err||!t.url)return!1;const r=f(2,null,t.url);return g.info(r),s.window.showInformationMessage(r),!0}))}}t.PublishToExpHost=m},3887:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadApp=void 0;const o=r(9491),i=r(3403),s=r(9897),a=r(312),c=r(9327),u=r(7599),l=r(7833),d=r(9911),p=r(5070),h=r(4639),f=r(711);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/reloadApp.ts"));const g=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/reloadApp.ts"));class m extends f.Command{constructor(){super(...arguments),this.codeName="reloadApp",this.requiresTrust=!1,this.label="ReloadApp",this.error=s.ErrorHelper.getInternalError(a.InternalErrorCode.CommandFailed,g(0,null))}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);if(new l.AndroidPlatform((0,h.getRunOptions)(this.project,u.PlatformType.Android),{packager:this.project.getPackager()}).reloadApp().catch((()=>{})),"win32"===process.platform){const e=this.project.getOrUpdateNodeModulesRoot(),t=yield c.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(e,[c.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS]);if(!c.ProjectVersionHelper.isVersionError(t.reactNativeWindowsVersion)){new p.WindowsPlatform((0,h.getRunOptions)(this.project,u.PlatformType.Windows),{packager:this.project.getPackager()}).reloadApp(this.project).catch((()=>{}))}}else if("darwin"===process.platform){new d.IOSPlatform((0,h.getRunOptions)(this.project,u.PlatformType.iOS),{packager:this.project.getPackager()}).reloadApp(this.project).catch((()=>{}))}}))}}t.ReloadApp=m},2486:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RestartPackager=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(2463),u=r(2626);class l extends u.ReactNativeCommand{constructor(){super(...arguments),this.codeName="restartPackager",this.label="Restart Packager",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToRestartPackager)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=this.project.getOrUpdateNodeModulesRoot();return yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(e),yield this.project.getPackager().restart(c.SettingsHelper.getPackagerPort(this.project.getWorkspaceFolderUri().fsPath))}))}}t.RestartPackager=l},1428:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RevertOpenModule=void 0;const o=r(9491),i=r(1017),s=r(7147),a=r(6625),c=r(3403),u=r(9144),l=r(9897),d=r(312),p=r(9327),h=r(9185),f=r(2626);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/revertOpenModule.ts"));const g=c.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/revertOpenModule.ts")),m=u.OutputChannelLogger.getMainChannel();class _ extends f.ReactNativeCommand{constructor(){super(...arguments),this.codeName="revertOpenModule",this.label="Revert extension input in open package module",this.error=l.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToRevertOpenModule)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=this.project.getWorkspaceFolder().uri.fsPath,t=(0,h.findFileInFolderHierarchy)(e,"package.json"),r=t?JSON.parse(s.readFileSync(t,"utf-8")).dependencies["react-native"]:null,n=a.gte(r,"0.60.0")||p.ProjectVersionHelper.isCanaryVersion(r)?"open":"opn",c=i.resolve(e,"node_modules",n);if(s.existsSync(c)){const e=i.resolve(c,"open-main.js");if(s.existsSync(e))try{yield s.unlinkSync(e)}catch(e){m.error(g(0,null))}else m.info(g(1,null));const t=i.resolve(c,"package.json"),r=JSON.parse(s.readFileSync(t,"utf-8"));if("open-main.js"==r.main)try{delete r.main,yield s.writeFileSync(t,JSON.stringify(r))}catch(e){m.error(g(2,null))}else m.info(g(3,null));m.info(g(4,null))}else m.error(g(5,null))}))}}t.RevertOpenModule=_},143:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunAndroidSimulator=t.RunAndroidDevice=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(4724),u=r(7833),l=r(7005),d=r(7599),p=r(4639),h=r(2626);class f extends h.ReactNativeCommand{constructor(){super(...arguments),this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToRunOnAndroid)}onBeforeExecute(){const e=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield e.onBeforeExecute.call(this),o(this.project);const t=this.project.getOrUpdateNodeModulesRoot(),r=yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t);this.project.setReactNativeVersions(r),c.TargetPlatformHelper.checkTargetPlatformSupport(d.PlatformType.Android)}))}}t.RunAndroidDevice=class extends f{constructor(){super(...arguments),this.codeName="runAndroidDevice",this.label="Run Android on Device"}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),yield g(l.TargetType.Device,this.project)}))}};function g(e,t){return n(this,void 0,void 0,(function*(){const r=new u.AndroidPlatform((0,p.getRunOptions)(t,d.PlatformType.Android,e),{packager:t.getPackager()});yield r.resolveMobileTarget(e),yield r.beforeStartPackager(),yield r.startPackager(),yield r.runApp(!0),yield r.disableJSDebuggingMode()}))}t.RunAndroidSimulator=class extends f{constructor(){super(...arguments),this.codeName="runAndroidSimulator",this.label="Run Android on Emulator"}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),yield g(l.TargetType.Simulator,this.project)}))}}},7380:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunExponent=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(1837),u=r(7599),l=r(4639),d=r(2626);class p extends d.ReactNativeCommand{constructor(){super(...arguments),this.codeName="runExponent",this.label="Run Expo",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToRunExponent)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=this.project.getOrUpdateNodeModulesRoot(),t=yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(e);this.project.setReactNativeVersions(t);const r=new c.ExponentPlatform((0,l.getRunOptions)(this.project,u.PlatformType.Exponent),{packager:this.project.getPackager()});yield r.beforeStartPackager(),yield r.startPackager(),yield r.runApp()}))}onBeforeExecute(){const e=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield e.onBeforeExecute.call(this),o(this.project),yield(0,l.loginToExponent)(this.project)}))}}t.RunExponent=p},1736:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunIosSimulator=t.RunIosDevice=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(4724),u=r(7005),l=r(9911),d=r(7599),p=r(4639),h=r(2626);class f extends h.ReactNativeCommand{constructor(){super(...arguments),this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToRunOnIos)}onBeforeExecute(){const e=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield e.onBeforeExecute.call(this),o(this.project);const t=this.project.getOrUpdateNodeModulesRoot(),r=yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t);this.project.setReactNativeVersions(r),c.TargetPlatformHelper.checkTargetPlatformSupport(d.PlatformType.iOS)}))}}t.RunIosDevice=class extends f{constructor(){super(...arguments),this.codeName="runIosDevice",this.label="Run iOS on Device"}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),yield g(u.TargetType.Device,this.project)}))}};function g(e,t){return n(this,void 0,void 0,(function*(){const r=new l.IOSPlatform((0,p.getRunOptions)(t,d.PlatformType.iOS,e),{packager:t.getPackager()});try{yield r.resolveMobileTarget(e),yield r.beforeStartPackager(),yield r.startPackager(),yield r.disableJSDebuggingMode()}catch(e){}yield r.runApp()}))}t.RunIosSimulator=class extends f{constructor(){super(...arguments),this.codeName="runIosSimulator",this.label="Run iOS on Simulator"}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),yield g(u.TargetType.Simulator,this.project)}))}}},3141:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunMacOS=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(4724),u=r(7599),l=r(147),d=r(6377),p=r(4639),h=r(2626);class f extends h.ReactNativeCommand{constructor(){super(...arguments),this.codeName="runMacOS",this.label="Run MacOS",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToRunOnMacOS)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=new l.MacOSPlatform((0,p.getRunOptions)(this.project,u.PlatformType.macOS),{packager:this.project.getPackager()});try{yield e.beforeStartPackager(),yield e.startPackager(),yield e.disableJSDebuggingMode()}catch(e){}yield e.runApp()}))}onBeforeExecute(){const e=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield e.onBeforeExecute.call(this),o(this.project),d.TipNotificationService.getInstance().setKnownDateForFeatureById("debuggingRNWAndMacOSApps");const t=[a.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS];c.TargetPlatformHelper.checkTargetPlatformSupport(u.PlatformType.macOS);const r=yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(this.project.getOrUpdateNodeModulesRoot(),t);this.project.setReactNativeVersions(r)}))}}t.RunMacOS=f},6927:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunWindows=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(4724),u=r(7599),l=r(6377),d=r(5070),p=r(4639),h=r(2626);class f extends h.ReactNativeCommand{constructor(){super(...arguments),this.codeName="runWindows",this.label="Run Windows",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToRunOnWindows)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=new d.WindowsPlatform((0,p.getRunOptions)(this.project,u.PlatformType.Windows),{packager:this.project.getPackager()});yield e.beforeStartPackager(),yield e.startPackager(),yield e.runApp(!1)}))}onBeforeExecute(){const e=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield e.onBeforeExecute.call(this),o(this.project),l.TipNotificationService.getInstance().setKnownDateForFeatureById("debuggingRNWAndMacOSApps");const t=[a.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS];c.TargetPlatformHelper.checkTargetPlatformSupport(u.PlatformType.Windows);const r=yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(this.project.getOrUpdateNodeModulesRoot(),t);this.project.setReactNativeVersions(r)}))}}t.RunWindows=f},6903:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectAndInsertDebugConfiguration=void 0;const o=r(9491),i=r(9496),s=r(9897),a=r(312),c=r(6465),u=r(643),l=r(711);class d extends l.Command{constructor(){super(...arguments),this.codeName="selectAndInsertDebugConfiguration",this.label="",this.requiresTrust=!1,this.requiresProject=!1,this.error=s.ErrorHelper.getInternalError(a.InternalErrorCode.CommandFailed)}baseFn(e,t,r){return n(this,void 0,void 0,(function*(){if(o(c.debugConfigProvider&&e&&t&&r,s.ErrorHelper.getInternalError(a.InternalErrorCode.CommandFailed)),!i.window.activeTextEditor||i.window.activeTextEditor.document!==e)return;const n=i.workspace.getWorkspaceFolder(e.uri),l=yield c.debugConfigProvider.provideDebugConfigurationSequentially(n,r);if(r.isCancellationRequested||!l)return;const d=u.LaunchJsonCompletionHelper.getCursorPositionInConfigurationsArray(e,t);if(!d)return;const p=u.LaunchJsonCompletionHelper.isCommaImmediatelyBeforeCursor(e,t)?"BeforeCursor":void 0,h=u.LaunchJsonCompletionHelper.getTextForInsertion(l,d,p),f=new i.WorkspaceEdit;f.insert(e.uri,t,h),yield i.workspace.applyEdit(f),i.commands.executeCommand("editor.action.formatDocument").then((()=>{}),(()=>{}))}))}}t.SelectAndInsertDebugConfiguration=d},1577:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDevMenu=void 0;const o=r(9491),i=r(3403),s=r(9897),a=r(312),c=r(7599),u=r(7833),l=r(9911),d=r(4639),p=r(711);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/showDevMenu.ts"));const h=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/showDevMenu.ts"));class f extends p.Command{constructor(){super(...arguments),this.codeName="showDevMenu",this.requiresTrust=!1,this.label="Show Dev Menu",this.error=s.ErrorHelper.getInternalError(a.InternalErrorCode.CommandFailed,h(0,null))}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);if(new u.AndroidPlatform((0,d.getRunOptions)(this.project,c.PlatformType.Android),{packager:this.project.getPackager()}).showDevMenu().catch((()=>{})),"darwin"===process.platform){new l.IOSPlatform((0,d.getRunOptions)(this.project,c.PlatformType.iOS),{packager:this.project.getPackager()}).showDevMenu(this.project).catch((()=>{}))}process.platform}))}}t.ShowDevMenu=f},3208:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StartLogCatMonitor=void 0;const o=r(9491),i=r(3403),s=r(9496),a=r(9897),c=r(312),u=r(166),l=r(8943),d=r(5618),p=r(3773),h=r(6377),f=r(2463),g=r(9144),m=r(711);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/startLogCatMonitor.ts"));const _=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/startLogCatMonitor.ts"));class v extends m.Command{constructor(){super(...arguments),this.codeName="startLogCatMonitor",this.label="Run React Native LogCat Monitor",this.requiresTrust=!1,this.error=a.ErrorHelper.getInternalError(c.InternalErrorCode.AndroidCouldNotStartLogCatMonitor)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project);const e=g.OutputChannelLogger.getMainChannel();h.TipNotificationService.getInstance().setKnownDateForFeatureById("logCatMonitor");const t=this.project.getPackager().getProjectPath(),r=this.project.getOrUpdateNodeModulesRoot(),n=new u.AdbHelper(t,r),i=new l.AndroidTargetManager(n),a=yield i.selectAndPrepareTarget((e=>e.isOnline));if(!a)return void s.window.showErrorMessage(_(0,null));p.LogCatMonitorManager.delMonitor(a.id);const c=f.SettingsHelper.getLogCatFilteringArgs(this.project.getWorkspaceFolderUri()),m=new d.LogCatMonitor(a.id,n,c);p.LogCatMonitorManager.addMonitor(m),m.start().catch((()=>e.warning(_(1,null))))}))}}t.StartLogCatMonitor=v},4317:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StartPackager=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(9327),c=r(2626);class u extends c.ReactNativeCommand{constructor(){super(...arguments),this.codeName="startPackager",this.label="Start Packager",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToStartPackager)}baseFn(){return n(this,void 0,void 0,(function*(){o(this.project),yield a.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(this.project.getOrUpdateNodeModulesRoot()),(yield this.project.getPackager().isRunning())&&(yield this.project.getPackager().stop()),yield this.project.getPackager().start()}))}}t.StartPackager=u},5878:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StopLogCatMonitor=void 0;const o=r(9491),i=r(9496),s=r(9897),a=r(312),c=r(3773),u=r(9144),l=r(711);class d extends l.Command{constructor(){super(...arguments),this.codeName="stopLogCatMonitor",this.label="Stop React Native LogCat Monitor",this.requiresTrust=!1,this.requiresProject=!1,this.error=s.ErrorHelper.getInternalError(a.InternalErrorCode.AndroidCouldNotStopLogCatMonitor)}baseFn(){return n(this,void 0,void 0,(function*(){const e=yield function(){const e=u.OutputChannelLogger.getMainChannel(),t=Object.keys(c.LogCatMonitorManager.logCatMonitorsCache);if(1===t.length)return e.debug(`Command palette: once LogCat monitor ${t[0]}`),c.LogCatMonitorManager.logCatMonitorsCache[t[0]];if(t.length>1)return new Promise(((e,r)=>{i.window.showQuickPick(t).then(e,r)})).then((t=>n(this,void 0,void 0,(function*(){return t||(yield new Promise((()=>{}))),o(t,"Selection canceled"),e.debug(`Command palette: selected LogCat monitor ${t}`),c.LogCatMonitorManager.logCatMonitorsCache[t]}))));throw s.ErrorHelper.getInternalError(a.InternalErrorCode.AndroidCouldNotFindActiveLogCatMonitor)}();c.LogCatMonitorManager.delMonitor(e.deviceId)}))}}t.StopLogCatMonitor=d},1722:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StopPackager=void 0;const o=r(9491),i=r(9897),s=r(312),a=r(2626);class c extends a.ReactNativeCommand{constructor(){super(...arguments),this.codeName="stopPackager",this.label="Stop Packager",this.error=i.ErrorHelper.getInternalError(s.InternalErrorCode.FailedToStopPackager),this.requiresProject=!1,this.requiresTrust=!1}onBeforeExecute(e){const t=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield t.onBeforeExecute.call(this,e),this.project=e||(yield this.selectProject())}))}baseFn(){var e;return n(this,void 0,void 0,(function*(){o(this.project),yield null===(e=this.project.getPackager())||void 0===e?void 0:e.stop()}))}}t.StopPackager=c},3662:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDevEnvironment=void 0;const o=r(9897),i=r(312),s=r(9327),a=r(1334),c=r(1950),u=r(9957),l=r(2463),d=r(711);class p extends d.Command{constructor(){super(...arguments),this.codeName="testDevEnvironment",this.label="Check development environment configuration",this.requiresTrust=!1,this.requiresProject=!1,this.error=o.ErrorHelper.getInternalError(i.InternalErrorCode.FailedToTestDevEnvironment)}createRNProjectObserver(e){return n(this,void 0,void 0,(function*(){const t=e.getOrUpdateNodeModulesRoot(),r=l.SettingsHelper.getReactNativeProjectRoot(e.getWorkspaceFolderUri().fsPath),n=yield s.ProjectVersionHelper.getReactNativePackageVersionsFromNodeModules(t,[s.REACT_NATIVE_PACKAGES.REACT_NATIVE_WINDOWS,s.REACT_NATIVE_PACKAGES.REACT_NATIVE_MACOS]);return new a.RNProjectObserver(r,n)}))}baseFn(){return n(this,void 0,void 0,(function*(){let e;try{e=yield this.selectProject()}catch(e){if(e.errorCode!==i.InternalErrorCode.WorkspaceNotFound)throw e}const t=e&&(yield this.createRNProjectObserver(e).catch((()=>{}))),r={[u.ValidationCategoryE.Expo]:(yield null==e?void 0:e.getPackager().getExponentHelper().isExpoManagedApp(!1).catch((()=>!1)))||!1,[u.ValidationCategoryE.Windows]:t&&t.isRNWindowsProject||!1,[u.ValidationCategoryE.macOS]:t&&t.isRNMacosProject||!1};e&&t?yield(0,c.runChecks)(r,(0,s.RNPackageVersionsToPackageVersion)(t.rnPackageVersions)):yield(0,c.runChecks)(r)}))}}t.TestDevEnvironment=p},711:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Command=void 0;const o=r(9491),i=r(9496),s=r(9897),a=r(312),c=r(7599),u=r(9144),l=r(4639);class d{static formInstance(){const e=this,t=d.instances.get(e)||new e;return d.instances.set(e,t),t}get platform(){return[c.PlatformType.Android,c.PlatformType.iOS,c.PlatformType.Exponent,c.PlatformType.macOS,c.PlatformType.Windows].find((e=>this.codeName.toLowerCase().includes(e.toLowerCase())))||""}constructor(){this.requiresProject=!0,this.requiresTrust=!0,this.register=(()=>{let e=!1;return t=>(this.entryPointHandler=t,o(!e,"Command can only be registered once"),e=!0,i.commands.registerCommand(`reactNative.${this.codeName}`,this.createHandler()))})()}createHandler(e=this.baseFn.bind(this)){return(...t)=>n(this,void 0,void 0,(function*(){o(this.entryPointHandler,"this.entryPointHandler is not defined");u.OutputChannelLogger.getMainChannel().debug(`Run command: ${this.codeName}`),yield this.entryPointHandler.runFunctionWExtProps(`commandPalette.${this.codeName}`,{platform:{value:this.platform,isPii:!1}},this.error,(r=>n(this,void 0,void 0,(function*(){try{yield this.onBeforeExecute(...t),yield e.bind(this)(...t)}catch(e){if(e.errorCode===a.InternalErrorCode.CommandCanceled)return void r.addError(e);throw e}}))).bind(this))}))}onBeforeExecute(...e){var t;return n(this,void 0,void 0,(function*(){if(this.requiresProject&&(this.project=yield this.selectProject()),this.requiresTrust&&!function(){if("boolean"==typeof i.workspace.isTrusted)return i.workspace.isTrusted;return!0}())throw s.ErrorHelper.getInternalError(a.InternalErrorCode.WorkspaceIsNotTrusted,(null===(t=this.project)||void 0===t?void 0:t.getPackager().getProjectPath())||void 0,this.label)}))}selectProject(){return n(this,void 0,void 0,(function*(){try{return yield(0,l.selectProject)()}catch(e){if(e.errorCode===a.InternalErrorCode.UserInputCanceled)throw s.ErrorHelper.getNestedError(e,a.InternalErrorCode.CommandCanceled,this.label);throw e}}))}executeLocally(...e){return n(this,void 0,void 0,(function*(){yield this.onBeforeExecute(...e),yield this.baseFn(...e)}))}}d.instances=new Map,t.Command=d},4639:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.selectProject=t.loginToExponent=t.getRunOptions=void 0;const o=r(9496),i=r(3403),s=r(7599),a=r(9144),c=r(2463),u=r(7005),l=r(5458),d=r(8730),p=r(9897),h=r(312);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/commands/util/index.ts"));const f=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/commands/util/index.ts"));t.getRunOptions=function(e,t,r=u.TargetType.Simulator){const n=e.getWorkspaceFolderUri(),o=Object.assign({platform:t,packagerPort:c.SettingsHelper.getPackagerPort(n.fsPath),runArguments:c.SettingsHelper.getRunArgs(t,r,n),env:c.SettingsHelper.getEnvArgs(t,r,n),envFile:c.SettingsHelper.getEnvFile(t,r,n),projectRoot:c.SettingsHelper.getReactNativeProjectRoot(n.fsPath),nodeModulesRoot:e.getOrUpdateNodeModulesRoot(),reactNativeVersions:e.getReactNativeVersions()||{reactNativeVersion:"",reactNativeWindowsVersion:"",reactNativeMacOSVersion:""},workspaceRoot:e.getWorkspaceFolderUri().fsPath},t===s.PlatformType.iOS&&"device"===r&&{target:"device"});return l.CommandExecutor.ReactNativeCommand=c.SettingsHelper.getReactNativeGlobalCommandName(e.getWorkspaceFolderUri()),o},t.loginToExponent=function(e){return n(this,void 0,void 0,(function*(){try{return yield e.getExponentHelper().loginToExponent(((e,t)=>new Promise(((r,n)=>{o.window.showInputBox({placeHolder:e,password:t}).then(r,n)})).then((e=>e||""))),(e=>new Promise(((t,r)=>{o.window.showInformationMessage(e).then(t,r)})).then((e=>e||""))))}catch(e){throw a.OutputChannelLogger.getMainChannel().warning(f(0,null)),e}}))},t.selectProject=function(){return n(this,void 0,void 0,(function*(){const e=a.OutputChannelLogger.getMainChannel(),t=Object.keys(d.ProjectsStorage.projectsCache);if(0===t.length)throw p.ErrorHelper.getInternalError(h.InternalErrorCode.WorkspaceNotFound,"Current workspace does not contain React Native projects.");if(1===t.length)return e.debug(`Command palette: once project ${t[0]}`),d.ProjectsStorage.projectsCache[t[0]];const r=yield o.window.showQuickPick(t);if(!r)throw p.ErrorHelper.getInternalError(h.InternalErrorCode.UserInputCanceled);return e.debug(`Command palette: selected project ${r}`),d.ProjectsStorage.projectsCache[r]}))}},2626:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeCommand=void 0;const o=r(9491),i=r(9496),s=r(7551),a=r(3821),c=r(9144),u=r(2463),l=r(711);class d extends l.Command{executeLocally(...e){return n(this,void 0,void 0,(function*(){yield this.onBeforeExecute(...e),yield this.executeInContext(this.baseFn.bind(this,...e))}))}onBeforeExecute(...e){const t=Object.create(null,{onBeforeExecute:{get:()=>super.onBeforeExecute}});return n(this,void 0,void 0,(function*(){yield t.onBeforeExecute.call(this,...e)}))}createHandler(e=this.baseFn.bind(this)){return super.createHandler(((...t)=>n(this,void 0,void 0,(function*(){yield this.executeInContext(e.bind(this,...t))}))))}executeInContext(e){return n(this,void 0,void 0,(function*(){o(this.project);const t=c.OutputChannelLogger.getMainChannel(),r=u.SettingsHelper.getReactNativeProjectRoot(this.project.getWorkspaceFolder().uri.fsPath),l=yield s.ReactNativeProjectHelper.isReactNativeProject(r);t.debug(`Command palette: run project ${r} in context`),yield a.TelemetryHelper.generate("RNCommand",{platform:{value:this.platform,isPii:!1}},(o=>n(this,void 0,void 0,(function*(){o.add("command",this.codeName,!1),o.add("isRNProject",l,!1),l?(t.setFocusOnLogChannel(),yield e()):i.window.showErrorMessage(`${r} workspace is not a React Native project.`)}))))}))}}t.ReactNativeCommand=d},4379:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachConfigProvider=void 0;const o=r(3350),i=r(3757);class s extends i.BaseConfigProvider{constructor(){super(),this.defaultAddress="localhost",this.maxStepCount=3}buildConfiguration(e,t){return n(this,void 0,void 0,(function*(){this.maxStepCount=3,t.config={};const r={name:"Attach to application",request:"attach",type:o.DEBUG_TYPES.REACT_NATIVE,cwd:"${workspaceFolder}"};return t.scenarioType=o.DebugScenarioType.AttachApp,yield this.configurationProviderHelper.selectApplicationType(e,r,1,this.maxStepCount),Object.assign(t.config,r),t.config.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT?(this.maxStepCount++,()=>this.configureDirectPlatform(e,t.config)):()=>this.configureAddress(e,t.config)}))}configureDirectPlatform(e,t){return n(this,void 0,void 0,(function*(){return delete t.platform,yield this.configurationProviderHelper.selectPlatform(e,t,o.platformTypeDirectPickConfig,2,this.maxStepCount),t.platform?t.useHermesEngine=!1:(delete t.platform,delete t.useHermesEngine),()=>this.configureAddress(e,t)}))}configureAddress(e,t){return n(this,void 0,void 0,(function*(){return yield this.configurationProviderHelper.configureAddress(e,t,t.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT?3:2,this.maxStepCount,this.defaultAddress),()=>this.configurePort(e,t)}))}configurePort(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.configurePort(e,t,t.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT?4:3,this.maxStepCount)}))}}t.AttachConfigProvider=s},3757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfigProvider=void 0;const n=r(3292);t.BaseConfigProvider=class{constructor(){this.configurationProviderHelper=new n.ConfigurationProviderHelper}}},9139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigProviderFactory=void 0;const n=r(3350),o=r(3850),i=r(8312),s=r(4379);t.ConfigProviderFactory=class{static create(e){switch(e){case n.DebugScenarioType.RunApp:return new o.RunConfigProvider;case n.DebugScenarioType.DebugApp:return new i.DebugConfigProvider;case n.DebugScenarioType.AttachApp:return new s.AttachConfigProvider;default:throw new Error(`Couldn't find ${e} config adapter type`)}}}},8312:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConfigProvider=void 0;const o=r(3350),i=r(7599),s=r(3757);class a extends s.BaseConfigProvider{constructor(){super(),this.maxStepCount=2}buildConfiguration(e,t){return n(this,void 0,void 0,(function*(){t.config={};const r={name:"Debug application",request:"launch",type:o.DEBUG_TYPES.REACT_NATIVE,cwd:"${workspaceFolder}"};return t.scenarioType=o.DebugScenarioType.DebugApp,yield this.configurationProviderHelper.selectPlatform(e,r,o.platformTypeDebugPickConfig,1,this.maxStepCount),Object.assign(t.config,r),t.config.platform!==i.PlatformType.Exponent&&t.config.platform!==i.PlatformType.ExpoWeb?()=>n(this,void 0,void 0,(function*(){yield this.configureApplicationType(e,t.config),t.config.platform===i.PlatformType.iOS&&t.config.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT&&(this.maxStepCount=3,yield this.configureUseHermesEngine(e,t.config),!1===t.config.useHermesEngine&&(t.config.target="device"))})):t.config.platform===i.PlatformType.Exponent?()=>n(this,void 0,void 0,(function*(){yield this.configureApplicationType(e,t.config),yield this.configureExpoHostType(e,t.config)})):t.config.platform===i.PlatformType.ExpoWeb?()=>n(this,void 0,void 0,(function*(){yield this.configureBrowserTarget(e,t.config),yield this.configureApplicationType(e,t.config),t.config.url="http://localhost:8081"})):void 0}))}configureApplicationType(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectApplicationType(e,t,2,this.maxStepCount)}))}configureExpoHostType(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectExpoHostType(e,t,2,this.maxStepCount)}))}configureUseHermesEngine(e,t){return n(this,void 0,void 0,(function*(){delete t.useHermesEngine,yield this.configurationProviderHelper.shouldUseHermesEngine(e,t,3,this.maxStepCount),t.useHermesEngine&&delete t.useHermesEngine}))}configureBrowserTarget(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectBrowserTarget(e,t,4,this.maxStepCount)}))}}t.DebugConfigProvider=a},3850:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RunConfigProvider=void 0;const o=r(3350),i=r(7599),s=r(3757);class a extends s.BaseConfigProvider{constructor(){super(),this.maxStepCount=2}buildConfiguration(e,t){return n(this,void 0,void 0,(function*(){t.config={};const r={name:"Run application",request:"launch",type:o.DEBUG_TYPES.REACT_NATIVE,cwd:"${workspaceFolder}",enableDebug:!1};if(t.scenarioType=o.DebugScenarioType.RunApp,yield this.configurationProviderHelper.selectPlatform(e,r,o.platformTypeRunPickConfig,1,this.maxStepCount),Object.assign(t.config,r),t.config.platform!==i.PlatformType.Exponent)return()=>n(this,void 0,void 0,(function*(){yield this.configureApplicationType(e,t.config),t.config.platform===i.PlatformType.iOS&&t.config.type===o.DEBUG_TYPES.REACT_NATIVE_DIRECT&&(this.maxStepCount=3,yield this.configureUseHermesEngine(e,t.config),!1===t.config.useHermesEngine&&(t.config.target="device"))}))}))}configureApplicationType(e,t){return n(this,void 0,void 0,(function*(){yield this.configurationProviderHelper.selectApplicationType(e,t,2,this.maxStepCount)}))}configureUseHermesEngine(e,t){return n(this,void 0,void 0,(function*(){delete t.useHermesEngine,yield this.configurationProviderHelper.shouldUseHermesEngine(e,t,3,this.maxStepCount),t.useHermesEngine&&delete t.useHermesEngine}))}}t.RunConfigProvider=a},3350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugConfigurations=t.DEBUG_CONFIGURATION_NAMES=t.expoHostTypePickConfig=t.shouldUseHermesEngine=t.browserTypePickConfig=t.appTypePickConfig=t.platformTypeDirectPickConfig=t.platformTypeDebugPickConfig=t.platformTypeRunPickConfig=t.BROWSER_TYPES=t.DEBUG_TYPES=t.DebugScenarioType=void 0;const n=r(3403),o=r(7599),i=r(4062);n.config({messageFormat:n.MessageFormat.bundle,bundleFormat:n.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/debuggingConfiguration/debugConfigTypesAndConstants.ts"));const s=n.loadMessageBundle(r(1017).join(__dirname,"src/extension/debuggingConfiguration/debugConfigTypesAndConstants.ts"));var a;!function(e){e.RunApp="runapp",e.DebugApp="debugapp",e.AttachApp="attachapp"}(t.DebugScenarioType||(t.DebugScenarioType={})),t.DEBUG_TYPES={REACT_NATIVE:"reactnative",REACT_NATIVE_DIRECT:"reactnativedirect"},function(e){e.Chrome="chrome",e.Edge="edge"}(a=t.BROWSER_TYPES||(t.BROWSER_TYPES={})),t.platformTypeRunPickConfig=[{label:"Android",type:o.PlatformType.Android},{label:"iOS",type:o.PlatformType.iOS},{label:"MacOS",type:o.PlatformType.macOS},{label:"Windows",type:o.PlatformType.Windows}],t.platformTypeDebugPickConfig=[...t.platformTypeRunPickConfig,{label:"Exponent",type:o.PlatformType.Exponent},{label:"ExpoWeb",type:o.PlatformType.ExpoWeb}],t.platformTypeDirectPickConfig=[{label:"Hermes engine",type:""},{label:"Direct iOS - Experimental",type:o.PlatformType.iOS}],t.appTypePickConfig=[{label:"Application in direct mode(Hermes)",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT},{label:"Classic application",type:t.DEBUG_TYPES.REACT_NATIVE}],t.browserTypePickConfig=[{label:"Chrome",type:a.Chrome},{label:"Edge",type:a.Edge}],t.shouldUseHermesEngine=[{label:"Yes",type:"yes"},{label:"No",type:"no"}],t.expoHostTypePickConfig=[{label:"Tunnel",description:s(0,null),type:"tunnel"},{label:"LAN",description:s(1,null),type:"lan"},{label:"Local",description:s(2,null),type:"local"}],t.DEBUG_CONFIGURATION_NAMES={ATTACH_TO_HERMES_APPLICATION:"Attach to Hermes application",ATTACH_TO_DIRECT_IOS_EXPERIMENTAL:"Attach to Direct iOS - Experimental",ATTACH_TO_PACKAGER:"Attach to packager",DEBUG_ANDROID:"Debug Android",DEBUG_IOS:"Debug iOS",DEBUG_WINDOWS:"Debug Windows",DEBUG_MACOS:"Debug macOS",DEBUG_IN_EXPONENT:"Debug in Exponent",DEBUG_ANDROID_HERMES:"Debug Android Hermes",DEBUG_DIRECT_IOS_EXPERIMENTAL:"Debug Direct iOS - Experimental",DEBUG_IOS_HERMES:"Debug iOS Hermes",DEBUG_MACOS_HERMES_EXPERIMENTAL:"Debug macOS Hermes - Experimental",DEBUG_WINDOWS_HERMES_EXPERIMENTAL:"Debug Windows Hermes - Experimental",RUN_ANDROID:"Run Android",RUN_IOS:"Run iOS",RUN_ANDROID_HERMES:"Run Android Hermes",RUN_IOS_HERMES:"Run iOS Hermes",RUN_DIRECT_IOS_EXPERIMENTAL:"Run Direct iOS - Experimental",DEBUG_IN_EXPONENT_HERMES_EXPERIMENTAL:"Debug in Hermes Exponent - Experimental",DEBUG_IN_EXPONENT_WEB_EXPERIMENTAL:"Debug in Exponent Web - Experimental"},t.debugConfigurations={[t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION]:{name:t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"attach"},[t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"attach",platform:o.PlatformType.iOS,useHermesEngine:!1,port:i.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT},[t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER]:{name:t.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"attach"},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.Android},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.iOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.Windows},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.macOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.Exponent},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.Android},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.iOS,useHermesEngine:!1,target:"device",port:i.IWDPHelper.iOS_WEBKIT_DEBUG_PROXY_DEFAULT_PORT},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.iOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.macOS},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.Windows},[t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.Android,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_IOS]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_IOS,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE,request:"launch",platform:o.PlatformType.iOS,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.Android,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.iOS,enableDebug:!1},[t.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.iOS,enableDebug:!1,useHermesEngine:!1,target:"device"},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_HERMES_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_HERMES_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.Exponent},[t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_WEB_EXPERIMENTAL]:{name:t.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_WEB_EXPERIMENTAL,cwd:"${workspaceFolder}",type:t.DEBUG_TYPES.REACT_NATIVE_DIRECT,request:"launch",platform:o.PlatformType.ExpoWeb}}},4792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugScenarioNameGenerator=void 0;const n=r(7599),o=r(3350);t.DebugScenarioNameGenerator=class{static createScenarioName(e,t,r,i=!1,s=!1){const a=this.createScenarioAccordingToDebugScenarioType(e);return a.platformType=this.getPlatformTypeName(r),t===o.DEBUG_TYPES.REACT_NATIVE?this.configureNotDirectModeScenario(a,e,t,r):this.configureDirectModeScenario(a,e,t,i,r),r===n.PlatformType.ExpoWeb&&(s=!0),s&&(a.experimentalDescription="- Experimental"),this.debugScenarioNameToString(a)}static createScenarioAccordingToDebugScenarioType(e){switch(e){case o.DebugScenarioType.RunApp:return{debugScenarioType:"Run"};case o.DebugScenarioType.DebugApp:return{debugScenarioType:"Debug"};case o.DebugScenarioType.AttachApp:return{debugScenarioType:"Attach to"}}}static configureNotDirectModeScenario(e,t,r,i){t===o.DebugScenarioType.AttachApp&&(e.platformType="packager"),i===n.PlatformType.Exponent&&(e.prePlatformTypeDescription="in")}static configureDirectModeScenario(e,t,r,i,s){if(i&&(e.postPlatformTypeDescription=t===o.DebugScenarioType.AttachApp?"Hermes application":"Hermes"),s===n.PlatformType.iOS)i||(e.prePlatformTypeDescription="Direct")}static getPlatformTypeName(e){switch(e){case n.PlatformType.Android:return"Android";case n.PlatformType.iOS:return"iOS";case n.PlatformType.Exponent:return"Exponent";case n.PlatformType.Windows:return"Windows";case n.PlatformType.macOS:return"macOS";case n.PlatformType.ExpoWeb:return"Expo Web";default:return""}}static debugScenarioNameToString(e){let t=e.debugScenarioType;return e.prePlatformTypeDescription&&(t+=` ${e.prePlatformTypeDescription}`),e.platformType&&(t+=` ${e.platformType}`),e.postPlatformTypeDescription&&(t+=` ${e.postPlatformTypeDescription}`),e.experimentalDescription&&(t+=` ${e.experimentalDescription}`),t}}},9149:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCompletionProvider=t.JsonLanguages=void 0;const n=r(1017),o=r(9496),i=r(516),s=r(3403);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/debuggingConfiguration/launchJsonCompletionProvider.ts"));const a=s.loadMessageBundle(r(1017).join(__dirname,"src/extension/debuggingConfiguration/launchJsonCompletionProvider.ts"));!function(e){e.json="json",e.jsonWithComments="jsonc"}(t.JsonLanguages||(t.JsonLanguages={}));t.LaunchJsonCompletionProvider=class{constructor(){this.configurationNodeName="configurations"}provideCompletionItems(e,t,r,n){return this.canProvideCompletions(e,t)?[{command:{command:"reactNative.selectAndInsertDebugConfiguration",title:a(0,null),arguments:[e,t,r]},documentation:a(1,null),sortText:"AAAA",preselect:!0,kind:o.CompletionItemKind.Enum,label:"React Native",insertText:new o.SnippetString}]:[]}canProvideCompletions(e,t){if("launch.json"!==n.basename(e.uri.fsPath))return!1;const r=(0,i.getLocation)(e.getText(),e.offsetAt(t));return r.path[0]===this.configurationNodeName&&2===r.path.length}}},3614:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInput=t.InputFlowAction=void 0;const o=r(9496);class i{}i.back=new i,i.cancel=new i,i.resume=new i,t.InputFlowAction=i;t.MultiStepInput=class{constructor(){this.steps=[]}run(e,t){return this.stepThrough(e,t)}showQuickPick({title:e,step:t,totalSteps:r,items:s,activeItem:a,placeholder:c,buttons:u,shouldResume:l,matchOnDescription:d,matchOnDetail:p,acceptFilterBoxTextAsSelection:h}){return n(this,void 0,void 0,(function*(){const f=[];try{return yield new Promise(((g,m)=>{const _=o.window.createQuickPick();_.title=e,_.step=t,_.totalSteps=r,_.placeholder=c,_.ignoreFocusOut=!0,_.items=s,_.matchOnDescription=d||!1,_.matchOnDetail=p||!1,_.activeItems=a?[a]:[],_.buttons=[...this.steps.length>1?[o.QuickInputButtons.Back]:[],...u||[]],f.push(_.onDidTriggerButton((e=>{e===o.QuickInputButtons.Back?m(i.back):g(e)})),_.onDidChangeSelection((e=>g(e[0]))),_.onDidHide((()=>{(()=>n(this,void 0,void 0,(function*(){m(l&&(yield l())?i.resume:i.cancel)})))().catch(m)}))),h&&f.push(_.onDidAccept((()=>{g(_.value)}))),this.current&&this.current.dispose(),this.current=_,this.current.show()}))}finally{f.forEach((e=>e.dispose()))}}))}showInputBox({title:e,step:t,totalSteps:r,value:s,prompt:a,validate:c,password:u,buttons:l,shouldResume:d}){return n(this,void 0,void 0,(function*(){const p=[];try{return yield new Promise(((h,f)=>{const g=o.window.createInputBox();g.title=e,g.step=t,g.totalSteps=r,g.password=!!u,g.value=s||"",g.prompt=a,g.ignoreFocusOut=!0,g.buttons=[...this.steps.length>1?[o.QuickInputButtons.Back]:[],...l||[]];let m=c("");p.push(g.onDidTriggerButton((e=>{e===o.QuickInputButtons.Back?f(i.back):h(e)})),g.onDidAccept((()=>n(this,void 0,void 0,(function*(){const e=g.value;g.enabled=!1,g.busy=!0,(yield c(e))||h(e),g.enabled=!0,g.busy=!1})))),g.onDidChangeValue((e=>n(this,void 0,void 0,(function*(){const t=c(e);m=t;const r=yield t;t===m&&(g.validationMessage=r)})))),g.onDidHide((()=>{(()=>n(this,void 0,void 0,(function*(){f(d&&(yield d())?i.resume:i.cancel)})))().catch(f)}))),this.current&&this.current.dispose(),this.current=g,this.current.show()}))}finally{p.forEach((e=>e.dispose()))}}))}stepThrough(e,t){return n(this,void 0,void 0,(function*(){let r=e;for(;r;){this.steps.push(r),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{r=yield r(this,t)}catch(e){if(e===i.back)this.steps.pop(),r=this.steps.pop();else if(e===i.resume)r=this.steps.pop();else{if(e!==i.cancel)throw e;r=void 0}}}this.current&&this.current.dispose()}))}}},3879:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeDebugConfigProvider=void 0;const o=r(9496),i=r(3403),s=r(3821),a=r(4301),c=r(7599),u=r(3350),l=r(4792),d=r(3614),p=r(9139);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/debuggingConfiguration/reactNativeDebugConfigProvider.ts"));const h=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/debuggingConfiguration/reactNativeDebugConfigProvider.ts"));t.ReactNativeDebugConfigProvider=class{constructor(){this.initialPickConfig=[{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID,description:h(0,null)},{label:u.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID,description:h(1,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS,description:h(2,null)},{label:u.DEBUG_CONFIGURATION_NAMES.RUN_IOS,description:h(3,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS,description:h(4,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS,description:h(5,null)},{label:u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_PACKAGER,description:h(6,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT,description:h(7,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_HERMES_EXPERIMENTAL,description:h(8,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_IN_EXPONENT_WEB_EXPERIMENTAL,description:h(9,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES,description:h(10,null)},{label:u.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES,description:h(11,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES,description:h(12,null)},{label:u.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES,description:h(13,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL,description:h(14,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL,description:h(15,null)},{label:u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION,description:h(16,null)},{label:u.DEBUG_CONFIGURATION_NAMES.DEBUG_DIRECT_IOS_EXPERIMENTAL,description:h(17,null)},{label:u.DEBUG_CONFIGURATION_NAMES.RUN_DIRECT_IOS_EXPERIMENTAL,description:h(18,null)},{label:u.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_DIRECT_IOS_EXPERIMENTAL,description:h(19,null)}],this.sequentialPickConfig=[{label:"Run application",description:h(20,null),type:u.DebugScenarioType.RunApp},{label:"Debug application",description:h(21,null),type:u.DebugScenarioType.DebugApp},{label:"Attach to application",description:h(22,null),type:u.DebugScenarioType.AttachApp}]}provideDebugConfigurations(e,t){return n(this,void 0,void 0,(function*(){return new Promise((e=>{const t=this.prepareDebugConfigPicker(),r=[],n=()=>{const n=s.TelemetryHelper.createTelemetryEvent("chosenDebugConfigurations"),o=t.selectedItems.map((e=>e.label));n.properties.selectedItems=o,a.Telemetry.send(n);const i=this.gatherDebugScenarios(o);r.forEach((e=>e.dispose())),e(i)};r.push(t.onDidAccept(n),t.onDidHide(n),t),t.show()}))}))}provideDebugConfigurationSequentially(e,t){return n(this,void 0,void 0,(function*(){const r={config:{},scenarioType:u.DebugScenarioType.DebugApp,folder:e,token:t},n=new d.MultiStepInput;if(yield n.run(((e,t)=>this.pickDebugConfiguration(e,t)),r),0!==Object.keys(r.config).length)return r.config.platform!==c.PlatformType.ExpoWeb&&r.config.type===u.DEBUG_TYPES.REACT_NATIVE_DIRECT?"android"===r.config.platform||"ios"===r.config.platform&&"device"!==r.config.target&&"attach"!==r.config.request?r.config.name=l.DebugScenarioNameGenerator.createScenarioName(r.scenarioType,r.config.type,r.config.platform,!1!==r.config.useHermesEngine):r.config.name=l.DebugScenarioNameGenerator.createScenarioName(r.scenarioType,r.config.type,r.config.platform,!1!==r.config.useHermesEngine,!0):r.config.name=l.DebugScenarioNameGenerator.createScenarioName(r.scenarioType,r.config.type||u.DEBUG_TYPES.REACT_NATIVE,r.config.platform),r.config}))}pickDebugConfiguration(e,t){return n(this,void 0,void 0,(function*(){t.config={};const r=yield e.showQuickPick({title:h(23,null),placeholder:"Debug Configuration",activeItem:this.sequentialPickConfig[0],items:this.sequentialPickConfig});if(r){const e=p.ConfigProviderFactory.create(r.type);return e.buildConfiguration.bind(e)}}))}gatherDebugScenarios(e){return e.map((e=>u.debugConfigurations[e]))}prepareDebugConfigPicker(){const e=o.window.createQuickPick();return e.canSelectMany=!0,e.ignoreFocusOut=!0,e.title=h(24,null),e.items=this.initialPickConfig,e.selectedItems=[this.initialPickConfig[0]],e}}},1126:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeDebugDynamicConfigProvider=void 0;const o=r(2463),i=r(3821),s=r(4301),a=r(9327),c=r(7551),u=r(7599),l=r(3292),d=r(3614),p=r(3350);t.ReactNativeDebugDynamicConfigProvider=class{provideDebugConfigurations(e,t){return n(this,void 0,void 0,(function*(){const t=Object.assign({},p.debugConfigurations);if(e){const r=e.uri.fsPath,n=o.SettingsHelper.getReactNativeProjectRoot(r),i=yield a.ProjectVersionHelper.tryToGetRNSemverValidVersionsFromProjectPackage(n,a.ProjectVersionHelper.generateAllAdditionalPackages(),n);let s=!1,u=!1;const l=c.ReactNativeProjectHelper.isAndroidHermesEnabled(r),d=c.ReactNativeProjectHelper.isIOSHermesEnabled(r);a.ProjectVersionHelper.isVersionError(i.reactNativeWindowsVersion)?(delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS],delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL]):(u=c.ReactNativeProjectHelper.isWindowsHermesEnabled(r),u||delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_WINDOWS_HERMES_EXPERIMENTAL]),a.ProjectVersionHelper.isVersionError(i.reactNativeMacOSVersion)?(delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS],delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL]):(s=c.ReactNativeProjectHelper.isMacOSHermesEnabled(r),s||delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_MACOS_HERMES_EXPERIMENTAL]),l||(delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_ANDROID_HERMES],delete t[p.DEBUG_CONFIGURATION_NAMES.RUN_ANDROID_HERMES]),d||(delete t[p.DEBUG_CONFIGURATION_NAMES.DEBUG_IOS_HERMES],delete t[p.DEBUG_CONFIGURATION_NAMES.RUN_IOS_HERMES]),l||d||s||u||delete t[p.DEBUG_CONFIGURATION_NAMES.ATTACH_TO_HERMES_APPLICATION]}const r=Object.values(t);return r.forEach((e=>{e.isDynamic=!0})),r}))}resolveDebugConfiguration(e,t,r){return n(this,void 0,void 0,(function*(){if(t.isDynamic){const n=i.TelemetryHelper.createTelemetryEvent("chosenDynamicDebugConfiguration",{selectedConfiguration:t.name});s.Telemetry.send(n),"attach"===t.request&&(yield this.configureAttachScenario(e,t,r)),t.platform===u.PlatformType.Exponent&&(yield this.configureExpoScenario(e,t,r))}return t}))}configureExpoScenario(e,t,r){return n(this,void 0,void 0,(function*(){const o={config:t,scenarioType:p.DebugScenarioType.DebugApp,folder:e,token:r},i=new d.MultiStepInput,s=new l.ConfigurationProviderHelper;return yield i.run(((e,t)=>n(this,void 0,void 0,(function*(){yield s.selectExpoHostType(e,t.config,1,1)}))),o),t}))}configureAttachScenario(e,t,r){return n(this,void 0,void 0,(function*(){const o={config:t,scenarioType:p.DebugScenarioType.AttachApp,folder:e,token:r},i=new d.MultiStepInput,s=new l.ConfigurationProviderHelper,a=(e,t)=>n(this,void 0,void 0,(function*(){yield s.configurePort(e,t,2,2)})),c=(e,t)=>n(this,void 0,void 0,(function*(){return yield s.configureAddress(e,t,1,2,"localhost"),()=>a(e,t)}));return yield i.run(((e,t)=>c(e,t.config)),o),t}))}}},973:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExponentHelper=void 0;const o=r(1017),i=r(7147),s=r(6625),a=r(9496),c=r(2884),u=r(3403),l=r(9955),d=r(9901),p=r(1506),h=r(9327),f=r(9144),g=r(9897),m=r(7670),_=r(312),v=r(9452),E=r(2463),y=r(7361);u.config({messageFormat:u.MessageFormat.bundle,bundleFormat:u.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/exponent/exponentHelper.ts"));const b=u.loadMessageBundle(r(1017).join(__dirname,"src/extension/exponent/exponentHelper.ts")),S="app.json",C="exponentIndex.js",A="index.js",T="index.ios.js",w="index.android.js",P=/\\/g;t.ExponentHelper=class{constructor(e,t,r=new v.FileSystem){this.logger=f.OutputChannelLogger.getMainChannel(),this.workspaceRootPath=e,this.projectRootPath=t,this.fs=r,this.hasInitialized=!1,this.nodeModulesGlobalPathAddedToEnv=!1}preloadExponentDependency(){return n(this,void 0,void 0,(function*(){return this.logger.info(b(0,null)),Promise.all([y.getXDLPackage(),y.getMetroConfigPackage()])}))}configureExponentEnvironment(){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize(),this.logger.logStream(b(1,null)),this.logger.logStream("\n");const e=yield this.getAppPackageInformation();e.name&&e.version||this.logger.warning(b(2,null));const t=yield this.isExpoManagedApp(!0);t||(yield this.appHasExpoInstalled())||(this.logger.logStream("\n"),this.logger.logStream(b(3,null)),this.logger.logStream("\n")),this.logger.logStream(".\n"),yield this.patchAppJson(t)}))}loginToExponent(e,t){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();let r=yield y.currentUser();if(!r){yield t(b(4,null));const n=yield e(b(5,null),!1),o=yield e(b(6,null),!0);r=yield y.login(n,o)}return r}))}getExpPackagerOptions(e){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();const t=yield this.getFromExpConfig("packagerOpts").then((e=>e||{})),r=yield this.getArgumentsFromExpoMetroConfig(e);return Object.assign(Object.assign({},t),r)}))}appHasExpoInstalled(){return n(this,void 0,void 0,(function*(){const e=yield this.getAppPackageInformation();return e.dependencies&&e.dependencies.expo?(this.logger.debug("'expo' package is found in 'dependencies' section of package.json"),!0):!(!e.devDependencies||!e.devDependencies.expo)&&(this.logger.debug("'expo' package is found in 'devDependencies' section of package.json"),!0)}))}isExpoManagedApp(e=!1){return n(this,void 0,void 0,(function*(){e&&this.logger.logStream("...");try{if(!(yield this.appHasExpoInstalled()))return!1;const t=yield this.isBareWorkflowProject();return e&&this.logger.logStream("."),!t}catch(t){return this.logger.error(t.message,t,t.stack),e&&this.logger.logStream("."),!1}}))}findOrInstallNgrokGlobally(){return n(this,void 0,void 0,(function*(){let e;try{yield this.addNodeModulesPathToEnvIfNotPresent(),e=yield y.isNgrokInstalled(this.projectRootPath)}catch(t){e=!1}if(!e){const e=E.SettingsHelper.getExpoDependencyVersion("@expo/ngrok"),t=new m.PackageConfig("@expo/ngrok",e),r=b(7,null,t.getStringForInstall()),n=b(8,null),o=b(9,null);if((yield a.window.showWarningMessage(r,n,o))!==n)throw g.ErrorHelper.getInternalError(_.InternalErrorCode.NgrokIsNotInstalledGlobally,t.getVersion(!0));yield m.PackageLoader.getInstance().installGlobalPackage(t,this.projectRootPath),this.logger.info(b(10,null,t.getStringForInstall()))}}))}removeNodeModulesPathFromEnvIfWasSet(){this.nodeModulesGlobalPathAddedToEnv&&(delete process.env.NODE_MODULES,this.nodeModulesGlobalPathAddedToEnv=!1)}addNodeModulesPathToEnvIfNotPresent(){return n(this,void 0,void 0,(function*(){process.env.NODE_MODULES||(process.env.NODE_MODULES=yield(0,d.getNodeModulesGlobalPath)(),this.nodeModulesGlobalPathAddedToEnv=!0)}))}isBareWorkflowProject(){return n(this,void 0,void 0,(function*(){const e=yield this.getAppPackageInformation();if(e.dependencies&&e.dependencies.expokit)return!1;if(e.devDependencies&&e.devDependencies.expokit)return!1;if((0,c.sync)("ios/**/*.xcodeproj",{absolute:!0,cwd:this.projectRootPath}).length)return!0;return!!(0,c.sync)("android/**/*.gradle",{absolute:!0,cwd:this.projectRootPath}).length}))}getArgumentsFromExpoMetroConfig(e){return n(this,void 0,void 0,(function*(){return{sourceExts:(yield y.getMetroConfig(e)).resolver.sourceExts}}))}dotvscodePath(e,t){let r=[".vscode",e];return t&&(r=[this.workspaceRootPath].concat(...r)),o.join(...r)}createExpoEntry(e){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();const t=yield this.detectEntry(),r=this.generateFileContent(e,t);return yield this.fs.writeFile(this.dotvscodePath(C,!0),r)}))}detectEntry(){return n(this,void 0,void 0,(function*(){yield this.lazilyInitialize();const[e,t]=yield Promise.all([this.fs.exists(this.pathToFileInWorkspace(A)),this.fs.exists(this.pathToFileInWorkspace(T)),this.fs.exists(this.pathToFileInWorkspace(w))]);return e?this.pathToFileInWorkspace(A):t?this.pathToFileInWorkspace(T):this.pathToFileInWorkspace(w)}))}generateFileContent(e,t){return`// This file is automatically generated by VS Code\n// Please do not modify it manually. All changes will be lost.\nvar React = require('${this.pathToFileInWorkspace("/node_modules/react")}');\nvar { Component } = React;\nvar ReactNative = require('${this.pathToFileInWorkspace("/node_modules/react-native")}');\nvar { AppRegistry } = ReactNative;\nAppRegistry.registerRunnable('main', function(appParameters) {\n    AppRegistry.runApplication('${e}', appParameters);\n});\nrequire('${t}');`}patchAppJson(e=!0){return n(this,void 0,void 0,(function*(){let t;try{t=yield this.readAppJson()}catch(e){l.logger.log("Cannot get existing app.json file. Create new one."),t={}}const r=yield this.getPackageName(),n=t.expo||{};if(n.name&&n.slug||(n.slug=n.slug||t.name||r.replace(" ","-"),n.name=n.name||t.name||r,t.expo=n),t.name||(t.name=r),!t.expo.sdkVersion){const e=yield this.exponentSdk(!0);t.expo.sdkVersion=e}e||(t.expo.entryPoint=this.dotvscodePath(C,!1)),t=t?yield this.writeAppJson(t):t,e||(yield this.createExpoEntry(t.expo.name))}))}exponentSdk(e=!1){return n(this,void 0,void 0,(function*(){e&&this.logger.logStream("...");const t=yield h.ProjectVersionHelper.getReactNativeVersions(this.projectRootPath);e&&this.logger.logStream(".");const r=yield this.mapFacebookReactNativeVersionToExpoVersion(t.reactNativeVersion);if(!r){const e=yield this.getFacebookReactNativeVersions();throw g.ErrorHelper.getInternalError(_.InternalErrorCode.RNVersionNotSupportedByExponent,e.join(", "))}return r}))}getFacebookReactNativeVersions(){return n(this,void 0,void 0,(function*(){const e=yield y.getExpoSdkVersions(),t=new Set(Object.values(e).map((e=>e.facebookReactNativeVersion)).filter((e=>e)));return Array.from(t)}))}mapFacebookReactNativeVersionToExpoVersion(e){return n(this,void 0,void 0,(function*(){if(!s.valid(e))throw new Error(`${e} is not a valid version. It must be in the form of x.y.z`);const t=yield y.getReleasedExpoSdkVersions();let r=null;for(const[n,{facebookReactNativeVersion:o}]of Object.entries(t))s.major(e)!==s.major(o)||s.minor(e)!==s.minor(o)||r&&!s.gt(n,r)||(r=n);return r}))}getPackageName(){return new p.Package(this.projectRootPath,{fileSystem:this.fs}).name()}getExpConfig(){return n(this,void 0,void 0,(function*(){try{return this.readExpJson()}catch(e){if("ENOENT"===e.code){return(yield this.readAppJson()).expo||{}}throw e}}))}getFromExpConfig(e){return n(this,void 0,void 0,(function*(){return(yield this.getExpConfig())[e]}))}readExpJson(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace("exp.json");return this.fs.readFile(e).then((e=>(0,d.stripJsonTrailingComma)(e.toString())))}))}readAppJson(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace(S);return l.logger.log(`Getting app.json path: ${e}`),this.fs.readFile(e).then((e=>(0,d.stripJsonTrailingComma)(e.toString())))}))}writeAppJson(e){return n(this,void 0,void 0,(function*(){const t=this.pathToFileInWorkspace(S);return yield this.fs.writeFile(t,JSON.stringify(e,null,2)),e}))}getAppPackageInformation(){return new p.Package(this.projectRootPath,{fileSystem:this.fs}).parsePackageInformation()}pathToFileInWorkspace(e){return o.join(this.projectRootPath,e).replace(P,"/")}lazilyInitialize(){return n(this,void 0,void 0,(function*(){this.hasInitialized||(this.hasInitialized=!0,yield this.preloadExponentDependency(),y.configReactNativeVersionWarnings(),y.attachLoggerStream(this.projectRootPath,{stream:{write:e=>{e.level<=30?(this.logger.logStream(e.msg),this.logger.logStream("\n")):40===e.level?this.logger.warning(e.msg):this.logger.error(e.msg)}},type:"raw"}))}))}getExpoEasProjectOwner(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace(S);try{return null==JSON.parse(i.readFileSync(e,"utf-8")).expo.owner?null:JSON.parse(i.readFileSync(e,"utf-8")).expo.owner}catch(e){return null}}))}getExpoEasProjectId(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace(S);try{return null==JSON.parse(i.readFileSync(e,"utf-8")).expo.extra.eas.projectId?null:JSON.parse(i.readFileSync(e,"utf-8")).expo.extra.eas.projectId}catch(e){return null}}))}getExpoEasProjectName(){return n(this,void 0,void 0,(function*(){const e=this.pathToFileInWorkspace(S);try{return null==JSON.parse(i.readFileSync(e,"utf-8")).expo.name?null:JSON.parse(i.readFileSync(e,"utf-8")).expo.name}catch(e){return null}}))}}},1837:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExponentPlatform=void 0;const o=r(7310),i=r(9496),s=r(3403),a=r(7793),c=r(9897),u=r(312),l=r(7599),d=r(7005),p=r(3821),h=r(1181),f=r(7361);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/exponent/exponentPlatform.ts"));const g=s.loadMessageBundle(r(1017).join(__dirname,"src/extension/exponent/exponentPlatform.ts"));class m extends d.GeneralPlatform{constructor(e,t={}){super(e,t),this.qrCodeContentProvider=new h.QRCodeContentProvider,this.exponentHelper=this.packager.getExponentHelper(),this.exponentTunnelPath=null}runApp(){return n(this,void 0,void 0,(function*(){let e={platform:{value:l.PlatformType.Exponent,isPii:!1}};e=p.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,e),yield p.TelemetryHelper.generate("ExponentPlatform.runApp",e,(()=>n(this,void 0,void 0,(function*(){yield this.loginToExponentOrSkip(this.runOptions.expoHostType),yield f.setOptions(this.projectPath,{packagerPort:this.packager.getPort()}),yield f.startExponentServer(this.projectPath),"tunnel"===this.runOptions.expoHostType?yield this.prepareExpoTunnels():yield f.stopAdbReverse(this.projectPath);const e="local"===this.runOptions.expoHostType&&(yield f.startAdbReverse(this.projectPath));let t="";switch(this.runOptions.expoHostType){case"lan":t=yield f.getUrl(this.projectPath,{dev:!0,minify:!1,hostType:"lan"});break;case"local":e?this.logger.info(g(0,null)):this.logger.warning(g(1,null)),t=yield f.getUrl(this.projectPath,{dev:!0,minify:!1,hostType:"localhost"});break;default:t=yield f.getUrl(this.projectPath,{dev:!0,minify:!1})}if(t=`exp://${String(o.parse(t).host)}`,!t)throw c.ErrorHelper.getInternalError(u.InternalErrorCode.ExpectedExponentTunnelPath);this.exponentTunnelPath=t;const r=g(2,null,this.exponentTunnelPath);if(this.logger.info(r),this.runOptions.openExpoQR){i.window.createWebviewPanel("Expo QR Code","Expo QR Code",i.ViewColumn.Two,{}).webview.html=this.qrCodeContentProvider.provideTextDocumentContent(i.Uri.parse(t));const e=g(3,null);this.logger.info(e),a.generate(t,{small:!0},(e=>this.logger.info(`\n${e}`)))}const n=g(4,null);i.window.showInformationMessage(r,n).then((e=>{e===n&&i.env.clipboard.writeText(t)}))}))))}))}loginToExponentOrSkip(e){return n(this,void 0,void 0,(function*(){if("tunnel"===e)return yield this.exponentHelper.loginToExponent(((e,t)=>n(this,void 0,void 0,(function*(){return(yield i.window.showInputBox({placeHolder:e,password:t}))||""}))),(e=>n(this,void 0,void 0,(function*(){const t={title:"Cancel",isCloseAffordance:!0};if((yield i.window.showInformationMessage(e,{modal:!0},{title:"Ok"},t))===t)throw c.ErrorHelper.getInternalError(u.InternalErrorCode.UserCancelledExpoLogin);return""}))))}))}beforeStartPackager(){return n(this,void 0,void 0,(function*(){return this.exponentHelper.configureExponentEnvironment()}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){this.logger.info(g(5,null))}))}getRunArguments(){return[]}prepareExpoTunnels(){return n(this,void 0,void 0,(function*(){try{yield this.exponentHelper.findOrInstallNgrokGlobally(),yield f.startTunnels(this.projectPath)}finally{this.exponentHelper.removeNodeModulesPathFromEnvIfWasSet()}}))}}t.ExponentPlatform=m},7361:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isNgrokInstalled=t.getMetroConfig=t.stopAdbReverse=t.startAdbReverse=t.stopAll=t.getUrl=t.startTunnels=t.startExponentServer=t.setOptions=t.publish=t.getReleasedExpoSdkVersions=t.getExpoSdkVersions=t.login=t.currentUser=t.attachLoggerStream=t.configReactNativeVersionWarnings=t.getNgrokResolver=t.getMetroConfigPackage=t.getXDLPackage=void 0;const o=r(1017),i=r(7670),s=r(9901),a=r(2463),c="@expo/metro-config",u=new i.PackageConfig("xdl",a.SettingsHelper.getExpoDependencyVersion("xdl")),l=new i.PackageConfig(c,a.SettingsHelper.getExpoDependencyVersion(c)),d=new i.PackageConfig(u.getPackageName(),u.getVersion(),"build/start/resolveNgrok"),p=[u,l];t.getXDLPackage=i.PackageLoader.getInstance().generateGetPackageFunction(u,...p),t.getMetroConfigPackage=i.PackageLoader.getInstance().generateGetPackageFunction(l,...p),t.getNgrokResolver=i.PackageLoader.getInstance().generateGetPackageFunction(d,...p),t.configReactNativeVersionWarnings=function(){return n(this,void 0,void 0,(function*(){const e=yield(0,t.getXDLPackage)();void 0!==e.Config.validation&&(e.Config.validation.reactNativeVersionWarnings=!1)}))},t.attachLoggerStream=function(e,r){return n(this,void 0,void 0,(function*(){(yield(0,t.getXDLPackage)()).ProjectUtils.attachLoggerStream(e,r)}))},t.currentUser=function(){return n(this,void 0,void 0,(function*(){const e=yield(0,t.getXDLPackage)();return yield e.User?e.User.getCurrentUserAsync():e.UserManager.getCurrentUserAsync()}))},t.login=function(e,r){return n(this,void 0,void 0,(function*(){const n=yield(0,t.getXDLPackage)();return yield n.User?n.User.loginAsync("user-pass",{username:e,password:r}):n.UserManager.loginAsync("user-pass",{username:e,password:r})}))},t.getExpoSdkVersions=function(){return n(this,void 0,void 0,(function*(){return(yield(0,t.getXDLPackage)()).Versions.sdkVersionsAsync()}))},t.getReleasedExpoSdkVersions=function(){return n(this,void 0,void 0,(function*(){return(yield(0,t.getXDLPackage)()).Versions.releasedSdkVersionsAsync()}))},t.publish=function(e,r){return n(this,void 0,void 0,(function*(){return(yield(0,t.getXDLPackage)()).Project.publishAsync(e,r)}))},t.setOptions=function(e,r){return n(this,void 0,void 0,(function*(){yield(yield(0,t.getXDLPackage)()).ProjectSettings.setPackagerInfoAsync(e,r)}))},t.startExponentServer=function(e){return n(this,void 0,void 0,(function*(){yield(yield(0,t.getXDLPackage)()).Project.startExpoServerAsync(e)}))},t.startTunnels=function(e){return n(this,void 0,void 0,(function*(){yield(yield(0,t.getXDLPackage)()).Project.startTunnelsAsync(e)}))},t.getUrl=function(e,r){return n(this,void 0,void 0,(function*(){return(yield(0,t.getXDLPackage)()).UrlUtils.constructManifestUrlAsync(e,r)}))},t.stopAll=function(e){return n(this,void 0,void 0,(function*(){yield(yield(0,t.getXDLPackage)()).Project.stopAsync(e)}))},t.startAdbReverse=function(e){return n(this,void 0,void 0,(function*(){return(yield(0,t.getXDLPackage)()).Android.startAdbReverseAsync(e)}))},t.stopAdbReverse=function(e){return n(this,void 0,void 0,(function*(){yield(yield(0,t.getXDLPackage)()).Android.stopAdbReverseAsync(e)}))},t.getMetroConfig=function(e){return n(this,void 0,void 0,(function*(){return(yield(0,t.getMetroConfigPackage)()).loadAsync(e)}))},t.isNgrokInstalled=function(e){return n(this,void 0,void 0,(function*(){const r=yield(0,t.getNgrokResolver)();try{return!!(yield r.resolveNgrokAsync(e,{shouldPrompt:!1,autoInstall:!1}))}catch(e){throw(0,s.removeModuleFromRequireCacheByName)((0,o.join)("ngrok","package.json")),e}}))}},4952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionConfigManager=void 0;const n=r(214);class o{}o.configName="reactNativeToolsConfig",o.config=new n(o.configName),t.ExtensionConfigManager=o},1638:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralMobilePlatform=void 0;const o=r(3403),i=r(9897),s=r(312),a=r(3821),c=r(7005),u=r(9911);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/generalMobilePlatform.ts"));const l=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/generalMobilePlatform.ts"));class d extends c.GeneralPlatform{getTargetsCountByFilter(e){return n(this,void 0,void 0,(function*(){return this.targetManager.getTargetsCountWithFilter(e)}))}resolveMobileTarget(e){return n(this,void 0,void 0,(function*(){let t,r=!1,n=!1;e.toLowerCase()===c.TargetType.Simulator?(n=!0,t=!0):e.toLowerCase()===c.TargetType.Device?(n=!0,t=!1):(yield this.targetManager.collectTargets(),r=!0,t=yield this.targetManager.isVirtualTarget(e)),r||(yield this.targetManager.collectTargets(t?c.TargetType.Simulator:c.TargetType.Device));const o=()=>{this.runOptions.target=t?c.TargetType.Simulator:c.TargetType.Device,this.runArguments=this.getRunArguments()};try{this.target=yield this.targetManager.selectAndPrepareTarget((r=>{const o=!!n||(r.name===e||r.id===e);return t===r.isVirtualTarget&&o})),this.target?this instanceof u.IOSPlatform||(yield this.needToPassTargetToRunArgs())?this.addTargetToRunArgs(this.target):o():(this.logger.warning(l(0,null,e)),this.logger.warning(l(1,null)),o())}catch(e){if(!e||!e.errorCode||e.errorCode!==s.InternalErrorCode.TargetSelectionError)throw e;a.TelemetryHelper.sendErrorEvent("TargetSelectionError",i.ErrorHelper.getInternalError(s.InternalErrorCode.TargetSelectionError)),this.logger.warning(e),this.logger.warning(l(2,null)),o()}return this.target}))}needToPassTargetToRunArgs(){return n(this,void 0,void 0,(function*(){return(yield this.targetManager.getTargetList()).filter((e=>e.isOnline)).length>1}))}addTargetToRunArgs(e){this.runOptions.target=e.id,this.runArguments=this.getRunArguments()}}t.GeneralMobilePlatform=d},7005:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralPlatform=t.TargetType=void 0;const o=r(7147),i=r(3403),s=r(9208),a=r(5034),c=r(2463),u=r(9144);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/generalPlatform.ts"));const l=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/generalPlatform.ts"));!function(e){e.Device="device",e.Simulator="simulator"}(t.TargetType||(t.TargetType={}));class d{constructor(e,t={}){this.runOptions=e,this.platformName=this.runOptions.platform,this.projectPath=this.runOptions.projectRoot,this.packager=t.packager||new s.Packager(this.runOptions.workspaceRoot,this.projectPath,c.SettingsHelper.getPackagerPort(this.runOptions.workspaceRoot),new a.PackagerStatusIndicator(this.projectPath)),this.projectObserver=t.projectObserver,this.packager.setRunOptions(e),this.logger=u.OutputChannelLogger.getChannel(l(0,null,this.platformName),!0),this.logger.clear(),this.runArguments=this.getRunArguments()}dispose(){}runApp(){return n(this,void 0,void 0,(function*(){this.logger.info(l(1,null))}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){this.logger.info(l(2,null))}))}disableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){this.logger.info(l(3,null))}))}beforeStartPackager(){return n(this,void 0,void 0,(function*(){}))}startPackager(){return n(this,void 0,void 0,(function*(){this.logger.info(l(4,null)),(yield this.packager.isRunning())&&(this.packager.getPackagerStatus()!==a.PackagerStatus.PACKAGER_STARTED&&(yield this.packager.stop()),this.logger.info(l(5,null))),yield this.packager.start()}))}prewarmBundleCache(){return n(this,void 0,void 0,(function*(){}))}static removeRunArgument(e,t,r){const n=e.indexOf(t);n>-1&&(r?e.splice(n,1):e.splice(n,2))}static setRunArgument(e,t,r){const n="boolean"==typeof r,o=e.indexOf(t);o>-1?(n&&!r&&d.removeRunArgument(e,t,!0),n||(e[o+1]=r)):(n&&r&&e.push(t),n||(e.push(t),e.push(r)))}static getOptFromRunArgs(e,t,r=!1){if(e.length>0){const n=e.indexOf(t);let o;if(n>-1)o=!!r||e[n+1];else for(const n of e)if(n.includes(t))if(r)o=!0;else{const e=n.split("=");o=e.length>1?e[1].trim():void 0}if(r)return void 0!==o||void 0;if(o)try{return JSON.parse(o)}catch(e){return o}}}getRunArguments(){throw new Error("Not yet implemented: GeneralPlatform.getRunArguments")}static getEnvArgument(e,t,r){const n=Object.assign({},e);if(r){const e=this.readEnvFile(r);if(null!=e)for(const t in e)!n[t]&&e.hasOwnProperty(t)&&(n[t]=e[t])}if(t)for(const e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}static readEnvFile(e){if(o.existsSync(e)){let t=o.readFileSync(e,"utf8");const r={};return t&&"\ufeff"===t[0]&&(t=t.substr(1)),t.split("\n").forEach((e=>{const t=e.match(/^\s*([\w.\-]+)\s*=\s*(.*)?\s*$/);if(null!==t){const e=t[1];let n=t[2]||"";n.length>0&&'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.replace(/\\n/gm,"\n")),r[e]=n.replace(/(^["']|["']$)/g,"")}})),r}return null}}d.NO_PACKAGER_VERSION="0.42.0",t.GeneralPlatform=d},5288:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.checkIdbIsInstalled=t.idbListTargets=t.isXcodeDetected=t.isIdbAvailable=t.idbPath=void 0;const i=r(7147),s=r(1017),a=r(4100),c=r(5640),u=r(8102);
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/c2848df7f210c363113797c0f2e3db8c5d4fd49f/desktop/app/src/server/devices/ios/iOSContainerUtility.tsx
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
t.idbPath="/usr/local/bin/idb";const l="DEBUG";function d(){return t.idbPath?i.promises.access(t.idbPath,i.constants.X_OK).then((()=>!0)).catch((()=>!1)):Promise.resolve(!1)}function p(){return n(this,void 0,void 0,(function*(){return(new c.ChildProcess).execToString("xcode-select -p").then((e=>i.existsSync(e.trim()))).catch((e=>!1))}))}function h(e){return e.trim().split("\n").map((e=>e.trim())).filter(Boolean).map((e=>JSON.parse(e))).filter((({state:e})=>"booted"===e.toLocaleLowerCase())).map((e=>{var{type:t,target_type:r}=e,n=o(e,["type","target_type"]);return Object.assign({type:"simulator"===(t||r)?"emulator":"physical"},n)})).map((e=>({id:e.udid,isVirtualTarget:"emulator"===e.type,name:e.name,isOnline:!0})))}function f(e){return n(this,void 0,void 0,(function*(){return(new c.ChildProcess).execToString(`${e} list-targets --json`).then((e=>h(e))).catch((e=>(a.logger.warn(`Failed to query idb for targets: ${e}`),[])))}))}function g(){return n(this,void 0,void 0,(function*(){if(!(yield(0,t.isIdbAvailable)()))throw new Error("idb is required to use iOS devices. Please install it with instructions from https://github.com/facebook/idb.")}))}function m(e){if(e.message&&e.message.includes("sudo: no tty present and no askpass program specified"))throw new Error(`idb doesn't appear to be installed. Run "${t.idbPath} list-targets" to fix this.`);throw e}function _(e,t){return e.catch((e=>{throw null==t||t.error(e.message),new Error("A problem with idb has ocurred. Please run `sudo rm -rf /tmp/idb*` and `sudo yum install -y fb-idb` to update it, if that doesn't fix it, post in https://github.com/microsoft/vscode-react-native.")}))}t.isIdbAvailable=u.PromiseUtil.promiseCacheDecorator(d),t.isXcodeDetected=p,t.idbListTargets=f,t.checkIdbIsInstalled=g,t.default={isAvailable:d,targets:function(){return n(this,void 0,void 0,(function*(){if("darwin"!==process.platform)return[];if(!(yield p())){return function(e,t){return n(this,void 0,void 0,(function*(){return(yield t(e))?(new c.ChildProcess).execToString(`${e} --list 1 --only device`).then((e=>h(e))).catch((e=>(a.logger.warn(`Failed to query idb_companion --list 1 --only device for physical targets: ${e}`),[]))):(a.logger.warn(`Unable to locate idb_companion in ${e}. Try running sudo yum install -y fb-idb`),[])}))}(s.dirname(t.idbPath)+"/idb_companion",d)}return(yield(0,t.isIdbAvailable)())?yield f(t.idbPath):(new c.ChildProcess).execToString("xcrun xctrace list devices").then((e=>{const t=[],r=e.split("\n").map((e=>e.trim())).filter((e=>!!e)),n=r.indexOf("== Devices ==")+1,o=r.indexOf("== Simulators ==")-1;for(let e=n;e<=o;e++){const n=r[e].split(" ").map((e=>e.trim())).filter((e=>!!e));n[n.length-1].match(/\(.+\)/)&&n[n.length-2].match(/\(.+\)/)&&t.push({id:n[n.length-1].replace(/\(|\)/g,"").trim(),name:n.slice(0,n.length-2).join(" "),isVirtualTarget:!1,isOnline:!0})}return t})).catch((e=>(a.logger.warn(`Failed to query for devices using xctrace: ${e}`),[])))}))},push:function(e,r,o,i,s){return n(this,void 0,void 0,(function*(){const n=new c.ChildProcess;return yield g(),_(n.execToString(`${t.idbPath} --log ${l} file push --udid ${e} --bundle-id ${o} '${r}' '${i}'`).then((()=>{})).catch((e=>m(e))),s)}))},pull:function(e,r,o,i,s){return n(this,void 0,void 0,(function*(){const n=new c.ChildProcess;return yield g(),_(n.execToString(`${t.idbPath} --log ${l} file pull --udid ${e} --bundle-id ${o} '${r}' '${i}'`).then((()=>{})).catch((e=>m(e))),s)}))}}},7629:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDebugModeManager=void 0;const o=r(9845),i=r(3590),s=r(7073);class a extends o.ApplePlatformDebugModeManager{constructor(e,t,r){super(e,t),this.projectRoot=t,this.simulatorPlist=new s.SimulatorPlist(this.platformProjectRoot,this.projectRoot,r)}setAppRemoteDebuggingSetting(e,t,r){return n(this,void 0,void 0,(function*(){const n=new i.PlistBuddy,o=yield this.findPListFileWithRetry(t,r);yield e?n.setPlistProperty(o,a.EXECUTOR_CLASS_SETTING_NAME,a.WEBSOCKET_EXECUTOR_NAME):n.deletePlistProperty(o,a.EXECUTOR_CLASS_SETTING_NAME),yield n.setPlistBooleanProperty(o,a.REMOTE_DEBUGGING_SETTING_NAME,e)}))}getAppRemoteDebuggingSetting(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.findPListFileWithRetry(e,t);try{const[e,t]=yield Promise.all([(new i.PlistBuddy).readPlistProperty(r,a.EXECUTOR_CLASS_SETTING_NAME),(new i.PlistBuddy).readPlistProperty(r,a.REMOTE_DEBUGGING_SETTING_NAME)]);return e===a.WEBSOCKET_EXECUTOR_NAME&&"true"===t}catch(e){return!1}}))}tryOneAttemptToFindPListFile(e,t){return n(this,void 0,void 0,(function*(){try{return yield this.simulatorPlist.findPlistFile(e,t)}catch(e){return this.logger.debug(`Failed one attempt to find plist file: ${String(e)}`),""}}))}}a.WEBSOCKET_EXECUTOR_NAME="RCTWebSocketExecutor",a.EXECUTOR_CLASS_SETTING_NAME=":RCTDevMenu:executorClass",t.IOSDebugModeManager=a},233:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDeviceTracker=void 0;const o=r(2081),i=r(6729),s=r(7693),a=r(1205),c=r(9505),u=r(9185),l=r(5288),d=r(8287);class p extends i.AbstractDeviceTracker{constructor(){super(),this.portForwardingClientPath=`${(0,u.findFileInFolderHierarchy)(__dirname,"static/PortForwardingMacApp.app")||__dirname}/Contents/MacOS/PortForwardingMacApp`,this.iOSTargetManager=new d.IOSTargetManager,this.portForwarders=[]}start(){return n(this,void 0,void 0,(function*(){this.logger.debug("Start iOS device tracker"),(yield(0,l.isXcodeDetected)())&&this.startDevicePortForwarders(),yield this.queryDevicesLoop()}))}stop(){this.logger.debug("Stop iOS device tracker"),this.isStop=!0,this.portForwarders.forEach((e=>e.kill()))}queryDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.getRunningSimulators();this.processDevices(e,!0);const t=yield this.getActiveDevices();this.processDevices(t,!1)}))}processDevices(e,t){const r=new Set([...s.DeviceStorage.devices.entries()].filter((e=>e[1]instanceof c.IOSClienDevice&&e[1].isVirtualTarget===t)).map((e=>e[0])));for(const n of e)if(r.has(n.id))r.delete(n.id);else{const e=new c.IOSClienDevice(n.id,t,a.ClientOS.iOS,n.isOnline,n.name);s.DeviceStorage.devices.set(e.id,e)}r.forEach((e=>{s.DeviceStorage.devices.delete(e)}))}
/**
     * @preserve
     * Start region: The code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L81-L88
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */startDevicePortForwarders(){this.portForwarders.length>0||(this.portForwarders=[this.forwardPort(8089,8079),this.forwardPort(8088,8078)])}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L81-L88
     */
/**
     * @preserve
     * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L63-L79
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */forwardPort(e,t){const r=(0,o.execFile)(this.portForwardingClientPath,[`-portForward=${e}`,`-multiplexChannelPort=${t}`],((e,t,r)=>{(null==e?void 0:e.killed)||this.logger.error(`Port forwarding app failed to start: ${String(null==e?void 0:e.message)}, ${t}, ${r}`)}));return this.logger.debug(`Port forwarding app started for ${e} port`),r.addListener("error",(e=>{this.logger.error("Port forwarding app error",e)})),r.addListener("exit",(e=>{this.logger.debug(`Port forwarding app exited with code ${String(e)}`)})),r}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L63-L79
     */getRunningSimulators(){return n(this,void 0,void 0,(function*(){return yield this.iOSTargetManager.getTargetList((e=>e.isOnline))}))}
/**
     * @preserve
     * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/dispatcher/iOSDevice.tsx#L227-L232
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */getActiveDevices(){return l.default.targets().catch((e=>(this.logger.error(e.message),[])))}}t.IOSDeviceTracker=p},9911:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSPlatform=void 0;const o=r(1017),i=r(6625),s=r(3403),a=r(5640),c=r(5458),u=r(7005),l=r(7599),d=r(4191),p=r(3821),h=r(312),f=r(1638),g=r(9897),m=r(9327),_=r(8287),v=r(7629),E=r(3590);s.config({messageFormat:s.MessageFormat.bundle,bundleFormat:s.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/ios/iOSPlatform.ts"));const y=s.loadMessageBundle(r(1017).join(__dirname,"src/extension/ios/iOSPlatform.ts"));class b extends f.GeneralMobilePlatform{constructor(e,t={}){super(e,t),this.runOptions=e,this.plistBuddy=new E.PlistBuddy,this.defaultConfiguration="Debug",this.configurationArgumentName="--configuration",this.targetManager=new _.IOSTargetManager,this.runOptions.configuration=this.getConfiguration(),this.runOptions.iosRelativeProjectPath&&this.logger.warning(y(0,null));const r=b.getOptFromRunArgs(this.runArguments,"--project-path",!1);this.iosProjectRoot=o.join(this.projectPath,r||this.runOptions.iosRelativeProjectPath||b.DEFAULT_IOS_PROJECT_RELATIVE_PATH);const n=b.getOptFromRunArgs(this.runArguments,"--scheme",!1);this.iosDebugModeManager=new v.IOSDebugModeManager(this.iosProjectRoot,this.projectPath,n||this.runOptions.scheme)}getTarget(){return n(this,void 0,void 0,(function*(){if(!this.target){const e=yield this.getTargetFromRunArgs();if(e)this.target=e;else{const e=yield this.targetManager.getTargetList(),t=e.filter((e=>{switch(this.runOptions.target){case u.TargetType.Simulator:return e.isVirtualTarget;case u.TargetType.Device:return!e.isVirtualTarget;case void 0:case"":return!0;default:return e.id===this.runOptions.target||e.name===this.runOptions.target}}));if(t.length)this.target=_.IOSTarget.fromInterface(t[0]);else{if(!e.length)throw g.ErrorHelper.getInternalError(h.InternalErrorCode.IOSThereIsNoAnyDebuggableTarget);this.logger.warning(y(1,null,this.runOptions.target)),this.target=_.IOSTarget.fromInterface(e[0])}}}return this.target}))}showDevMenu(e){return n(this,void 0,void 0,(function*(){const t=e.getAppWorker();t&&t.showDevMenuCommand()}))}reloadApp(e){return n(this,void 0,void 0,(function*(){const t=e.getAppWorker();t&&t.reloadAppCommand()}))}runApp(){var e;return n(this,void 0,void 0,(function*(){let t={platform:{value:l.PlatformType.iOS,isPii:!1}};this.runOptions.isDirect&&(t.isDirect={value:!0,isPii:!1},null===(e=this.projectObserver)||void 0===e||e.updateRNIosHermesProjectState(!0)),t=p.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,t),yield p.TelemetryHelper.generate("iOSPlatform.runApp",t,(()=>n(this,void 0,void 0,(function*(){const e=f.GeneralMobilePlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);(!i.valid(this.runOptions.reactNativeVersions.reactNativeVersion)||i.gte(this.runOptions.reactNativeVersions.reactNativeVersion,b.NO_PACKAGER_VERSION)||m.ProjectVersionHelper.isCanaryVersion(this.runOptions.reactNativeVersions.reactNativeVersion))&&this.runArguments.push("--no-packager"),(i.gte(this.runOptions.reactNativeVersions.reactNativeVersion,b.NEW_RN_CLI_BEHAVIOUR_VERSION)||m.ProjectVersionHelper.isCanaryVersion(this.runOptions.reactNativeVersions.reactNativeVersion))&&this.runArguments.push("--verbose");const t=new c.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand("run-ios",this.runArguments,{env:e});yield new d.OutputVerifier((()=>this.generateSuccessPatterns(this.runOptions.reactNativeVersions.reactNativeVersion)),(()=>Promise.resolve(b.RUN_IOS_FAILURE_PATTERNS)),l.PlatformType.iOS).process(t)}))))}))}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){if(!(yield this.getTarget()).isVirtualTarget)return void this.logger.info("Application is running on a device, please shake device and select 'Debug JS Remotely' to enable debugging.");const[e,t]=yield Promise.all([this.iosDebugModeManager.getAppRemoteDebuggingSetting(this.runOptions.configuration,this.runOptions.productName),this.getBundleId()]);if(e)return;const r=new a.ChildProcess,n=yield r.execToString("xcrun simctl spawn booted launchctl list"),o=new RegExp(`(\\S+${String(t)}\\S+)`).exec(n);return o&&(yield r.exec(`xcrun simctl spawn booted launchctl stop ${o[1]}`)),yield this.iosDebugModeManager.setAppRemoteDebuggingSetting(!0,this.runOptions.configuration,this.runOptions.productName),yield this.runApp()}))}disableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){if((yield this.getTarget()).isVirtualTarget)return this.iosDebugModeManager.setAppRemoteDebuggingSetting(!1,this.runOptions.configuration,this.runOptions.productName)}))}prewarmBundleCache(){return this.packager.prewarmBundleCache(l.PlatformType.iOS)}getRunArguments(){let e=[];if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0){if(e=this.runOptions.runArguments,this.runOptions.scheme){b.getOptFromRunArgs(e,"--scheme",!1)?this.logger.warning(y(2,null)):e.push("--scheme",this.runOptions.scheme)}}else this.runOptions.target&&e.push(...this.handleTargetArg(this.runOptions.target)),this.runOptions.iosRelativeProjectPath&&e.push("--project-path",this.runOptions.iosRelativeProjectPath),this.runOptions.scheme&&e.push("--scheme",this.runOptions.scheme);return e}getTargetFromRunArgs(){return n(this,void 0,void 0,(function*(){if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0){const e=yield this.targetManager.getTargetList(),t=f.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--udid");if(t){const r=e.find((e=>e.id===t));if(r)return _.IOSTarget.fromInterface(r);this.logger.warning(y(3,null,t))}const r=f.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--device");if(r){const t=e.find((e=>!e.isVirtualTarget&&e.name===r));if(t)return _.IOSTarget.fromInterface(t);this.logger.warning(y(4,null,r))}const n=f.GeneralMobilePlatform.getOptFromRunArgs(this.runOptions.runArguments,"--simulator");if(n){const t=e.find((e=>e.isVirtualTarget&&e.name===n));if(t)return _.IOSTarget.fromInterface(t);this.logger.warning(y(5,null,n))}}}))}handleTargetArg(e){return e===u.TargetType.Device||e===u.TargetType.Simulator?[`--${e}`]:["--udid",e]}generateSuccessPatterns(e){return n(this,void 0,void 0,(function*(){const t=[...b.RUN_IOS_SUCCESS_PATTERNS];if(!(yield this.getTarget()).isVirtualTarget)return i.gte(e,b.NEW_RN_CLI_BEHAVIOUR_VERSION)||m.ProjectVersionHelper.isCanaryVersion(e)?t.push("success Installed the app on the device"):t.push("INSTALLATION SUCCEEDED"),t;const r=yield this.getBundleId();return i.gte(e,b.NEW_RN_CLI_BEHAVIOUR_VERSION)||m.ProjectVersionHelper.isCanaryVersion(e)?t.push(`Launching "${r}"\nsuccess Successfully launched the app `):t.push(`Launching ${r}\n${r}: `),t}))}getConfiguration(){return b.getOptFromRunArgs(this.runArguments,this.configurationArgumentName)||this.defaultConfiguration}getBundleId(){let e=this.runOptions.scheme;if(!e){const t=b.getOptFromRunArgs(this.runArguments,"--scheme",!1);t&&(e=t)}return this.plistBuddy.getBundleId(this.iosProjectRoot,this.projectPath,l.PlatformType.iOS,!0,this.runOptions.configuration,this.runOptions.productName,e)}}b.DEFAULT_IOS_PROJECT_RELATIVE_PATH="ios",b.NEW_RN_CLI_BEHAVIOUR_VERSION="0.60.0",b.RUN_IOS_FAILURE_PATTERNS=[{pattern:"No devices are booted",errorCode:h.InternalErrorCode.IOSSimulatorNotLaunchable},{pattern:"FBSOpenApplicationErrorDomain",errorCode:h.InternalErrorCode.IOSSimulatorNotLaunchable},{pattern:"ios-deploy",errorCode:h.InternalErrorCode.IOSDeployNotFound}],b.RUN_IOS_SUCCESS_PATTERNS=["BUILD SUCCEEDED|success Successfully built the app"],t.IOSPlatform=b},8287:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IOSTargetManager=t.IOSTarget=void 0;const o=r(3403),i=r(9496),s=r(5640),a=r(8102),c=r(1529),u=r(9023),l=r(9144),d=r(7005);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/ios/iOSTargetManager.ts"));const p=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/ios/iOSTargetManager.ts"));class h extends c.MobileTarget{static fromInterface(e){return new h(e.isOnline,e.isVirtualTarget,e.id,e.name,e.system)}constructor(e,t,r,n,o){super(e,t,r,n),this._system=o}get system(){return this._system}get name(){return this._name}set name(e){this._name=e}}t.IOSTarget=h;class f extends u.MobileTargetManager{constructor(){super(...arguments),this.childProcess=new s.ChildProcess,this.logger=l.OutputChannelLogger.getChannel(l.OutputChannelLogger.MAIN_CHANNEL_NAME,!0)}collectTargets(e){return n(this,void 0,void 0,(function*(){if(this.targets=[],void 0===e||e===d.TargetType.Simulator){const e=JSON.parse(yield this.childProcess.execToString(`${f.SIMULATORS_LIST_COMMAND}`));Object.keys(e.devices).forEach((t=>{const r=t.split(".").slice(-1)[0].split("-"),n=`${r[0]} ${r.slice(1).join(".")}`;e.devices[t].forEach((e=>{var t;n.includes("iOS")&&(null===(t=this.targets)||void 0===t||t.push({id:e.udid,name:e.name,system:n,isVirtualTarget:!0,isOnline:e.state===f.BOOTED_STATE}))}))}))}if(void 0===e||e===d.TargetType.Device){const e=(yield this.childProcess.execToString(`${f.ALL_DEVICES_LIST_COMMAND}`)).split("\n").map((e=>e.trim())).filter((e=>!!e)),t=e.indexOf("== Devices ==")+1,r=e.indexOf("== Simulators ==")-1;for(let n=t;n<=r;n++){const t=e[n].split(" ").map((e=>e.trim())).filter((e=>!!e));t[t.length-1].match(/\(.+\)/)&&t[t.length-2].match(/\(.+\)/)&&this.targets.push({id:t[t.length-1].replace(/\(|\)/g,"").trim(),name:t.slice(0,t.length-2).join(" "),system:t[t.length-2].replace(/\(|\)/g,"").trim(),isVirtualTarget:!1,isOnline:!0})}}}))}selectAndPrepareTarget(e){return n(this,void 0,void 0,(function*(){const t=yield this.startSelection(e);if(t)return!t.isOnline&&t.isVirtualTarget?this.launchSimulator(t):h.fromInterface(t)}))}isVirtualTarget(e){return n(this,void 0,void 0,(function*(){try{if(e===d.TargetType.Device)return!1;if(e===d.TargetType.Simulator)return!0;const t=(yield this.getTargetList((t=>t.id===e||t.name===e)))[0];if(t)return t.isVirtualTarget;throw Error("There is no any target with specified target string")}catch(t){throw new Error(p(0,null,e))}}))}startSelection(e){return n(this,void 0,void 0,(function*(){const t=yield this.selectSystem(e);if(t)return yield this.selectTarget((r=>(!e||e(r))&&(t===f.ANY_SYSTEM||r.system===t)))}))}selectSystem(e){return n(this,void 0,void 0,(function*(){const t=yield this.getTargetList(e);if(!t.find((e=>e.isVirtualTarget)))return f.ANY_SYSTEM;const r=new Set(t.map((e=>e.system))),n=Array.from(r);let o=n[0];if(n.length>1){const e={ignoreFocusOut:!0,canPickMany:!1,placeHolder:p(1,null)};o=yield i.window.showQuickPick(n,e)}return null==o?void 0:o.toString()}))}launchSimulator(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{let o=!1;const i=this.childProcess.spawn(f.XCRUN_COMMAND,[f.SIMCTL_COMMAND,f.BOOT_COMMAND,e.id],{detached:!0},!0);i.spawnedProcess.unref(),i.outcome.catch((t=>{o=!0,this.logger.error(p(2,null,`${e.name}(${e.id})`,t)),r(t)}));a.PromiseUtil.waitUntil((()=>n(this,void 0,void 0,(function*(){if(o)throw new Error("iOS simulator launch failed unexpectedly");yield this.collectTargets(d.TargetType.Simulator);return!!(yield this.getTargetList()).find((t=>t.id===e.id&&t.isOnline))||null}))),1e3,1e3*f.SIMULATOR_START_TIMEOUT).then((n=>{n?(e.isOnline=!0,this.logger.info(p(3,null,e.name)),t(h.fromInterface(e))):r(new Error(`Virtual device launch finished with an exception: ${p(4,null,e.name,f.SIMULATOR_START_TIMEOUT)}`))}),(()=>{}))}))}))}}f.XCRUN_COMMAND="xcrun",f.SIMCTL_COMMAND="simctl",f.BOOT_COMMAND="boot",f.SIMULATORS_LIST_COMMAND=`${f.XCRUN_COMMAND} ${f.SIMCTL_COMMAND} list devices available --json`,f.ALL_DEVICES_LIST_COMMAND=`${f.XCRUN_COMMAND} xctrace list devices`,f.BOOTED_STATE="Booted",f.SIMULATOR_START_TIMEOUT=120,f.ANY_SYSTEM="AnySystem",t.IOSTargetManager=f},3590:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PlistBuddy=void 0;const o=r(1017),i=r(7147),s=r(2884),a=r(6625),c=r(3116),u=r(9897),l=r(312),d=r(9327),p=r(9901),h=r(6727),f=r(7599),g=r(8280);class m{constructor({nodeChildProcess:e=new c.Node.ChildProcess}={}){this.TARGET_BUILD_DIR_SEARCH_KEY="TARGET_BUILD_DIR",this.FULL_PRODUCT_NAME_SEARCH_KEY="FULL_PRODUCT_NAME",this.nodeChildProcess=e}getBundleId(e,t,r,i=!0,s="Debug",a,c){return n(this,void 0,void 0,(function*(){const n=yield this.getExecutableAndConfigurationFolder(e,t,r,i,s,a,c),u=o.join(n.configurationFolder,n.executable,r===f.PlatformType.iOS?"Info.plist":o.join("Contents","Info.plist"));return yield this.invokePlistBuddy("Print:CFBundleIdentifier",u)}))}getExecutableAndConfigurationFolder(e,t,r,s=!0,c="Debug",p,h){return n(this,void 0,void 0,(function*(){const n=yield d.ProjectVersionHelper.getReactNativeVersions(t);let g;a.gte(n.reactNativeVersion,m.SCHEME_IN_PRODUCTS_FOLDER_PATH_VERSION)||d.ProjectVersionHelper.isCanaryVersion(n.reactNativeVersion)?(h||(h=this.getInferredScheme(e,t,n.reactNativeVersion),r===f.PlatformType.macOS&&(h=`${h}-macOS`)),g=o.join(e,"build",h,"Build","Products")):g=o.join(e,"build","Build","Products");const _=r===f.PlatformType.iOS?this.getSdkType(s,h):void 0;let v=o.join(g,`${c}${_?`-${_}`:""}`),E="";if(p){if(E=`${p}.app`,!i.existsSync(o.join(v,E))){v=this.getConfigurationData(t,n.reactNativeVersion,e,c,h,v,_).configurationFolder}}else{const r=this.findExecutable(v);if(r.length){if(r.length>1)throw u.ErrorHelper.getInternalError(l.InternalErrorCode.IOSFoundMoreThanOneExecutablesCleanupBuildFolder,v)}else{const o=this.getConfigurationData(t,n.reactNativeVersion,e,c,h,v,_);v=o.configurationFolder,r.push(o.fullProductName)}E=`${r[0]}`}return{executable:E,configurationFolder:v}}))}setPlistProperty(e,t,r){return n(this,void 0,void 0,(function*(){try{yield this.invokePlistBuddy(`Set ${t} ${r}`,e)}catch(n){yield this.invokePlistBuddy(`Add ${t} string ${r}`,e)}}))}setPlistBooleanProperty(e,t,r){return n(this,void 0,void 0,(function*(){try{yield this.invokePlistBuddy(`Set ${t} ${String(r)}`,e)}catch(n){yield this.invokePlistBuddy(`Add ${t} bool ${String(r)}`,e)}}))}deletePlistProperty(e,t){return n(this,void 0,void 0,(function*(){try{yield this.invokePlistBuddy(`Delete ${t}`,e)}catch(e){if(!e.toString().toLowerCase().includes("does not exist"))throw e}}))}readPlistProperty(e,t){return this.invokePlistBuddy(`Print ${t}`,e)}getBuildPathAndProductName(e,t,r,n,o){const i=["-workspace",t,"-scheme",n];o&&i.push("-sdk",o),i.push("-configuration",r,"-showBuildSettings");const s=this.nodeChildProcess.execFileSync("xcodebuild",i,{encoding:"utf8",cwd:e}),a=this.fetchParameterFromBuildSettings(s,this.TARGET_BUILD_DIR_SEARCH_KEY),c=this.fetchParameterFromBuildSettings(s,this.FULL_PRODUCT_NAME_SEARCH_KEY);if(!a)throw new Error("Failed to get the target build directory.");if(!c)throw new Error("Failed to get full product name.");return{fullProductName:c,configurationFolder:a}}getInferredScheme(e,t,r){const n=this.getProjectWorkspaceConfigName(e,t,r);return(0,p.getFileNameWithoutExtension)(n)}getSdkType(e,t){var r;const n=e?"simulator":"os";return`${(null!==(r=null==t?void 0:t.toLowerCase().indexOf("tvos"))&&void 0!==r?r:-1)>-1?"appletv":"iphone"}${n}`}getProjectWorkspaceConfigName(e,t,r){const n=`node_modules/@react-native-community/${a.gte(r,m.NEW_RN_IOS_CLI_LOCATION_VERSION)||d.ProjectVersionHelper.isCanaryVersion(r)?"cli-platform-ios":"cli"}/build/${a.gte(r,m.RN69_FUND_XCODE_PROJECT_LOCATION_VERSION)?"config/findXcodeProject":"commands/runIOS/findXcodeProject"}`,s=(0,(0,h.default)(o.join(g.AppLauncher.getNodeModulesRootByProjectPath(t),n)).default)(i.readdirSync(e));if(!s)throw new Error(`Could not find Xcode project files in "${e}" folder`);return s.name}getConfigurationData(e,t,r,n,o,i,s){if(!o)throw u.ErrorHelper.getInternalError(l.InternalErrorCode.IOSCouldNotFoundExecutableInFolder,i);const a=this.getProjectWorkspaceConfigName(r,e,t);return this.getBuildPathAndProductName(r,a,n,o,s)}fetchParameterFromBuildSettings(e,t){const r=new RegExp(`${t} = (.+)$`,"m").exec(e);return r&&r[1]?r[1].trim():null}findExecutable(e){return s.sync("*.app",{cwd:e})}invokePlistBuddy(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.nodeChildProcess.exec(`${m.plistBuddyExecutable} -c '${e}' '${t}'`);return(yield r.outcome).toString().trim()}))}}m.plistBuddyExecutable="/usr/libexec/PlistBuddy",m.SCHEME_IN_PRODUCTS_FOLDER_PATH_VERSION="0.59.0",m.NEW_RN_IOS_CLI_LOCATION_VERSION="0.60.0",m.RN69_FUND_XCODE_PROJECT_LOCATION_VERSION="0.69.0",t.PlistBuddy=m},1880:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SimctrlHelper=void 0;const o=new(r(5640).ChildProcess);t.SimctrlHelper=class{static getBootediOSSimulatorList(){return n(this,void 0,void 0,(function*(){return(yield o.execToString("xcrun simctl list | awk -F'[()]' '/(Booted)/ { print $2 }'")).split("\n")}))}static installApplicationToSimulator(e,t){return n(this,void 0,void 0,(function*(){const r=`xcrun simctl install ${e} ${t}`;yield o.execToString(r)}))}}},7073:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SimulatorPlist=void 0;const o=r(1017),i=r(3403),s=r(9897),a=r(9144),c=r(9452),u=r(5640),l=r(3821),d=r(7599),p=r(3590);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/ios/simulatorPlist.ts"));const h=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/ios/simulatorPlist.ts"));t.SimulatorPlist=class{constructor(e,t,r,{nodeFileSystem:n=new c.FileSystem,plistBuddy:o,nodeChildProcess:i=new u.ChildProcess}={}){this.logger=a.OutputChannelLogger.getMainChannel(),this.iosProjectRoot=e,this.projectRoot=t,this.scheme=r,this.nodeFileSystem=n,this.plistBuddy=o||new p.PlistBuddy,this.nodeChildProcess=i}findPlistFile(e,t){return n(this,void 0,void 0,(function*(){const[r,n]=yield Promise.all([this.plistBuddy.getBundleId(this.iosProjectRoot,this.projectRoot,d.PlatformType.iOS,!0,e,t,this.scheme),this.nodeChildProcess.exec("xcrun simctl getenv booted HOME").then((e=>e.outcome))]),i=o.join(n.toString().trim(),"Containers","Data","Application"),a=o.join("Library","Preferences",`${r}.plist`),c=yield this.nodeFileSystem.readDir(i);this.logger.info(`About to search for plist in base folder: ${i} pathAfter: ${a} in each of the apps: ${String(c)}`);const u=c.map((e=>o.join(i,e,a))).filter((e=>this.nodeFileSystem.existsSync(e)));if(0===u.length)throw new Error(`Unable to find plist file for ${r}`);return u.length>1&&(l.TelemetryHelper.sendSimpleEvent("multipleDebugPlistFound"),this.logger.warning(s.ErrorHelper.getWarning(h(0,null)))),u[0]}))}}},7599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformType=void 0,function(e){e.Android="android",e.iOS="ios",e.Windows="windows",e.Exponent="exponent",e.macOS="macos",e.ExpoWeb="expoweb"}(t.PlatformType||(t.PlatformType={}))},3377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchScenariosManager=void 0;const n=r(1017),o=r(7147),i=r(9901);t.LaunchScenariosManager=class{constructor(e){this.pathToLaunchFile=n.resolve(e,".vscode","launch.json")}getLaunchScenarios(){return this.launchScenarios}readLaunchScenarios(){if(o.existsSync(this.pathToLaunchFile)){const e=o.readFileSync(this.pathToLaunchFile,"utf8");this.launchScenarios=(0,i.stripJsonTrailingComma)(e)}}updateLaunchScenario(e,t){this.readLaunchScenarios();const r=this.getFirstScenarioIndexByParams(e),n=this.getLaunchScenarios();null!==r&&n.configurations&&(Object.assign(n.configurations[r],t),this.writeLaunchScenarios(n))}getFirstScenarioIndexByParams(e){if(this.launchScenarios.configurations)for(let t=0;t<this.launchScenarios.configurations.length;t++){const r=this.launchScenarios.configurations[t];if(e.name===r.name&&e.platform===r.platform&&e.type===r.type&&e.request===r.request)return t}return null}writeLaunchScenarios(e=this.launchScenarios){o.existsSync(this.pathToLaunchFile)&&o.writeFileSync(this.pathToLaunchFile,JSON.stringify(e,null,4))}}},2663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=void 0;const n=r(8694);class o{log(e,t){n.LogHelper.LOG_LEVEL!==n.LogLevel.None&&t>=n.LogHelper.LOG_LEVEL&&(e=o.getFormattedMessage(e,t),console.log(e))}info(e){this.log(e,n.LogLevel.Info)}warning(e){this.log(e,n.LogLevel.Warning)}error(e,t,r=!0){console.error(o.getFormattedMessage(e,n.LogLevel.Error)),r&&t&&t.stack&&console.error(`Stack: ${t.stack}`)}debug(e){this.log(e,n.LogLevel.Debug)}logStream(e,t){t.write(e.toString())}static getFormattedMessage(e,t){return`[${n.LogLevel[t]}] ${e}\n`}}t.ConsoleLogger=o},8694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLoggingDirectory=t.getLoggingOptions=t.LogHelper=t.LogLevel=void 0;const n=r(1017),o=r(1890);var i;!function(e){e[e.None=0]="None",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error",e[e.Verbose=6]="Verbose",e[e.Custom=7]="Custom"}(i=t.LogLevel||(t.LogLevel={}));function s(){return{LogsDirectory:process.env.REACT_NATIVE_TOOLS_LOGS_DIR}}t.LogHelper=class{static get LOG_LEVEL(){return function(){try{return r(2463).SettingsHelper.getLogLevel()}catch(e){return i.Info}}()}},t.getLoggingOptions=s,t.getLoggingDirectory=function(){const e=s();if(e.LogsDirectory){const t=e.LogsDirectory;return n.isAbsolute(t)?(o.sync(t),t):null}return null}},4270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullLogger=void 0;t.NullLogger=class{log(e,t){}info(e){}warning(e){}error(e,t,r){}debug(e){}logStream(e,t){}}},9144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelLogger=void 0;const n=r(7147),o=r(1017),i=r(9496),s=r(9901),a=r(8694),c={};class u{static disposeChannel(e){c[e]&&(c[e].getOutputChannel().dispose(),c[e].channelLogFileStream&&c[e].channelLogFileStream.end(),delete c[e])}static getMainChannel(){return this.getChannel(this.MAIN_CHANNEL_NAME,!0)}static getChannel(e,t,r,n){return c[e]||(c[e]=new u(e,t,r,n)),c[e]}constructor(e,t=!1,r=!1,s=!1){this.channelName=e,this.preserveFocus=r,this.logTimestamps=s;const c=(0,a.getLoggingDirectory)();if(c){const t=e.replace(u.forbiddenFileNameSymbols,"");this.channelLogFilePath=o.join(c,`${t}.txt`),this.channelLogFileStream=n.createWriteStream(this.channelLogFilePath),this.channelLogFileStream.on("error",(e=>{this.error(`Error writing to log file at path: ${String(this.channelLogFilePath)}. Error: ${String(e.toString())}\n`)}))}t||(this.channel=i.window.createOutputChannel(this.channelName),this.channel.show(this.preserveFocus))}log(e,t){a.LogHelper.LOG_LEVEL!==a.LogLevel.None&&t>=a.LogHelper.LOG_LEVEL&&(e=u.getFormattedMessage(e,a.LogLevel[t],this.logTimestamps),this.channel.appendLine(e),this.channelLogFileStream&&this.channelLogFileStream.write(e))}logWithCustomTag(e,t,r){a.LogHelper.LOG_LEVEL!==a.LogLevel.None&&r===a.LogLevel.Custom&&(t=u.getFormattedMessage(t,e,this.logTimestamps),this.channel.appendLine(t),this.channelLogFileStream&&this.channelLogFileStream.write(t))}info(e){this.log(e,a.LogLevel.Info)}warning(e){this.log(e.toString(),a.LogLevel.Warning)}error(e,t,r=!0){const n=u.getFormattedMessage(e,a.LogLevel[a.LogLevel.Error],this.logTimestamps);this.channel.appendLine(n),this.channelLogFileStream&&this.channelLogFileStream.write(n),r&&t&&t.stack&&(this.channel.appendLine(`Stack: ${t.stack}`),this.channelLogFileStream&&this.channelLogFileStream.write(`Stack: ${t.stack}`))}debug(e){this.log(e,a.LogLevel.Debug)}logStream(e){this.channel.append(e.toString()),this.channelLogFileStream&&this.channelLogFileStream.write(e)}setFocusOnLogChannel(){this.channel.show(!1)}static getFormattedMessage(e,t,r=!1){let n=`[${t}] ${e}\n`;return r&&(n=`[${(0,s.getFormattedDatetimeString)(new Date)}] ${n}`),n}getOutputChannel(){return this.channel}clear(){this.channel.clear()}get channel(){return this.outputChannel||(this.outputChannel=i.window.createOutputChannel(this.channelName),this.outputChannel.show(this.preserveFocus)),this.outputChannel}set channel(e){this.outputChannel=e}}u.MAIN_CHANNEL_NAME="React Native",u.forbiddenFileNameSymbols=/\W/gi,t.OutputChannelLogger=u},5353:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultsHelper=void 0;const o=r(3116);t.DefaultsHelper=class{constructor(){this.DEV_MENU_SETTINGS="RCTDevMenu",this.nodeChildProcess=new o.Node.ChildProcess}setPlistBooleanProperty(e,t,r){return n(this,void 0,void 0,(function*(){yield this.invokeDefaultsCommand(`write ${e} ${this.DEV_MENU_SETTINGS} -dict-add ${t} -bool ${String(r)}`)}))}invokeDefaultsCommand(e){return n(this,void 0,void 0,(function*(){const t=yield this.nodeChildProcess.exec(`defaults ${e}`);return(yield t.outcome).toString().trim()}))}}},2760:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MacOSDebugModeManager=void 0;const o=r(1017),i=r(2037),s=r(9845),a=r(3590),c=r(9452),u=r(7599),l=r(5353);class d extends s.ApplePlatformDebugModeManager{constructor(e,t,r,{nodeFileSystem:n=new c.FileSystem,plistBuddy:o}={}){super(e,t),this.scheme=r,this.nodeFileSystem=n,this.plistBuddy=o||new a.PlistBuddy,this.defaultsHelper=new l.DefaultsHelper}setAppRemoteDebuggingSetting(e,t,r){return n(this,void 0,void 0,(function*(){const n=yield this.findPListFileWithRetry(t,r);return yield this.defaultsHelper.setPlistBooleanProperty(n,d.REMOTE_DEBUGGING_FLAG_NAME,e)}))}getAppRemoteDebuggingSetting(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.findPListFileWithRetry(e,t);try{return"true"===(yield this.plistBuddy.readPlistProperty(r,d.REMOTE_DEBUGGING_SETTING_NAME))}catch(e){return!1}}))}tryOneAttemptToFindPListFile(e,t){return n(this,void 0,void 0,(function*(){try{return yield this.findPlistFile(e,t)}catch(e){return this.logger.debug(`Failed one attempt to find plist file: ${String(e)}`),""}}))}findPlistFile(e,t){return n(this,void 0,void 0,(function*(){const r=yield this.plistBuddy.getBundleId(this.platformProjectRoot,this.projectRoot,u.PlatformType.macOS,!1,e,t,this.scheme),n=o.join((0,i.homedir)(),"Library","Preferences",`${r}.plist`);if(yield this.nodeFileSystem.exists(n))return n;throw new Error(`Unable to find plist file for ${r}`)}))}}d.REMOTE_DEBUGGING_FLAG_NAME="isDebuggingRemotely",t.MacOSDebugModeManager=d},147:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MacOSPlatform=void 0;const o=r(1017),i=r(6625),s=r(7005),a=r(7599),c=r(4191),u=r(3821),l=r(5458),d=r(312),p=r(3590),h=r(5640),f=r(9327),g=r(2760);class m extends s.GeneralPlatform{constructor(e,t={}){super(e,t),this.runOptions=e;const r=m.getOptFromRunArgs(this.runArguments,"--project-path",!1);this.macosProjectRoot=o.join(this.projectPath,r||m.DEFAULT_MACOS_PROJECT_RELATIVE_PATH),this.plistBuddy=new p.PlistBuddy;const n=m.getOptFromRunArgs(this.runArguments,"--scheme",!1);this.macOSDebugModeManager=new g.MacOSDebugModeManager(this.macosProjectRoot,this.projectPath,n||this.runOptions.scheme)}runApp(){var e,t;return n(this,void 0,void 0,(function*(){let r={platform:{value:a.PlatformType.macOS,isPii:!1}};null===(e=this.projectObserver)||void 0===e||e.updateRNMacosProjectState(!0),this.runOptions.isDirect&&(r.isDirect={value:!0,isPii:!1},null===(t=this.projectObserver)||void 0===t||t.updateRNMacosHermesProjectState(!0)),r=u.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,r),yield u.TelemetryHelper.generate("MacOSPlatform.runApp",r,(()=>n(this,void 0,void 0,(function*(){const e=s.GeneralPlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);(!i.valid(this.runOptions.reactNativeVersions.reactNativeVersion)||i.gte(this.runOptions.reactNativeVersions.reactNativeVersion,m.NO_PACKAGER_VERSION)||f.ProjectVersionHelper.isCanaryVersion(this.runOptions.reactNativeVersions.reactNativeVersion))&&this.runArguments.push("--no-packager");const t=new l.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand(`run-${this.platformName}`,this.runArguments,{env:e});yield new c.OutputVerifier((()=>Promise.resolve(m.SUCCESS_PATTERNS)),(()=>Promise.resolve(m.FAILURE_PATTERNS)),this.platformName).process(t)}))))}))}prewarmBundleCache(){return n(this,void 0,void 0,(function*(){return this.packager.prewarmBundleCache(a.PlatformType.macOS)}))}getRunArguments(){const e=[];if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0)e.push(...this.runOptions.runArguments);else{const t=this.runOptions.target===s.TargetType.Simulator?"":this.runOptions.target;t&&e.push(`--${t}`)}return e}enableJSDebuggingMode(){return n(this,void 0,void 0,(function*(){const[e,t]=yield Promise.all([this.macOSDebugModeManager.getAppRemoteDebuggingSetting(this.runOptions.configuration,this.runOptions.productName),this.getApplicationName()]);e||(yield this.terminateMacOSapp(t),yield this.macOSDebugModeManager.setAppRemoteDebuggingSetting(!0,this.runOptions.configuration,this.runOptions.productName),yield this.runApp())}))}disableJSDebuggingMode(){return this.macOSDebugModeManager.setAppRemoteDebuggingSetting(!1,this.runOptions.configuration,this.runOptions.productName)}getApplicationName(){return n(this,void 0,void 0,(function*(){return(yield this.plistBuddy.getExecutableAndConfigurationFolder(this.macosProjectRoot,this.projectPath,a.PlatformType.macOS,!1,this.runOptions.configuration,this.runOptions.productName,this.getSchemeFromDebuggingParameters())).executable}))}getSchemeFromDebuggingParameters(){let e=this.runOptions.scheme;if(!e){const t=m.getOptFromRunArgs(this.runArguments,"--scheme",!1);t&&(e=t)}return e}terminateMacOSapp(e){return n(this,void 0,void 0,(function*(){const t=new h.ChildProcess,r=yield t.execToString(`ps -ax | grep ${e}`);if(r){const n=/(^\d*)\s\?\?/g,o=r.split("\n").find((t=>t.includes(e)));if(o){const e=n.exec(o.trim());e&&e[1]&&(yield t.execToString(`kill ${e[1]}`))}}}))}}m.SUCCESS_PATTERNS=["Launching app"],m.FAILURE_PATTERNS=[{pattern:"Unrecognized command 'run-macos'",errorCode:d.InternalErrorCode.ReactNativemacOSIsNotInstalled}],m.DEFAULT_MACOS_PROJECT_RELATIVE_PATH="macos",t.MacOSPlatform=m},1529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileTarget=void 0;t.MobileTarget=class{constructor(e,t,r,n){this._isOnline=e,this._isVirtualTarget=t,this._name=n,this._id=r}get name(){return this._name}set name(e){this._name=e}get id(){return this._id}set id(e){this._id=e}get isOnline(){return this._isOnline}set isOnline(e){this._isOnline=e}get isVirtualTarget(){return this._isVirtualTarget}}},9023:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MobileTargetManager=void 0;const o=r(3403),i=r(9496),s=r(7005);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/mobileTargetManager.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/mobileTargetManager.ts"));t.MobileTargetManager=class{getTargetList(e){return n(this,void 0,void 0,(function*(){return this.targets||(yield this.collectTargets()),e?this.targets.filter(e):this.targets}))}getTargetsCountWithFilter(e){return n(this,void 0,void 0,(function*(){return(yield this.getTargetList(e)).length}))}isVirtualTarget(e){return n(this,void 0,void 0,(function*(){if(e===s.TargetType.Device)return!1;if(e===s.TargetType.Simulator)return!0;throw new Error(a(0,null,e))}))}selectTarget(e){var t,r;return n(this,void 0,void 0,(function*(){const n=yield this.getTargetList(e);let o=(null===(t=n[0])||void 0===t?void 0:t.name)||(null===(r=n[0])||void 0===r?void 0:r.id);if(n.length>1){const e={ignoreFocusOut:!0,canPickMany:!1,placeHolder:a(1,null)};o=yield i.window.showQuickPick(n.map((e=>(null==e?void 0:e.name)||(null==e?void 0:e.id))),e)}return o?n.find((e=>e.name===o||e.id===o)):void 0}))}}},726:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CertificateProvider=void 0;const o=r(5643),i=r(1017),s=r(2037),a=r(7147),c=r(9452),u=r(1890),l=r(7504),d=r(3781),p=r(5288),h=r(2600),f=r(9144),g=r(2501),m=r(1205),_=r(3403);_.config({messageFormat:_.MessageFormat.bundle,bundleFormat:_.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/networkInspector/certificateProvider.ts"));const v=_.loadMessageBundle(r(1017).join(__dirname,"src/extension/networkInspector/certificateProvider.ts")),E=O("ca.key"),y=O("ca.crt"),b=O("server.key"),S=O("server.csr"),C=O("server.srl"),A=O("server.crt"),T="app.csr",w=/^[\w.-]+$/,P=/[=,]\s*CN=([^,]*)(,.*)?$/;
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/CertificateProvider.tsx
 */
function O(e){return i.resolve(s.homedir(),".config","vscode-react-native","certs",e)}t.CertificateProvider=class{constructor(e){this.adbHelper=e,this.certificateSetup=this.ensureServerCertExists(),this.logger=f.OutputChannelLogger.getChannel(g.NETWORK_INSPECTOR_LOG_CHANNEL_NAME)}loadSecureServerConfig(){return this.certificateSetup.then((()=>({key:a.readFileSync(b),cert:a.readFileSync(A),ca:a.readFileSync(y),requestCert:!0,rejectUnauthorized:!0})))}processCertificateSigningRequest(e,t,r,o){return n(this,void 0,void 0,(function*(){const n=this.santitizeString(e);if(""===n)return Promise.reject(new Error(`Received empty CSR from ${t} device`));this.ensureOpenSSLIsAvailable();const s=(yield l.dir()).path,a=i.join(s,"FlipperCerts");return this.certificateSetup.then((()=>this.getCACertificate())).then((e=>this.deployOrStageFileForMobileApp(r,"sonarCA.crt",e,n,t,o,a))).then((()=>this.generateClientCertificate(n))).then((e=>this.deployOrStageFileForMobileApp(r,"device.crt",e,n,t,o,a))).then((()=>this.extractAppNameFromCSR(n))).then((e=>"FS_ACCESS"===o?this.getTargetDeviceId(t,e,r,n):(0,h.v4)())).then((e=>({deviceId:e})))}))}extractAppNameFromCSR(e){return this.writeToTempFile(e).then((e=>(0,o.openssl)("req",{in:e,noout:!0,subject:!0,nameopt:!0,RFC2253:!1}).then((t=>[e,t])))).then((([e,t])=>new Promise((function(r,n){a.unlink(e,(e=>{e?n(e):r(t)}))})))).then((e=>{const t=e.trim().match(P);if(!t||t.length<2)throw new Error(`Cannot extract CN from ${e}`);return t[1]})).then((e=>{if(!e.match(w))throw new Error(`Disallowed app name in CSR: ${e}. Only alphanumeric characters and '.' allowed.`);return e}))}getTargetDeviceId(e,t,r,n){return e===m.ClientOS.Android?this.getTargetAndroidDeviceId(t,r,n):e===m.ClientOS.iOS?this.getTargetiOSDeviceId(t,r,n):e==m.ClientOS.MacOS?Promise.resolve(""):Promise.resolve("unknown")}ensureOpenSSLIsAvailable(){if(!(0,o.isInstalled)())throw new Error("It looks like you don't have OpenSSL installed globally. Please install it and add it to Path to continue.")}getCACertificate(){return new Promise(((e,t)=>{a.readFile(y,((r,n)=>{r?t(r):e(n.toString())}))}))}generateClientCertificate(e){return this.writeToTempFile(e).then((e=>(0,o.openssl)("x509",{req:!0,in:e,CA:y,CAkey:E,CAcreateserial:!0,CAserial:C})))}getRelativePathInAppContainer(e){const t=/Application\/[^/]+\/(.*)/.exec(e);if(t&&2===t.length)return t[1];throw new Error("Path didn't match expected pattern: "+e)}deployOrStageFileForMobileApp(e,t,r,o,s,u,l){return n(this,void 0,void 0,(function*(){const n=this.extractAppNameFromCSR(o);if("WWW"===u)return c.FileSystem.writeFileToFolder(l,t,r).catch((e=>{throw new Error(`Failed to write ${t} to temporary folder. Error: ${e}`)}));if(s===m.ClientOS.Android){const s=n.then((t=>this.getTargetAndroidDeviceId(t,e,o)));return Promise.all([s,n]).then((([n,o])=>"win32"===process.platform?c.FileSystem.writeFileToFolder(l,t,r).then((()=>d.pushFile(this.adbHelper,n,o,e+t,i.join(l,t),this.logger))):d.push(this.adbHelper,n,o,e+t,r,this.logger)))}return s===m.ClientOS.iOS||s===m.ClientOS.Windows||s===m.ClientOS.MacOS?a.promises.writeFile(e+t,r).catch((i=>{if(s===m.ClientOS.iOS){const i=this.getRelativePathInAppContainer(e);return n.then((t=>this.getTargetiOSDeviceId(t,e,o))).then((e=>n.then((n=>this.pushFileToiOSDevice(e,n,i,t,r)))))}throw new Error(`Invalid appDirectory recieved from ${s} device: ${e}: `+i.toString())})):Promise.reject(new Error(`Unsupported device os: ${s}`))}))}pushFileToiOSDevice(e,t,r,n,o){return l.dir({unsafeCleanup:!0}).then((s=>{const c=i.resolve(s.path,n);a.promises.writeFile(c,o).then((()=>p.default.push(e,c,t,r,this.logger)))}))}getTargetAndroidDeviceId(e,t,r){return this.adbHelper.getOnlineTargets().then((n=>{if(0===n.length)throw new Error("No Android devices found");const o=n.map((n=>this.androidDeviceHasMatchingCSR(t,n.id,e,r).then((e=>Object.assign(Object.assign({id:n.id},e),{error:null}))).catch((t=>(this.logger.error(`Unable to check for matching CSR in ${n.id}:${e}`),{id:n.id,isMatch:!1,foundCsr:null,error:t})))));return Promise.all(o).then((t=>{const n=t.filter((e=>e.isMatch)).map((e=>e.id));if(0==n.length){const n=t.find((e=>e.error));if(n)throw n.error;const o=t.filter((e=>null!==e.foundCsr)).map((e=>e.foundCsr?encodeURI(e.foundCsr):"null"));throw this.logger.error(`Looking for CSR (url encoded):\n            ${encodeURI(this.santitizeString(r))}\n            Found these:\n            ${o.join("\n\n")}`),new Error(`No matching device found for app: ${e}`)}return n.length>1&&this.logger.error(`More than one matching device found for CSR:\n${r}`),n[0]}))}))}getTargetiOSDeviceId(e,t,r){const n=/\/Devices\/([^/]+)\//.exec(t);return n&&2==n.length?Promise.resolve(n[1]):p.default.targets().then((n=>{if(0===n.length)throw new Error("No iOS devices found");const o=n.map((n=>this.iOSDeviceHasMatchingCSR(t,n.id,e,r).then((e=>({id:n.id,isMatch:e})))));return Promise.all(o).then((t=>{const r=t.filter((e=>e.isMatch)).map((e=>e.id));if(0==r.length)throw new Error(`No matching device found for app: ${e}`);return r[0]}))}))}androidDeviceHasMatchingCSR(e,t,r,n){return d.pull(this.adbHelper,t,r,e+T,this.logger).then((e=>{const[t,r]=[e.toString(),n].map((e=>this.santitizeString(e)));return{isMatch:t===r,foundCsr:t}}))}iOSDeviceHasMatchingCSR(e,t,r,n){const o=this.getRelativePathInAppContainer(i.resolve(e,T));return l.dir({unsafeCleanup:!0}).then((e=>p.default.pull(t,o,r,i.join(e.path,T),this.logger).then((()=>e)))).then((e=>a.promises.readdir(e.path).then((e=>{if(e.length>1)throw new Error("Conflict in temp dir");if(0===e.length)throw new Error("Failed to pull CSR from device");return e[0]})).then((t=>{const r=i.resolve(e.path,t);return a.promises.readFile(r).then((e=>this.santitizeString(e.toString())))})))).then((e=>e===this.santitizeString(n)))}santitizeString(e){return e.replace(/\r/g,"").trim()}ensureCertificateAuthorityExists(){return a.existsSync(E)?this.checkCertIsValid(y).catch((()=>this.generateCertificateAuthority())):this.generateCertificateAuthority()}checkCertIsValid(e){return a.existsSync(e)?(0,o.openssl)("x509",{checkend:86400,in:e}).then((()=>{})).catch((t=>{throw this.logger.warning(v(0,null,e)),t})).then((()=>(0,o.openssl)("x509",{enddate:!0,in:e,noout:!0}))).then((e=>{const t=e.trim().split("=")[1].trim(),r=Date.parse(t);if(isNaN(r))throw this.logger.error("Unable to parse certificate expiry date: "+e),new Error("Cannot parse certificate expiry date. Assuming it has expired.");if(r<=Date.now()+864e5)throw new Error("Certificate has expired or will expire soon.")})):Promise.reject(new Error(`${e} does not exist`))}verifyServerCertWasIssuedByCA(){const e={CAfile:y};return e[A]=!1,(0,o.openssl)("verify",e).then((e=>{if(!e.match(/[^:]+: OK/))throw new Error("Current server cert was not issued by current CA")}))}generateCertificateAuthority(){return a.existsSync(O(""))||u.sync(O("")),(0,o.openssl)("genrsa",{out:E,2048:!1}).then((()=>(0,o.openssl)("req",{new:!0,x509:!0,subj:"/C=US/ST=CA/L=Redmond/O=Microsoft/CN=ReactNativeExtensionCA",key:E,out:y}))).then((()=>{}))}ensureServerCertExists(){return n(this,void 0,void 0,(function*(){return this.ensureOpenSSLIsAvailable(),a.existsSync(b)&&a.existsSync(A)&&a.existsSync(y)?this.checkCertIsValid(A).then((()=>this.verifyServerCertWasIssuedByCA())).catch((()=>this.generateServerCertificate())):this.generateServerCertificate()}))}generateServerCertificate(){return this.ensureCertificateAuthorityExists().then((()=>(0,o.openssl)("genrsa",{out:b,2048:!1}))).then((()=>(0,o.openssl)("req",{new:!0,key:b,out:S,subj:"/C=US/ST=CA/L=Redmond/O=Microsoft/CN=localhost"}))).then((()=>(0,o.openssl)("x509",{req:!0,in:S,CA:y,CAkey:E,CAcreateserial:!0,CAserial:C,out:A}))).then((()=>{}))}writeToTempFile(e){return l.file().then((t=>a.promises.writeFile(t.path,e).then((()=>t.path))))}}},5616:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDevice=void 0;const o=r(2162);t.ClientDevice=class{constructor(e,t,r,n,i){this.networkInspectorPluginName="Network",this._id=e,this._query=t,this._connection=r,this.logger=i,this.messageIdCounter=0,this.sdkVersion=t.sdk_version||0,this.activePlugins=new Set,this.requestCallbacks=new Map,this.inspectorView=o.InspectorViewFactory.getInspectorView(n)}get id(){return this._id}get query(){return this._query}get connection(){return this._connection}init(){return n(this,void 0,void 0,(function*(){(yield this.loadPlugins()).includes(this.networkInspectorPluginName)&&this.initNetworkInspectorPlugin(),yield this.inspectorView.init()}))}onMessage(e){if("string"!=typeof e)return;let t;try{t=JSON.parse(e)}catch(t){return void this.logger.error(`Invalid JSON: ${e}`)}const r=t;if(r.id){if(this.sdkVersion<1){const e=this.requestCallbacks.get(r.id);if(!e)return;this.requestCallbacks.delete(r.id),this.onResponse(r,e.resolve,e.reject)}}else{const{error:e}=r;e?this.logger.error(`Error received from device ${r.method?`when calling ${r.method}`:""}: ${e.message} + \nDevice Stack Trace: ${e.stacktrace}`):"execute"===r.method&&r.params&&this.inspectorView.handleMessage(r.params)}}initNetworkInspectorPlugin(){this.activePlugins.add(this.networkInspectorPluginName),this.rawSend("init",{plugin:this.networkInspectorPluginName})}loadPlugins(){return n(this,void 0,void 0,(function*(){return yield this.rawCall("getPlugins",!1).then((e=>e.plugins))}))}rawSend(e,t){const r={method:e,params:t};this._connection&&this._connection.fireAndForget({data:JSON.stringify(r)})}rawCall(e,t,r){return new Promise(((n,o)=>{const i=this.messageIdCounter++,s={method:e,id:i,params:r};this.sdkVersion<1&&this.requestCallbacks.set(i,{reject:o,resolve:n,metadata:s});const a={id:i,method:e,params:r},c=r?r.api:void 0;this.sdkVersion<1?this._connection&&this._connection.fireAndForget({data:JSON.stringify(a)}):!t||this.isAcceptingMessagesFromPlugin(c)?this._connection.requestResponse({data:JSON.stringify(a)}).subscribe({onComplete:e=>{if(!t||this.isAcceptingMessagesFromPlugin(c)){const t=JSON.parse(e.data);this.onResponse(t,n,o)}},onError:e=>{o(e)}}):o(new Error(`Cannot send ${e}, client is not accepting messages for plugin ${c}`))}))}onResponse(e,t,r){if(e.success)t&&t(e.success);else if(e.error){r(e.error);const{error:t}=e;t&&this.logger.debug(t.message)}}isAcceptingMessagesFromPlugin(e){return!(!this._connection||e&&!this.activePlugins.has(e))}}},1205:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.appNameWithUpdateHint=t.buildClientId=t.ClientOS=void 0,function(e){e.iOS="iOS",e.Android="Android",e.Windows="Windows",e.MacOS="MacOS"}(r=t.ClientOS||(t.ClientOS={})),t.buildClientId=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/clientUtils.tsx#L60-L78
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function(e,t){for(const r of["app","os","device","device_id"])e[r]||t.error(`Attempted to build clientId with invalid ${r}: "${e[r]}`);return`${escape(e.app)}#${e.os}#${e.device}#${e.device_id}`},t.appNameWithUpdateHint=
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/utils/clientUtils.tsx#L60-L78
 */
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/server.tsx#L74-L83
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function(e){return e.os===r.Android&&(!e.sdk_version||e.sdk_version<3)?e.app+" (Outdated SDK)":e.app}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/app/src/server.tsx#L74-L83
 */,5637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidClientDevice=void 0;const n=r(8226);class o extends n.BaseClientDevice{constructor(e,t,r,n){super(e,t,r,n)}}t.AndroidClientDevice=o},8226:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseClientDevice=t.DeviceStatus=void 0,function(e){e[e.Prepared=0]="Prepared",e[e.NotPrepared=1]="NotPrepared"}(r=t.DeviceStatus||(t.DeviceStatus={}));t.BaseClientDevice=class{constructor(e,t,n,o){this._id=e,this._name=o,this._isVirtualTarget=t,this._os=n,this._deviceStatus=r.NotPrepared}get id(){return this._id}get os(){return this._os}get name(){return this._name}get isVirtualTarget(){return this._isVirtualTarget}get deviceStatus(){return this._deviceStatus}set deviceStatus(e){this._deviceStatus=e}}},7693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceStorage=void 0;class r{}r.devices=new Map,t.DeviceStorage=r},9505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOSClienDevice=void 0;const n=r(8226);class o extends n.BaseClientDevice{constructor(e,t,r,n,o){super(e,t,r,o),this._isOnline=n}get isOnline(){return this._isOnline}set isOnline(e){this._isOnline=e}}t.IOSClienDevice=o},2501:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkInspectorServer=t.NETWORK_INSPECTOR_LOG_CHANNEL_NAME=void 0;const o=r(1269),i=r(381),s=r(7956),a=r(1205),c=r(5616),u=r(9144),l=r(726),d=r(1205),p=r(1808),h=r(4404),f=r(3403),g=r(2397),m=r(6377);f.config({messageFormat:f.MessageFormat.bundle,bundleFormat:f.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/networkInspector/networkInspectorServer.ts"));const _=f.loadMessageBundle(r(1017).join(__dirname,"src/extension/networkInspector/networkInspectorServer.ts"));
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/master/desktop/app/src/server.tsx
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */function v(e){return 1==e?"FS_ACCESS":2==e?"WWW":"FS_ACCESS"}t.NETWORK_INSPECTOR_LOG_CHANNEL_NAME="Network Inspector";class E{constructor(){this.trustedRequestHandler=(e,t)=>{const r=this;if(!t.data)return{};const n=JSON.parse(t.data),{app:o,os:i,device:s,device_id:a,sdk_version:c,csr:u,csr_path:l,medium:d}=n,p=v(d),h=this.addConnection(e,{app:o,os:i,device:s,device_id:a,sdk_version:c,medium:p},{csr:u,csr_path:l}).then((e=>f=e));let f;return e.connectionStatus().subscribe({onNext(e){"ERROR"!=e.kind&&"CLOSED"!=e.kind||h.then((e=>{r.logger.info(_(0,null,e.id)),r.removeConnection(e.id)}))},onSubscribe(e){e.request(Number.MAX_SAFE_INTEGER)},onError(e){r.logger.error("Network inspector server connection status error ",e)}}),{fireAndForget:e=>{f?f.onMessage(e.data):h.then((t=>{t.onMessage(e.data)}))}}},this.untrustedRequestHandler=(e,t)=>{if(!t.data)return{};const r=JSON.parse(t.data);return{requestResponse:e=>{if("string"!=typeof e.data)return new s.Single((()=>{}));let t;try{t=JSON.parse(e.data)}catch(t){return this.logger.error(`Network inspector: invalid JSON: ${e.data}`),new s.Single((()=>{}))}const n=t;if("signCertificate"===n.method){this.logger.debug("CSR received from device");const{csr:e,destination:t,medium:o}=n;return new s.Single((n=>{n.onSubscribe(void 0),this.certificateProvider.processCertificateSigningRequest(e,r.os,t,v(o)).then((e=>{n.onComplete({data:JSON.stringify({deviceId:e.deviceId}),metadata:""})})).catch((e=>{this.logger.error(e.toString()),n.onError(e)}))}))}return new s.Single((()=>{}))},fireAndForget:e=>{if("string"!=typeof e.data)return;let t;try{t=JSON.parse(e.data)}catch(t){return void this.logger.error(`Network inspector: invalid JSON: ${e.data}`)}if(t&&"signCertificate"===t.method){this.logger.debug("CSR received from device");const{csr:e,destination:n,medium:o}=t;this.certificateProvider.processCertificateSigningRequest(e,r.os,n,v(o)).catch((e=>{this.logger.error(e.toString())}))}}}},this.connections=new Map,this.logger=u.OutputChannelLogger.getChannel(t.NETWORK_INSPECTOR_LOG_CHANNEL_NAME)}start(e){return n(this,void 0,void 0,(function*(){return this.logger.info(_(1,null)),m.TipNotificationService.getInstance().setKnownDateForFeatureById("networkInspector"),m.TipNotificationService.getInstance().showTipNotification(!1,"networkInspectorLogsColorTheme"),this.initialisePromise=new Promise(((t,r)=>n(this,void 0,void 0,(function*(){this.certificateProvider=new l.CertificateProvider(e);try{let e=yield this.certificateProvider.loadSecureServerConfig();this.secureServer=yield this.startServer(E.SecureServerPort,e),this.insecureServer=yield this.startServer(E.InsecureServerPort)}catch(e){return r(e)}this.logger.info(_(2,null)),t()})))),this.initialisePromise}))}stop(){return n(this,void 0,void 0,(function*(){if(this.initialisePromise){try{yield this.initialisePromise}catch(e){this.logger.error(e.toString())}this.secureServer&&this.secureServer.stop(),this.insecureServer&&this.insecureServer.stop()}this.logger.info(_(3,null))}))}startServer(e,t){return n(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{let s;s=new o.RSocketServer({getRequestHandler:t?this.trustedRequestHandler:this.untrustedRequestHandler,transport:new i.default({port:e,serverFactory:o=>{const i=t?h.createServer(t,(e=>{o(e)})):p.createServer(o);return i.on("error",(t=>{this.logger.error(_(4,null,e)),n(t)})).on("listening",(()=>{this.logger.debug(`${t?"Secure":"Certificate"} server started on port ${e}`),r(s)})),i}})}),s&&s.start()}))}))}addConnection(e,t,r){return n(this,void 0,void 0,(function*(){const{csr_path:o,csr:i}=r;return(o&&i&&t.os!==d.ClientOS.iOS?this.certificateProvider.extractAppNameFromCSR(i).then((e=>this.certificateProvider.getTargetDeviceId(t.os,e,o,i))):Promise.resolve(t.device_id)).then((r=>n(this,void 0,void 0,(function*(){t.device_id=r,t.app=(0,a.appNameWithUpdateHint)(t);const n=(0,a.buildClientId)({app:t.app,os:t.os,device:t.device,device_id:r},this.logger);this.logger.info(_(5,null,n));const o=new c.ClientDevice(n,t,e,g.InspectorViewType.console,this.logger);return o.init().then((()=>{this.logger.debug(`Device client initialised: ${n}`),this.removeConnection(n),this.connections.set(n,o)})),o}))))}))}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/master/desktop/app/src/server.tsx
     */removeConnection(e){const t=this.connections.get(e);t&&(t.connection&&t.connection.close(),this.connections.delete(e))}}E.SecureServerPort=8088,E.InsecureServerPort=8089,t.NetworkInspectorServer=E},2374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormUrlencodedFormatter=void 0;const n=r(367),o=r(3477);t.FormUrlencodedFormatter=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L769-L785
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
class{constructor(e){this.logger=e}formatRequest(e,t){if(t.startsWith("application/x-www-form-urlencoded")){const t=(0,n.decodeBody)(e,this.logger);return t?o.parse(t):null}return null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L769-L785
 */,131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLFormatter=void 0;const n=r(367),o=r(3477);t.GraphQLFormatter=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L704-L767
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
class{constructor(e){this.logger=e}formatRequest(e,t){if(e.url.indexOf("graphql")>0){const t=(0,n.decodeBody)(e,this.logger);if(!t)return null;const r=o.parse(t);return"string"==typeof r.variables&&(r.variables=JSON.parse(r.variables)),"string"==typeof r.query_params&&(r.query_params=JSON.parse(r.query_params)),r}return null}formatResponse(e,t){if(t.startsWith("application/json")||t.startsWith("application/hal+json")||t.startsWith("text/javascript")||t.startsWith("text/html")||t.startsWith("application/x-fb-flatbuffer")){let t=(0,n.decodeBody)(e,this.logger);try{return JSON.parse(t)}catch(e){return t.replace(/}{/g,"}\r\n{").split("\n").map((e=>JSON.parse(e)))}}return null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L704-L767
 */,5682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageFormatter=void 0;t.ImageFormatter=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L482-L497
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
class{formatResponse(e,t){return t.startsWith("image/")&&e.data?e.data:null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L482-L497
 */,6908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONFormatter=void 0;const n=r(367);
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L609-L653
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */t.JSONFormatter=class{constructor(e){this.logger=e}formatRequest(e,t){return this.format((0,n.decodeBody)(e,this.logger),t)}formatResponse(e,t){return this.format((0,n.decodeBody)(e,this.logger),t)}format(e,t){if(t.startsWith("application/json")||t.startsWith("application/hal+json")||t.startsWith("text/javascript")||t.startsWith("application/x-fb-flatbuffer"))try{return JSON.parse(e)}catch(t){return e.split("\n").map((e=>JSON.parse(e)))}return null}}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/RequestDetails.tsx#L609-L653
 */,367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeaderValue=t.decodeBody=t.RequestBodyFormatter=void 0;const n=r(2300),o=r(9591),i=r(9901),s=r(6908),a=r(5682),c=r(131),u=r(2374);
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L23-L60
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function l(e,t){if(!e.data)return"";try{if("gzip"===d(e.headers,"Content-Encoding"))try{const t=n.Base64.atob(e.data),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return o.inflate(r,{to:"string"})}catch(e){if(!e.toString().includes("incorrect header check"))throw e}return n.Base64.decode(e.data)}catch(r){return null==t||t.debug(`Network inspector failed to decode request/response body (size: ${e.data.length}): ${String(r.toString())}`),""}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L23-L60
 */
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L14-L21
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function d(e,t){for(const r of e)if(r.key.toLowerCase()===t.toLowerCase())return r.value;return""}t.RequestBodyFormatter=class{constructor(e){this.logger=e,this.formatters=[new a.ImageFormatter,new c.GraphQLFormatter(this.logger),new s.JSONFormatter(this.logger),new u.FormUrlencodedFormatter(this.logger)]}formatBody(e){const t=d(e.headers,"content-type");for(const r of this.formatters)try{let n=null;if(e.status?r.formatResponse&&(n=r.formatResponse(e,t)):r.formatRequest&&(n=r.formatRequest(e,t)),(0,i.notNullOrUndefined)(n))return n}catch(e){this.logger.debug(`RequestBodyFormatter exception from ${r.constructor.name} ${String(e.message)}`)}return l(e,this.logger)}},t.decodeBody=l,t.getHeaderValue=d}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/utils.tsx#L14-L21
 */,1073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineBase64Chunks=void 0;const n=r(3837),o=r(2300);t.combineBase64Chunks=
/**
 * @preserve
 * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/chunks.tsx#L12-L28
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */
function(e){const t=e.map((e=>Uint8Array.from(o.Base64.atob(e),(e=>e.charCodeAt(0))).buffer)),r=t.map((e=>e.byteLength)).reduce(((e,t)=>e+t),0),i=new Uint8Array(r);let s=0;for(let e=0;e<t.length;e++)i.set(new Uint8Array(t[e]),s),s+=t[e].byteLength;return new n.TextDecoder("utf-8").decode(i)}}
/**
 * @preserve
 * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/chunks.tsx#L12-L28
 */,9194:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InspectorConsoleView=void 0;const o=r(7310),i=r(9496),s=r(2300),a=r(9658),c=r(2463),u=r(1073),l=r(2397);class d extends l.InspectorView{constructor(){super(...arguments),this.maxResponseBodyLength=75e3,this.openDeveloperToolsCommand="workbench.action.toggleDevTools",this.consoleLogsColors={Blue:"#0000ff",Orange:"#f28b54"}}init(){return n(this,void 0,void 0,(function*(){this.isInitialized||(this.isInitialized=!0,yield i.commands.executeCommand(this.openDeveloperToolsCommand),a.EditorColorThemesHelper.isAutoDetectColorSchemeEnabled()?this.setupConsoleLogsColor(a.EditorColorThemesHelper.getCurrentSystemColorTheme()):this.setupConsoleLogsColor(c.SettingsHelper.getNetworkInspectorConsoleLogsColorTheme()))}))}handleMessage(e){if(e.params)switch(e.method){case"newRequest":this.handleRequest(e.params);break;case"newResponse":this.handleResponse(e.params);break;case"partialResponse":this.handlePartialResponse(e.params)}}setupConsoleLogsColor(e){e===a.SystemColorTheme.Light?this.consoleLogsColor=this.consoleLogsColors.Blue:this.consoleLogsColor=this.consoleLogsColors.Orange}handleRequest(e){this.requests.set(e.id,e)}handleResponse(e){this.responses.set(e.id,e),this.requests.has(e.id)&&this.printNetworkRequestData(this.createNetworkRequestData(this.requests.get(e.id),e))}handlePartialResponse(e){var t,r;let n,o;if(void 0!==e.index&&e.index>0){const r=e,i=null!==(t=this.partialResponses.get(r.id))&&void 0!==t?t:{followupChunks:{}};n=Object.assign({},i),n.followupChunks[r.index]=r.data,o=r.id}else{const t=e,i=null!==(r=this.partialResponses.get(t.id))&&void 0!==r?r:{followupChunks:{}};n=Object.assign(Object.assign({},i),{initialResponse:t}),o=t.id}const i=this.assembleChunksIfResponseIsComplete(n);i?(this.handleResponse(i),this.partialResponses.delete(o)):this.partialResponses.set(o,n)}
/**
     * @preserve
     * Start region: the code is borrowed from https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/index.tsx#L276-L324
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     *
     * @format
     */assembleChunksIfResponseIsComplete(e){var t;const r=null===(t=e.initialResponse)||void 0===t?void 0:t.totalChunks;if(!e.initialResponse||!r||Object.keys(e.followupChunks).length+1<r)return null;const n=e.initialResponse,o=null!=n.data?[n.data,...Object.entries(e.followupChunks).sort(((e,t)=>parseInt(e[0],10)-parseInt(t[0],10))).map((([e,t])=>t))]:[],i=(0,u.combineBase64Chunks)(o);return Object.assign(Object.assign({},n),{data:s.Base64.btoa(i)})}
/**
     * @preserve
     * End region: https://github.com/facebook/flipper/blob/v0.79.1/desktop/plugins/network/index.tsx#L276-L324
     */createNetworkRequestData(e,t){const r=new o.URL(e.url),n={title:`%cNetwork request: ${e.method} ${r?r.host+r.pathname:"<unknown>"}`,networkRequestData:{URL:e.url,Method:e.method,Status:t.status,Duration:this.getRequestDurationString(e.timestamp,t.timestamp),"Request Headers":this.prepareHeadersViewObject(e.headers),"Response Headers":this.prepareHeadersViewObject(t.headers),"Request Body":this.requestBodyDecoder.formatBody(e),"Response Body":this.requestBodyDecoder.formatBody(t)}};return r.search&&(n.networkRequestData["Request Query Parameters"]=this.retrieveURLSearchParams(r.searchParams)),n}retrieveURLSearchParams(e){const t={};return e.forEach(((e,r)=>{t[r]=e})),t}getRequestDurationString(e,t){return`${String(Math.abs(t-e))}ms`}prepareHeadersViewObject(e){return e.reduce(((e,t)=>(e[t.key]=t.value,e)),{})}printNetworkRequestData(e){const t=e.networkRequestData["Response Body"];t&&"string"==typeof t&&t.length>this.maxResponseBodyLength&&(e.networkRequestData["Response Body"]=`${t.substring(0,this.maxResponseBodyLength)}... (Response body exceeds output limit, the rest its part is omitted)`),console.log(e.title,`color: ${this.consoleLogsColor}`,e.networkRequestData),this.logger.debug(`${e.title}\ncolor: ${this.consoleLogsColor}\n${JSON.stringify(e.networkRequestData,null,2)}`)}}t.InspectorConsoleView=d},2397:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectorView=t.InspectorViewType=void 0;const n=r(367);!function(e){e[e.console=0]="console"}(t.InspectorViewType||(t.InspectorViewType={}));t.InspectorView=class{constructor(e){this.logger=e,this.requests=new Map,this.responses=new Map,this.partialResponses=new Map,this.isInitialized=!1,this.requestBodyDecoder=new n.RequestBodyFormatter(this.logger)}dispose(){}}},2162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectorViewFactory=void 0;const n=r(9144),o=r(2501),i=r(9194),s=r(2397);class a{static getInspectorView(e){if(!a.cachedInspectorViews.has(e)){if(e!==s.InspectorViewType.console)throw new Error(`Unsupported inspector view type: ${e}`);a.cachedInspectorViews.set(s.InspectorViewType.console,new i.InspectorConsoleView(n.OutputChannelLogger.getChannel(o.NETWORK_INSPECTOR_LOG_CHANNEL_NAME)))}return a.cachedInspectorViews.get(e)}static clearCache(){a.cachedInspectorViews.forEach((e=>{e.dispose()})),a.cachedInspectorViews.clear()}}a.cachedInspectorViews=new Map,t.InspectorViewFactory=a},5034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PackagerStatusIndicator=t.PackagerStatus=void 0;const n=r(9496),o=r(6625),i=r(3403),s=r(2463);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/packagerStatusIndicator.ts"));const a=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/packagerStatusIndicator.ts"));var c;!function(e){e[e.PACKAGER_STOPPED=0]="PACKAGER_STOPPED",e[e.PACKAGER_STOPPING=1]="PACKAGER_STOPPING",e[e.PACKAGER_STARTED=2]="PACKAGER_STARTED",e[e.PACKAGER_STARTING=3]="PACKAGER_STARTING"}(c=t.PackagerStatus||(t.PackagerStatus={}));class u{constructor(e){this.projectRoot=e,o.gte(n.version,"1.57.0")?(this.restartPackagerItem=n.window.createStatusBarItem("restartPackagerItem",n.StatusBarAlignment.Left,10),this.restartPackagerItem.name=u.RESTART_TOOLTIP,this.togglePackagerItem=n.window.createStatusBarItem("togglePackagerItem",n.StatusBarAlignment.Left,10),this.togglePackagerItem.name=u.PACKAGER_NAME):(this.restartPackagerItem=n.window.createStatusBarItem(n.StatusBarAlignment.Left,10),this.togglePackagerItem=n.window.createStatusBarItem(n.StatusBarAlignment.Left,10)),this.restartPackagerItem.text=u.RESTART_ICON,this.restartPackagerItem.command=u.RESTART_COMMAND,this.restartPackagerItem.tooltip=u.RESTART_TOOLTIP,this.setupPackagerStatusIndicatorItems(u.START_ICON,u.START_COMMAND,u.START_TOOLTIP)}updateDisplayVersion(){this.displayVersion=u.FULL_VERSION;try{this.projectRoot&&(this.displayVersion=s.SettingsHelper.getPackagerStatusIndicatorPattern(this.projectRoot))}catch(e){}}dispose(){this.togglePackagerItem.dispose(),this.restartPackagerItem.dispose()}setupPackagerStatusIndicatorItems(e,t,r=""){switch(this.updateDisplayVersion(),this.togglePackagerItem.command=t,this.togglePackagerItem.tooltip=r,this.displayVersion){case u.FULL_VERSION:this.togglePackagerItem.text=`${e} ${u.PACKAGER_NAME}`,this.togglePackagerItem.show(),this.restartPackagerItem.show();break;case u.SHORT_VERSION:this.togglePackagerItem.text=`${e}`,this.togglePackagerItem.show(),this.restartPackagerItem.show()}}updatePackagerStatus(e){switch(e){case c.PACKAGER_STOPPED:this.setupPackagerStatusIndicatorItems(u.START_ICON,u.START_COMMAND,u.START_TOOLTIP);break;case c.PACKAGER_STOPPING:this.setupPackagerStatusIndicatorItems(u.ACTIVITY_ICON,void 0,u.STOPPING_TOOLTIP);break;case c.PACKAGER_STARTED:this.setupPackagerStatusIndicatorItems(u.STOP_ICON,u.STOP_COMMAND,u.STOP_TOOLTIP);break;case c.PACKAGER_STARTING:this.setupPackagerStatusIndicatorItems(u.ACTIVITY_ICON,void 0,u.STARTING_TOOLTIP)}}}u.PACKAGER_NAME=a(0,null),u.STOP_TOOLTIP=a(1,null),u.START_TOOLTIP=a(2,null),u.RESTART_TOOLTIP=a(3,null),u.STARTING_TOOLTIP=a(4,null),u.STOPPING_TOOLTIP=a(5,null),u.START_ICON="$(play)",u.STOP_ICON="$(primitive-square)",u.ACTIVITY_ICON="$(loading~spin)",u.RESTART_ICON="$(sync)",u.START_COMMAND="reactNative.startPackager",u.RESTART_COMMAND="reactNative.restartPackager",u.STOP_COMMAND="reactNative.stopPackager",u.FULL_VERSION="Full",u.SHORT_VERSION="Short",t.PackagerStatusIndicator=u},3833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformResolver=void 0;const n=r(7599),o=r(9911),i=r(7833),s=r(5070),a=r(7005),c=r(1837),u=r(147);t.PlatformResolver=class{resolveMobilePlatform(e,t,r){switch(e){case n.PlatformType.iOS:return new o.IOSPlatform(t,r);case n.PlatformType.Android:return new i.AndroidPlatform(t,r);case n.PlatformType.Exponent:return new c.ExponentPlatform(t,r);case n.PlatformType.Windows:return new s.WindowsPlatform(t,r);case n.PlatformType.macOS:return new u.MacOSPlatform(t,r);case n.PlatformType.ExpoWeb:return new c.ExponentPlatform(t,r);default:return new a.GeneralPlatform(t,r)}}}},8730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectsStorage=void 0;class r{static addFolder(e,t){this.projectsCache[e.toLowerCase()]=t}static getFolder(e){return this.projectsCache[e.uri.fsPath.toLowerCase()]}static delFolder(e){delete this.projectsCache[e.uri.fsPath.toLowerCase()]}}r.projectsCache={},t.ProjectsStorage=r},1181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QRCodeContentProvider=void 0;const n=r(7318),o=r(3403);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/qrCodeContentProvider.ts"));const i=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/qrCodeContentProvider.ts"));t.QRCodeContentProvider=class{constructor(){this.cache={}}provideTextDocumentContent(e){const t=e.toString();if(!this.cache[t]){const e=n.imageSync(t);this.cache[t]=`data:image/png;base64,${e.toString("base64")}`}const r=i(0,null,t),o=i(1,null);return`<!DOCTYPE html>\n        <html>\n        <body>\n            <div style="text-align:center">\n                <h3>\n                    ${r}\n                <h3>\n                <img src="${this.cache[t]}" />\n                <h3>\n                    ${o}\n                <h3>\n            </div>\n        </body>\n        </html>`}}},5526:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactDirManager=void 0;const o=r(1017),i=r(9897),s=r(312),a=r(9452),c=r(8079),u=r(9144);t.ReactDirManager=class{constructor(e){this.isDisposed=!1,this.vscodeDirPath=o.join(e||"",".vscode"),this.reactDirPath=o.join(this.vscodeDirPath,".react")}setup(){return n(this,void 0,void 0,(function*(){this.isDisposed=!1;const e=new a.FileSystem;yield e.removePathRecursivelyAsync(this.reactDirPath),e.existsSync(this.vscodeDirPath)||(yield e.mkDir(this.vscodeDirPath)),yield e.mkDir(this.reactDirPath)}))}dispose(){this.isDisposed=!0,new c.EntryPointHandler(c.ProcessType.Extension,u.OutputChannelLogger.getMainChannel()).runFunction("extension.deleteTemporaryFolder",i.ErrorHelper.getInternalError(s.InternalErrorCode.RNTempFolderDeletionFailed,this.reactDirPath),(()=>(new a.FileSystem).removePathRecursivelySync(this.reactDirPath)))}}},4418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeSessionManager=void 0;const n=r(1808),o=r(9496),i=r(4518),s=r(5319),a=r(4304),c=r(7538),u=r(3350);t.ReactNativeSessionManager=class{constructor(){this.servers=new Map,this.connections=new Map}createDebugAdapterDescriptor(e,t){const r=new a.RNSession(e);let l;return l="expoweb"!=e.configuration.platform?n.createServer((t=>{const n=e.type===u.DEBUG_TYPES.REACT_NATIVE?new i.RNDebugSession(r):new s.DirectDebugSession(r);this.connections.set(e.id,t),n.setRunAsServer(!0),n.start(t,t)})):n.createServer((t=>{const n=new c.WebDebugSession(r);n.setRunAsServer(!0),this.connections.set(e.id,t),n.start(t,t)})),l.listen(0),this.servers.set(e.id,l),new o.DebugAdapterServer(l.address().port)}terminate(e){this.destroyServer(e.debugSession.id,this.servers.get(e.debugSession.id));const t=this.connections.get(e.debugSession.id);t&&(e.args.forcedStop&&this.destroyConnection(t),this.connections.delete(e.debugSession.id))}dispose(){this.servers.forEach(((e,t)=>{this.destroyServer(t,e)})),this.connections.forEach(((e,t)=>{this.destroyConnection(e),this.connections.delete(t)}))}destroyConnection(e){e.removeAllListeners(),e.on("error",(()=>{})),e.destroy()}destroyServer(e,t){t&&(t.close(),this.servers.delete(e))}}},6465:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.onFolderAdded=t.getCountOfWorkspaceFolders=t.createAdditionalWorkspaceFolder=t.deactivate=t.activate=t.debugConfigProvider=void 0;try{r(7147).statSync(`${__filename}.map`),r(6252).install()}catch(e){}const o=r(1017),i=r(7147),s=r(9496),a=r(6625),c=r(3403),u=r(8079),l=r(9897),d=r(312),p=r(9327),h=r(4301),f=r(3821),g=r(5013),m=r(4800),_=r(9185),v=r(2463),E=r(5526),y=r(9144),b=r(3879),S=r(1126),C=r(3350),A=r(9149),T=r(4418),w=r(8730),P=r(8280),O=r(3773),I=r(4952),R=r(6377),D=r(3344),N=r(1334),M=r(4602);c.config({messageFormat:c.MessageFormat.bundle,bundleFormat:c.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/rn-extension.ts"));const x=c.loadMessageBundle(r(1017).join(__dirname,"src/extension/rn-extension.ts")),k=y.OutputChannelLogger.getMainChannel(),F=new u.EntryPointHandler(u.ProcessType.Extension,k),L="react-native-tools";let j,B=9e3;function U(e){var t;return n(this,void 0,void 0,(function*(){const r=null===(t=s.workspace.workspaceFile)||void 0===t?void 0:t.fsPath,o=yield v.SettingsHelper.getWorkspaceFileExcludeFolder(r);let i=!1;if(0!=o.length)for(let t=0;t<o.length;t++)if(e.name==o[t]){i=!0;break}if(i)return;const c=e.uri.fsPath,u=v.SettingsHelper.getReactNativeProjectRoot(c);k.debug(`Add project: ${u}`);const h=yield p.ProjectVersionHelper.tryToGetRNSemverValidVersionsFromProjectPackage(u,p.ProjectVersionHelper.generateAllAdditionalPackages(),u);k.debug(`React Native version: ${h.reactNativeVersion}`);const g=[];p.ProjectVersionHelper.isVersionError(h.reactNativeVersion)?(k.debug(`react-native package version is not found in ${u}. Reason: ${h.reactNativeVersion}`),f.TelemetryHelper.sendErrorEvent("AddProjectReactNativeVersionIsEmpty",l.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotFindProjectVersion),h.reactNativeVersion)):!function(e){if(a.valid(e)&&!a.gte(e,"0.19.0")&&!p.ProjectVersionHelper.isCanaryVersion(e)){f.TelemetryHelper.sendSimpleEvent("unsupportedRNVersion",{rnVersion:e});const t=x(1,null),r=`${t}: ${e}`;return s.window.showWarningMessage(t),k.warning(r),!1}return!0}(h.reactNativeVersion)?k.debug(`react-native@${h.reactNativeVersion} isn't supported`):(s.commands.executeCommand("setContext",m.CONTEXT_VARIABLES_NAMES.IS_RN_PROJECT,!0),g.push(F.runFunction("debugger.setupLauncherStub",l.ErrorHelper.getInternalError(d.InternalErrorCode.DebuggerStubLauncherFailed),(()=>n(this,void 0,void 0,(function*(){const t=new E.ReactDirManager(c),r=new N.RNProjectObserver(u,h);yield function(e){return n(this,void 0,void 0,(function*(){return yield e.setup(),j.subscriptions.push(e),e}))}(t),w.ProjectsStorage.addFolder(u,new P.AppLauncher(t,r,e)),B++})))))),yield Promise.all(g)}))}function H(){return I.ExtensionConfigManager.config.has("version")}t.activate=function(e){return n(this,void 0,void 0,(function*(){const o=(0,_.getExtensionName)(),i=(0,_.getExtensionVersion)();if(!i)throw new Error(x(0,null));if(o){const e=!H(),t=function(e){if(!H()||I.ExtensionConfigManager.config.get("version")!==e)return I.ExtensionConfigManager.config.set("version",e),!0;return!1}(i);if(o.includes("preview")){if(function(){if(s.extensions.getExtension("msjsdiag.vscode-react-native"))return s.window.showInformationMessage(x(2,null)),!0;return!1}())return}else t&&function(e){const t=(0,_.findFileInFolderHierarchy)(__dirname,"CHANGELOG.md");t&&s.window.showInformationMessage(x(3,null,e),x(4,null)).then((()=>{s.commands.executeCommand("markdown.showPreview",s.Uri.file(t))}))}(i);t&&R.TipNotificationService.getInstance().updateTipsConfig(),R.TipNotificationService.getInstance().showTipNotification(),D.SurveyService.getInstance().setExtensionFirstTimeInstalled(e),D.SurveyService.getInstance().promptSurvey()}k.debug("Begin to activate..."),k.debug(`Extension version: ${i}`);const a=new(0,r(8361).default)(L,i,h.Telemetry.APPINSIGHTS_INSTRUMENTATIONKEY),c=t.debugConfigProvider=new b.ReactNativeDebugConfigProvider,u=new S.ReactNativeDebugDynamicConfigProvider,p=new A.LaunchJsonCompletionProvider,m=s.workspace.workspaceFolders;let v={};return m&&(v={workspaceFoldersCount:{value:m.length,isPii:!1}}),j=e,F.runApp(L,i,l.ErrorHelper.getInternalError(d.InternalErrorCode.ExtensionActivationFailed),a,(()=>n(this,void 0,void 0,(function*(){j.subscriptions.push(s.workspace.onDidChangeWorkspaceFolders((e=>function(e){e.removed.length&&e.removed.forEach((e=>{!function(e){const t=w.ProjectsStorage.getFolder(e);Object.keys(t).forEach((e=>{t[e].dispose&&t[e].dispose()})),k.debug(`Delete project: ${e.uri.fsPath}`),w.ProjectsStorage.delFolder(e);try{j.subscriptions.forEach(((e,t)=>{e.isDisposed&&j.subscriptions.splice(t,1)}))}catch(e){}}(e)}));e.added.length&&e.added.forEach((e=>{U(e)}))}(e)))),j.subscriptions.push(s.workspace.onDidChangeConfiguration((()=>{}))),j.subscriptions.push(R.TipNotificationService.getInstance()),j.subscriptions.push(D.SurveyService.getInstance()),j.subscriptions.push(s.debug.registerDebugConfigurationProvider(C.DEBUG_TYPES.REACT_NATIVE,c)),j.subscriptions.push(s.debug.registerDebugConfigurationProvider(C.DEBUG_TYPES.REACT_NATIVE,u,s.DebugConfigurationProviderTriggerKind.Dynamic)),j.subscriptions.push(s.debug.registerDebugConfigurationProvider(C.DEBUG_TYPES.REACT_NATIVE_DIRECT,u,s.DebugConfigurationProviderTriggerKind.Dynamic)),j.subscriptions.push(s.languages.registerCompletionItemProvider({language:A.JsonLanguages.json},p)),j.subscriptions.push(s.languages.registerCompletionItemProvider({language:A.JsonLanguages.jsonWithComments},p));const e=new T.ReactNativeSessionManager;j.subscriptions.push(s.debug.registerDebugAdapterDescriptorFactory(C.DEBUG_TYPES.REACT_NATIVE,e)),j.subscriptions.push(s.debug.registerDebugAdapterDescriptorFactory(C.DEBUG_TYPES.REACT_NATIVE_DIRECT,e)),j.subscriptions.push(e),j.subscriptions.push(g.DebugSessionBase.onDidTerminateRootDebugSession((t=>{e.terminate(t)})));const t=f.TelemetryHelper.createTelemetryEvent("activate");h.Telemetry.send(t);const o=[];m?(k.debug(`Projects found: ${m.length}`),m.forEach((e=>{o.push(U(e))}))):(k.warning("Could not find workspace while activating"),f.TelemetryHelper.sendErrorEvent("ActivateCouldNotFindWorkspace",l.ErrorHelper.getInternalError(d.InternalErrorCode.CouldNotFindWorkspace))),yield Promise.all(o),yield function(){return n(this,void 0,void 0,(function*(){const e=yield Promise.resolve().then((()=>r(4602)));Object.values(e).forEach((e=>{j.subscriptions.push(e.formInstance().register(F))}))}))}()}))),v)}))},t.deactivate=function(){return new Promise((e=>{F.runFunction("extension.deactivate",l.ErrorHelper.getInternalError(d.InternalErrorCode.FailedToStopPackagerOnExit),(()=>n(this,void 0,void 0,(function*(){t.debugConfigProvider=null,yield Promise.all(Object.values(w.ProjectsStorage.projectsCache).map((e=>M.StopPackager.formInstance().executeLocally(e)))),yield M.StopElementInspector.formInstance().executeLocally(),O.LogCatMonitorManager.cleanUp(),e()}))),!0)}))},t.createAdditionalWorkspaceFolder=function(e){if(i.existsSync(e)){return{uri:s.Uri.file(e),name:o.basename(e),index:++B}}return null},t.getCountOfWorkspaceFolders=function(){return B},t.onFolderAdded=U},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RNProjectObserver=void 0;const n=r(9496),o=r(4800),i=r(9327),s=r(7551);t.RNProjectObserver=class{constructor(e,t){this._isRNMacosProject=!1,this._isRNWindowsProject=!1,this._isRNMacosHermesProject=!1,this._isRNWindowsHermesProject=!1,this._isRNAndroidHermesProject=!1,this._isRNIosHermesProject=!1,this._isRNHermesProject=!1,this._rnPackageVersions=t,this.initialize(e,t)}initialize(e,t){i.ProjectVersionHelper.isVersionError(t.reactNativeWindowsVersion)||(this.updateRNWindowsProjectState(!0),this.updateRNWindowsHermesProjectState(s.ReactNativeProjectHelper.isWindowsHermesEnabled(e))),i.ProjectVersionHelper.isVersionError(t.reactNativeMacOSVersion)||(this.updateRNMacosProjectState(!0),this.updateRNMacosHermesProjectState(s.ReactNativeProjectHelper.isMacOSHermesEnabled(e))),this.updateRNAndroidHermesProjectState(s.ReactNativeProjectHelper.isAndroidHermesEnabled(e)),this.updateRNIosHermesProjectState(s.ReactNativeProjectHelper.isIOSHermesEnabled(e)),this.updateRNHermesProjectState()}get isRNMacosProject(){return this._isRNMacosProject}get isRNWindowsProject(){return this._isRNWindowsProject}get isRNMacosHermesProject(){return this._isRNMacosHermesProject}get isRNWindowsHermesProject(){return this._isRNWindowsHermesProject}get isRNAndroidHermesProject(){return this._isRNAndroidHermesProject}get rnPackageVersions(){return this._rnPackageVersions}get isRNIosHermesProject(){return this._isRNIosHermesProject}get isRNHermesProject(){return this._isRNHermesProject=this._isRNMacosHermesProject||this._isRNWindowsHermesProject||this._isRNAndroidHermesProject||this._isRNIosHermesProject,this._isRNHermesProject}updateRNMacosProjectState(e){e!==this._isRNMacosProject&&(this._isRNMacosProject=e,this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_MACOS_PROJECT,this._isRNMacosProject))}updateRNWindowsProjectState(e){e!==this._isRNWindowsProject&&(this._isRNWindowsProject=e,this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_WINDOWS_PROJECT,this._isRNWindowsProject))}updateRNMacosHermesProjectState(e){e!==this._isRNMacosHermesProject&&(this._isRNMacosHermesProject=e,this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_MACOS_HERMES_PROJECT,this._isRNMacosHermesProject),this.updateRNHermesProjectState())}updateRNWindowsHermesProjectState(e){e!==this._isRNWindowsHermesProject&&(this._isRNWindowsHermesProject=e,this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_WINDOWS_HERMES_PROJECT,this._isRNWindowsHermesProject),this.updateRNHermesProjectState())}updateRNAndroidHermesProjectState(e){e!==this._isRNAndroidHermesProject&&(this._isRNAndroidHermesProject=e,this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_ANDROID_HERMES_PROJECT,this._isRNAndroidHermesProject),this.updateRNHermesProjectState())}updateRNIosHermesProjectState(e){e!==this._isRNIosHermesProject&&(this._isRNIosHermesProject=e,this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_IOS_HERMES_PROJECT,this._isRNIosHermesProject),this.updateRNHermesProjectState())}updateRNHermesProjectState(){this._isRNHermesProject!==this.isRNHermesProject&&this.updateContextState(o.CONTEXT_VARIABLES_NAMES.IS_RN_HERMES_PROJECT,this._isRNHermesProject)}updateContextState(e,t){n.commands.executeCommand("setContext",e,t)}}},4539:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.retryDownloadConfig=t.downloadConfig=void 0;const o=r(8102),i=r(5773);function s(e){return n(this,void 0,void 0,(function*(){const t=yield i.Request.request(e,!1,!0);return JSON.parse(t)}))}t.downloadConfig=s,t.retryDownloadConfig=function(e,t,r=60){return n(this,void 0,void 0,(function*(){return o.PromiseUtil.retryAsync((()=>n(this,void 0,void 0,(function*(){try{return yield s(e)}catch(e){return}}))),(e=>!!e),r,2e3,`Could not download remote config from ${e}`,t)}))}},3344:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SurveyService=void 0;const o=r(9496),i=r(3403),s=r(4539),a=r(4952),c=r(3821),u=r(4301),l=r(9901),d=r(8102);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/surveyService/surveyService.ts"));const p=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/surveyService/surveyService.ts"));var h;!function(e){e.ACCEPT="accept",e.CANCEL="cancel"}(h||(h={}));class f{static getInstance(){return f.instance||(f.instance=new f),f.instance}constructor(){this.SURVEY_CONFIG_NAME="surveyConfig",this.MAX_WAIT_TIME_TO_SHOW_SURVEY_IN_MINUTES=30,this.MIN_WAIT_TIME_TO_SHOW_SURVEY_IN_MINUTES=5,this.endpointURL="https://microsoft.github.io/vscode-react-native/surveys/surveyConfig.json",this.cancellationTokenSource=new o.CancellationTokenSource,this._surveyConfig=null,this.extensionFirstTimeInstalled=!1,this.promptDelayer=new d.Delayer,this.downloadConfigRequest=(0,s.retryDownloadConfig)(this.endpointURL,this.cancellationTokenSource)}promptSurvey(){return n(this,void 0,void 0,(function*(){if(yield this.initializeSurveyConfig(),!this.surveyConfig.enabled)return;const e=new Date;0===this.surveyConfig.daysLeftBeforeSurvey?this.isCandidate()?this.promptDelayer.runWihtDelay((()=>n(this,void 0,void 0,(function*(){yield this.showSurveyNotification(),this.surveyConfig.daysLeftBeforeSurvey=this.surveyConfig.longPeriodToRemind,this.saveSurveyConfig(this.surveyConfig)}))),this.calculateSurveyNotificationDelay()):this.surveyConfig.daysLeftBeforeSurvey=this.surveyConfig.shortPeriodToRemind:this.surveyConfig.lastExtensionUsageDate&&!(0,l.areSameDates)(e,this.surveyConfig.lastExtensionUsageDate)&&this.surveyConfig.daysLeftBeforeSurvey>0&&this.surveyConfig.daysLeftBeforeSurvey--,this.surveyConfig.lastExtensionUsageDate=e,this.saveSurveyConfig(this.surveyConfig)}))}setExtensionFirstTimeInstalled(e){this.extensionFirstTimeInstalled=e}dispose(){this.cancellationTokenSource.cancel(),this.cancellationTokenSource.dispose(),this.promptDelayer.dispose()}initializeSurveyConfig(){return n(this,void 0,void 0,(function*(){if(this._surveyConfig)return;const e=a.ExtensionConfigManager.config.has(this.SURVEY_CONFIG_NAME)?this.prepareRawConfig(a.ExtensionConfigManager.config.get(this.SURVEY_CONFIG_NAME)):{shortPeriodToRemind:30,longPeriodToRemind:90,popCoveragePercent:.1,enabled:!1,daysLeftBeforeSurvey:this.extensionFirstTimeInstalled?30:3,surveyName:"none",surveyUrl:""},t=yield this.mergeRemoteConfigToLocal(e);this.saveSurveyConfig(t),this._surveyConfig=t}))}saveSurveyConfig(e){a.ExtensionConfigManager.config.set(this.SURVEY_CONFIG_NAME,e)}calculateSurveyNotificationDelay(){return 60*(0,l.getRandomIntInclusive)(this.MIN_WAIT_TIME_TO_SHOW_SURVEY_IN_MINUTES,this.MAX_WAIT_TIME_TO_SHOW_SURVEY_IN_MINUTES)*1e3}showSurveyNotification(){return n(this,void 0,void 0,(function*(){const e=p(0,null),t=p(1,null),r=p(2,null);this.sendPromptSurveyTelemetry(this.surveyConfig.surveyName);const n=yield o.window.showInformationMessage(r,e,t);n&&n!==t||this.sendSurveyNotificationReactionTelemetry(this.surveyConfig.surveyName,h.CANCEL),n===e&&this.surveyConfig.surveyUrl&&(o.env.openExternal(o.Uri.parse(this.surveyConfig.surveyUrl)),this.sendSurveyNotificationReactionTelemetry(this.surveyConfig.surveyName,h.ACCEPT))}))}get surveyConfig(){if(!this._surveyConfig){if(!a.ExtensionConfigManager.config.has(this.SURVEY_CONFIG_NAME))throw new Error("Could not find Survey config in the config store.");this._surveyConfig=this.prepareRawConfig(a.ExtensionConfigManager.config.get(this.SURVEY_CONFIG_NAME))}return this._surveyConfig}isCandidate(){return this.surveyConfig.popCoveragePercent>Math.random()}prepareRawConfig(e){return e.lastExtensionUsageDate&&(e.lastExtensionUsageDate=new Date(e.lastExtensionUsageDate)),e}mergeRemoteConfigToLocal(e){return n(this,void 0,void 0,(function*(){const t=yield this.downloadConfigRequest;return e.shortPeriodToRemind=t.shortPeriodToRemind,e.longPeriodToRemind=t.longPeriodToRemind,e.popCoveragePercent=t.popCoveragePercent,e.surveyUrl=t.surveyUrl,e.surveyName=t.surveyName,e.enabled=t.enabled,e}))}sendPromptSurveyTelemetry(e){const t=c.TelemetryHelper.createTelemetryEvent("promptUserSurvey",{surveyName:e});u.Telemetry.send(t)}sendSurveyNotificationReactionTelemetry(e,t){const r=c.TelemetryHelper.createTelemetryEvent("surveyNotificationReaction",{surveyName:e,userReaction:t});u.Telemetry.send(r)}}t.SurveyService=f},6377:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TipNotificationService=void 0;const o=r(1017),i=r(9496),s=r(4539),a=r(3821),c=r(4301),u=r(4952),l=r(9185),d=r(2463),p=r(9144),h=r(9901),f=r(8381);var g;!function(e){e.GET_MORE_INFO="tipsMoreInfo",e.DO_NOT_SHOW_AGAIN="tipsDoNotShow",e.SHOWN="tipShown"}(g||(g={}));class m{static getInstance(){return m.instance||(m.instance=new m),m.instance}dispose(){this.cancellationTokenSource.cancel(),this.cancellationTokenSource.dispose()}constructor(){this.endpointURL="https://microsoft.github.io/vscode-react-native/tipsNotifications/tipsNotificationsConfig.json",this.TIPS_NOTIFICATIONS_LOG_CHANNEL_NAME="Tips Notifications",this.TIPS_CONFIG_NAME="tipsConfig",this.getMoreInfoButtonText="Get more info",this.doNotShowTipsAgainButtonText="Don't show tips again",this.cancellationTokenSource=new i.CancellationTokenSource,this._tipsConfig=null,this.downloadConfigRequest=(0,s.retryDownloadConfig)(this.endpointURL,this.cancellationTokenSource),this.showTips=d.SettingsHelper.getShowTips(),this.logger=p.OutputChannelLogger.getChannel(this.TIPS_NOTIFICATIONS_LOG_CHANNEL_NAME,!0)}showTipNotification(e=!0,t){return n(this,void 0,void 0,(function*(){if(!e&&!t)return void this.logger.debug("The specific tip key parameter isn't passed for a specific tip");if(yield this.initializeTipsConfig(),!this.showTips)return;const r=new Date;let n;e?(this.deleteOutdatedKnownDate(),0===this.tipsConfig.daysLeftBeforeGeneralTip?n=yield this.showRandomGeneralTipNotification():this.tipsConfig.lastExtensionUsageDate&&!(0,h.areSameDates)(r,this.tipsConfig.lastExtensionUsageDate)&&this.tipsConfig.daysLeftBeforeGeneralTip--):n=yield this.showSpecificTipNotification(t),n&&(yield this.handleUserActionOnTip(n,e)),this.tipsConfig.lastExtensionUsageDate=r,u.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig)}))}setKnownDateForFeatureById(e,t=!0){return n(this,void 0,void 0,(function*(){yield this.initializeTipsConfig(),t?this.tipsConfig.tips.generalTips[e].knownDate=new Date:this.tipsConfig.tips.specificTips[e].knownDate=new Date,u.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig)}))}updateTipsConfig(){if(!u.ExtensionConfigManager.config.has(this.TIPS_CONFIG_NAME))return;const e=this.tipsConfig;e.tips.generalTips=this.updateConfigTipsFromStorage(f.default.generalTips,e.tips.generalTips),e.tips.specificTips=this.updateConfigTipsFromStorage(f.default.specificTips,e.tips.specificTips),this._tipsConfig=e,u.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,e)}updateConfigTipsFromStorage(e,t){for(const r in t)r in e||delete t[r];for(const r in e)r in t||(t[r]={});return t}get tipsConfig(){if(!this._tipsConfig){if(!u.ExtensionConfigManager.config.has(this.TIPS_CONFIG_NAME))throw new Error("Could not find Tips config in the config store.");this._tipsConfig=this.parseDatesInRawConfig(u.ExtensionConfigManager.config.get(this.TIPS_CONFIG_NAME))}return this._tipsConfig}handleUserActionOnTip(e,t){return n(this,void 0,void 0,(function*(){const{selection:r,tipKey:n}=e;if(r===this.getMoreInfoButtonText){this.sendTipNotificationActionTelemetry(n,g.GET_MORE_INFO);const e=(0,l.findFileInFolderHierarchy)(__dirname,"README.md");if(e){const r=t?this.getGeneralTipNotificationAnchorLinkByKey(n):this.getSpecificTipNotificationAnchorLinkByKey(n),s=i.Uri.parse(o.normalize(`file://${e}${r}`));i.commands.executeCommand("markdown.showPreview",s)}}r===this.doNotShowTipsAgainButtonText&&(this.sendTipNotificationActionTelemetry(n,g.DO_NOT_SHOW_AGAIN),this.showTips=!1,yield d.SettingsHelper.setShowTips(this.showTips))}))}initializeTipsConfig(){return n(this,void 0,void 0,(function*(){if(this.showTips=d.SettingsHelper.getShowTips(),this._tipsConfig)return;let e;u.ExtensionConfigManager.config.has(this.TIPS_CONFIG_NAME)?e=this.parseDatesInRawConfig(u.ExtensionConfigManager.config.get(this.TIPS_CONFIG_NAME)):(e={daysLeftBeforeGeneralTip:0,firstTimeMinDaysToRemind:3,firstTimeMaxDaysToRemind:6,minDaysToRemind:6,maxDaysToRemind:10,daysAfterLastUsage:30,allTipsShownFirstly:!1,tips:{generalTips:{},specificTips:{}}},e=yield this.mergeRemoteConfigToLocal(e),Object.keys(f.default.generalTips).forEach((t=>{e.tips.generalTips[t]={}})),Object.keys(f.default.specificTips).forEach((t=>{e.tips.specificTips[t]={}})),u.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,e)),this._tipsConfig=e}))}showRandomGeneralTipNotification(){return n(this,void 0,void 0,(function*(){let e;const t=this.tipsConfig.tips.generalTips,r=Object.keys(this.tipsConfig.tips.generalTips);let n;switch(this.tipsConfig.allTipsShownFirstly?e=r.sort(((e,r)=>{var n,o;return(null!==(n=t[r].shownDate)&&void 0!==n?n:new Date(0)).getTime()-(null!==(o=t[e].shownDate)&&void 0!==o?o:new Date(0)).getTime()})):(e=r.filter((e=>!t[e].knownDate&&!t[e].shownDate)),1===e.length&&(this.tipsConfig.allTipsShownFirstly=!0)),e.length){case 0:return{selection:void 0,tipKey:""};case 1:n=0;break;case 2:n=1;break;default:n=2}const o=e[(0,h.getRandomIntInclusive)(n,e.length-1)],s=this.getGeneralTipNotificationTextByKey(o);this.tipsConfig.tips.generalTips[o].shownDate=new Date,this._tipsConfig=yield this.mergeRemoteConfigToLocal(this.tipsConfig);const a=this.tipsConfig.allTipsShownFirstly?(0,h.getRandomIntInclusive)(this.tipsConfig.minDaysToRemind,this.tipsConfig.maxDaysToRemind):(0,h.getRandomIntInclusive)(this.tipsConfig.firstTimeMinDaysToRemind,this.tipsConfig.firstTimeMaxDaysToRemind);return this.tipsConfig.daysLeftBeforeGeneralTip=a,u.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig),this.sendShowTipNotificationTelemetry(o),{selection:yield i.window.showInformationMessage(s,this.getMoreInfoButtonText,this.doNotShowTipsAgainButtonText),tipKey:o}}))}showSpecificTipNotification(e){return n(this,void 0,void 0,(function*(){if(this.tipsConfig.tips.specificTips[e].shownDate)return;const t=this.getSpecificTipNotificationTextByKey(e);return this.tipsConfig.tips.specificTips[e].shownDate=new Date,u.ExtensionConfigManager.config.set(this.TIPS_CONFIG_NAME,this.tipsConfig),this.sendShowTipNotificationTelemetry(e),{selection:yield i.window.showInformationMessage(t,this.getMoreInfoButtonText,this.doNotShowTipsAgainButtonText),tipKey:e}}))}mergeRemoteConfigToLocal(e){return n(this,void 0,void 0,(function*(){const t=yield this.downloadConfigRequest;return e.firstTimeMinDaysToRemind=t.firstTimeMinDaysToRemind,e.firstTimeMaxDaysToRemind=t.firstTimeMaxDaysToRemind,e.minDaysToRemind=t.minDaysToRemind,e.maxDaysToRemind=t.maxDaysToRemind,e.daysAfterLastUsage=t.daysAfterLastUsage,e}))}getGeneralTipNotificationTextByKey(e){return f.default.generalTips[e].text}getSpecificTipNotificationTextByKey(e){return f.default.specificTips[e].text}getGeneralTipNotificationAnchorLinkByKey(e){return f.default.generalTips[e].anchorLink}getSpecificTipNotificationAnchorLinkByKey(e){return f.default.specificTips[e].anchorLink}deleteOutdatedKnownDate(){const e=new Date,t=this.tipsConfig.tips.generalTips;Object.keys(this.tipsConfig.tips.generalTips).filter((r=>{var n;const o=null!==(n=t[r].knownDate)&&void 0!==n?n:new Date;return t[r].knownDate&&this.getDifferenceInDays(o,e)>this.tipsConfig.daysAfterLastUsage})).forEach((e=>{delete t[e].knownDate}))}getDifferenceInDays(e,t){return Math.abs(t.getTime()-e.getTime())/864e5}parseDatesInRawConfig(e){e.lastExtensionUsageDate&&(e.lastExtensionUsageDate=new Date(e.lastExtensionUsageDate));const t=(t,r)=>{t.forEach((t=>{const n=e.tips[r][t];n.knownDate&&(e.tips[r][t].knownDate=new Date(n.knownDate)),n.shownDate&&n.shownDate&&(e.tips[r][t].shownDate=new Date(n.shownDate))}))};return t(Object.keys(e.tips.specificTips),"specificTips"),t(Object.keys(e.tips.generalTips),"generalTips"),e}sendShowTipNotificationTelemetry(e){const t=a.TelemetryHelper.createTelemetryEvent("showTipNotification",{tipKey:e});c.Telemetry.send(t)}sendTipNotificationActionTelemetry(e,t){const r=a.TelemetryHelper.createTelemetryEvent("tipNotificationAction",{tipKey:e,tipNotificationAction:t});c.Telemetry.send(r)}}t.TipNotificationService=m},8381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3403);n.config({messageFormat:n.MessageFormat.bundle,bundleFormat:n.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/tipsNotificationsService/tipsStorage.ts"));const o=n.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/tipsNotificationsService/tipsStorage.ts"));t.default={generalTips:{elementInspector:{text:o(0,null),anchorLink:"#react-native-commands-in-the-command-palette"},logCatMonitor:{text:o(1,null),anchorLink:"#configure-an-android-logcat-monitor"},networkInspector:{text:o(2,null),anchorLink:"#network-inspector"},directDebuggingWithHermes:{text:o(3,null),anchorLink:"#hermes-engine"},debuggingRNWAndMacOSApps:{text:o(4,null),anchorLink:"#react-native-for-windows"},expoHostType:{text:o(5,null),anchorLink:"#expo-applications"},customEnvVariables:{text:o(6,null),anchorLink:"#custom-environment-variables"}},specificTips:{networkInspectorLogsColorTheme:{text:o(7,null),anchorLink:"#network-inspector-logs-theme"}}}},1950:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.runChecks=void 0;const o=r(3403),i=r(9144),s=r(6975),a=r(9957),c=r(5410);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checker.ts"));const u=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checker.ts")),l=i.OutputChannelLogger.getMainChannel(),d={success:"✓",failure:"✖","partial-success":"❔"};t.runChecks=(e,t)=>n(void 0,void 0,void 0,(function*(){const r=Object.assign({[a.ValidationCategoryE.Common]:!0,[a.ValidationCategoryE.Android]:!0,[a.ValidationCategoryE.iOS]:!0},e);l.setFocusOnLogChannel(),l.info(u(0,null));const o=yield(e=>n(void 0,void 0,void 0,(function*(){return(0,c.fromEntries)(yield Promise.all(Object.values(a.ValidationCategoryE).map((t=>n(void 0,void 0,void 0,(function*(){return[t,new Map(yield(r=t,o=e,Promise.all(o.filter((e=>e.category===r)).map((e=>n(void 0,void 0,void 0,(function*(){return[e,yield e.exec().catch((t=>(l.warning(`Check ${e.label} failed with error`),l.warning(t),{status:"failure",comment:"Check execution failed"})))]})))))))];var r,o}))))))})))((0,s.getChecks)(t).filter((e=>!0===(null==r?void 0:r[e.category]))));let i=`<<< ${u(1,null)} >>>\n`;Object.entries(o).forEach((([e,t])=>n(void 0,void 0,void 0,(function*(){0!==t.size&&(i+=`\n*** ${e} ***\n`,t.forEach(((e,t)=>{i+=` ${d[e.status]} ${t.label}`,"success"!==e.status&&(i+=` - ${t.description}\n`,i+=`  ${e.comment||""}`),i+="\n"})))}))));[].concat(...Object.entries(o).map((e=>[...e[1].values()]))).every((e=>"success"===e.status))&&(i+=`\n${u(2,null)}\n\n`),l.logStream(i)}))},2234:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.adbExpo=t.adbAndroid=void 0;const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/adb.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/adb.ts")),c="ADB";function u(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"adb",versionRange:"30.0.0",getVersion:i.parseVersion.bind(null,"adb --version",/Version \d+\.\d+\.\d+/)});return e.exists?void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:-1===e.versionCompare?{status:"partial-success",comment:"Detected version is older than 30.0.0. Please update SDK tools in case of errors"}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}const l={label:c,description:a(0,null),category:s.ValidationCategoryE.Android,exec:u};t.adbAndroid=l;const d={label:c,description:a(1,null),category:s.ValidationCategoryE.Expo,exec:u};t.adbExpo=d},1474:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/cocoaPods.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/cocoaPods.ts")),c="CocoaPods";const u={label:c,platform:["darwin"],description:a(0,null),category:s.ValidationCategoryE.iOS,exec:function(){return n(this,void 0,void 0,(function*(){return(yield(0,i.basicCheck)({command:"pod"})).exists?{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},5346:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/devmode.ts"));const a={label:"DeveloperMode",platform:["win32"],description:o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/devmode.ts"))(0,null),category:s.ValidationCategoryE.Windows,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.executeCommand)("reg query HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\AppModelUnlock /v AllowDevelopmentWithoutDevLicense");return e.stdout&&e.stdout.includes(" 0x1")?{status:"success"}:{status:"failure",comment:"Developer mode is disabled"}}))}};t.default=a},8881:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/dotnet.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/dotnet.ts")),c=".NET Core 3.1";const u={label:c,platform:["win32"],description:a(0,null),category:s.ValidationCategoryE.Windows,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.executeCommand)("dotnet --info");return e.stdout?e.stdout.includes("Microsoft.NETCore.App 3.1")?{status:"success"}:{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},3964:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/emulator.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/emulator.ts")),c="Android Emulator";const u={label:c,description:a(0,null),category:s.ValidationCategoryE.Android,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"emulator",versionRange:"30.0.0",getVersion:i.parseVersion.bind(null,"emulator -version",/version (.*?)( |$)/gi)});return e.exists?void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:-1===e.versionCompare?{status:"partial-success",comment:"Detected version is older than 30.0.0. Please update SDK tools in case of errors"}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},5504:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.androidHome=void 0;const o=r(7147),i=r(3403),s=r(5410),a=r(9957);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/env.ts"));const c=i.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/env.ts")),u=e=>e.replace(/%([^%]+)%/g,((e,t)=>process.env[t]||e));const l={label:"Android Env",description:c(0,null),category:a.ValidationCategoryE.Android,exec:function(e="ANDROID_HOME"){var t,r,i;return n(this,void 0,void 0,(function*(){const n={};n[e]=process.env[e];const a=(0,s.fromEntries)(Object.entries(n).map((([e,t])=>[e,{original:t,resolved:t&&u(t)}]))),c=null===(t=Object.entries(a).find((([,e])=>!e.original)))||void 0===t?void 0:t[0];if(c)return{status:"failure",comment:`"${c}" not found in path. Ensure all variables are set up accroding to this guide - https://reactnative.dev/docs/environment-setup`};const l=null===(r=Object.entries(a).find((([,e])=>e.resolved&&!o.existsSync(e.resolved))))||void 0===r?void 0:r[0];if(l)return{status:"failure",comment:`"${l}" does not point to an existing path`};const d=null===(i=Object.entries(a).find((([e,t])=>t.original!==t.resolved)))||void 0===i?void 0:i[0];return d?{status:"partial-success",comment:`"${d}" uses environment variable in its path. This may cause errors`}:{status:"success"}}))}};t.androidHome=l},6031:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/expoCli.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/expoCli.ts")),c="Expo CLI";const u={label:c,description:a(0,null),category:s.ValidationCategoryE.Expo,exec:function(){return n(this,void 0,void 0,(function*(){return(yield(0,i.basicCheck)({command:"expo-cli"})).exists?{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},7459:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/gradle.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/gradle.ts")),c="Gradle";const u={label:c,description:a(0,null),category:s.ValidationCategoryE.Android,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"gradle",getVersion:i.parseVersion.bind(null,"gradle -version",/gradle (.*?)( |$)/gim)});return e.exists?void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},6975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChecks=void 0;const n=r(6625),o=r(8102),i=r(2234),s=r(1474),a=r(3964),c=r(5504),u=r(7459),l=r(3605),d=r(8428),p=r(9705),h=r(3380),f=r(6867),g=r(2060),m=r(6031),_=r(5346),v=r(9314),E=r(7507),y=r(3431),b=r(8881),S=r(8745),C=r(750);t.getChecks=(e=[])=>{const t=[f.default,i.adbAndroid,i.adbExpo,a.default,c.androidHome,l.default,d.default,u.default,s.default,p.default,h.default,m.default,_.default,v.default,E.default,y.default,b.default,S.default,C.default,g.xcodeBuild,g.xcodeBuildVersionRNmacOS],r=e.find((e=>Object.keys(e).includes("reactNativeVersion")));if(r&&n.gte(r.reactNativeVersion,"0.68.0")&&["linux","darwin"].includes(process.platform)){const e=t.find((e=>"Android Env"===e.label));e&&(e.exec=e.exec.bind(null,"ANDROID_SDK_ROOT"))}return t.forEach((e=>{e.exec=o.PromiseUtil.promiseCacheDecorator(e.exec)})),t.filter((e=>!e.platform||e.platform.includes(process.platform)))}},6867:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/iosDeploy.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/iosDeploy.ts")),c="ios-deploy";const u={label:c,platform:["darwin"],description:a(0,null),category:s.ValidationCategoryE.iOS,exec:function(){return n(this,void 0,void 0,(function*(){return(yield(0,i.basicCheck)({command:"ios-deploy"})).exists?{status:"success"}:{status:"partial-success",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},3605:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/java.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/java.ts")),c="Java";const u={label:c,description:a(0,null),category:s.ValidationCategoryE.Android,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"java",getVersion:i.parseVersion.bind(null,"java -version",/version "(.*?)"( |$|\n)/gi,"stderr"),versionRange:"1.8.0"});return e.exists?void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:-1===e.versionCompare?{status:"partial-success",comment:`Detected version is older than 1.8.0. Please install ${c} 8 or 11 in case of errors`}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},7507:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/longPath.ts"));const a={label:"LongPathSupport",platform:["win32"],description:o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/longPath.ts"))(0,null),category:s.ValidationCategoryE.Windows,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.executeCommand)("reg query HKLM\\SYSTEM\\CurrentControlSet\\Control\\FileSystem /v LongPathsEnabled");return e.stdout&&e.stdout.includes(" 0x1")?{status:"success"}:{status:"failure",comment:"Long path support is disabled"}}))}};t.default=a},750:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/macos.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/macos.ts")),c="macOS version";const u={label:c,platform:["darwin"],description:a(0,null),category:s.ValidationCategoryE.macOS,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"sw_vers",getVersion:i.parseVersion.bind(null,"sw_vers",/\d+\.\d+\.\d+/gi),versionRange:"10.13"});return e.exists?-1===e.versionCompare?{status:"partial-success",comment:"Detected version is older than 10.13 Please update macOS in case of errors"}:void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},8428:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/nodeJS.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/nodeJS.ts")),c="Node.JS";const u={label:c,description:a(0,null),category:s.ValidationCategoryE.Common,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"node",versionRange:"12.0.0",getVersion:i.parseVersion.bind(null,"node --version")});return e.exists?void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:-1===e.versionCompare?{status:"failure",comment:`Detected version is older than 12.0.0 Minimal required version is 12.0.0. Please update your ${c} installation`}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},9705:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/npm.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/npm.ts")),c="NPM";const u={label:c,description:a(0,null),category:s.ValidationCategoryE.Common,exec:function(){return n(this,void 0,void 0,(function*(){const e=yield(0,i.basicCheck)({command:"npm",getVersion:i.parseVersion.bind(null,"npm --version")});return e.exists?void 0===e.versionCompare?{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}:{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},9957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationCategoryE=void 0,function(e){e.Common="Common",e.Android="Android",e.iOS="iOS",e.Expo="Expo",e.Windows="Windows",e.macOS="macOS"}(t.ValidationCategoryE||(t.ValidationCategoryE={}))},9314:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(6625),s=r(5410),a=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/visualStudio.ts"));const c=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/visualStudio.ts")),u="Compilers, build tools, SDKs and Visual Studio";const l={label:u,platform:["win32"],description:c(0,null),category:a.ValidationCategoryE.Windows,exec:function(){return n(this,void 0,void 0,(function*(){let e="";e=process.env["ProgramFiles(x86)"]?`"${process.env["ProgramFiles(x86)"]}\\Microsoft Visual Studio\\Installer\\vswhere.exe"`:'"C:\\Program Files (x86)\\Microsoft Visual Studio\\Installer\\vswhere.exe"';const t=["Microsoft.Component.MSBuild","Microsoft.VisualStudio.Component.VC.Tools.x86.x64","Microsoft.VisualStudio.ComponentGroup.UWP.Support","Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Core","Microsoft.VisualStudio.Component.Windows10SDK.19041"],r=`${e} -property catalog_productDisplayVersion`,n=yield(0,s.executeCommand)(r);if(n.stdout){const r=e=>i.gtr(e,"16.5");if((0,s.normizeStr)(n.stdout).split("\n").some(r)){for(const r of t){if(!(yield(0,s.executeCommand)(`${e}  -requires ${r}  -property productPath`)).stdout)return{status:"failure",comment:`Please check if ${r} is installed`}}return{status:"success"}}return{status:"partial-success",comment:"Detected version is older than 16.5. Please update Visual Studio in case of errors"}}return{status:"failure",comment:(0,s.createNotFoundMessage)(u)}}))}};t.default=l},3380:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/watchman.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/watchman.ts")),c="Watchman";const u={label:c,platform:["darwin"],description:a(0,null),category:s.ValidationCategoryE.Common,exec:function(){return n(this,void 0,void 0,(function*(){return(yield(0,i.basicCheck)({command:"watchman"})).exists?{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},3431:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(2037),i=r(3403),s=r(6625),a=r(9957);i.config({messageFormat:i.MessageFormat.bundle,bundleFormat:i.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/windows.ts"));const c={label:"Windows version > 10.0.16299.0",platform:["win32"],description:i.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/windows.ts"))(0,null),category:a.ValidationCategoryE.Windows,exec:function(){return n(this,void 0,void 0,(function*(){const e=o.release();return s.gte(e,"10.0.16299")?{status:"success"}:{status:"failure",comment:`Unsupported version of Windows detected - ${e}. Please, update Windows in case of errors.`}}))}};t.default=c},2060:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.xcodeBuildVersionRNmacOS=t.xcodeBuild=void 0;const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/xcodebuild.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/xcodebuild.ts")),c="XCodeBuild";function u(e){return n(this,void 0,void 0,(function*(){const t="xcodebuild",r=yield(0,i.basicCheck)({command:t,getVersion:i.parseVersion.bind(null,`${t} -version`,/\d+\.\d+\.\d+/gi),versionRange:e});if(!r.exists)return{status:"failure",comment:(0,i.createNotFoundMessage)(c)};if(e){if(-1===r.versionCompare)return{status:"partial-success",comment:"Detected version is older than 11.3.1 Please update Xcode in case of errors"};if(void 0===r.versionCompare)return{status:"failure",comment:(0,i.createVersionErrorMessage)(c)}}return{status:"success"}}))}const l={label:c,platform:["darwin"],description:a(0,null),category:s.ValidationCategoryE.iOS,exec:u};t.xcodeBuild=l;const d={label:`${c} version`,platform:["darwin"],description:a(1,null),category:s.ValidationCategoryE.macOS,exec:u.bind(null,"11.3.1")};t.xcodeBuildVersionRNmacOS=d},8745:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=r(3403),i=r(5410),s=r(9957);o.config({messageFormat:o.MessageFormat.bundle,bundleFormat:o.BundleFormat.standalone})(r(1017).join(__dirname,"src/extension/services/validationService/checks/xcodecli.ts"));const a=o.loadMessageBundle(r(1017).join(__dirname,"src/extension/services/validationService/checks/xcodecli.ts")),c="Xcode CLI";const u={label:c,platform:["darwin"],description:a(0,null),category:s.ValidationCategoryE.macOS,exec:function(){return n(this,void 0,void 0,(function*(){return(yield(0,i.basicCheck)({command:"xcode-select"})).exists?{status:"success"}:{status:"failure",comment:(0,i.createNotFoundMessage)(c)}}))}};t.default=u},5410:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.fromEntries=t.parseVersion=t.basicCheck=t.createVersionErrorMessage=t.createNotFoundMessage=t.normizeStr=t.executeCommand=void 0;const o=r(2081),i=r(3837),s=r(6625),a=r(5497);t.executeCommand=(0,i.promisify)(o.exec);t.normizeStr=e=>e.replace(/\r\n/g,"\n");t.createNotFoundMessage=e=>`Command not found. Make sure ${e} is installed`;t.createVersionErrorMessage=e=>`Version check failed. Make sure ${e} is working correctly`;t.basicCheck=e=>n(void 0,void 0,void 0,(function*(){var t;const r={exists:!0};if(!a.sync(e.command))return r.exists=!1,r;const n=yield null===(t=e.getVersion)||void 0===t?void 0:t.call(e);return n?e.versionRange?(r.versionCompare=s.gtr(n,e.versionRange)?1:s.ltr(n,e.versionRange)?-1:0,r):(r.versionCompare=0,r):r}));t.parseVersion=(e,r,o="stdout")=>n(void 0,void 0,void 0,(function*(){var n;const i=yield(0,t.executeCommand)(e).catch((()=>{}));if(!i)return null;const a=(0,t.normizeStr)(i[o]);return s.coerce(r?null===(n=r.exec(a))||void 0===n?void 0:n[0]:a)}));t.fromEntries=e=>[...e].reduce(((e,[t,r])=>(e[t]=r,e)),{})},2463:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsHelper=void 0;const o=r(1017),i=r(7147),s=r(9496),a=r(2756),c=r(9208),u=r(9658),l=r(8694),d=r(5034),p=r(1409);class h{static getPackagerPort(e){const t=h.getReactNativeProjectRoot(e),r=s.Uri.file(t),n=s.workspace.getConfiguration("react-native.packager",r);return n.has("port")?a.ConfigurationReader.readInt(n.get("port")):c.Packager.DEFAULT_PORT}static getLogLevel(){const e=s.workspace.getConfiguration("react-native-tools",null);if(e.has("logLevel")){const t=a.ConfigurationReader.readString(e.get("logLevel"));return parseInt(l.LogLevel[t],10)}return l.LogLevel.Info}static getReactNativeProjectRoot(e){const t=s.Uri.file(e),r=s.workspace.getConfiguration("react-native-tools",t);if(r.has("projectRoot")){const e=a.ConfigurationReader.readString(r.get("projectRoot"));return o.isAbsolute(e)?e:o.resolve(t.fsPath,e)}return t.fsPath}static getReactNativeGlobalCommandName(e){const t=s.workspace.getConfiguration("react-native-tools",e);return t.has("reactNativeGlobalCommandName")?a.ConfigurationReader.readString(t.get("reactNativeGlobalCommandName")):null}static getRunArgs(e,t,r){const n=s.workspace.getConfiguration("react-native",r),o=`${e}.runArguments.${t}`;return n.has(o)?a.ConfigurationReader.readArray(n.get(o)):[]}static getEnvArgs(e,t,r){const n=s.workspace.getConfiguration("react-native",r),o=`${e}.env.${t}`;return n.has(o)?a.ConfigurationReader.readObject(n.get(o)):{}}static getEnvFile(e,t,r){const n=s.workspace.getConfiguration("react-native",r),o=`${e}.envFile.${t}`;return n.has(o)?a.ConfigurationReader.readString(n.get(o)):""}static getNetworkInspectorConsoleLogsColorTheme(){const e=s.workspace.getConfiguration("react-native-tools.networkInspector",null);if(e.has("consoleLogsColorTheme")){const t=a.ConfigurationReader.readString(e.get("consoleLogsColorTheme"));return u.SystemColorTheme[t]}return u.SystemColorTheme.Light}static getPackagerStatusIndicatorPattern(e){const t=h.getReactNativeProjectRoot(e),r=s.Uri.file(t),n=s.workspace.getConfiguration("react-native.packager",r);if(n.has("status-indicator")){const e=a.ConfigurationReader.readString(n.get("status-indicator"));if(e===d.PackagerStatusIndicator.FULL_VERSION||e===d.PackagerStatusIndicator.SHORT_VERSION)return e}return d.PackagerStatusIndicator.FULL_VERSION}static getLogCatFilteringArgs(e){const t=s.workspace.getConfiguration("react-native",e);if(t.has("android.logCatArguments"))return a.ConfigurationReader.readArray(t.get("android.logCatArguments"))}static getExpoDependencyVersion(e){const t=s.workspace.getConfiguration("react-native.expo.dependencies");if(t.has(e)){return a.ConfigurationReader.readString(t.get(e))}}static getShowTips(){const e=s.workspace.getConfiguration("react-native-tools",null);return!!e.has("showUserTips")&&a.ConfigurationReader.readBoolean(e.get("showUserTips"))}static setShowTips(e){return n(this,void 0,void 0,(function*(){const t=s.workspace.getConfiguration("react-native-tools",null);t.has("showUserTips")&&(yield t.update("showUserTips",e,!0))}))}static getWorkspaceFileExcludeFolder(e){return n(this,void 0,void 0,(function*(){const t=e?JSON.parse(p(i.readFileSync(e,"utf-8"))):null;if(t){if(t.settings){const e=t.settings["react-native.workspace.exclude"];return e||[]}return[]}return[]}))}}t.SettingsHelper=h},5070:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsPlatform=void 0;const o=r(6625),i=r(7005),s=r(7599),a=r(4191),c=r(3821),u=r(5458),l=r(312),d=r(9327);class p extends i.GeneralPlatform{reloadApp(e){return n(this,void 0,void 0,(function*(){const t=e.getAppWorker();t&&t.reloadAppCommand()}))}constructor(e,t={}){super(e,t),this.runOptions=e}runApp(e=!0){var t,r;return n(this,void 0,void 0,(function*(){let l={platform:{value:s.PlatformType.Windows,isPii:!1}};null===(t=this.projectObserver)||void 0===t||t.updateRNWindowsProjectState(!0),this.runOptions.isDirect&&(l.isDirect={value:!0,isPii:!1},null===(r=this.projectObserver)||void 0===r||r.updateRNWindowsHermesProjectState(!0)),l=c.TelemetryHelper.addPlatformPropertiesToTelemetryProperties(this.runOptions,this.runOptions.reactNativeVersions,l),yield c.TelemetryHelper.generate("WindowsPlatform.runApp",l,(()=>n(this,void 0,void 0,(function*(){const t=i.GeneralPlatform.getEnvArgument(process.env,this.runOptions.env,this.runOptions.envFile);(o.gte(this.runOptions.reactNativeVersions.reactNativeWindowsVersion,p.RNW_CLI_EXISTS_VERSION)||d.ProjectVersionHelper.isCanaryVersion(this.runOptions.reactNativeVersions.reactNativeWindowsVersion))&&(this.runArguments.push("--logging"),e&&(this.runOptions.isDirect?this.runArguments.push("--direct-debugging"):this.runArguments.push("--remote-debugging"))),(!o.valid(this.runOptions.reactNativeVersions.reactNativeVersion)||o.gte(this.runOptions.reactNativeVersions.reactNativeVersion,p.NO_PACKAGER_VERSION)||d.ProjectVersionHelper.isCanaryVersion(this.runOptions.reactNativeVersions.reactNativeVersion))&&this.runArguments.push("--no-packager");const r=new u.CommandExecutor(this.runOptions.nodeModulesRoot,this.projectPath,this.logger).spawnReactCommand(`run-${this.platformName}`,this.runArguments,{env:t});yield new a.OutputVerifier((()=>Promise.resolve(p.SUCCESS_PATTERNS)),(()=>Promise.resolve(p.FAILURE_PATTERNS)),this.platformName).process(r)}))))}))}prewarmBundleCache(){return this.packager.prewarmBundleCache(s.PlatformType.Windows)}getRunArguments(){const e=[];if(this.runOptions.runArguments&&this.runOptions.runArguments.length>0)e.push(...this.runOptions.runArguments);else{const t=this.runOptions.target===i.TargetType.Simulator?"":this.runOptions.target;t&&e.push(`--${t}`)}return e}}p.NO_PACKAGER_VERSION="0.53.0",p.RNW_CLI_EXISTS_VERSION="0.63.0",p.SUCCESS_PATTERNS=["Starting the app"],p.FAILURE_PATTERNS=[{pattern:"Unrecognized command 'run-windows'",errorCode:l.InternalErrorCode.WinRNMPPluginIsNotInstalled},{pattern:/×.+$/gm,errorCode:l.InternalErrorCode.WinRunCommandFailed}],t.WindowsPlatform=p},3403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,i,s,a,c,u=r(1017),l=r(7147),d=Object.prototype.toString;function p(e){return void 0!==e}function h(e){return"[object String]"===d.call(e)}function f(e){return JSON.parse(l.readFileSync(e,"utf8"))}function g(e,t){return c&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,r){var n=r[0],o=t[n],i=e;return"string"==typeof o?i=o:"number"!=typeof o&&"boolean"!=typeof o&&null!=o||(i=String(o)),i}))}function m(e){return function(t,r){for(var n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return n=t,"[object Number]"===d.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):g(e[t],o):h(r)?(console.warn("Message "+r+" didn't get externalized correctly."),g(r,o)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function _(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return g(t,r)}function v(e,t){return s[e]=t,t}function E(e,t){var r,n,o,i=u.join(a.cacheRoot,e.id+"-"+e.hash+".json"),s=!1,c=!1;try{return r=JSON.parse(l.readFileSync(i,{encoding:"utf8",flag:"r"})),n=i,o=new Date,l.utimes(n,o,o,(function(){})),r}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),l.unlink(i,(function(e){e&&console.error("Deleting corrupted bundle "+i+" failed.")})),s=!0}}if(r=function(e,t){var r=a.translationsConfig[e.id];if(r){var n=f(r).contents,o=f(u.join(t,"nls.metadata.json")),i=Object.create(null);for(var s in o){var c=o[s],l=n[e.outDir+"/"+s];if(l){for(var d=[],p=0;p<c.keys.length;p++){var g=c.keys[p],m=l[h(g)?g:g.key];void 0===m&&(m=c.messages[p]),d.push(m)}i[s]=d}else i[s]=c.messages}return i}}(e,t),!r||s)return r;if(c)try{l.writeFileSync(i,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}function y(e){try{return function(e){var t=f(u.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in t){var o=t[n];r[n]=o.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function b(e,t){var r;if(!0===a.languagePackSupport&&void 0!==a.cacheRoot&&void 0!==a.languagePackId&&void 0!==a.translationsConfigFile&&void 0!==a.translationsConfig)try{r=E(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(a.languagePackSupport)return y(t);var n=function(e){for(var t=a.language;t;){var r=u.join(e,"nls.bundle."+t+".json");if(l.existsSync(r))return r;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(r=u.join(e,"nls.bundle.json"),l.existsSync(r)))return r}(t);if(n)try{return f(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=y(t)}return r}function S(e){if(!e)return _;var t=u.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),a.messageFormat===n.both||a.messageFormat===n.bundle){var r=function(e){for(var t,r=u.dirname(e);t=u.join(r,"nls.metadata.header.json"),!l.existsSync(t);){var n=u.dirname(r);if(n===r){t=void 0;break}r=n}return t}(e);if(r){var o=u.dirname(r),i=s[o];if(void 0===i)try{var d=JSON.parse(l.readFileSync(r,"utf8"));try{var h=b(d,o);i=v(o,h?{header:d,nlsBundle:h}:null)}catch(e){console.error("Failed to load nls bundle",e),i=v(o,null)}}catch(e){console.error("Failed to read header file",e),i=v(o,null)}if(i){var g=e.substr(o.length+1).replace(/\\/g,"/"),E=i.nlsBundle[g];return void 0===E?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):m(E)}}}if(a.messageFormat===n.both||a.messageFormat===n.file)try{var y=f(function(e){var t;if(a.cacheLanguageResolution&&t);else{if(c||!a.language)t=".nls.json";else for(var r=a.language;r;){var n=".nls."+r+".json";if(l.existsSync(e+n)){t=n;break}var o=r.lastIndexOf("-");o>0?r=r.substring(0,o):(t=".nls.json",r=null)}a.cacheLanguageResolution}return e+t}(e));return Array.isArray(y)?m(y):p(y.messages)&&p(y.keys)?m(y.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(o=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&p(t.key)&&p(t.comment)}}(i||(i={})),function(){if(a={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];h(r)&&(t=r)}if(h(e.locale)&&(a.locale=e.locale.toLowerCase()),void 0===t?a.language=a.locale:"en"!==t&&(a.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(a.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(a.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(a.languagePackId=e._languagePackId),h(e._translationsConfigFile)){a.translationsConfigFile=e._translationsConfigFile;try{a.translationsConfig=f(a.translationsConfigFile)}catch(t){if(e._corruptedFile){var o=u.dirname(e._corruptedFile);l.exists(o,(function(t){t&&l.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}c="pseudo"===a.locale,void 0,s=Object.create(null)}(),t.loadMessageBundle=S,t.config=function(e){return e&&(h(e.locale)&&(a.locale=e.locale.toLowerCase(),a.language=a.locale,void 0,s=Object.create(null)),void 0!==e.messageFormat&&(a.messageFormat=e.messageFormat),e.bundleFormat===o.standalone&&!0===a.languagePackSupport&&(a.languagePackSupport=!1)),c="pseudo"===a.locale,S}},2806:(e,t,r)=>{const n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=r(1017),i=n?";":":",s=r(1959),a=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const r=t.colon||i,o=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],s=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=n?s.split(r):[""];return n&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:o,pathExt:a,pathExtExe:s}},u=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:n,pathExt:i,pathExtExe:u}=c(e,t),l=[],d=r=>new Promise(((i,s)=>{if(r===n.length)return t.all&&l.length?i(l):s(a(e));const c=n[r],u=/^".*"$/.test(c)?c.slice(1,-1):c,d=o.join(u,e),h=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;i(p(h,r,0))})),p=(e,r,n)=>new Promise(((o,a)=>{if(n===i.length)return o(d(r+1));const c=i[n];s(e+c,{pathExt:u},((i,s)=>{if(!i&&s){if(!t.all)return o(e+c);l.push(e+c)}return o(p(e,r,n+1))}))}));return r?d(0).then((e=>r(null,e)),r):d(0)};e.exports=u,u.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:i}=c(e,t),u=[];for(let a=0;a<r.length;a++){const c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,d=o.join(l,e),p=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<n.length;e++){const r=p+n[e];try{if(s.sync(r,{pathExt:i})){if(!t.all)return r;u.push(r)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)}},2479:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},902:(e,t,r)=>{"use strict";e.exports=function(e,t,r,o){r instanceof Function&&(o=r,r={});const d=async function(e,t,r={}){"string"==typeof r&&(r={encoding:r});let o,d;const p=i(f((()=>d))),m=s.resolve(e);try{await function(e){return new Promise((t=>{l[e]||(l[e]=[]),l[e].push(t),1===l[e].length&&t()}))}(m);const i=await u(n.realpath)(e).catch((()=>e));if(d=h(i),!r.mode||!r.chown){const e=await u(n.stat)(i).catch((()=>{}));e&&(null==r.mode&&(r.mode=e.mode),null==r.chown&&process.getuid&&(r.chown={uid:e.uid,gid:e.gid}))}o=await u(n.open)(d,"w",r.mode),r.tmpfileCreated&&await r.tmpfileCreated(d),a(t)&&(t=c(t)),Buffer.isBuffer(t)?await u(n.write)(o,t,0,t.length,0):null!=t&&await u(n.write)(o,String(t),0,String(r.encoding||"utf8")),!1!==r.fsync&&await u(n.fsync)(o),await u(n.close)(o),o=null,r.chown&&await u(n.chown)(d,r.chown.uid,r.chown.gid).catch((e=>{if(!g(e))throw e})),r.mode&&await u(n.chmod)(d,r.mode).catch((e=>{if(!g(e))throw e})),await u(n.rename)(d,i)}finally{o&&await u(n.close)(o).catch((()=>{})),p(),await u(n.unlink)(d).catch((()=>{})),l[m].shift(),l[m].length>0?l[m][0]():delete l[m]}}(e,t,r);o&&d.then(o,o);return d},e.exports.sync=function(e,t,r){"string"==typeof r?r={encoding:r}:r||(r={});try{e=n.realpathSync(e)}catch(e){}const o=h(e);if(!r.mode||!r.chown)try{const t=n.statSync(e);(r=Object.assign({},r)).mode||(r.mode=t.mode),!r.chown&&process.getuid&&(r.chown={uid:t.uid,gid:t.gid})}catch(e){}let s;const u=f(o),l=i(u);let d=!0;try{if(s=n.openSync(o,"w",r.mode||438),r.tmpfileCreated&&r.tmpfileCreated(o),a(t)&&(t=c(t)),Buffer.isBuffer(t)?n.writeSync(s,t,0,t.length,0):null!=t&&n.writeSync(s,String(t),0,String(r.encoding||"utf8")),!1!==r.fsync&&n.fsyncSync(s),n.closeSync(s),s=null,r.chown)try{n.chownSync(o,r.chown.uid,r.chown.gid)}catch(e){if(!g(e))throw e}if(r.mode)try{n.chmodSync(o,r.mode)}catch(e){if(!g(e))throw e}n.renameSync(o,e),d=!1}finally{if(s)try{n.closeSync(s)}catch(e){}l(),d&&u()}},e.exports._getTmpname=h,e.exports._cleanupOnExit=f;const n=r(7147),o=r(4269),i=r(7908),s=r(1017),a=r(4501),c=r(5054),{promisify:u}=r(3837),l={},d=function(){try{return r(1267).threadId}catch(e){return 0}}();let p=0;function h(e){return e+"."+o(__filename).hash(String(process.pid)).hash(String(d)).hash(String(++p)).result()}function f(e){return()=>{try{n.unlinkSync("function"==typeof e?e():e)}catch(e){}}}function g(e){if("ENOSYS"===e.code)return!0;return!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}},8777:(e,t,r)=>{"use strict";const n=r(8762);n.createWebSocketStream=r(404),n.Server=r(9284),n.Receiver=r(2957),n.Sender=r(7330),e.exports=n},977:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(1872);function o(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,o),o+=n.length}return o<t?r.slice(0,o):r}function i(e,t,r,n,o){for(let i=0;i<o;i++)r[n+i]=e[i]^t[3&i]}function s(e,t){const r=e.length;for(let n=0;n<r;n++)e[n]^=t[3&n]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=r(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}())),n=t.BufferUtil||t;e.exports={concat:o,mask(e,t,r,o,s){s<48?i(e,t,r,o,s):n.mask(e,t,r,o,s)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?s(e,t):n.unmask(e,t)}}}catch(t){e.exports={concat:o,mask:i,toArrayBuffer:a,toBuffer:c,unmask:s}}},1872:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},62:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class r extends t{constructor(e,t){super("message",t),this.data=e}}class n extends t{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class o extends t{constructor(e){super("open",e)}}class i extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t,s){if("function"!=typeof t)return;function a(e){t.call(this,new r(e,this))}function c(e,r){t.call(this,new n(e,r,this))}function u(e){t.call(this,new i(e,this))}function l(){t.call(this,new o(this))}const d=s&&s.once?"once":"on";"message"===e?(a._listener=t,this[d](e,a)):"close"===e?(c._listener=t,this[d](e,c)):"error"===e?(u._listener=t,this[d](e,u)):"open"===e?(l._listener=t,this[d](e,l)):this[d](e,t)},removeEventListener(e,t){const r=this.listeners(e);for(let n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=s},1503:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const n=Object.create(null);if(void 0===e||""===e)return n;let o,i,s=Object.create(null),a=!1,c=!1,u=!1,l=-1,d=-1,p=0;for(;p<e.length;p++){const h=e.charCodeAt(p);if(void 0===o)if(-1===d&&1===t[h])-1===l&&(l=p);else if(32===h||9===h)-1===d&&-1!==l&&(d=p);else{if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${p}`);-1===d&&(d=p);const t=e.slice(l,d);44===h?(r(n,t,s),s=Object.create(null)):o=t,l=d=-1}}else if(void 0===i)if(-1===d&&1===t[h])-1===l&&(l=p);else if(32===h||9===h)-1===d&&-1!==l&&(d=p);else if(59===h||44===h){if(-1===l)throw new SyntaxError(`Unexpected character at index ${p}`);-1===d&&(d=p),r(s,e.slice(l,d),!0),44===h&&(r(n,o,s),s=Object.create(null),o=void 0),l=d=-1}else{if(61!==h||-1===l||-1!==d)throw new SyntaxError(`Unexpected character at index ${p}`);i=e.slice(l,p),l=d=-1}else if(c){if(1!==t[h])throw new SyntaxError(`Unexpected character at index ${p}`);-1===l?l=p:a||(a=!0),c=!1}else if(u)if(1===t[h])-1===l&&(l=p);else if(34===h&&-1!==l)u=!1,d=p;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===h&&61===e.charCodeAt(p-1))u=!0;else if(-1===d&&1===t[h])-1===l&&(l=p);else if(-1===l||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===l)throw new SyntaxError(`Unexpected character at index ${p}`);-1===d&&(d=p);let t=e.slice(l,d);a&&(t=t.replace(/\\/g,""),a=!1),r(s,i,t),44===h&&(r(n,o,s),s=Object.create(null),o=void 0),i=void 0,l=d=-1}}else-1===d&&(d=p)}if(-1===l||u)throw new SyntaxError("Unexpected end of input");-1===d&&(d=p);const h=e.slice(l,d);return void 0===o?r(n,h,s):(void 0===i?r(s,h,!0):r(s,i,a?h.replace(/\\/g,""):h),r(n,o,s)),n}}},305:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},5196:(e,t,r)=>{"use strict";const n=r(9796),o=r(977),i=r(305),{kStatusCode:s,NOOP:a}=r(1872),c=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),l=Symbol("total-length"),d=Symbol("callback"),p=Symbol("buffers"),h=Symbol("error");let f;function g(e){this[p].push(e),this[l]+=e.length}function m(e){this[l]+=e.length,this[u]._maxPayload<1||this[l]<=this[u]._maxPayload?this[p].push(e):(this[h]=new RangeError("Max payload size exceeded"),this[h][s]=1009,this.removeListener("data",m),this.reset())}function _(e){this[u]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){f.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){f.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[l]=0,this._inflate[p]=[],this._inflate.on("error",_),this._inflate.on("data",m)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush((()=>{const e=this._inflate[h];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=o.concat(this._inflate[p],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[p]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[l]=0,this._deflate[p]=[],this._deflate.on("error",a),this._deflate.on("data",g)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[p],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),this._deflate[d]=null,this._deflate[l]=0,this._deflate[p]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},2957:(e,t,r)=>{"use strict";const{Writable:n}=r(2781),o=r(5196),{BINARY_TYPES:i,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:c}=r(1872),{concat:u,toArrayBuffer:l,unmask:d}=r(977),{isValidStatusCode:p,isValidUTF8:h}=r(6746);function f(e,t,r,n){const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,f),o[a]=n,o}e.exports=class extends n{constructor(e,t,r,n){super(),this._binaryType=e||i[0],this[c]=void 0,this._extensions=t||{},this._isServer=!!r,this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[o.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?u(t,e):"arraybuffer"===this._binaryType?l(u(t,e)):t,this.emit("message",r)}else{const r=u(t,e);if(!h(r))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",r.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!p(t))return f(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!h(r))return f(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},7330:(e,t,r)=>{"use strict";const{randomFillSync:n}=r(6113),o=r(5196),{EMPTY_BUFFER:i}=r(1872),{isValidStatusCode:s}=r(6746),{mask:a,toBuffer:c}=r(977),u=Buffer.alloc(4);class l{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let o=t.mask?6:2,i=e.length;e.length>=65536?(o+=8,i=127):e.length>125&&(o+=2,i=126);const s=Buffer.allocUnsafe(r?e.length+o:o);return s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=i,126===i?s.writeUInt16BE(e.length,2):127===i&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),t.mask?(n(u,0,4),s[1]|=128,s[o-4]=u[0],s[o-3]=u[1],s[o-2]=u[2],s[o-1]=u[3],r?(a(e,u,s,o,e.length),[s]):(a(e,u,e,0,e.length),[s,e])):[s,e]}close(e,t,r,n){let o;if(void 0===e)o=i;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),o.write(t,2)}}this._deflating?this.enqueue([this.doClose,o,r,n]):this.doClose(o,r,n)}doClose(e,t,r){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const n=c(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,c.readOnly,r]):this.doPing(n,t,c.readOnly,r)}doPing(e,t,r,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){const n=c(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,c.readOnly,r]):this.doPong(n,t,c.readOnly,r)}doPong(e,t,r,n){this.sendFrame(l.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){const n=c(e),i=this._extensions[o.extensionName];let s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&i&&(a=n.length>=i._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),i){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,e,r]):this.dispatch(n,this._compress,e,r)}else this.sendFrame(l.frame(n,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:c.readOnly}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(l.frame(e,r),n);const i=this._extensions[o.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,i.compress(e,r.fin,((t,o)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(l.frame(o,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=l},404:(e,t,r)=>{"use strict";const{Duplex:n}=r(2781);function o(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function s(e){this.removeListener("error",s),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;function a(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const c=new n({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){c.push(t)||(r=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||c.destroy(e)})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(o,c);let n=!1;e.once("error",(function(e){n=!0,r(e)})),e.once("close",(function(){n||r(t),process.nextTick(o,c)})),e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),c._readableState.endEmitted&&c.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){c._write(t,r,n)}))},c.on("end",i),c.on("error",s),c}},6746:(e,t,r)=>{"use strict";function n(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function o(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{let t=r(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));"object"==typeof t&&(t=t.Validation.isValidUTF8),e.exports={isValidStatusCode:n,isValidUTF8:e=>e.length<150?o(e):t(e)}}catch(t){e.exports={isValidStatusCode:n,isValidUTF8:o}}},9284:(e,t,r)=>{"use strict";const n=r(2361),{createHash:o}=r(6113),{createServer:i,STATUS_CODES:s}=r(3685),a=r(5196),c=r(8762),{format:u,parse:l}=r(1503),{GUID:d,kWebSocket:p}=r(1872),h=/^[+/0-9A-Za-z]{22}==$/;function f(e){e.emit("close")}function g(){this.destroy()}function m(e,t,r,n){e.writable&&(r=r||s[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.write(`HTTP/1.1 ${t} ${s[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",g),e.destroy()}function _(e){return e.trim()}e.exports=class extends n{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i(((e,t)=>{const r=s[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close((()=>this.emit("close"))):process.nextTick(f,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",g);const o=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),i=+e.headers["sec-websocket-version"],s={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!o||!h.test(o)||8!==i&&13!==i||!this.shouldHandle(e))return m(t,400);if(this.options.perMessageDeflate){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=l(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(r.accept(t[a.extensionName]),s[a.extensionName]=r)}catch(e){return m(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[""+(8===i?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,((i,a,c,u)=>{if(!i)return m(t,a||401,c,u);this.completeUpgrade(o,s,e,t,r,n)}));if(!this.options.verifyClient(a))return m(t,401)}this.completeUpgrade(o,s,e,t,r,n)}completeUpgrade(e,t,r,n,i,s){if(!n.readable||!n.writable)return n.destroy();if(n[p])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(e+d).digest("base64")}`],h=new c(null);let f=r.headers["sec-websocket-protocol"];if(f&&(f=f.split(",").map(_),f=this.options.handleProtocols?this.options.handleProtocols(f,r):f[0],f&&(l.push(`Sec-WebSocket-Protocol: ${f}`),h._protocol=f)),t[a.extensionName]){const e=t[a.extensionName].params,r=u({[a.extensionName]:[e]});l.push(`Sec-WebSocket-Extensions: ${r}`),h._extensions=t}this.emit("headers",l,r),n.write(l.concat("\r\n").join("\r\n")),n.removeListener("error",g),h.setSocket(n,i,this.options.maxPayload),this.clients&&(this.clients.add(h),h.on("close",(()=>this.clients.delete(h)))),s(h,r)}}},8762:(e,t,r)=>{"use strict";const n=r(2361),o=r(5687),i=r(3685),s=r(1808),a=r(4404),{randomBytes:c,createHash:u}=r(6113),{URL:l}=r(7310),d=r(5196),p=r(2957),h=r(7330),{BINARY_TYPES:f,EMPTY_BUFFER:g,GUID:m,kStatusCode:_,kWebSocket:v,NOOP:E}=r(1872),{addEventListener:y,removeEventListener:b}=r(62),{format:S,parse:C}=r(1503),{toBuffer:A}=r(977),T=["CONNECTING","OPEN","CLOSING","CLOSED"],w=[8,13];class P extends n{constructor(e,t,r){super(),this._binaryType=f[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=P.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),O(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){f.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new p(this.binaryType,this._extensions,this._isServer,r);this._sender=new h(e,this._extensions),this._receiver=n,this._socket=e,n[v]=this,e[v]=this,n.on("conclude",M),n.on("drain",x),n.on("error",k),n.on("message",L),n.on("ping",j),n.on("pong",B),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",U),e.on("data",H),e.on("end",G),e.on("error",V),this._readyState=P.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=P.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[d.extensionName]&&this._extensions[d.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=P.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){const e="WebSocket was closed before the connection was established";return D(this,this._req,e)}this.readyState!==P.CLOSING?(this._readyState=P.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)):N(this,e,r)}pong(e,t,r){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===P.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)):N(this,e,r)}send(e,t,r){if(this.readyState===P.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==P.OPEN)return void N(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[d.extensionName]||(n.compress=!1),this._sender.send(e||g,n,r)}terminate(){if(this.readyState!==P.CLOSED){if(this.readyState===P.CONNECTING){const e="WebSocket was closed before the connection was established";return D(this,this._req,e)}this._socket&&(this._readyState=P.CLOSING,this._socket.destroy())}}}function O(e,t,r,n){const s={protocolVersion:w[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!w.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${w.join(", ")})`);let a;t instanceof l?(a=t,e._url=t.href):(a=new l(t),e._url=t);const p="ws+unix:"===a.protocol;if(!(a.host||p&&a.pathname))throw new Error(`Invalid URL: ${e.url}`);const h="wss:"===a.protocol||"https:"===a.protocol,f=h?443:80,g=c(16).toString("base64"),_=h?o.get:i.get;let v;if(s.createConnection=h?R:I,s.defaultPort=s.defaultPort||f,s.port=a.port||f,s.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,s.headers={"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket",...s.headers},s.path=a.pathname+a.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(v=new d(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=S({[d.extensionName]:v.offer()})),r&&(s.headers["Sec-WebSocket-Protocol"]=r),s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(a.username||a.password)&&(s.auth=`${a.username}:${a.password}`),p){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}let E=e._req=_(s);s.timeout&&E.on("timeout",(()=>{D(e,E,"Opening handshake has timed out")})),E.on("error",(t=>{null===E||E.aborted||(E=e._req=null,e._readyState=P.CLOSING,e.emit("error",t),e.emitClose())})),E.on("response",(o=>{const i=o.headers.location,a=o.statusCode;if(i&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void D(e,E,"Maximum redirects exceeded");E.abort();const o=new l(i,t);O(e,o,r,n)}else e.emit("unexpected-response",E,o)||D(e,E,`Unexpected server response: ${o.statusCode}`)})),E.on("upgrade",((t,n,o)=>{if(e.emit("upgrade",t),e.readyState!==P.CONNECTING)return;E=e._req=null;const i=u("sha1").update(g+m).digest("base64");if(t.headers["sec-websocket-accept"]!==i)return void D(e,n,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"],c=(r||"").split(/, */);let l;if(!r&&a?l="Server sent a subprotocol but none was requested":r&&!a?l="Server sent no subprotocol":a&&!c.includes(a)&&(l="Server sent an invalid subprotocol"),l)D(e,n,l);else{if(a&&(e._protocol=a),v)try{const r=C(t.headers["sec-websocket-extensions"]);r[d.extensionName]&&(v.accept(r[d.extensionName]),e._extensions[d.extensionName]=v)}catch(t){return void D(e,n,"Invalid Sec-WebSocket-Extensions header")}e.setSocket(n,o,s.maxPayload)}}))}function I(e){return e.path=e.socketPath,s.connect(e)}function R(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=s.isIP(e.host)?"":e.host),a.connect(e)}function D(e,t,r){e._readyState=P.CLOSING;const n=new Error(r);Error.captureStackTrace(n,D),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function N(e,t,r){if(t){const r=A(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){r(new Error(`WebSocket is not open: readyState ${e.readyState} (${T[e.readyState]})`))}}function M(e,t){const r=this[v];r._socket.removeListener("data",H),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function x(){this[v]._socket.resume()}function k(e){const t=this[v];t._socket.removeListener("data",H),t._readyState=P.CLOSING,t._closeCode=e[_],t.emit("error",e),t._socket.destroy()}function F(){this[v].emitClose()}function L(e){this[v].emit("message",e)}function j(e){const t=this[v];t.pong(e,!t._isServer,E),t.emit("ping",e)}function B(e){this[v].emit("pong",e)}function U(){const e=this[v];this.removeListener("close",U),this.removeListener("end",G),e._readyState=P.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",H),this[v]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",F),e._receiver.on("finish",F))}function H(e){this[v]._receiver.write(e)||this.pause()}function G(){const e=this[v];e._readyState=P.CLOSING,e._receiver.end(),this.end()}function V(){const e=this[v];this.removeListener("error",V),this.on("error",E),e&&(e._readyState=P.CLOSING,this.destroy())}T.forEach(((e,t)=>{const r={enumerable:!0,value:t};Object.defineProperty(P.prototype,e,r),Object.defineProperty(P,e,r)})),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(P.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(P.prototype,`on${e}`,{configurable:!0,enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++)r[t]._listener&&this.removeListener(e,r[t]);this.addEventListener(e,t)}})})),P.prototype.addEventListener=y,P.prototype.removeEventListener=b,e.exports=P},71:(e,t,r)=>{"use strict";const n=r(2037),o=r(1017),i=n.homedir(),{env:s}=process;t.data=s.XDG_DATA_HOME||(i?o.join(i,".local","share"):void 0),t.config=s.XDG_CONFIG_HOME||(i?o.join(i,".config"):void 0),t.cache=s.XDG_CACHE_HOME||(i?o.join(i,".cache"):void 0),t.runtime=s.XDG_RUNTIME_DIR||void 0,t.dataDirs=(s.XDG_DATA_DIRS||"/usr/local/share/:/usr/share/").split(":"),t.data&&t.dataDirs.unshift(t.data),t.configDirs=(s.XDG_CONFIG_DIRS||"/etc/xdg").split(":"),t.config&&t.configDirs.unshift(t.config)},9496:e=>{"use strict";e.exports=require("vscode")},9491:e=>{"use strict";e.exports=require("assert")},852:e=>{"use strict";e.exports=require("async_hooks")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},8188:e=>{"use strict";e.exports=require("module")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},7282:e=>{"use strict";e.exports=require("process")},3477:e=>{"use strict";e.exports=require("querystring")},2781:e=>{"use strict";e.exports=require("stream")},9512:e=>{"use strict";e.exports=require("timers")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")},2300:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Base64:()=>G,VERSION:()=>o,atob:()=>D,atobPolyfill:()=>R,btoa:()=>v,btoaPolyfill:()=>_,btou:()=>I,decode:()=>F,encode:()=>T,encodeURI:()=>w,encodeURL:()=>w,extendBuiltins:()=>H,extendString:()=>B,extendUint8Array:()=>U,fromBase64:()=>F,fromUint8Array:()=>y,isValid:()=>L,toBase64:()=>T,toUint8Array:()=>M,utob:()=>C,version:()=>n});const n="3.6.0",o=n,i="function"==typeof atob,s="function"==typeof btoa,a="function"==typeof Buffer,c="function"==typeof TextDecoder?new TextDecoder:void 0,u="function"==typeof TextEncoder?new TextEncoder:void 0,l=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],d=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(l),p=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,h=String.fromCharCode.bind(String),f="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),g=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""),m=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),_=e=>{let t,r,n,o,i="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,i+=l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},v=s?e=>btoa(e):a?e=>Buffer.from(e,"binary").toString("base64"):_,E=a?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(h.apply(null,e.subarray(r,r+4096)));return v(t.join(""))},y=(e,t=!1)=>t?g(E(e)):E(e),b=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?h(192|t>>>6)+h(128|63&t):h(224|t>>>12&15)+h(128|t>>>6&63)+h(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return h(240|t>>>18&7)+h(128|t>>>12&63)+h(128|t>>>6&63)+h(128|63&t)},S=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=e=>e.replace(S,b),A=a?e=>Buffer.from(e,"utf8").toString("base64"):u?e=>E(u.encode(e)):e=>v(C(e)),T=(e,t=!1)=>t?g(A(e)):A(e),w=e=>T(e,!0),P=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return h(55296+(t>>>10))+h(56320+(1023&t));case 3:return h((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return h((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},I=e=>e.replace(P,O),R=e=>{if(e=e.replace(/\s+/g,""),!p.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,o="";for(let i=0;i<e.length;)t=d[e.charAt(i++)]<<18|d[e.charAt(i++)]<<12|(r=d[e.charAt(i++)])<<6|(n=d[e.charAt(i++)]),o+=64===r?h(t>>16&255):64===n?h(t>>16&255,t>>8&255):h(t>>16&255,t>>8&255,255&t);return o},D=i?e=>atob(m(e)):a?e=>Buffer.from(e,"base64").toString("binary"):R,N=a?e=>f(Buffer.from(e,"base64")):e=>f(D(e),(e=>e.charCodeAt(0))),M=e=>N(k(e)),x=a?e=>Buffer.from(e,"base64").toString("utf8"):c?e=>c.decode(N(e)):e=>I(D(e)),k=e=>m(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),F=e=>x(k(e)),L=e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/=+$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},j=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),B=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,j(t));e("fromBase64",(function(){return F(this)})),e("toBase64",(function(e){return T(this,e)})),e("toBase64URI",(function(){return T(this,!0)})),e("toBase64URL",(function(){return T(this,!0)})),e("toUint8Array",(function(){return M(this)}))},U=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,j(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},H=()=>{B(),U()},G={version:n,VERSION:o,atob:D,atobPolyfill:R,btoa:v,btoaPolyfill:_,fromBase64:F,toBase64:T,encode:T,encodeURI:w,encodeURL:w,utob:C,btou:I,decode:F,isValid:L,fromUint8Array:y,toUint8Array:M,extendString:B,extendUint8Array:U,extendBuiltins:H}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__=__webpack_require__(6465);module.exports=__webpack_exports__})();